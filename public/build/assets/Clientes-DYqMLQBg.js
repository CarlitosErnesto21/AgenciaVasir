import{A as X}from"./AuthenticatedLayout-Chsf1Jli.js";import{b as Y,r as i,E as T,o as Z,h as _,d as L,x as n,p as o,e as s,$ as l,a0 as ee,q as te,t as r,j as E}from"./vendor-CqKcGHPa.js";import{z as se,a as ae,F as p,e as le,f as b,h as ie}from"./ui-DrLUz167.js";import{l as oe,v as ne,g as de,b as S}from"./index-XGUaz6Tt.js";import re from"./Modales-D_uDrx_j.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"container mx-auto px-4 py-6"},ce={class:"bg-white rounded-lg shadow-md"},me={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},fe={class:"w-full"},ve={class:"text-blue-600 text-xs text-center sm:text-start mt-1 font-medium flex items-center gap-1 justify-center sm:justify-start"},pe={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},be={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},ge={class:"flex items-center gap-3"},xe={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},we=["disabled"],he=["disabled"],ye={class:"space-y-3"},Ce=["title"],_e={class:"text-sm leading-relaxed"},Le={class:"text-sm leading-relaxed"},Pe=["title"],ke={class:"flex gap-2 justify-center items-center"},Ve=["onClick"],De=["onClick"],Ne={__name:"Clientes",props:{clientes:{type:Array,default:()=>[]}},setup(R){const j=R,u=se(),P=Y({id:null,nombre:"",apellido:"",genero:"",fecha_nacimiento:"",tipo_documento_id:null,numero_identificacion:"",telefono:"",email:"",direccion:""}),c=i(null),F=i(!1),g=i(!1),d=i(!1),k=i(!1),N=i(!0),x=i(!1),m=i(!1),f=i(!1),w=i(!1),y=i(10),A=i([5,10,20,50]),v=i({global:{value:null,matchMode:"contains"}}),M=T(()=>({width:"95vw",maxWidth:"500px",maxHeight:"95vh"})),C=T(()=>{let a=j.clientes;if(v.value.global.value){const t=v.value.global.value.toLowerCase();a=a.filter(e=>e.user&&e.user.name&&e.user.name.toLowerCase().includes(t)||e.numero_identificacion&&e.numero_identificacion.toLowerCase().includes(t)||e.user&&e.user.email&&e.user.email.toLowerCase().includes(t)||e.telefono&&e.telefono.toLowerCase().includes(t))}return a}),U=a=>{c.value=a,m.value=!0},$=a=>{c.value=a,f.value=!0},B=async()=>{g.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),u.add({severity:"success",summary:"Cliente eliminado",detail:"El cliente ha sido eliminado correctamente",life:3e3}),f.value=!1,c.value=null}catch(a){console.error("Error al eliminar cliente:",a),u.add({severity:"error",summary:"Error",detail:"Error al eliminar el cliente",life:3e3}),f.value=!1}finally{g.value=!1}},z=()=>{f.value=!1,c.value=null,g.value=!1},V=async()=>{d.value=!0;try{await new Promise(a=>setTimeout(a,300)),v.value.global.value=null,u.add({severity:"success",summary:"Filtros limpiados",life:2e3})}finally{d.value=!1}},O=a=>{c.value=a,x.value=!0,m.value=!1},W=()=>{},H=()=>{},q=a=>{a.originalEvent.target.closest("button")||(c.value=a.data,x.value=!0)},I=a=>{u.add({severity:"info",summary:"Funci贸n pendiente",detail:"Enviar email a煤n no implementado",life:3e3}),m.value=!1},G=a=>{u.add({severity:"info",summary:"Funci贸n pendiente",detail:"Cambiar estado a煤n no implementado",life:3e3}),m.value=!1},K=()=>{Object.assign(P,{id:null,nombre:"",apellido:"",genero:"",fecha_nacimiento:"",tipo_documento_id:null,numero_identificacion:"",telefono:"",email:"",direccion:""}),k.value=!1,w.value=!1},J=()=>{w.value=!1},Q=()=>{u.add({severity:"info",summary:"Cargando clientes...",life:2e3}),setTimeout(()=>{u.add({severity:"success",summary:"Clientes cargados",life:2e3}),N.value=!1},1e3)};return Z(()=>{Q()}),(a,t)=>(L(),_(X,null,{default:n(()=>[o(l(ee),{title:"Clientes"}),o(l(ae),{class:"z-[9999]"}),s("div",ue,[t[12]||(t[12]=s("div",{class:"mb-6"},[s("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Gesti贸n de Clientes"),s("p",{class:"text-gray-600"},"Visualizaci贸n de clientes del sistema")],-1)),s("div",ce,[s("div",me,[s("div",fe,[t[7]||(t[7]=s("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Lista de Clientes",-1)),s("p",ve,[o(l(p),{icon:l(oe),class:"h-4 w-4 text-yellow-500"},null,8,["icon"]),t[6]||(t[6]=te(" Haz clic en cualquier fila para ver los detalles. "))])])]),o(l(le),{value:C.value,dataKey:"id",paginator:!0,rows:y.value,rowsPerPageOptions:A.value,rowsPerPage:y.value,"onUpdate:rowsPerPage":t[1]||(t[1]=e=>y.value=e),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} clientes",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:q,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:n(()=>[s("div",pe,[s("div",be,[s("div",ge,[t[8]||(t[8]=s("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[s("i",{class:"pi pi-filter text-blue-600 text-sm"}),s("span",null,"Filtros")],-1)),s("div",xe,r(C.value.length)+" resultado"+r(C.value.length!==1?"s":""),1),s("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:V,disabled:d.value},[d.value?(L(),_(l(p),{key:0,icon:l(S),class:"animate-spin h-3 w-3"},null,8,["icon"])):E("",!0),s("span",null,r(d.value?"Limpiando...":"Limpiar filtros"),1)],8,we)]),s("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:V,disabled:d.value},[d.value?(L(),_(l(p),{key:0,icon:l(S),class:"animate-spin h-3 w-3"},null,8,["icon"])):E("",!0),s("span",null,r(d.value?"Limpiando...":"Limpiar filtros"),1)],8,he)]),s("div",ye,[s("div",null,[o(l(ie),{modelValue:v.value.global.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value.global.value=e),placeholder:" Buscar clientes...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])])])])]),default:n(()=>[o(l(b),{field:"user.name",header:"Nombre Completo",sortable:"",class:"w-40"},{body:n(e=>{var h,D;return[s("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"150px","text-overflow":"ellipsis","white-space":"nowrap"},title:((h=e.data.user)==null?void 0:h.name)||"Sin nombre"},r(((D=e.data.user)==null?void 0:D.name)||"Sin nombre"),9,Ce)]}),_:1}),o(l(b),{field:"numero_identificacion",header:"Identificaci贸n",class:"w-32 hidden md:table-cell"},{body:n(e=>[s("div",_e,r(e.data.numero_identificacion),1)]),_:1}),o(l(b),{field:"telefono",header:"Tel茅fono",class:"w-32 hidden sm:table-cell"},{body:n(e=>[s("div",Le,r(e.data.telefono),1)]),_:1}),o(l(b),{field:"email",header:"Email",class:"w-16 hidden sm:table-cell"},{body:n(e=>[s("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"150px","text-overflow":"ellipsis","white-space":"nowrap"},title:e.data.email||e.data.user&&e.data.user.email||"No registrado"},r(e.data.email||e.data.user&&e.data.user.email||"No registrado"),9,Pe)]),_:1}),o(l(b),{exportable:!1,class:"w-52 min-w-36"},{header:n(()=>t[9]||(t[9]=[s("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:n(e=>[s("div",ke,[s("button",{class:"flex bg-green-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:h=>U(e.data)},[o(l(p),{icon:l(ne),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),t[10]||(t[10]=s("span",{class:"hidden md:block text-white"},"M谩s",-1))],8,Ve),s("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:h=>$(e.data)},[o(l(p),{icon:l(de),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),t[11]||(t[11]=s("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,De)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"]),o(re,{visible:m.value,"onUpdate:visible":t[2]||(t[2]=e=>m.value=e),"delete-visible":f.value,"onUpdate:deleteVisible":t[3]||(t[3]=e=>f.value=e),"unsaved-changes-visible":w.value,"onUpdate:unsavedChangesVisible":t[4]||(t[4]=e=>w.value=e),"detalles-visible":x.value,"onUpdate:detallesVisible":t[5]||(t[5]=e=>x.value=e),cliente:c.value||P,"dialog-style":M.value,"is-deleting":g.value,"is-loading":F.value,submitted:k.value,onViewDetails:O,onViewReservations:W,onViewPurchases:H,onSendEmail:I,onToggleStatus:G,onDeleteCliente:B,onCancelDelete:z,onCloseWithoutSaving:K,onContinueEditing:J},null,8,["visible","delete-visible","unsaved-changes-visible","detalles-visible","cliente","dialog-style","is-deleting","is-loading","submitted"])])])]),_:1}))}};export{Ne as default};
