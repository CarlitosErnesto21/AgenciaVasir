import{N as z,r as m,E as Q,w as lt,o as ot,a8 as nt,k as rt,h as ye,d,x as b,p as i,e as t,$ as l,a0 as it,t as g,j as x,q as D,A as X,v as Y,c,y as q,a9 as ee,D as Ae,F as B,l as M,n as re}from"./vendor-gbh1WW5n.js";import{A as ut}from"./AuthenticatedLayout-DOWK-Iyn.js";import{z as dt,A as ct,F as p,e as mt,f as ie,h as pt,a as vt}from"./ui-BrU4k96Z.js";import{k as ue,l as Se,m as gt,w as ft,x as bt,c as G,n as yt,r as xt,o as L,a as xe,i as Le,p as ht,y as wt}from"./index-BL4yA-eF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const _t={class:"container mx-auto px-4 py-6"},kt={class:"bg-white rounded-lg shadow-md"},Ct={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center gap-4 p-4"},Pt={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},Et={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},It={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},Nt={class:"flex items-center gap-3"},Dt={class:"text-base font-medium text-gray-800 flex items-center gap-2"},qt={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},At=["disabled"],St=["disabled"],Lt={class:"space-y-3"},Vt={class:"relative"},Tt={class:"px-1 mt-3"},Ft={class:"text-blue-600 text-xs font-medium flex items-center gap-1"},Ut={class:"py-12 text-center"},$t=["title"],jt=["title"],Kt={class:"text-sm font-medium leading-relaxed"},Rt={class:"flex gap-2 justify-center items-center"},Ot=["onClick"],zt=["onClick"],Bt={class:"space-y-6"},Mt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Gt={class:"space-y-2"},Wt={key:0,class:"text-sm text-red-600"},Jt={class:"space-y-2"},Zt={key:0,class:"text-sm text-red-600"},Ht={class:"space-y-2"},Qt={key:0,class:"text-sm text-red-600"},Xt={key:1,class:"text-sm text-orange-500"},Yt={key:2,class:"text-sm text-red-600 font-semibold"},es={class:"space-y-6"},ts={class:"space-y-2"},ss={class:"flex gap-2 mb-3"},as=["disabled"],ls={class:"space-y-2 max-h-40 overflow-y-auto"},os={class:"flex-1"},ns=["onClick"],rs={key:0,class:"text-gray-500 text-sm"},is={class:"space-y-2"},us={class:"flex gap-2 mb-3"},ds=["disabled"],cs={key:0,class:"space-y-2 max-h-40 overflow-y-auto"},ms={class:"flex-1"},ps=["onClick"],vs={key:1,class:"text-gray-500 text-sm"},gs={class:"w-full flex flex-col"},fs={class:"flex items-center gap-4"},bs={class:"flex-1"},ys={class:"flex items-center gap-3 mb-2"},xs=["disabled"],hs={class:"flex items-center gap-2"},ws={class:"flex justify-center ml-2 sm:ml-5"},_s=["src"],ks=["onClick"],Cs={class:"flex justify-center gap-4 w-full mt-6"},Ps=["disabled"],Es={key:0},Is={key:1},Ns=["disabled"],Ds={class:"flex items-center gap-3"},qs={class:"flex flex-col"},As={class:"flex justify-center gap-4 w-full"},Ss=["disabled"],Ls={key:0},Vs={key:1},Ts=["disabled"],Fs={class:"flex items-center gap-3"},Us={class:"flex justify-center gap-3 w-full"},$s={key:0,class:"flex flex-col items-center justify-center"},js={class:"mb-4 text-sm text-gray-600 text-center"},Ks={class:"relative mb-4"},Rs=["src","alt"],Os={key:0,class:"mb-4 flex gap-2"},zs=["onClick"],Bs={key:1,class:"flex gap-4"},Ms={key:1,class:"text-center text-gray-500 py-8"},Gs={class:"flex justify-center w-full mt-6"},Ws={key:0,class:"space-y-6"},Js={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Zs={class:"text-lg font-semibold text-gray-900 mb-4"},Hs={class:"space-y-3"},Qs={class:"ml-2 text-lg font-bold text-green-600"},Xs={key:0},Ys={class:"mt-1 text-sm text-gray-600"},ea={key:0,class:"flex justify-center"},ta={class:"relative"},sa=["src","alt"],aa={key:1,class:"flex items-center justify-center bg-gray-100 rounded-lg h-48"},la={class:"text-center text-gray-500"},oa={key:0,class:"space-y-2"},na={class:"bg-green-50 p-4 rounded-lg"},ra={class:"space-y-1"},ia={key:1,class:"space-y-2"},ua={class:"bg-red-50 p-4 rounded-lg"},da={class:"space-y-1"},ca={class:"flex justify-center w-full mt-6"},te="/api/paquetes-visas",Ve="/storage/paquetesvisas/",xa={__name:"PaquetesVisas",setup(ma){z.defaults.withCredentials=!0;const y=dt(),de=m([]),o=m({id:null,nombre:"",descripcion:"",precio:null,incluye:"",no_incluye:""}),w=m([]),V=m([]),N=m([]),T=m([]),A=m(!1),W=m(!1),se=m(!1),J=m(!1),E=m(!1),F=m(!1),I=m(null),ce=m(!1),h=m(null),k=m([]),_=m([]),U=m(""),$=m(""),j=m(!1),S=m(!1),K=m(!1),ae=m(!1),C=m(!1),he=m(!0),Z=m({global:{value:null,matchMode:ct.CONTAINS}}),me=m(10),Te=m([5,10,20,50]),le=m("Guardar"),P=m(0),we=m(null),pe=Q(()=>{let s=de.value;if(Z.value.global.value){const e=Z.value.global.value.toLowerCase();s=s.filter(n=>n.nombre.toLowerCase().includes(e)||n.descripcion&&n.descripcion.toLowerCase().includes(e)||n.precio.toString().includes(e))}return s}),ve=Q(()=>w.value.length<1),Fe=Q(()=>K.value?"Cargando...":ae.value?"Abriendo...":ve.value?"Seleccionar":"Límite alcanzado"),oe=Q(()=>{const s=o.value.nombre&&o.value.nombre.trim().length>=3,e=o.value.precio&&parseFloat(o.value.precio)>0;return s&&e});lt([o,w,T,k,_],()=>{if(A.value)if(I.value){const s={nombre:o.value.nombre,descripcion:o.value.descripcion,precio:o.value.precio,incluye_lista:[...k.value],no_incluye_lista:[..._.value]},e=w.value.map(f=>f.name||f.nombre),n=I.value.imagenes?I.value.imagenes.map(f=>f.nombre):[],a=R(I.value.incluye||""),r=R(I.value.no_incluye||""),u=JSON.stringify(s)!==JSON.stringify({nombre:I.value.nombre,descripcion:I.value.descripcion,precio:I.value.precio,incluye_lista:a,no_incluye_lista:r}),v=JSON.stringify(e.sort())!==JSON.stringify(n.sort())||T.value.length>0;F.value=u||v}else{const s=o.value.nombre&&o.value.nombre.trim().length>0,e=o.value.descripcion&&o.value.descripcion.trim().length>0,n=o.value.precio&&parseFloat(o.value.precio)>0,a=k.value.length>0,r=_.value.length>0,u=w.value.length>0;F.value=s||e||n||a||r||u}},{deep:!0,flush:"post"});function ne(){o.value={id:null,nombre:"",descripcion:"",precio:null,incluye:"",no_incluye:""},w.value=[],V.value=[],T.value=[],E.value=!1,k.value=[],_.value=[],U.value="",$.value=""}const _e=()=>{U.value.trim()&&(k.value.push(U.value.trim()),U.value="")},Ue=s=>{k.value.splice(s,1)},ke=()=>{$.value.trim()&&(_.value.push($.value.trim()),$.value="")},$e=s=>{_.value.splice(s,1)},R=s=>s?s.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],Ce=s=>s.join("|"),ge=m(typeof window<"u"?window.innerWidth:1024),Pe=()=>{ge.value=window.innerWidth};ot(()=>{je(),window.addEventListener("resize",Pe)}),nt(()=>{window.removeEventListener("resize",Pe)});const Ee=async()=>{try{const s=await z.get(te);s.data.success&&(de.value=s.data.data)}catch(s){console.error("Error fetching paquetes:",s)}},je=async()=>{var s;he.value=!0,y.add({severity:"info",summary:"Cargando paquetes...",life:2e3});try{const e=await z.get(te);e.data.success?(de.value=e.data.data.sort((n,a)=>{const r=new Date(n.created_at);return new Date(a.created_at)-r}),y.add({severity:"success",summary:"Paquetes cargados",life:2e3})):y.add({severity:"warn",summary:"Advertencia",detail:"No se pudieron cargar los paquetes correctamente.",life:4e3})}catch(e){console.error("Error al cargar paquetes:",e),((s=e.response)==null?void 0:s.status)===401?y.add({severity:"error",summary:"No autorizado",detail:"Tu sesión ha expirado. Por favor, inicia sesión nuevamente.",life:5e3}):y.add({severity:"error",summary:"Error de conexión",detail:"No se pudieron cargar los paquetes. Verifica tu conexión.",life:5e3})}finally{he.value=!1}},Ie=async()=>{S.value=!0;try{await new Promise(s=>setTimeout(s,300)),Z.value.global.value=null,y.add({severity:"success",summary:"Filtros limpiados",detail:"Se han restablecido todos los filtros.",life:3e3})}finally{S.value=!1}},Ke=()=>{ne(),I.value=null,F.value=!1,le.value="Guardar",E.value=!1,A.value=!0,re(()=>{const s=document.querySelector('input[placeholder="INGRESE EL NOMBRE DEL PAQUETE"]');s&&s.focus()})},Re=s=>{o.value={...s},I.value=JSON.parse(JSON.stringify(s)),w.value=s.imagenes?s.imagenes.map(e=>({id:e.id,name:e.nombre,url:Ve+e.nombre,isExisting:!0})):[],k.value=R(s.incluye),_.value=R(s.no_incluye),V.value=[],T.value=[],F.value=!1,le.value="Actualizar",E.value=!1,A.value=!0},Oe=async()=>{var s,e,n,a;if(E.value=!0,C.value=!0,o.value.nombre=fe(o.value.nombre||""),!((s=o.value.nombre)!=null&&s.trim())){y.add({severity:"warn",summary:"Campo requerido",detail:"El nombre del paquete es obligatorio.",life:4e3}),C.value=!1;return}if(!/^[A-Z0-9\s]+$/.test(o.value.nombre.trim())){y.add({severity:"warn",summary:"Formato inválido",detail:"El nombre solo puede contener letras, números y espacios.",life:4e3}),C.value=!1;return}if(!o.value.precio||o.value.precio<=0){y.add({severity:"warn",summary:"Campo requerido",detail:"El precio debe ser mayor a 0.",life:4e3}),C.value=!1;return}try{const r=new FormData;r.append("nombre",o.value.nombre.trim()),(e=o.value.descripcion)!=null&&e.trim()&&r.append("descripcion",o.value.descripcion.trim()),r.append("precio",o.value.precio),k.value.length>0?r.append("incluye",Ce(k.value)):r.append("incluye",""),_.value.length>0?r.append("no_incluye",Ce(_.value)):r.append("no_incluye",""),V.value.length>0&&r.append("imagenes",V.value[0]),o.value.id&&T.value.length>0&&T.value.forEach(v=>{r.append("removed_images[]",v)});let u;o.value.id?(r.append("_method","PUT"),u=await z.post(`${te}/${o.value.id}`,r,{headers:{"Content-Type":"multipart/form-data"}})):u=await z.post(te,r,{headers:{"Content-Type":"multipart/form-data"}}),u.data.success&&(y.add({severity:"success",summary:"Éxito",detail:o.value.id?"Paquete actualizado correctamente":"Paquete creado correctamente",life:4e3}),A.value=!1,await Ee(),ne(),F.value=!1)}catch(r){if(console.error("Error saving paquete:",r),((n=r.response)==null?void 0:n.status)===422){const u=r.response.data.errors||{},v=((a=Object.values(u)[0])==null?void 0:a[0])||"Error de validación";y.add({severity:"error",summary:"Error de validación",detail:v,life:5e3})}else y.add({severity:"error",summary:"Error",detail:"No se pudo guardar el paquete. Intenta nuevamente.",life:5e3})}finally{C.value=!1}},ze=s=>{o.value=s,W.value=!0},Be=async()=>{j.value=!0;try{(await z.delete(`${te}/${o.value.id}`)).data.success&&(y.add({severity:"success",summary:"Éxito",detail:"Paquete eliminado correctamente",life:4e3}),W.value=!1,await Ee())}catch(s){console.error("Error deleting paquete:",s),y.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el paquete. Intenta nuevamente.",life:5e3})}finally{j.value=!1}},Me=()=>{F.value?J.value=!0:(A.value=!1,ne())},Ge=()=>{A.value=!1,J.value=!1,F.value=!1,ne()},We=()=>{J.value=!1},Je=s=>{s.originalEvent.target.closest("button")||(h.value=s.data,se.value=!0)},H=Q(()=>ge.value<640?{width:"95vw",maxWidth:"380px"}:ge.value<768?{width:"400px"}:{width:"450px"}),Ze=async()=>{var s;if(!ve.value){y.add({severity:"warn",summary:"Límite alcanzado",detail:"Solo se permite 1 imagen por paquete.",life:3e3});return}K.value=!0,await new Promise(e=>setTimeout(e,200)),(s=we.value)==null||s.click(),K.value=!1},He=async s=>{const e=Array.from(s.target.files);if(e.length!==0){if(w.value.length+e.length>1){y.add({severity:"warn",summary:"Límite excedido",detail:"Solo se permite 1 imagen por paquete.",life:4e3});return}for(const n of e){if(!n.type.startsWith("image/")){y.add({severity:"error",summary:"Archivo inválido",detail:`${n.name} no es una imagen válida.`,life:4e3});continue}if(n.size>2*1024*1024){y.add({severity:"error",summary:"Archivo muy grande",detail:`${n.name} excede los 2MB permitidos.`,life:4e3});continue}const a=new FileReader;a.onload=r=>{w.value.push({name:n.name,url:r.target.result,isExisting:!1})},a.readAsDataURL(n),V.value.push(n)}s.target.value=""}},Qe=s=>{const e=w.value[s];if(e.isExisting)T.value.push(e.name);else{const n=V.value.findIndex(a=>a.name===e.name);n!==-1&&V.value.splice(n,1)}w.value.splice(s,1)},Ne=()=>{if(!o.value.nombre||!o.value.nombre.trim())return!1;const s=o.value.nombre.trim();return s.length>=3&&/^[A-Z0-9\s]+$/.test(s)},De=()=>!o.value.descripcion||o.value.descripcion.trim().length>=10,Xe=s=>{const e=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","F5"],n=s.key>="0"&&s.key<="9",a=s.key===".",r=s.ctrlKey&&s.key==="a",u=s.ctrlKey&&s.key==="c",v=s.ctrlKey&&s.key==="v",f=s.ctrlKey&&s.key==="x",O=s.ctrlKey&&s.key==="z";if(e.includes(s.key)||n||r||u||v||f||O){if(a&&s.target.value.includes(".")){s.preventDefault();return}return}if(a){if(s.target.value.includes(".")){s.preventDefault();return}return}s.preventDefault()},Ye=s=>{s.preventDefault();const n=(s.clipboardData||window.clipboardData).getData("text").replace(/[^0-9.]/g,"");if((n.match(/\./g)||[]).length<=1){const r=s.target.value,u=s.target.selectionStart,v=s.target.selectionEnd,f=r.substring(0,u)+n+r.substring(v);!isNaN(f)&&f!==""&&(o.value.precio=parseFloat(f))}},fe=s=>s?s.replace(/[^A-Za-z0-9\s]/g,"").replace(/\s{2,}/g," ").toUpperCase().trim():"",et=s=>{let e=s.target.value;e=e.replace(/[^A-Za-z0-9\s]/g,"").toUpperCase();const n=e.replace(/\s{3,}/g," ");if(o.value.nombre=n,s.target.value!==n){const a=s.target.selectionStart;s.target.value=n,re(()=>{const r=Math.min(a,n.length);s.target.setSelectionRange(r,r)})}},tt=s=>{const e=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","F5"],n=/^[A-Za-z0-9]$/.test(s.key),a=s.key===" ",r=s.ctrlKey&&s.key==="a",u=s.ctrlKey&&s.key==="c",v=s.ctrlKey&&s.key==="v",f=s.ctrlKey&&s.key==="x",O=s.ctrlKey&&s.key==="z";if(a){const be=s.target.value,qe=s.target.selectionStart;if(be.charAt(qe-1)===" "||qe===0){s.preventDefault();return}}e.includes(s.key)||n||a||r||u||v||f||O||s.preventDefault()},st=s=>{s.preventDefault();const e=(s.clipboardData||window.clipboardData).getData("text"),n=fe(e),a=s.target.value,r=s.target.selectionStart,u=s.target.selectionEnd,v=a.substring(0,r)+n+a.substring(u),f=fe(v);f.length<=100&&(o.value.nombre=f,s.target.value=f,re(()=>{const O=Math.min(r+n.length,f.length);s.target.setSelectionRange(O,O)}))},at=s=>{const e=s.target.value,n=e.toUpperCase();if(e!==n){const a=s.target.selectionStart;o.value.descripcion=n,re(()=>{s.target.value=n,s.target.setSelectionRange(a,a)})}};return(s,e)=>{const n=rt("Dialog");return d(),ye(ut,null,{default:b(()=>[i(l(it),{title:"Paquetes de Visa"}),t("div",_t,[t("div",kt,[t("div",Ct,[e[18]||(e[18]=t("div",{class:"text-center sm:text-left"},[t("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Catálogo de Paquetes de Visa"),t("p",{class:"text-gray-600"},"Gestión completa de paquetes de visa")],-1)),t("div",Pt,[t("button",{class:"bg-red-500 border flex border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:Ke},[i(l(p),{icon:l(ue),class:"h-4 w-4 mr-1 text-white"},null,8,["icon"]),e[17]||(e[17]=t("span",null,"Agregar",-1))])])]),i(l(mt),{value:pe.value,dataKey:"id",paginator:!0,rows:me.value,rowsPerPageOptions:Te.value,rowsPerPage:me.value,"onUpdate:rowsPerPage":e[1]||(e[1]=a=>me.value=a),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} paquetes",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:Je,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:b(()=>[t("div",Et,[t("div",It,[t("div",Nt,[t("h3",Dt,[i(l(p),{icon:l(bt),class:"text-blue-600 text-sm"},null,8,["icon"]),e[19]||(e[19]=t("span",null,"Filtros",-1))]),t("div",qt,g(pe.value.length)+" resultado"+g(pe.value.length!==1?"s":""),1),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Ie,disabled:S.value},[S.value?(d(),ye(l(p),{key:0,icon:l(G),class:"animate-spin h-3 w-3"},null,8,["icon"])):x("",!0),t("span",null,g(S.value?"Limp...":"Limpiar"),1)],8,At)]),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Ie,disabled:S.value},[S.value?(d(),ye(l(p),{key:0,icon:l(G),class:"animate-spin h-3 w-3"},null,8,["icon"])):x("",!0),t("span",null,g(S.value?"Limpiando...":"Limpiar filtros"),1)],8,St)]),t("div",Lt,[t("div",Vt,[i(l(p),{icon:l(yt),class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"},null,8,["icon"]),i(l(pt),{modelValue:Z.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=a=>Z.value.global.value=a),placeholder:"Buscar paquetes...",class:"w-full h-9 text-sm rounded-md pl-10",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),t("div",Tt,[t("p",Ft,[i(l(p),{icon:l(xt),class:"h-3 w-3 text-yellow-500"},null,8,["icon"]),e[20]||(e[20]=D(" Haz clic en cualquier fila para ver los detalles. "))])])])])]),empty:b(()=>[t("div",Ut,[i(l(p),{icon:l(ft),class:"mb-4 h-12 w-12 text-gray-300"},null,8,["icon"]),e[21]||(e[21]=t("p",{class:"text-xl font-semibold text-gray-500"},"No hay paquetes",-1)),e[22]||(e[22]=t("p",{class:"text-gray-400"},"No se encontraron paquetes de visa",-1))])]),default:b(()=>[i(l(ie),{field:"nombre",header:"Nombre",sortable:"",class:"w-28"},{body:b(a=>[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"100px","text-overflow":"ellipsis","white-space":"nowrap"},title:a.data.nombre},g(a.data.nombre),9,$t)]),_:1}),i(l(ie),{field:"descripcion",header:"Descripción",class:"w-28 hidden md:table-cell"},{body:b(a=>[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"100px","text-overflow":"ellipsis","white-space":"nowrap"},title:a.data.descripcion},g(a.data.descripcion||"Sin descripción"),9,jt)]),_:1}),i(l(ie),{field:"precio",header:"Precio",sortable:"",class:"w-16 hidden md:table-cell"},{body:b(a=>[t("div",Kt,g(isNaN(Number(a.data.precio))?"":`$${Number(a.data.precio).toFixed(2)}`),1)]),_:1}),i(l(ie),{exportable:!1,class:"w-52 min-w-36"},{header:b(()=>e[23]||(e[23]=[t("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:b(a=>[t("div",Rt,[t("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>Re(a.data)},[i(l(p),{icon:l(Se),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[24]||(e[24]=t("span",{class:"hidden md:block text-white"},"Editar",-1))],8,Ot),t("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>ze(a.data)},[i(l(p),{icon:l(gt),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[25]||(e[25]=t("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,zt)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"])])]),i(n,{visible:A.value,"onUpdate:visible":e[7]||(e[7]=a=>A.value=a),header:o.value.id?"Editar Paquete":"Nuevo Paquete",modal:!0,style:X(H.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",Cs,[t("button",{class:q(["border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",!oe.value||C.value?"bg-gray-400 text-white cursor-not-allowed":"bg-red-500 hover:bg-red-700 text-white"]),onClick:Oe,disabled:!oe.value||C.value},[i(l(p),{icon:C.value?l(G):l(xe),class:q(["h-5 text-white",{"animate-spin":C.value}])},null,8,["icon","class"]),C.value?(d(),c("span",Is,g(le.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(d(),c("span",Es,g(le.value),1))],10,Ps),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Me,disabled:C.value},[i(l(p),{icon:l(L),class:"h-5"},null,8,["icon"]),e[34]||(e[34]=D("Cancelar "))],8,Ns)])]),default:b(()=>{var a,r;return[t("div",Bt,[t("div",Mt,[t("div",Gt,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700"},[D(" Nombre "),t("span",{class:"text-red-500"},"*")],-1)),Y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=u=>o.value.nombre=u),type:"text",placeholder:"INGRESE EL NOMBRE DEL PAQUETE",maxlength:"100",onInput:et,onKeydown:tt,onPaste:st,class:q(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1 uppercase",E.value&&!Ne()||!((a=o.value.nombre)!=null&&a.trim())&&!oe.value?"border-red-300 focus:border-red-500 focus:ring-red-500":(r=o.value.nombre)!=null&&r.trim()&&o.value.nombre.trim().length>=3?"border-green-300 focus:border-green-500 focus:ring-green-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[ee,o.value.nombre]]),E.value&&!Ne()?(d(),c("div",Wt," El nombre es requerido (mínimo 3 caracteres, solo letras, números y espacios) ")):x("",!0)]),t("div",Jt,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700"},[D(" Precio "),t("span",{class:"text-red-500"},"*")],-1)),Y(t("input",{"onUpdate:modelValue":e[3]||(e[3]=u=>o.value.precio=u),type:"number",step:"0.01",min:"0",placeholder:"0.00",onKeydown:Xe,onPaste:Ye,class:q(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1",E.value&&(!o.value.precio||o.value.precio<=0)||!o.value.precio&&!oe.value?"border-red-300 focus:border-red-500 focus:ring-red-500":o.value.precio&&parseFloat(o.value.precio)>0?"border-green-300 focus:border-green-500 focus:ring-green-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[ee,o.value.precio]]),E.value&&(!o.value.precio||o.value.precio<=0)?(d(),c("div",Zt," El precio es requerido y debe ser mayor a 0 ")):x("",!0)])]),t("div",Ht,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700"},"Descripción",-1)),Y(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=u=>o.value.descripcion=u),rows:"3",placeholder:"DESCRIPCION DEL PAQUETE (OPCIONAL)",maxlength:"255",onInput:at,class:q(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1",E.value&&!De()?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[ee,o.value.descripcion]]),E.value&&!De()?(d(),c("div",Qt," La descripción debe tener al menos 10 caracteres ")):x("",!0),o.value.descripcion&&o.value.descripcion.length>245?(d(),c("div",Xt," Caracteres restantes: "+g(255-o.value.descripcion.length),1)):x("",!0),o.value.descripcion&&o.value.descripcion.length>=255?(d(),c("div",Yt," No se permiten más caracteres ")):x("",!0)]),t("div",es,[t("div",ts,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700"},"Incluye",-1)),t("div",ss,[Y(t("input",{"onUpdate:modelValue":e[5]||(e[5]=u=>U.value=u),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border border-gray-300 rounded-lg px-3 py-2 transition-colors focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyup:Ae(_e,["enter"])},null,544),[[ee,U.value]]),t("button",{type:"button",onClick:_e,disabled:!U.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[i(l(p),{icon:l(ue),class:"h-4"},null,8,["icon"])],8,as)]),t("div",ls,[(d(!0),c(B,null,M(k.value,(u,v)=>(d(),c("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border"},[t("span",os,g(u),1),t("button",{type:"button",onClick:f=>Ue(v),class:"text-red-500 hover:text-red-700 p-1"},[i(l(p),{icon:l(L),class:"h-4"},null,8,["icon"])],8,ns)]))),128))]),k.value.length===0?(d(),c("div",rs," Sin elementos agregados. ")):x("",!0)]),t("div",is,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700"},"No Incluye",-1)),t("div",us,[Y(t("input",{"onUpdate:modelValue":e[6]||(e[6]=u=>$.value=u),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border border-gray-300 rounded-lg px-3 py-2 transition-colors focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyup:Ae(ke,["enter"])},null,544),[[ee,$.value]]),t("button",{type:"button",onClick:ke,disabled:!$.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[i(l(p),{icon:l(ue),class:"h-4"},null,8,["icon"])],8,ds)]),_.value.length>0?(d(),c("div",cs,[(d(!0),c(B,null,M(_.value,(u,v)=>(d(),c("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border"},[t("span",ms,g(u),1),t("button",{type:"button",onClick:f=>$e(v),class:"text-red-500 hover:text-red-700 p-1"},[i(l(p),{icon:l(L),class:"h-4"},null,8,["icon"])],8,ps)]))),128))])):x("",!0),_.value.length===0?(d(),c("div",vs," Sin elementos agregados. ")):x("",!0)])]),t("div",gs,[t("div",fs,[e[33]||(e[33]=t("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},"Imágenes:",-1)),t("div",bs,[t("div",ys,[t("input",{type:"file",id:"imagenes",name:"imagenes",accept:"image/*",onChange:He,class:"hidden",ref_key:"fileInput",ref:we},null,544),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 outline-none focus:outline-none active:outline-none disabled:opacity-50 disabled:cursor-not-allowed",onClick:Ze,disabled:K.value||ae.value||!ve.value},[i(l(p),{icon:K.value?l(G):ae.value?l(G):l(ue),class:q({"animate-spin":K.value||ae.value})},null,8,["icon","class"]),D(" "+g(Fe.value),1)],8,xs),t("div",hs,[t("span",{class:q(["text-sm font-medium",w.value.length>=1?"text-red-600":"text-gray-600"])},g(w.value.length)+"/1 ",3),e[31]||(e[31]=t("span",{class:"text-xs text-gray-500"},"imagen",-1))])]),e[32]||(e[32]=t("div",{class:"text-xs text-gray-500 mb-2"}," Máximo 1 imagen por paquete • Formatos: JPG, PNG, GIF • Tamaño máximo: 2MB ",-1))])])]),t("div",ws,[(d(!0),c(B,null,M(w.value,(u,v)=>(d(),c("div",{key:v,class:"relative w-full max-w-sm"},[t("img",{src:u.url,alt:"Vista previa",class:"w-full h-48 object-cover rounded-lg border shadow"},null,8,_s),t("button",{onClick:f=>Qe(v),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow transition-colors",style:{transform:"translate(50%, -50%)"}},[i(l(p),{icon:l(L),class:"text-xs"},null,8,["icon"])],8,ks)]))),128))])])]}),_:1},8,["visible","header","style"]),i(n,{visible:W.value,"onUpdate:visible":e[9]||(e[9]=a=>W.value=a),header:"Eliminar paquete",modal:!0,style:X(H.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",As,[t("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Be,disabled:j.value},[i(l(p),{icon:j.value?l(G):l(xe),class:q(["h-5",{"animate-spin":j.value}])},null,8,["icon","class"]),j.value?(d(),c("span",Vs,"Eliminando...")):(d(),c("span",Ls,"Eliminar"))],8,Ss),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[8]||(e[8]=a=>W.value=!1),disabled:j.value},[i(l(p),{icon:l(L),class:"h-5"},null,8,["icon"]),e[38]||(e[38]=t("span",null,"Cancelar",-1))],8,Ts)])]),default:b(()=>[t("div",Ds,[i(l(p),{icon:l(Le),class:"h-8 w-8 text-red-500"},null,8,["icon"]),t("div",qs,[t("span",null,[e[35]||(e[35]=D("¿Estás seguro de eliminar el paquete: ")),t("b",null,g(o.value.nombre),1),e[36]||(e[36]=D("?"))]),e[37]||(e[37]=t("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acción es irreversible.",-1))])])]),_:1},8,["visible","style"]),i(n,{visible:J.value,"onUpdate:visible":e[10]||(e[10]=a=>J.value=a),header:"Cambios sin guardar",modal:!0,style:X(H.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",Us,[t("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Ge},[i(l(p),{icon:l(ht),class:"h-4"},null,8,["icon"]),e[40]||(e[40]=t("span",null,"Salir sin guardar",-1))]),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:We},[i(l(p),{icon:l(Se),class:"h-4"},null,8,["icon"]),e[41]||(e[41]=t("span",null,"Continuar",-1))])])]),default:b(()=>[t("div",Fs,[i(l(p),{icon:l(Le),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e[39]||(e[39]=t("div",{class:"flex flex-col"},[t("span",null,"¡Tienes información sin guardar!"),t("span",{class:"text-red-600 text-sm font-medium mt-1"},"¿Deseas salir sin guardar?")],-1))])]),_:1},8,["visible","style"]),i(n,{visible:ce.value,"onUpdate:visible":e[14]||(e[14]=a=>ce.value=a),header:"Galería de Imágenes",modal:!0,closable:!1,style:X(H.value),draggable:!1},{footer:b(()=>[t("div",Gs,[t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[13]||(e[13]=a=>ce.value=!1)},[i(l(p),{icon:l(L),class:"h-5"},null,8,["icon"]),e[42]||(e[42]=D(" Cerrar "))])])]),default:b(()=>{var a,r;return[N.value.length?(d(),c("div",$s,[t("div",js," Imagen "+g(P.value+1)+" de "+g(N.value.length),1),t("div",Ks,[t("img",{src:(a=N.value[P.value])==null?void 0:a.url,alt:(r=N.value[P.value])==null?void 0:r.nombre,class:"max-h-96 max-w-full rounded-lg object-contain"},null,8,Rs)]),N.value.length>1?(d(),c("div",Os,[(d(!0),c(B,null,M(N.value,(u,v)=>(d(),c("button",{key:v,onClick:f=>P.value=v,class:q(["h-3 w-3 rounded-full transition-all",v===P.value?"bg-blue-500":"bg-gray-300 hover:bg-gray-400"])},null,10,zs))),128))])):x("",!0),N.value.length>1?(d(),c("div",Bs,[t("button",{onClick:e[11]||(e[11]=u=>P.value=P.value===0?N.value.length-1:P.value-1),class:"bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-all duration-200 ease-in-out"}," Anterior "),t("button",{onClick:e[12]||(e[12]=u=>P.value=P.value===N.value.length-1?0:P.value+1),class:"bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-all duration-200 ease-in-out"}," Siguiente ")])):x("",!0)])):(d(),c("div",Ms,"No hay imágenes para este paquete."))]}),_:1},8,["visible","style"]),i(n,{visible:se.value,"onUpdate:visible":e[16]||(e[16]=a=>se.value=a),header:"Detalles del Paquete",modal:!0,style:X(H.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",ca,[t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[15]||(e[15]=a=>se.value=!1)},[i(l(p),{icon:l(L),class:"h-5"},null,8,["icon"]),e[48]||(e[48]=D(" Cerrar "))])])]),default:b(()=>[h.value?(d(),c("div",Ws,[t("div",Js,[t("div",null,[t("h3",Zs,g(h.value.nombre),1),t("div",Hs,[t("div",null,[e[43]||(e[43]=t("span",{class:"text-sm font-medium text-gray-700"},"Precio:",-1)),t("span",Qs,"$"+g(parseFloat(h.value.precio).toFixed(2)),1)]),h.value.descripcion?(d(),c("div",Xs,[e[44]||(e[44]=t("span",{class:"text-sm font-medium text-gray-700"},"Descripción:",-1)),t("p",Ys,g(h.value.descripcion),1)])):x("",!0)])]),h.value.imagenes&&h.value.imagenes.length>0?(d(),c("div",ea,[t("div",ta,[t("img",{src:Ve+h.value.imagenes[0].nombre,alt:h.value.nombre,class:"w-full max-w-sm h-48 object-cover rounded-lg border shadow"},null,8,sa)])])):(d(),c("div",aa,[t("div",la,[i(l(p),{icon:l(wt),class:"h-12 w-12 mb-2"},null,8,["icon"]),e[45]||(e[45]=t("p",null,"Sin imagen",-1))])]))]),h.value.incluye?(d(),c("div",oa,[e[46]||(e[46]=t("h4",{class:"text-md font-semibold text-gray-900"},"Incluye:",-1)),t("div",na,[t("ul",ra,[(d(!0),c(B,null,M(R(h.value.incluye),a=>(d(),c("li",{key:a,class:"flex items-start gap-2 text-sm text-gray-700"},[i(l(p),{icon:l(xe),class:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"},null,8,["icon"]),t("span",null,g(a),1)]))),128))])])])):x("",!0),h.value.no_incluye?(d(),c("div",ia,[e[47]||(e[47]=t("h4",{class:"text-md font-semibold text-gray-900"},"No Incluye:",-1)),t("div",ua,[t("ul",da,[(d(!0),c(B,null,M(R(h.value.no_incluye),a=>(d(),c("li",{key:a,class:"flex items-start gap-2 text-sm text-gray-700"},[i(l(p),{icon:l(L),class:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"},null,8,["icon"]),t("span",null,g(a),1)]))),128))])])])):x("",!0)])):x("",!0)]),_:1},8,["visible","style"]),i(l(vt))]),_:1})}}};export{xa as default};
