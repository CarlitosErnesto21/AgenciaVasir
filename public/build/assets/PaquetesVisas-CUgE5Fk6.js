import{N as B,r as m,E as Q,w as ot,o as nt,a8 as rt,k as it,h as ie,d as u,x as b,p as i,e as t,$ as a,a0 as ut,c,t as g,q as D,j as x,A as X,v as Y,y as A,a9 as ee,D as Se,F as G,l as M,n as ue}from"./vendor-gbh1WW5n.js";import{A as dt}from"./AuthenticatedLayout-CSuYxj7F.js";import{z as ct,A as mt,F as p,e as pt,f as de,h as vt,a as gt}from"./ui-BrU4k96Z.js";import{k as te,c as R,l as Le,m as ft,n as Ve,w as bt,o as yt,p as T,a as he,i as Te,q as xt,x as ht}from"./index-B6nVaz6S.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const wt={class:"container mx-auto px-4 py-6"},_t={class:"bg-white rounded-lg shadow-md"},kt={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center gap-4 p-4"},Ct={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},Pt={key:0,class:"flex flex-col items-center justify-center py-12"},Et={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},It={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},Dt={class:"flex items-center gap-3"},Nt={class:"text-base font-medium text-gray-800 flex items-center gap-2"},At={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},qt=["disabled"],St=["disabled"],Lt={class:"space-y-3"},Vt={class:"relative"},Tt={class:"px-1 mt-3"},Ut={class:"text-blue-600 text-xs font-medium flex items-center gap-1"},Ft={class:"flex flex-col items-center justify-center py-12 text-center"},$t=["title"],jt=["title"],Rt={class:"text-sm font-medium leading-relaxed"},Kt={class:"flex gap-2 justify-center items-center"},Ot=["onClick"],zt=["onClick"],Bt={class:"space-y-6"},Gt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Mt={class:"space-y-2"},Wt={key:0,class:"text-sm text-red-600"},Jt={class:"space-y-2"},Zt={key:0,class:"text-sm text-red-600"},Ht={class:"space-y-2"},Qt={key:0,class:"text-sm text-red-600"},Xt={key:1,class:"text-sm text-orange-500"},Yt={key:2,class:"text-sm text-red-600 font-semibold"},es={class:"space-y-6"},ts={class:"space-y-2"},ss={class:"flex gap-2 mb-3"},as=["disabled"],ls={class:"text-gray-500 ml-2 text-xs block text-right select-none"},os={class:"space-y-2 max-h-40 overflow-y-auto"},ns={class:"flex-1"},rs=["onClick"],is={key:0,class:"text-gray-500 text-sm"},us={class:"space-y-2"},ds={class:"flex gap-2 mb-3"},cs=["disabled"],ms={class:"text-gray-500 ml-2 text-xs block text-right select-none"},ps={key:0,class:"space-y-2 max-h-40 overflow-y-auto"},vs={class:"flex-1"},gs=["onClick"],fs={key:1,class:"text-gray-500 text-sm"},bs={class:"w-full flex flex-col"},ys={class:"flex items-center gap-4"},xs={class:"flex-1"},hs={class:"flex items-center gap-3 mb-2"},ws=["disabled"],_s={class:"flex items-center gap-2"},ks={class:"flex justify-center ml-2 sm:ml-5"},Cs=["src"],Ps=["onClick"],Es={class:"flex justify-center gap-4 w-full mt-6"},Is=["disabled"],Ds={key:0},Ns={key:1},As=["disabled"],qs={class:"flex items-center gap-3"},Ss={class:"flex flex-col"},Ls={class:"flex justify-center gap-4 w-full"},Vs=["disabled"],Ts={key:0},Us={key:1},Fs=["disabled"],$s={class:"flex items-center gap-3"},js={class:"flex justify-center gap-3 w-full"},Rs={key:0,class:"flex flex-col items-center justify-center"},Ks={class:"mb-4 text-sm text-gray-600 text-center"},Os={class:"relative mb-4"},zs=["src","alt"],Bs={key:0,class:"mb-4 flex gap-2"},Gs=["onClick"],Ms={key:1,class:"flex gap-4"},Ws={key:1,class:"text-center text-gray-500 py-8"},Js={class:"flex justify-center w-full mt-6"},Zs={key:0,class:"space-y-6"},Hs={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Qs={class:"text-lg font-semibold text-gray-900 mb-4"},Xs={class:"space-y-3"},Ys={class:"ml-2 text-lg font-bold text-green-600"},ea={key:0},ta={class:"mt-1 text-sm text-gray-600"},sa={key:0,class:"flex justify-center"},aa={class:"relative"},la=["src","alt"],oa={key:1,class:"flex items-center justify-center bg-gray-100 rounded-lg h-48"},na={class:"text-center text-gray-500"},ra={key:0,class:"space-y-2"},ia={class:"bg-green-50 p-4 rounded-lg"},ua={class:"space-y-1"},da={key:1,class:"space-y-2"},ca={class:"bg-red-50 p-4 rounded-lg"},ma={class:"space-y-1"},pa={class:"flex justify-center w-full mt-6"},se="/api/paquetes-visas",Ue="/storage/paquetesvisas/",wa={__name:"PaquetesVisas",setup(va){B.defaults.withCredentials=!0;const y=ct(),ce=m([]),o=m({id:null,nombre:"",descripcion:"",precio:null,incluye:"",no_incluye:""}),w=m([]),U=m([]),N=m([]),F=m([]),q=m(!1),W=m(!1),ae=m(!1),J=m(!1),E=m(!1),$=m(!1),I=m(null),me=m(!1),h=m(null),k=m([]),_=m([]),S=m(""),L=m(""),j=m(!1),V=m(!1),K=m(!1),le=m(!1),C=m(!1),pe=m(!0),Z=m({global:{value:null,matchMode:mt.CONTAINS}}),ve=m(10),Fe=m([5,10,20,50]),oe=m("Guardar"),P=m(0),we=m(null),ge=Q(()=>{let s=ce.value;if(Z.value.global.value){const e=Z.value.global.value.toLowerCase();s=s.filter(n=>n.nombre.toLowerCase().includes(e)||n.descripcion&&n.descripcion.toLowerCase().includes(e)||n.precio.toString().includes(e))}return s}),fe=Q(()=>w.value.length<1),$e=Q(()=>K.value?"Cargando...":le.value?"Abriendo...":fe.value?"Seleccionar":"Límite alcanzado"),ne=Q(()=>{const s=o.value.nombre&&o.value.nombre.trim().length>=3,e=o.value.precio&&parseFloat(o.value.precio)>0;return s&&e});ot([o,w,F,k,_],()=>{if(q.value)if(I.value){const s={nombre:o.value.nombre,descripcion:o.value.descripcion,precio:o.value.precio,incluye_lista:[...k.value],no_incluye_lista:[..._.value]},e=w.value.map(f=>f.name||f.nombre),n=I.value.imagenes?I.value.imagenes.map(f=>f.nombre):[],l=O(I.value.incluye||""),r=O(I.value.no_incluye||""),d=JSON.stringify(s)!==JSON.stringify({nombre:I.value.nombre,descripcion:I.value.descripcion,precio:I.value.precio,incluye_lista:l,no_incluye_lista:r}),v=JSON.stringify(e.sort())!==JSON.stringify(n.sort())||F.value.length>0;$.value=d||v}else{const s=o.value.nombre&&o.value.nombre.trim().length>0,e=o.value.descripcion&&o.value.descripcion.trim().length>0,n=o.value.precio&&parseFloat(o.value.precio)>0,l=k.value.length>0,r=_.value.length>0,d=w.value.length>0;$.value=s||e||n||l||r||d}},{deep:!0,flush:"post"});function re(){o.value={id:null,nombre:"",descripcion:"",precio:null,incluye:"",no_incluye:""},w.value=[],U.value=[],F.value=[],E.value=!1,k.value=[],_.value=[],S.value="",L.value=""}const _e=()=>{S.value.trim()&&(k.value.push(S.value.trim()),S.value="")},je=s=>{k.value.splice(s,1)},ke=()=>{L.value.trim()&&(_.value.push(L.value.trim()),L.value="")},Re=s=>{_.value.splice(s,1)},O=s=>s?s.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],Ce=s=>s.join("|"),be=m(typeof window<"u"?window.innerWidth:1024),Pe=()=>{be.value=window.innerWidth};nt(()=>{Ke(),window.addEventListener("resize",Pe)}),rt(()=>{window.removeEventListener("resize",Pe)});const Ee=async()=>{try{const s=await B.get(se);s.data.success&&(ce.value=s.data.data)}catch(s){console.error("Error fetching paquetes:",s)}},Ke=async()=>{var s;pe.value=!0;try{const e=await B.get(se);e.data.success?ce.value=e.data.data.sort((n,l)=>{const r=new Date(n.created_at);return new Date(l.created_at)-r}):y.add({severity:"warn",summary:"Advertencia",detail:"No se pudieron cargar los paquetes correctamente.",life:4e3})}catch(e){console.error("Error al cargar paquetes:",e),((s=e.response)==null?void 0:s.status)===401?y.add({severity:"error",summary:"No autorizado",detail:"Tu sesión ha expirado. Por favor, inicia sesión nuevamente.",life:5e3}):y.add({severity:"error",summary:"Error de conexión",detail:"No se pudieron cargar los paquetes. Verifica tu conexión.",life:5e3})}finally{pe.value=!1}},Ie=async()=>{V.value=!0;try{await new Promise(s=>setTimeout(s,300)),Z.value.global.value=null,y.add({severity:"success",summary:"Filtros limpiados",detail:"Se han restablecido todos los filtros.",life:3e3})}finally{V.value=!1}},De=()=>{re(),I.value=null,$.value=!1,oe.value="Guardar",E.value=!1,q.value=!0,ue(()=>{const s=document.querySelector('input[placeholder="INGRESE EL NOMBRE DEL PAQUETE"]');s&&s.focus()})},Oe=s=>{o.value={...s},I.value=JSON.parse(JSON.stringify(s)),w.value=s.imagenes?s.imagenes.map(e=>({id:e.id,name:e.nombre,url:Ue+e.nombre,isExisting:!0})):[],k.value=O(s.incluye),_.value=O(s.no_incluye),U.value=[],F.value=[],$.value=!1,oe.value="Actualizar",E.value=!1,q.value=!0},ze=async()=>{var s,e,n,l;if(E.value=!0,C.value=!0,o.value.nombre=ye(o.value.nombre||""),!((s=o.value.nombre)!=null&&s.trim())){y.add({severity:"warn",summary:"Campo requerido",detail:"El nombre del paquete es obligatorio.",life:4e3}),C.value=!1;return}if(!/^[A-Z0-9\s]+$/.test(o.value.nombre.trim())){y.add({severity:"warn",summary:"Formato inválido",detail:"El nombre solo puede contener letras, números y espacios.",life:4e3}),C.value=!1;return}if(!o.value.precio||o.value.precio<=0){y.add({severity:"warn",summary:"Campo requerido",detail:"El precio debe ser mayor a 0.",life:4e3}),C.value=!1;return}try{const r=new FormData;r.append("nombre",o.value.nombre.trim()),(e=o.value.descripcion)!=null&&e.trim()&&r.append("descripcion",o.value.descripcion.trim()),r.append("precio",o.value.precio),k.value.length>0?r.append("incluye",Ce(k.value)):r.append("incluye",""),_.value.length>0?r.append("no_incluye",Ce(_.value)):r.append("no_incluye",""),U.value.length>0&&r.append("imagenes",U.value[0]),o.value.id&&F.value.length>0&&F.value.forEach(v=>{r.append("removed_images[]",v)});let d;o.value.id?(r.append("_method","PUT"),d=await B.post(`${se}/${o.value.id}`,r,{headers:{"Content-Type":"multipart/form-data"}})):d=await B.post(se,r,{headers:{"Content-Type":"multipart/form-data"}}),d.data.success&&(y.add({severity:"success",summary:"Éxito",detail:o.value.id?"Paquete actualizado correctamente":"Paquete creado correctamente",life:4e3}),q.value=!1,await Ee(),re(),$.value=!1)}catch(r){if(console.error("Error saving paquete:",r),((n=r.response)==null?void 0:n.status)===422){const d=r.response.data.errors||{},v=((l=Object.values(d)[0])==null?void 0:l[0])||"Error de validación";y.add({severity:"error",summary:"Error de validación",detail:v,life:5e3})}else y.add({severity:"error",summary:"Error",detail:"No se pudo guardar el paquete. Intenta nuevamente.",life:5e3})}finally{C.value=!1}},Be=s=>{o.value=s,W.value=!0},Ge=async()=>{j.value=!0;try{(await B.delete(`${se}/${o.value.id}`)).data.success&&(y.add({severity:"success",summary:"Éxito",detail:"Paquete eliminado correctamente",life:4e3}),W.value=!1,await Ee())}catch(s){console.error("Error deleting paquete:",s),y.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el paquete. Intenta nuevamente.",life:5e3})}finally{j.value=!1}},Me=()=>{$.value?J.value=!0:(q.value=!1,re())},We=()=>{q.value=!1,J.value=!1,$.value=!1,re()},Je=()=>{J.value=!1},Ze=s=>{s.originalEvent.target.closest("button")||(h.value=s.data,ae.value=!0)},H=Q(()=>be.value<640?{width:"95vw",maxWidth:"380px"}:be.value<768?{width:"400px"}:{width:"450px"}),He=async()=>{var s;if(!fe.value){y.add({severity:"warn",summary:"Límite alcanzado",detail:"Solo se permite 1 imagen por paquete.",life:3e3});return}K.value=!0,await new Promise(e=>setTimeout(e,200)),(s=we.value)==null||s.click(),K.value=!1},Qe=async s=>{const e=Array.from(s.target.files);if(e.length!==0){if(w.value.length+e.length>1){y.add({severity:"warn",summary:"Límite excedido",detail:"Solo se permite 1 imagen por paquete.",life:4e3});return}for(const n of e){if(!n.type.startsWith("image/")){y.add({severity:"error",summary:"Archivo inválido",detail:`${n.name} no es una imagen válida.`,life:4e3});continue}if(n.size>2*1024*1024){y.add({severity:"error",summary:"Archivo muy grande",detail:`${n.name} excede los 2MB permitidos.`,life:4e3});continue}const l=new FileReader;l.onload=r=>{w.value.push({name:n.name,url:r.target.result,isExisting:!1})},l.readAsDataURL(n),U.value.push(n)}s.target.value=""}},Xe=s=>{const e=w.value[s];if(e.isExisting)F.value.push(e.name);else{const n=U.value.findIndex(l=>l.name===e.name);n!==-1&&U.value.splice(n,1)}w.value.splice(s,1)},Ne=()=>{if(!o.value.nombre||!o.value.nombre.trim())return!1;const s=o.value.nombre.trim();return s.length>=3&&/^[A-Z0-9\s]+$/.test(s)},Ae=()=>!o.value.descripcion||o.value.descripcion.trim().length>=10,Ye=s=>{const e=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","F5"],n=s.key>="0"&&s.key<="9",l=s.key===".",r=s.ctrlKey&&s.key==="a",d=s.ctrlKey&&s.key==="c",v=s.ctrlKey&&s.key==="v",f=s.ctrlKey&&s.key==="x",z=s.ctrlKey&&s.key==="z";if(e.includes(s.key)||n||r||d||v||f||z){if(l&&s.target.value.includes(".")){s.preventDefault();return}return}if(l){if(s.target.value.includes(".")){s.preventDefault();return}return}s.preventDefault()},et=s=>{s.preventDefault();const n=(s.clipboardData||window.clipboardData).getData("text").replace(/[^0-9.]/g,"");if((n.match(/\./g)||[]).length<=1){const r=s.target.value,d=s.target.selectionStart,v=s.target.selectionEnd,f=r.substring(0,d)+n+r.substring(v);!isNaN(f)&&f!==""&&(o.value.precio=parseFloat(f))}},ye=s=>s?s.replace(/[^A-Za-z0-9\s]/g,"").replace(/\s{2,}/g," ").toUpperCase().trim():"",tt=s=>{let e=s.target.value;e=e.replace(/[^A-Za-z0-9\s]/g,"").toUpperCase();const n=e.replace(/\s{3,}/g," ");if(o.value.nombre=n,s.target.value!==n){const l=s.target.selectionStart;s.target.value=n,ue(()=>{const r=Math.min(l,n.length);s.target.setSelectionRange(r,r)})}},st=s=>{const e=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","F5"],n=/^[A-Za-z0-9]$/.test(s.key),l=s.key===" ",r=s.ctrlKey&&s.key==="a",d=s.ctrlKey&&s.key==="c",v=s.ctrlKey&&s.key==="v",f=s.ctrlKey&&s.key==="x",z=s.ctrlKey&&s.key==="z";if(l){const xe=s.target.value,qe=s.target.selectionStart;if(xe.charAt(qe-1)===" "||qe===0){s.preventDefault();return}}e.includes(s.key)||n||l||r||d||v||f||z||s.preventDefault()},at=s=>{s.preventDefault();const e=(s.clipboardData||window.clipboardData).getData("text"),n=ye(e),l=s.target.value,r=s.target.selectionStart,d=s.target.selectionEnd,v=l.substring(0,r)+n+l.substring(d),f=ye(v);f.length<=100&&(o.value.nombre=f,s.target.value=f,ue(()=>{const z=Math.min(r+n.length,f.length);s.target.setSelectionRange(z,z)}))},lt=s=>{const e=s.target.value,n=e.toUpperCase();if(e!==n){const l=s.target.selectionStart;o.value.descripcion=n,ue(()=>{s.target.value=n,s.target.setSelectionRange(l,l)})}};return(s,e)=>{const n=it("Dialog");return u(),ie(dt,null,{default:b(()=>[i(a(ut),{title:"Paquetes de Visa"}),t("div",wt,[t("div",_t,[t("div",kt,[e[18]||(e[18]=t("div",{class:"text-center sm:text-left"},[t("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Catálogo de Paquetes de Visa"),t("p",{class:"text-gray-600"},"Gestión completa de paquetes de visa")],-1)),t("div",Ct,[t("button",{class:"bg-red-500 border flex border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:De},[i(a(p),{icon:a(te),class:"h-4 w-4 mr-1 text-white"},null,8,["icon"]),e[17]||(e[17]=t("span",null,"Agregar",-1))])])]),pe.value?(u(),c("div",Pt,[i(a(p),{icon:a(R),class:"animate-spin h-8 w-8 text-blue-600 mb-3"},null,8,["icon"]),e[19]||(e[19]=t("p",{class:"text-gray-600 font-medium"},"Cargando paquetes...",-1))])):(u(),ie(a(pt),{key:1,value:ge.value,dataKey:"id",paginator:!0,rows:ve.value,rowsPerPageOptions:Fe.value,rowsPerPage:ve.value,"onUpdate:rowsPerPage":e[1]||(e[1]=l=>ve.value=l),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} paquetes",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:Ze,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:b(()=>[t("div",Et,[t("div",It,[t("div",Dt,[t("h3",Nt,[i(a(p),{icon:a(bt),class:"text-blue-600 text-sm"},null,8,["icon"]),e[20]||(e[20]=t("span",null,"Filtros",-1))]),t("div",At,g(ge.value.length)+" resultado"+g(ge.value.length!==1?"s":""),1),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Ie,disabled:V.value},[V.value?(u(),ie(a(p),{key:0,icon:a(R),class:"animate-spin h-3 w-3"},null,8,["icon"])):x("",!0),t("span",null,g(V.value?"Limp...":"Limpiar"),1)],8,qt)]),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Ie,disabled:V.value},[V.value?(u(),ie(a(p),{key:0,icon:a(R),class:"animate-spin h-3 w-3"},null,8,["icon"])):x("",!0),t("span",null,g(V.value?"Limpiando...":"Limpiar filtros"),1)],8,St)]),t("div",Lt,[t("div",Vt,[i(a(p),{icon:a(yt),class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"},null,8,["icon"]),i(a(vt),{modelValue:Z.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=l=>Z.value.global.value=l),placeholder:"Buscar paquetes...",class:"w-full h-9 text-sm rounded-md pl-10",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),t("div",Tt,[t("p",Ut,[i(a(p),{icon:a(Ve),class:"h-3 w-3 text-yellow-500"},null,8,["icon"]),e[21]||(e[21]=D(" Haz clic en cualquier fila para ver los detalles. "))])])])])]),empty:b(()=>[t("div",Ft,[i(a(p),{icon:a(Ve),class:"h-16 w-16 text-gray-400 mb-4"},null,8,["icon"]),e[23]||(e[23]=t("p",{class:"text-xl font-semibold text-gray-600 mb-2"},"NO HAY PAQUETES AGREGADOS",-1)),e[24]||(e[24]=t("p",{class:"text-gray-500 mb-6"},"Comienza agregando tu primer paquete de visa al catálogo",-1)),t("button",{onClick:De,class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2"},[i(a(p),{icon:a(te),class:"h-4 w-4"},null,8,["icon"]),e[22]||(e[22]=D(" Agregar Paquete "))])])]),default:b(()=>[i(a(de),{field:"nombre",header:"Nombre",sortable:"",class:"w-28"},{body:b(l=>[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"100px","text-overflow":"ellipsis","white-space":"nowrap"},title:l.data.nombre},g(l.data.nombre),9,$t)]),_:1}),i(a(de),{field:"descripcion",header:"Descripción",class:"w-28 hidden md:table-cell"},{body:b(l=>[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"100px","text-overflow":"ellipsis","white-space":"nowrap"},title:l.data.descripcion},g(l.data.descripcion||"Sin descripción"),9,jt)]),_:1}),i(a(de),{field:"precio",header:"Precio",sortable:"",class:"w-16 hidden md:table-cell"},{body:b(l=>[t("div",Rt,g(isNaN(Number(l.data.precio))?"":`$${Number(l.data.precio).toFixed(2)}`),1)]),_:1}),i(a(de),{exportable:!1,class:"w-52 min-w-36"},{header:b(()=>e[25]||(e[25]=[t("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:b(l=>[t("div",Kt,[t("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>Oe(l.data)},[i(a(p),{icon:a(Le),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[26]||(e[26]=t("span",{class:"hidden md:block text-white"},"Editar",-1))],8,Ot),t("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>Be(l.data)},[i(a(p),{icon:a(ft),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[27]||(e[27]=t("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,zt)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"]))])]),i(n,{visible:q.value,"onUpdate:visible":e[7]||(e[7]=l=>q.value=l),header:o.value.id?"Editar Paquete":"Nuevo Paquete",modal:!0,style:X(H.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",Es,[t("button",{class:A(["border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",!ne.value||C.value?"bg-gray-400 text-white cursor-not-allowed":"bg-red-500 hover:bg-red-700 text-white"]),onClick:ze,disabled:!ne.value||C.value},[i(a(p),{icon:C.value?a(R):a(he),class:A(["h-5 text-white",{"animate-spin":C.value}])},null,8,["icon","class"]),C.value?(u(),c("span",Ns,g(oe.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(u(),c("span",Ds,g(oe.value),1))],10,Is),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Me,disabled:C.value},[i(a(p),{icon:a(T),class:"h-5"},null,8,["icon"]),e[36]||(e[36]=D("Cancelar "))],8,As)])]),default:b(()=>{var l,r;return[t("div",Bt,[t("div",Gt,[t("div",Mt,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700"},[D(" Nombre "),t("span",{class:"text-red-500"},"*")],-1)),Y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>o.value.nombre=d),type:"text",placeholder:"INGRESE EL NOMBRE DEL PAQUETE",maxlength:"100",onInput:tt,onKeydown:st,onPaste:at,class:A(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1 uppercase",E.value&&!Ne()||!((l=o.value.nombre)!=null&&l.trim())&&!ne.value?"border-red-300 focus:border-red-500 focus:ring-red-500":(r=o.value.nombre)!=null&&r.trim()&&o.value.nombre.trim().length>=3?"border-green-300 focus:border-green-500 focus:ring-green-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[ee,o.value.nombre]]),E.value&&!Ne()?(u(),c("div",Wt," El nombre es requerido (mínimo 3 caracteres, solo letras, números y espacios) ")):x("",!0)]),t("div",Jt,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700"},[D(" Precio "),t("span",{class:"text-red-500"},"*")],-1)),Y(t("input",{"onUpdate:modelValue":e[3]||(e[3]=d=>o.value.precio=d),type:"number",step:"0.01",min:"0",placeholder:"0.00",onKeydown:Ye,onPaste:et,class:A(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1",E.value&&(!o.value.precio||o.value.precio<=0)||!o.value.precio&&!ne.value?"border-red-300 focus:border-red-500 focus:ring-red-500":o.value.precio&&parseFloat(o.value.precio)>0?"border-green-300 focus:border-green-500 focus:ring-green-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[ee,o.value.precio]]),E.value&&(!o.value.precio||o.value.precio<=0)?(u(),c("div",Zt," El precio es requerido y debe ser mayor a 0 ")):x("",!0)])]),t("div",Ht,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700"},"Descripción",-1)),Y(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=d=>o.value.descripcion=d),rows:"3",placeholder:"DESCRIPCION DEL PAQUETE (OPCIONAL)",maxlength:"255",onInput:lt,class:A(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1",E.value&&!Ae()?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[ee,o.value.descripcion]]),E.value&&!Ae()?(u(),c("div",Qt," La descripción debe tener al menos 10 caracteres ")):x("",!0),o.value.descripcion&&o.value.descripcion.length>245?(u(),c("div",Xt," Caracteres restantes: "+g(255-o.value.descripcion.length),1)):x("",!0),o.value.descripcion&&o.value.descripcion.length>=255?(u(),c("div",Yt," No se permiten más caracteres ")):x("",!0)]),t("div",es,[t("div",ts,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700"},"Incluye",-1)),t("div",ss,[Y(t("input",{"onUpdate:modelValue":e[5]||(e[5]=d=>S.value=d),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border border-gray-300 rounded-lg px-3 py-2 transition-colors focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyup:Se(_e,["enter"]),maxlength:"100"},null,544),[[ee,S.value]]),t("button",{type:"button",onClick:_e,disabled:!S.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[i(a(p),{icon:a(te),class:"h-4"},null,8,["icon"])],8,as)]),t("small",ls,g(100-S.value.length)+" caracteres restantes ",1),t("div",os,[(u(!0),c(G,null,M(k.value,(d,v)=>(u(),c("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border"},[t("span",ns,g(d),1),t("button",{type:"button",onClick:f=>je(v),class:"text-red-500 hover:text-red-700 p-1"},[i(a(p),{icon:a(T),class:"h-4"},null,8,["icon"])],8,rs)]))),128))]),k.value.length===0?(u(),c("div",is," Sin elementos agregados. ")):x("",!0)]),t("div",us,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700"},"No Incluye",-1)),t("div",ds,[Y(t("input",{"onUpdate:modelValue":e[6]||(e[6]=d=>L.value=d),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border border-gray-300 rounded-lg px-3 py-2 transition-colors focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyup:Se(ke,["enter"]),maxlength:"100"},null,544),[[ee,L.value]]),t("button",{type:"button",onClick:ke,disabled:!L.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[i(a(p),{icon:a(te),class:"h-4"},null,8,["icon"])],8,cs)]),t("small",ms,g(100-L.value.length)+" caracteres restantes ",1),_.value.length>0?(u(),c("div",ps,[(u(!0),c(G,null,M(_.value,(d,v)=>(u(),c("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border"},[t("span",vs,g(d),1),t("button",{type:"button",onClick:f=>Re(v),class:"text-red-500 hover:text-red-700 p-1"},[i(a(p),{icon:a(T),class:"h-4"},null,8,["icon"])],8,gs)]))),128))])):x("",!0),_.value.length===0?(u(),c("div",fs," Sin elementos agregados. ")):x("",!0)])]),t("div",bs,[t("div",ys,[e[35]||(e[35]=t("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},"Imágenes:",-1)),t("div",xs,[t("div",hs,[t("input",{type:"file",id:"imagenes",name:"imagenes",accept:"image/*",onChange:Qe,class:"hidden",ref_key:"fileInput",ref:we},null,544),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 outline-none focus:outline-none active:outline-none disabled:opacity-50 disabled:cursor-not-allowed",onClick:He,disabled:K.value||le.value||!fe.value},[i(a(p),{icon:K.value?a(R):le.value?a(R):a(te),class:A({"animate-spin":K.value||le.value})},null,8,["icon","class"]),D(" "+g($e.value),1)],8,ws),t("div",_s,[t("span",{class:A(["text-sm font-medium",w.value.length>=1?"text-red-600":"text-gray-600"])},g(w.value.length)+"/1 ",3),e[33]||(e[33]=t("span",{class:"text-xs text-gray-500"},"imagen",-1))])]),e[34]||(e[34]=t("div",{class:"text-xs text-gray-500 mb-2"}," Máximo 1 imagen por paquete • Formatos: JPG, PNG, GIF • Tamaño máximo: 2MB ",-1))])])]),t("div",ks,[(u(!0),c(G,null,M(w.value,(d,v)=>(u(),c("div",{key:v,class:"relative w-full max-w-sm"},[t("img",{src:d.url,alt:"Vista previa",class:"w-full h-48 object-cover rounded-lg border shadow"},null,8,Cs),t("button",{onClick:f=>Xe(v),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow transition-colors",style:{transform:"translate(50%, -50%)"}},[i(a(p),{icon:a(T),class:"text-xs"},null,8,["icon"])],8,Ps)]))),128))])])]}),_:1},8,["visible","header","style"]),i(n,{visible:W.value,"onUpdate:visible":e[9]||(e[9]=l=>W.value=l),header:"Eliminar paquete",modal:!0,style:X(H.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",Ls,[t("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Ge,disabled:j.value},[i(a(p),{icon:j.value?a(R):a(he),class:A(["h-5",{"animate-spin":j.value}])},null,8,["icon","class"]),j.value?(u(),c("span",Us,"Eliminando...")):(u(),c("span",Ts,"Eliminar"))],8,Vs),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[8]||(e[8]=l=>W.value=!1),disabled:j.value},[i(a(p),{icon:a(T),class:"h-5"},null,8,["icon"]),e[40]||(e[40]=t("span",null,"Cancelar",-1))],8,Fs)])]),default:b(()=>[t("div",qs,[i(a(p),{icon:a(Te),class:"h-8 w-8 text-red-500"},null,8,["icon"]),t("div",Ss,[t("span",null,[e[37]||(e[37]=D("¿Estás seguro de eliminar el paquete: ")),t("b",null,g(o.value.nombre),1),e[38]||(e[38]=D("?"))]),e[39]||(e[39]=t("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acción es irreversible.",-1))])])]),_:1},8,["visible","style"]),i(n,{visible:J.value,"onUpdate:visible":e[10]||(e[10]=l=>J.value=l),header:"Cambios sin guardar",modal:!0,style:X(H.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",js,[t("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:We},[i(a(p),{icon:a(xt),class:"h-4"},null,8,["icon"]),e[42]||(e[42]=t("span",null,"Salir sin guardar",-1))]),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Je},[i(a(p),{icon:a(Le),class:"h-4"},null,8,["icon"]),e[43]||(e[43]=t("span",null,"Continuar",-1))])])]),default:b(()=>[t("div",$s,[i(a(p),{icon:a(Te),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e[41]||(e[41]=t("div",{class:"flex flex-col"},[t("span",null,"¡Tienes información sin guardar!"),t("span",{class:"text-red-600 text-sm font-medium mt-1"},"¿Deseas salir sin guardar?")],-1))])]),_:1},8,["visible","style"]),i(n,{visible:me.value,"onUpdate:visible":e[14]||(e[14]=l=>me.value=l),header:"Galería de Imágenes",modal:!0,closable:!1,style:X(H.value),draggable:!1},{footer:b(()=>[t("div",Js,[t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[13]||(e[13]=l=>me.value=!1)},[i(a(p),{icon:a(T),class:"h-5"},null,8,["icon"]),e[44]||(e[44]=D(" Cerrar "))])])]),default:b(()=>{var l,r;return[N.value.length?(u(),c("div",Rs,[t("div",Ks," Imagen "+g(P.value+1)+" de "+g(N.value.length),1),t("div",Os,[t("img",{src:(l=N.value[P.value])==null?void 0:l.url,alt:(r=N.value[P.value])==null?void 0:r.nombre,class:"max-h-96 max-w-full rounded-lg object-contain"},null,8,zs)]),N.value.length>1?(u(),c("div",Bs,[(u(!0),c(G,null,M(N.value,(d,v)=>(u(),c("button",{key:v,onClick:f=>P.value=v,class:A(["h-3 w-3 rounded-full transition-all",v===P.value?"bg-blue-500":"bg-gray-300 hover:bg-gray-400"])},null,10,Gs))),128))])):x("",!0),N.value.length>1?(u(),c("div",Ms,[t("button",{onClick:e[11]||(e[11]=d=>P.value=P.value===0?N.value.length-1:P.value-1),class:"bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-all duration-200 ease-in-out"}," Anterior "),t("button",{onClick:e[12]||(e[12]=d=>P.value=P.value===N.value.length-1?0:P.value+1),class:"bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-all duration-200 ease-in-out"}," Siguiente ")])):x("",!0)])):(u(),c("div",Ws,"No hay imágenes para este paquete."))]}),_:1},8,["visible","style"]),i(n,{visible:ae.value,"onUpdate:visible":e[16]||(e[16]=l=>ae.value=l),header:"Detalles del Paquete",modal:!0,style:X(H.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",pa,[t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[15]||(e[15]=l=>ae.value=!1)},[i(a(p),{icon:a(T),class:"h-5"},null,8,["icon"]),e[50]||(e[50]=D(" Cerrar "))])])]),default:b(()=>[h.value?(u(),c("div",Zs,[t("div",Hs,[t("div",null,[t("h3",Qs,g(h.value.nombre),1),t("div",Xs,[t("div",null,[e[45]||(e[45]=t("span",{class:"text-sm font-medium text-gray-700"},"Precio:",-1)),t("span",Ys,"$"+g(parseFloat(h.value.precio).toFixed(2)),1)]),h.value.descripcion?(u(),c("div",ea,[e[46]||(e[46]=t("span",{class:"text-sm font-medium text-gray-700"},"Descripción:",-1)),t("p",ta,g(h.value.descripcion),1)])):x("",!0)])]),h.value.imagenes&&h.value.imagenes.length>0?(u(),c("div",sa,[t("div",aa,[t("img",{src:Ue+h.value.imagenes[0].nombre,alt:h.value.nombre,class:"w-full max-w-sm h-48 object-cover rounded-lg border shadow"},null,8,la)])])):(u(),c("div",oa,[t("div",na,[i(a(p),{icon:a(ht),class:"h-12 w-12 mb-2"},null,8,["icon"]),e[47]||(e[47]=t("p",null,"Sin imagen",-1))])]))]),h.value.incluye?(u(),c("div",ra,[e[48]||(e[48]=t("h4",{class:"text-md font-semibold text-gray-900"},"Incluye:",-1)),t("div",ia,[t("ul",ua,[(u(!0),c(G,null,M(O(h.value.incluye),l=>(u(),c("li",{key:l,class:"flex items-start gap-2 text-sm text-gray-700"},[i(a(p),{icon:a(he),class:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"},null,8,["icon"]),t("span",null,g(l),1)]))),128))])])])):x("",!0),h.value.no_incluye?(u(),c("div",da,[e[49]||(e[49]=t("h4",{class:"text-md font-semibold text-gray-900"},"No Incluye:",-1)),t("div",ca,[t("ul",ma,[(u(!0),c(G,null,M(O(h.value.no_incluye),l=>(u(),c("li",{key:l,class:"flex items-start gap-2 text-sm text-gray-700"},[i(a(p),{icon:a(T),class:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"},null,8,["icon"]),t("span",null,g(l),1)]))),128))])])])):x("",!0)])):x("",!0)]),_:1},8,["visible","style"]),i(a(gt))]),_:1})}}};export{wa as default};
