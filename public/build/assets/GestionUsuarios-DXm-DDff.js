import{N as V,r as v,E as z,w as Be,n as G,o as Fe,k as q,h as oe,d as u,x as h,p as m,e as l,$ as i,a0 as Ze,q as E,t as f,c,I as Ie,y as D,F as H,j as p,A as je,l as re}from"./vendor-CqKcGHPa.js";import{A as Ge}from"./AuthenticatedLayout-B2Y6uKQN.js";import{z as qe,F as Ke,a as We,A as x}from"./ui-CVJOYm3g.js";import{r as He,b as me,f as J,c as ve,l as Je,d as Oe,e as Ye,g as Xe}from"./index-CTVkqtyY.js";import{z as Qe}from"./vue-tel-input-J95PmLrS.js";import fe from"./Modales-KYvdnCx_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ea={class:"container mx-auto px-4 py-6"},aa={class:"bg-white rounded-lg shadow-md"},sa={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},la={class:"w-full"},ta={class:"text-blue-600 text-xs text-center sm:text-start mt-1 font-medium flex items-center gap-1 justify-center sm:justify-start"},oa={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},ra={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},na={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},ia={class:"flex items-center gap-3"},da={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},ua=["disabled"],ca=["disabled"],ma={class:"space-y-3"},va=["title"],fa=["title"],pa=["title"],ga={class:"text-sm font-medium leading-relaxed"},ba={class:"flex gap-2 justify-center items-center"},wa=["disabled"],ya={key:0},ha={key:1},xa=["onClick"],_a=["onClick"],Ca=["onClick"],ka={class:"space-y-4"},Ea={class:"w-full flex flex-col"},Aa={class:"flex items-center gap-4"},Va={key:0,class:"ml-28 mt-1"},Da={key:1,class:"text-gray-500 ml-28 mt-1"},Pa={key:2,class:"text-orange-500 ml-28 mt-1"},La={key:3,class:"text-red-500 ml-28 mt-1"},Na={class:"w-full flex flex-col"},Ta={class:"flex items-center gap-4"},Ua={key:0,class:"text-red-500 ml-28"},za={key:1,class:"text-red-500 ml-28"},Sa={key:0,class:"w-full flex flex-col"},Ra={class:"flex items-center gap-4"},$a={key:0,class:"ml-28 mt-1"},Ma={key:1,class:"w-full flex flex-col"},Ba={class:"flex items-center gap-4"},Fa={key:0,class:"text-red-500 ml-28 mt-1"},Za={class:"w-full flex flex-col"},Ia={class:"flex items-center gap-4"},ja={key:0,class:"ml-28 mt-1"},Ga={key:1,class:"text-gray-500 ml-28 mt-1"},qa={key:2,class:"text-orange-500 ml-28 mt-1"},Ka={key:3,class:"text-red-500 ml-28 mt-1"},Wa={class:"w-full flex flex-col"},Ha={class:"flex items-start gap-4"},Ja={class:"flex-1"},Oa={key:0,class:"ml-28 mt-1"},Ya={class:"mr-1"},Xa={key:1,class:"text-red-500 ml-28"},Qa={class:"flex justify-center gap-4 w-full mt-6"},es=["disabled"],as={key:0},ss={key:1},ls=["disabled"],B="/api/empleados",ms={__name:"GestionUsuarios",setup(ts){V.defaults.withCredentials=!0;const d=qe(),P=v([]),s=v({id:null,nombre:"",email:"",password:"",password_confirmation:"",cargo:"",telefono:""}),L=v(!1),S=v(!1),K=v(!1),F=v(!1),g=v(!1),N=v(!1),T=v(null),U=v(!1),R=v(!1),C=v(null),W=v(!1),O=v(null),Y=v(!1),A=v(!1),_=v(!1),ne=v(!0),Z=v({global:{value:null,matchMode:Ke.CONTAINS}}),X=v(10),pe=v([5,10,20,50]),I=v("Guardar"),Q=z(()=>{let a=P.value;if(Z.value.global.value){const e=Z.value.global.value.toLowerCase();a=a.filter(o=>o.nombre.toLowerCase().includes(e)||o.email.toLowerCase().includes(e)||o.cargo.toLowerCase().includes(e)||o.telefono.toLowerCase().includes(e))}return a}),w=v({isValid:!1,country:null,formattedNumber:"",mensaje:""}),ge=a=>{try{a&&typeof a=="object"&&(w.value.isValid=a.valid===!0,w.value.country={name:a.country,code:a.countryCode},w.value.formattedNumber=a.formatted||"",a.valid===!0&&a.formatted&&(s.value.telefono=a.formatted),s.value.telefono&&a.valid===!1?w.value.mensaje="‚úó N√∫mero de tel√©fono inv√°lido para "+a.country:a.valid===!0?w.value.mensaje="‚úì N√∫mero v√°lido para "+a.country:w.value.mensaje="")}catch{w.value.mensaje="Error en validaci√≥n"}};Be([s],()=>{T.value&&L.value&&G(()=>{const a={...s.value};delete a.password,delete a.password_confirmation;const e={...T.value};delete e.password,delete e.password_confirmation;const o=JSON.stringify(a)!==JSON.stringify(e),r=!T.value.id,n=s.value.nombre||s.value.email||s.value.cargo||s.value.telefono;N.value=o||r&&n})},{deep:!0,flush:"post"});function j(){s.value={id:null,nombre:"",email:"",password:"",password_confirmation:"",cargo:"",telefono:""},w.value={isValid:!1,country:null,formattedNumber:"",mensaje:""},g.value=!1}Fe(()=>{be()});const ee=async()=>{try{const a=await V.get(B);P.value=(a.data.data||a.data||[]).sort((e,o)=>{const r=new Date(e.created_at);return new Date(o.created_at)-r})}catch{d.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los empleados.",life:4e3})}},be=async()=>{ne.value=!0,d.add({severity:"info",summary:"Cargando empleados...",life:2e3});try{const a=await V.get(B);P.value=(a.data.data||a.data||[]).sort((e,o)=>{const r=new Date(e.created_at);return new Date(o.created_at)-r}),d.add({severity:"success",summary:"Empleados cargados",life:2e3})}catch{d.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los empleados.",life:4e3})}finally{ne.value=!1}},ie=async()=>{A.value=!0;try{await new Promise(a=>setTimeout(a,300)),Z.value.global.value=null,d.add({severity:"success",summary:"Filtros limpiados",life:2e3})}finally{A.value=!1}},we=()=>{j(),I.value="Guardar",g.value=!1,L.value=!0,G(()=>{T.value={...s.value},N.value=!1})},ye=a=>{j(),g.value=!1,s.value={...a,nombre:a.nombre||a.name,cargo:a.cargo?a.cargo.toUpperCase():a.cargo,password:"",password_confirmation:""},N.value=!1,I.value="Actualizar",L.value=!0,G(()=>{T.value={...s.value},N.value=!1})},he=async()=>{var e;if(g.value=!0,!s.value.nombre||s.value.nombre.length<3||s.value.nombre.length>255){d.add({severity:"warn",summary:"Nombre inv√°lido",detail:"El nombre debe tener entre 3 y 255 caracteres.",life:4e3});return}if(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/.test(s.value.nombre)){d.add({severity:"warn",summary:"Nombre inv√°lido",detail:"El nombre solo puede contener letras y espacios.",life:4e3});return}if(ce(s.value.nombre)){d.add({severity:"warn",summary:"Nombre duplicado",detail:"Ya existe un empleado con este nombre.",life:4e3});return}if(!s.value.email||!se(s.value.email)){d.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que el correo electr√≥nico sea v√°lido.",life:4e3});return}if(!s.value.id){if(!s.value.password||s.value.password.length<8||!/[A-Z]/.test(s.value.password)||!/[0-9]/.test(s.value.password)||/[\s.]/.test(s.value.password)){d.add({severity:"warn",summary:"Contrase√±a inv√°lida",detail:"La contrase√±a debe tener al menos 8 caracteres, incluir una may√∫scula, un n√∫mero y no contener espacios ni puntos.",life:4e3});return}if(s.value.password!==s.value.password_confirmation){d.add({severity:"warn",summary:"Contrase√±as no coinciden",detail:"Por favor verifica que las contrase√±as coincidan.",life:4e3});return}}if(!s.value.cargo||s.value.cargo.length<2){d.add({severity:"warn",summary:"Cargo inv√°lido",detail:"El cargo debe tener al menos 2 caracteres.",life:4e3});return}if(/[^A-Z\s]/.test(s.value.cargo)){d.add({severity:"warn",summary:"Cargo inv√°lido",detail:"El cargo solo puede contener letras y espacios (sin tildes ni n√∫meros).",life:4e3});return}if(!s.value.telefono){d.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor completa todos los campos obligatorios.",life:4e3});return}if(!w.value.isValid){d.add({severity:"warn",summary:"Tel√©fono inv√°lido",detail:"Por favor ingresa un n√∫mero de tel√©fono v√°lido.",life:4e3});return}const a=await Me(s.value.telefono);if(!a.available){d.add({severity:"warn",summary:"Tel√©fono no disponible",detail:a.message,life:4e3});return}try{_.value=!0;const o={name:s.value.nombre,email:s.value.email,cargo:s.value.cargo,telefono:s.value.telefono};s.value.id||(o.password=s.value.password,o.password_confirmation=s.value.password_confirmation);let r;s.value.id?(r=await V.put(`${B}/${s.value.id}`,o),d.add({severity:"success",summary:"¬°√âxito!",detail:"El empleado ha sido actualizado correctamente.",life:5e3})):(r=await V.post(B,o),d.add({severity:"success",summary:"¬°√âxito!",detail:"El empleado ha sido creado correctamente.",life:5e3})),await ee(),L.value=!1,N.value=!1,T.value=null,j()}catch(o){if(((e=o.response)==null?void 0:e.status)===422){const r=o.response.data.errors||{};let n="Por favor revisa los campos e intenta nuevamente.";r.telefono?n=r.telefono[0]:r.email?n=r.email[0]:r.name&&(n=r.name[0]),d.add({severity:"warn",summary:"Error de validaci√≥n",detail:n,life:6e3})}else d.add({severity:"error",summary:"Error",detail:"Ocurri√≥ un error al procesar la solicitud.",life:6e3})}finally{_.value=!1}},xe=a=>{C.value={...a},S.value=!0},_e=async()=>{var a,e,o,r,n;Y.value=!0;try{await V.delete(`${B}/${C.value.id}`),await ee(),S.value=!1,d.add({severity:"success",summary:"¬°Eliminado!",detail:"El empleado ha sido eliminado correctamente.",life:5e3})}catch(b){if(S.value=!1,((a=b.response)==null?void 0:a.status)===422){const y=b.response.data;let t=y.error||"El empleado est√° siendo utilizado en el sistema.";y.details&&Array.isArray(y.details)&&(t+=`

üìã Detalles:
‚Ä¢ `+y.details.join(`
‚Ä¢ `)),d.add({severity:"warn",summary:"‚ùå No se puede eliminar",detail:t,life:1e4})}else if(((e=b.response)==null?void 0:e.status)===404)d.add({severity:"error",summary:"Empleado no encontrado",detail:"El empleado que intentas eliminar no existe o ya fue eliminado.",life:5e3}),await ee();else if(((o=b.response)==null?void 0:o.status)===500)d.add({severity:"error",summary:"Error del servidor",detail:"Ocurri√≥ un error interno. Por favor, contacta al administrador.",life:6e3});else{const y=((n=(r=b.response)==null?void 0:r.data)==null?void 0:n.error)||b.message||"Error desconocido";d.add({severity:"error",summary:"Error",detail:`No se pudo eliminar el empleado: ${y}`,life:6e3})}}finally{Y.value=!1}},Ce=()=>{N.value?F.value=!0:de()},de=()=>{L.value=!1,F.value=!1,N.value=!1,T.value=null,j()},ke=()=>{F.value=!1},Ee=a=>{C.value=a,R.value=!0},Ae=a=>{R.value=!1,C.value=a,s.value={id:a.id,nombre:a.nombre,email:a.email,cargo:a.cargo?a.cargo.toUpperCase():a.cargo,telefono:a.telefono,password:"",password_confirmation:""},K.value=!0},Ve=async a=>{var e;if(g.value=!0,!a.password||a.password.length<8||!/[A-Z]/.test(a.password)||!/[0-9]/.test(a.password)||/[\s.]/.test(a.password)){d.add({severity:"warn",summary:"Contrase√±a inv√°lida",detail:"La contrase√±a debe tener al menos 8 caracteres, incluir una may√∫scula, un n√∫mero y no contener espacios ni puntos.",life:4e3});return}if(a.password!==a.password_confirmation){d.add({severity:"warn",summary:"Contrase√±as no coinciden",detail:"Por favor verifica que las contrase√±as coincidan.",life:4e3});return}try{_.value=!0,await V.put(`${B}/${C.value.id}/password`,{password:a.password,password_confirmation:a.password_confirmation}),K.value=!1,g.value=!1,j(),d.add({severity:"success",summary:"¬°√âxito!",detail:"La contrase√±a ha sido actualizada correctamente.",life:5e3})}catch(o){if(((e=o.response)==null?void 0:e.status)===422){const r=o.response.data.errors||{};let n="Por favor revisa los campos e intenta nuevamente.";r.password&&(n=r.password[0]),d.add({severity:"warn",summary:"Error de validaci√≥n",detail:n,life:6e3})}else d.add({severity:"error",summary:"Error",detail:"Ocurri√≥ un error al actualizar la contrase√±a.",life:6e3})}finally{_.value=!1}},De=a=>{C.value=a,O.value={id:a.user_id||a.usuario_id||null,name:a.nombre||a.name,email:a.email,roles:a.roles?a.roles:[],status:a.status||"Activo",created_at:a.created_at},W.value=!0,R.value=!1},Pe=a=>{d.add({severity:"info",summary:"Enviar Credenciales",detail:`Funcionalidad de enviar credenciales al empleado "${a.nombre}" en desarrollo.`,life:5e3}),R.value=!1},Le=a=>{var r;const e=((r=a.originalEvent)==null?void 0:r.target)||a.target;let o=!1;if(e&&(o=!!(e.closest&&e.closest("button"))),!o){const n=a.data;C.value=n;let b=null;n&&n.email&&(b={id:n.user_id||n.usuario_id||null,name:n.nombre||n.name,email:n.email,roles:n.roles?n.roles:[],status:n.status||"Activo",created_at:n.created_at}),O.value=b,W.value=!0}},ue=v(typeof window<"u"?window.innerWidth:1024),ae=z(()=>ue.value<640?{width:"95vw",maxWidth:"380px"}:ue.value<768?{width:"400px"}:{width:"450px"}),se=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),Ne=()=>{s.value.nombre&&(s.value.nombre=s.value.nombre.replace(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/g,""),s.value.nombre.length>255&&(s.value.nombre=s.value.nombre.substring(0,255)))},Te=a=>{const e=a.key;if(a.ctrlKey||a.metaKey||["Backspace","Delete","Tab","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e))return;/^[a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]$/.test(e)||a.preventDefault()},Ue=a=>{a.preventDefault();const o=(a.clipboardData||window.clipboardData).getData("text").replace(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/g,""),r=a.target,n=r.selectionStart,b=r.selectionEnd,y=s.value.nombre||"",t=y.substring(0,n)+o+y.substring(b);s.value.nombre=t.substring(0,255),G(()=>{const k=n+o.length;r.setSelectionRange(k,k)})},ze=()=>{s.value.cargo&&(s.value.cargo=s.value.cargo.toUpperCase(),s.value.cargo=s.value.cargo.replace(/[^A-Z\s]/g,""),s.value.cargo.length>25&&(s.value.cargo=s.value.cargo.substring(0,25)))},Se=a=>{const e=a.key;if(a.ctrlKey||a.metaKey||["Backspace","Delete","Tab","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e))return;/^[a-zA-Z\s]$/.test(e)||a.preventDefault()},Re=a=>{a.preventDefault();const o=(a.clipboardData||window.clipboardData).getData("text").toUpperCase().replace(/[^A-Z\s]/g,""),r=a.target,n=r.selectionStart,b=r.selectionEnd,y=s.value.cargo||"",t=y.substring(0,n)+o+y.substring(b);s.value.cargo=t.substring(0,25),G(()=>{const k=n+o.length;r.setSelectionRange(k,k)})},ce=a=>!a||!P.value?!1:P.value.some(e=>e.id!==s.value.id&&e.nombre.toLowerCase().trim()===a.toLowerCase().trim()),$e=a=>!a||!P.value?!1:P.value.some(e=>e.id!==s.value.id&&e.telefono===a),Me=async a=>{try{const e={telefono:a};return s.value.id&&(e.empleado_id=s.value.id),(await V.get("/api/empleados/check-telefono",{params:e})).data}catch(e){return console.error("Error verificando tel√©fono:",e),{available:!1,message:"Error al verificar la disponibilidad del tel√©fono"}}},$=z(()=>{const a=[],e=s.value.nombre||"";return e.length>0&&e.length<3&&a.push("El nombre debe tener al menos 3 caracteres."),e.length>0&&/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/.test(e)&&a.push("El nombre solo puede contener letras, espacios y guiones."),e.length>0&&ce(e)&&a.push("Ya existe un empleado con este nombre."),a}),M=z(()=>{const a=[],e=s.value.cargo||"";return e.length>0&&e.length<2&&a.push("El cargo debe tener al menos 2 caracteres."),e.length>0&&/[^A-Z\s]/.test(e)&&a.push("El cargo solo puede contener letras y espacios (sin tildes ni n√∫meros)."),a}),le=z(()=>{const a=[],e=s.value.password||"";return e.length>0&&e.length<8&&a.push("La contrase√±a debe tener al menos 8 caracteres."),e.length>0&&!/[A-Z]/.test(e)&&a.push("La contrase√±a debe incluir al menos una letra may√∫scula."),e.length>0&&!/[0-9]/.test(e)&&a.push("La contrase√±a debe incluir al menos un n√∫mero."),e.length>0&&/[\s.]/.test(e)&&a.push("La contrase√±a no puede contener espacios ni puntos."),a}),te=z(()=>s.value.password&&s.value.password_confirmation&&s.value.password!==s.value.password_confirmation?"Las contrase√±as no coinciden.":"");return z(()=>{const a=[],e=s.value.telefono||"";return e.length>0&&!w.value.isValid&&a.push("El formato del tel√©fono no es v√°lido."),e.length>0&&$e(e)&&a.push("Este n√∫mero de tel√©fono ya est√° en uso por otro empleado."),a}),(a,e)=>{const o=q("InputText"),r=q("Column"),n=q("DataTable"),b=q("Password"),y=q("Dialog");return u(),oe(Ge,null,{default:h(()=>[m(i(Ze),{title:"Gesti√≥n de Usuarios"}),m(i(We),{class:"z-[9999]"}),l("div",ea,[e[32]||(e[32]=l("div",{class:"mb-6"},[l("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Gesti√≥n de Usuarios Internos"),l("p",{class:"text-gray-600"},"Gesti√≥n completa de empleados del sistema")],-1)),l("div",aa,[l("div",sa,[l("div",la,[e[17]||(e[17]=l("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Lista de Empleados",-1)),l("p",ta,[m(i(x),{icon:i(He),class:"h-4 w-4 text-yellow-500"},null,8,["icon"]),e[16]||(e[16]=E(" Haz clic en cualquier fila para ver los detalles. "))])]),l("div",oa,[l("button",{class:"flex bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:we},[m(i(x),{icon:i(me),class:"h-4 w-4 mr-1 text-white block lg:hidden"},null,8,["icon"]),e[18]||(e[18]=l("span",{class:"block lg:hidden"},"¬†Agregar empleado",-1)),m(i(x),{icon:i(me),class:"h-4 w-4 mr-1 text-white hidden lg:block"},null,8,["icon"]),e[19]||(e[19]=l("span",{class:"hidden lg:block"},"¬†Agregar",-1))])])]),m(n,{value:Q.value,dataKey:"id",paginator:!0,rows:X.value,rowsPerPageOptions:pe.value,rowsPerPage:X.value,"onUpdate:rowsPerPage":e[2]||(e[2]=t=>X.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} empleados",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:Le,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:h(()=>[l("div",ra,[l("div",na,[l("div",ia,[e[20]||(e[20]=l("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[l("i",{class:"pi pi-filter text-blue-600 text-sm"}),l("span",null,"Filtros")],-1)),l("div",da,f(Q.value.length)+" resultado"+f(Q.value.length!==1?"s":""),1),l("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:ie,disabled:A.value},[A.value?(u(),oe(i(x),{key:0,icon:i(J),class:"animate-spin h-3 w-3"},null,8,["icon"])):p("",!0),l("span",null,f(A.value?"Limpiando...":"Limpiar filtros"),1)],8,ua)]),l("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:ie,disabled:A.value},[A.value?(u(),oe(i(x),{key:0,icon:i(J),class:"animate-spin h-3 w-3"},null,8,["icon"])):p("",!0),l("span",null,f(A.value?"Limpiando...":"Limpiar filtros"),1)],8,ca)]),l("div",ma,[l("div",null,[m(o,{modelValue:Z.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=t=>Z.value.global.value=t),placeholder:"üîç Buscar empleados...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])])])])]),default:h(()=>[m(r,{field:"nombre",header:"Nombre",sortable:"",class:"w-28"},{body:h(t=>[l("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"150px","text-overflow":"ellipsis","white-space":"nowrap"},title:t.data.nombre},f(t.data.nombre),9,va)]),_:1}),m(r,{field:"email",header:"Email",class:"w-28 hidden md:table-cell"},{body:h(t=>[l("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"150px","text-overflow":"ellipsis","white-space":"nowrap"},title:t.data.email},f(t.data.email),9,fa)]),_:1}),m(r,{field:"cargo",header:"Cargo",class:"w-32 hidden sm:table-cell"},{body:h(t=>[l("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"120px","text-overflow":"ellipsis","white-space":"nowrap"},title:t.data.cargo},f(t.data.cargo),9,pa)]),_:1}),m(r,{field:"telefono",header:"Tel√©fono",class:"w-16 hidden lg:table-cell"},{body:h(t=>[l("div",ga,f(t.data.telefono),1)]),_:1}),m(r,{exportable:!1,class:"w-52 min-w-36"},{header:h(()=>e[21]||(e[21]=[l("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:h(t=>[l("div",ba,[Array.isArray(t.data.roles)&&t.data.roles.includes("Administrador")?(u(),c("button",{key:0,type:"button",class:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-60",disabled:i(U),onClick:e[1]||(e[1]=Ie(k=>{i(U)||(U.value=!0,a.$inertia.visit(a.route("profile.edit"),{onFinish:()=>{U.value=!1}}))},["stop","prevent"]))},[m(i(x),{icon:i(U)?i(J):i(ve),class:D(["h-4 w-4",{"animate-spin":i(U)}])},null,8,["icon","class"]),i(U)?(u(),c("span",ha,"Cargando...")):(u(),c("span",ya,"Editar perfil"))],8,wa)):(u(),c(H,{key:1},[l("button",{class:"flex bg-green-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:k=>Ee(t.data)},[m(i(x),{icon:i(Je),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[22]||(e[22]=l("span",{class:"hidden md:block text-white"},"M√°s",-1))],8,xa),l("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:k=>ye(t.data)},[m(i(x),{icon:i(ve),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[23]||(e[23]=l("span",{class:"hidden md:block text-white"},"Editar",-1))],8,_a),l("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:k=>xe(t.data)},[m(i(x),{icon:i(Oe),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[24]||(e[24]=l("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,Ca)],64))])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"]),m(y,{visible:L.value,"onUpdate:visible":e[9]||(e[9]=t=>L.value=t),header:I.value+" Empleado",modal:!0,style:je(ae.value),closable:!1,draggable:!1},{footer:h(()=>[l("div",Qa,[l("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:he,disabled:_.value},[m(i(x),{icon:_.value?i(J):i(Ye),class:D(["h-5 text-white",{"animate-spin":_.value}])},null,8,["icon","class"]),_.value?(u(),c("span",ss,f(I.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(u(),c("span",as,f(I.value),1))],8,es),l("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Ce,disabled:_.value},[m(i(x),{icon:i(Xe),class:"h-5"},null,8,["icon"]),e[31]||(e[31]=E("Cancelar "))],8,ls)])]),default:h(()=>[l("div",ka,[l("div",Ea,[l("div",Aa,[e[25]||(e[25]=l("label",{for:"nombre",class:"w-24 flex items-center gap-1"},[E(" Nombre: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),m(o,{modelValue:s.value.nombre,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.nombre=t),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:255,class:D([{"p-invalid":g.value&&(!s.value.nombre||$.value.length>0)||$.value.length>0},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"Nombre completo del empleado (solo letras, espacios y guiones)",onKeydown:Te,onPaste:Ue,onInput:Ne},null,8,["modelValue","class"])]),$.value.length>0?(u(),c("div",Va,[(u(!0),c(H,null,re($.value,t=>(u(),c("small",{key:t,class:"text-red-500 block"},f(t),1))),128))])):p("",!0),s.value.nombre&&s.value.nombre.length>0&&$.value.length===0?(u(),c("small",Da," Caracteres: "+f(s.value.nombre.length)+"/255 ",1)):p("",!0),s.value.nombre&&s.value.nombre.length>=230&&s.value.nombre.length<=255&&$.value.length===0?(u(),c("small",Pa," Caracteres restantes: "+f(255-s.value.nombre.length),1)):p("",!0),g.value&&!s.value.nombre?(u(),c("small",La," El nombre es obligatorio. ")):p("",!0)]),l("div",Na,[l("div",Ta,[e[26]||(e[26]=l("label",{for:"email",class:"w-24 flex items-center gap-1"},[E(" Email: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),m(o,{modelValue:s.value.email,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.email=t),modelModifiers:{trim:!0},id:"email",name:"email",type:"email",maxlength:255,class:D([{"p-invalid":g.value&&(!s.value.email||!se(s.value.email))},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"correo@ejemplo.com"},null,8,["modelValue","class"])]),g.value&&!s.value.email?(u(),c("small",Ua," El email es obligatorio. ")):p("",!0),s.value.email&&!se(s.value.email)?(u(),c("small",za," El formato del email no es v√°lido. ")):p("",!0)]),s.value.id?p("",!0):(u(),c("div",Sa,[l("div",Ra,[e[27]||(e[27]=l("label",{for:"password",class:"w-24 flex items-center gap-1"},[E(" Contrase√±a: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),m(b,{modelValue:s.value.password,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.password=t),id:"password",name:"password",class:D([{"p-invalid":g.value&&le.value.length>0},"flex-1"]),placeholder:"Contrase√±a segura",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),le.value.length>0?(u(),c("div",$a,[(u(!0),c(H,null,re(le.value,t=>(u(),c("small",{key:t,class:"block text-red-500 text-xs"},f(t),1))),128))])):p("",!0)])),s.value.id?p("",!0):(u(),c("div",Ma,[l("div",Ba,[e[28]||(e[28]=l("label",{for:"password_confirmation",class:"w-24 flex items-center gap-1"},[E(" Confirmar: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),m(b,{modelValue:s.value.password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.password_confirmation=t),id:"password_confirmation",name:"password_confirmation",class:D([{"p-invalid":g.value&&te.value},"flex-1"]),placeholder:"Repetir contrase√±a",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),te.value?(u(),c("small",Fa,f(te.value),1)):p("",!0)])),l("div",Za,[l("div",Ia,[e[29]||(e[29]=l("label",{for:"cargo",class:"w-24 flex items-center gap-1"},[E(" Cargo: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),m(o,{modelValue:s.value.cargo,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.cargo=t),modelModifiers:{trim:!0},id:"cargo",name:"cargo",maxlength:25,class:D([{"p-invalid":g.value&&(!s.value.cargo||M.value.length>0)||M.value.length>0},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"GERENTE, VENDEDOR, etc. (solo letras y espacios)",onKeydown:Se,onPaste:Re,onInput:ze},null,8,["modelValue","class"])]),M.value.length>0?(u(),c("div",ja,[(u(!0),c(H,null,re(M.value,t=>(u(),c("small",{key:t,class:"text-red-500 block"},f(t),1))),128))])):p("",!0),s.value.cargo&&s.value.cargo.length>0&&M.value.length===0?(u(),c("small",Ga," Caracteres: "+f(s.value.cargo.length)+"/25 ",1)):p("",!0),s.value.cargo&&s.value.cargo.length>=20&&s.value.cargo.length<=25&&M.value.length===0?(u(),c("small",qa," Caracteres restantes: "+f(25-s.value.cargo.length),1)):p("",!0),g.value&&!s.value.cargo?(u(),c("small",Ka," El cargo es obligatorio. ")):p("",!0)]),l("div",Wa,[l("div",Ha,[e[30]||(e[30]=l("label",{for:"telefono",class:"w-24 flex items-center gap-1 mt-2"},[E(" Tel√©fono: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),l("div",Ja,[m(i(Qe),{modelValue:s.value.telefono,"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.telefono=t),defaultCountry:"SV",preferredCountries:["SV","GT","HN","CR","NI","PA","BZ"],validCharactersOnly:!0,dropdownOptions:{showDialCodeInSelection:!0,showFlags:!0,showSearchBox:!0,showDialCodeInList:!0},inputOptions:{placeholder:"N√∫mero de tel√©fono"},mode:"international",class:"w-full border border-gray-300 rounded-lg",onValidate:ge},null,8,["modelValue"])])]),w.value.mensaje?(u(),c("div",Oa,[l("small",{class:D(["text-xs flex items-center",w.value.isValid?"text-green-600":"text-red-600"])},[l("span",Ya,f(w.value.isValid?"‚úì":"‚ö†Ô∏è"),1),E(" "+f(w.value.mensaje),1)],2)])):p("",!0),g.value&&!s.value.telefono?(u(),c("small",Xa," El tel√©fono es obligatorio. ")):p("",!0)])])]),_:1},8,["visible","header","style"]),m(fe,{visible:R.value,"onUpdate:visible":e[10]||(e[10]=t=>R.value=t),"delete-visible":S.value,"onUpdate:deleteVisible":e[11]||(e[11]=t=>S.value=t),"unsaved-changes-visible":F.value,"onUpdate:unsavedChangesVisible":e[12]||(e[12]=t=>F.value=t),"password-visible":K.value,"onUpdate:passwordVisible":e[13]||(e[13]=t=>K.value=t),empleado:C.value||s.value,"dialog-style":ae.value,"is-deleting":Y.value,"is-loading":_.value,submitted:g.value,onChangePassword:Ae,onSendCredentials:Pe,onViewDetails:De,onDeleteEmpleado:_e,onCancelDelete:e[14]||(e[14]=()=>S.value=!1),onCloseWithoutSaving:de,onContinueEditing:ke,onUpdatePassword:Ve},null,8,["visible","delete-visible","unsaved-changes-visible","password-visible","empleado","dialog-style","is-deleting","is-loading","submitted"])]),m(fe,{"details-visible":W.value,"onUpdate:detailsVisible":e[15]||(e[15]=t=>W.value=t),usuario:O.value,empleado:C.value,"dialog-style":ae.value},null,8,["details-visible","usuario","empleado","dialog-style"])])]),_:1})}}};export{ms as default};
