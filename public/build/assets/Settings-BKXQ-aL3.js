import{a3 as $,r as i,h as A,d as m,x as N,p as n,e as s,$ as o,c as g,F as j,j as I,a5 as _}from"./vendor-gbh1WW5n.js";import{A as z,s as k}from"./AuthenticatedLayout-Brf7D3Fu.js";import{z as D,a as G,F as f}from"./ui-BrU4k96Z.js";import{ab as L,al as O,ai as R,am as W}from"./index-BWaQysKE.js";import H from"./CorporateSettings-CP4juqjJ.js";import M from"./DatabaseSettings-BJp_ahmn.js";import T from"./UnsavedChangesModal-DE-bIi4E.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"bg-gray-50 pt-4 md:pt-6"},J={class:"bg-white shadow-lg border-b border-gray-200 mb-5 md:mb-10"},K={class:"max-w-4xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8 flex flex-col sm:flex-row items-center gap-3 sm:gap-4 lg:gap-6"},P={class:"bg-red-600 rounded-xl p-4 shadow flex items-center justify-center border-4 border-white mb-3 sm:mb-0"},Q={class:"py-2 sm:py-4"},X={class:"max-w-4xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8"},Y={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6"},Z={class:"bg-red-100 rounded-full p-3 sm:p-4 mb-3 sm:mb-4"},ee={class:"bg-red-100 rounded-full p-3 sm:p-4 mb-3 sm:mb-4"},se={key:0},te={key:1},me={__name:"Settings",props:{siteSettings:{type:Object,default:()=>({})},companyValues:{type:Array,default:()=>[]},databaseInfo:{type:Object,default:()=>({last_backup_formatted:"No disponible",database_size:"No disponible",status:"unknown",status_text:"Desconocido"})}},setup(y){$();const x=D(),c=y,v=i(!1),r=i(null),h=i(c.companyValues),p=i(!1),d=i(!1),u=i(null),w=t=>{p.value?(u.value=t,d.value=!0):r.value=t},E=()=>{p.value?(u.value=null,d.value=!0):r.value=null},V=()=>{p.value=!1,d.value=!1,u.value!==void 0&&(r.value=u.value,u.value=null)},B=()=>{d.value=!1,u.value=null},S=t=>{p.value=t},a=i({mission:c.siteSettings.mission||"",vision:c.siteSettings.vision||"",description:c.siteSettings.description||""}),l=i({...a.value}),U=async()=>{v.value=!0;try{await _.post(k("settings.update"),{mission:a.value.mission,vision:a.value.vision,description:a.value.description},{onSuccess:t=>{l.value.mission=a.value.mission,l.value.vision=a.value.vision,l.value.description=a.value.description,x.add({severity:"success",summary:"¡Éxito!",detail:"Configuración de la empresa actualizada correctamente",life:3e3})},onError:t=>{console.error("Error al guardar la configuración:",t),x.add({severity:"error",summary:"Error",detail:"Error al guardar la configuración",life:5e3})}})}catch(t){console.error("Error al guardar la configuración:",t),x.add({severity:"error",summary:"Error",detail:"Error al guardar la configuración",life:5e3})}finally{v.value=!1}},C=()=>{confirm("¿Está seguro de restablecer todos los cambios?")&&(a.value={...l.value})},F=()=>{_.get(k("settings"),{},{preserveState:!1,preserveScroll:!0,only:["siteSettings","companyValues"],onSuccess:t=>{a.value.mission=t.props.siteSettings.mission||"",a.value.vision=t.props.siteSettings.vision||"",a.value.description=t.props.siteSettings.description||"",l.value.mission=a.value.mission,l.value.vision=a.value.vision,l.value.description=a.value.description,h.value=t.props.companyValues},onError:t=>{console.error("❌ Error al recargar settings:",t)}})};return(t,e)=>(m(),A(z,null,{default:N(()=>[n(o(G)),s("div",q,[s("div",J,[s("div",K,[s("div",P,[n(o(f),{icon:o(L),class:"w-10 h-10 text-white"},null,8,["icon"])]),e[3]||(e[3]=s("div",{class:"text-center sm:text-left"},[s("h1",{class:"text-3xl sm:text-4xl font-extrabold text-gray-900 tracking-tight"},"Configuración del Sistema"),s("p",{class:"text-gray-700 text-base sm:text-lg mt-1 font-medium"},"Configure los parámetros generales del sistema")],-1))])]),s("div",Q,[s("div",X,[r.value?(m(),g(j,{key:1},[s("button",{onClick:E,class:"mb-4 sm:mb-6 flex items-center text-red-600 hover:text-red-800 font-semibold text-sm sm:text-base px-2 py-1 rounded-md hover:bg-red-50 transition-all"},[n(o(f),{icon:o(W),class:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"},null,8,["icon"]),e[8]||(e[8]=s("span",{class:"hidden sm:inline"},"Volver",-1)),e[9]||(e[9]=s("span",{class:"sm:hidden"},"Atrás",-1))]),r.value==="corporate"?(m(),g("div",se,[n(H,{settings:a.value,"company-values":h.value,"is-saving":v.value,onReset:C,onUnsavedChanges:S,onSettingsUpdated:F},null,8,["settings","company-values","is-saving"])])):r.value==="database"?(m(),g("div",te,[n(M,{"database-info":y.databaseInfo,"is-saving":v.value,onSave:U,onReset:C,onUnsavedChanges:S},null,8,["database-info","is-saving"])])):I("",!0)],64)):(m(),g("div",Y,[s("div",{onClick:e[0]||(e[0]=b=>w("corporate")),class:"cursor-pointer bg-white rounded-xl sm:rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 flex flex-col items-center hover:shadow-2xl transition-all group"},[s("div",Z,[n(o(f),{icon:o(O),class:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"},null,8,["icon"])]),e[4]||(e[4]=s("h3",{class:"text-base sm:text-lg font-bold text-gray-900 mb-2"},"Información Corporativa",-1)),e[5]||(e[5]=s("p",{class:"text-gray-600 text-xs sm:text-sm text-center leading-relaxed"},"Configure la misión, visión, descripción y valores corporativos de la empresa",-1))]),s("div",{onClick:e[1]||(e[1]=b=>w("database")),class:"cursor-pointer bg-white rounded-xl sm:rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 flex flex-col items-center hover:shadow-2xl transition-all group"},[s("div",ee,[n(o(f),{icon:o(R),class:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"},null,8,["icon"])]),e[6]||(e[6]=s("h3",{class:"text-base sm:text-lg font-bold text-gray-900 mb-2"},"Base de Datos",-1)),e[7]||(e[7]=s("p",{class:"text-gray-600 text-xs sm:text-sm text-center leading-relaxed"},"Gestione respaldos y mantenimiento de la base de datos del sistema",-1))])]))])])]),n(T,{visible:d.value,"onUpdate:visible":e[2]||(e[2]=b=>d.value=b),onContinueEditing:B,onExitWithoutSaving:V},null,8,["visible"])]),_:1}))}};export{me as default};
