import{_ as W}from"./Catalogo-Ci8opIY3.js";import G from"./CarritoCompras-DZlTlMBz.js";import O from"./CarritoButton-CjCXuLVT.js";import H from"./ModalAuthRequerido-DaAdXWg4.js";import{z as J,A as k,a as K}from"./ui-BjYE_i4I.js";import{v as Q,b as X,aa as Y}from"./index-DIJG4gfJ.js";import{a4 as Z,E as z,r as m,o as ee,a6 as te,h as se,d as l,x as f,e,p as c,c as o,j as h,$ as u,a1 as C,q as i,t as r,F as S,l as le,y as j,a3 as ae}from"./vendor-CaDzpwPW.js";import{u as oe}from"./carrito-DcJD13CH.js";import"./ImageWithFallback-DNdCQv9x.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ModalDatosCliente-owABGpcu.js";import"./vue-tel-input-AlIeehSu.js";import"./app-81MsUmG8.js";const ie={class:"min-h-screen bg-gray-50 py-4 sm:py-8 mt-32"},re={class:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 relative"},ne={class:"fixed top-20 sm:top-24 right-4 sm:right-6 z-[60]"},de={class:"mb-4 sm:mb-8"},ce={class:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm"},ue={class:"text-gray-900 font-medium truncate"},me={key:0,class:"bg-white rounded-lg shadow-lg overflow-hidden p-8"},xe={key:1,class:"bg-white rounded-lg shadow-lg overflow-hidden p-8"},ge={class:"text-center"},pe={class:"text-gray-600 mb-4"},ve={key:2,class:"bg-white rounded-lg shadow-lg overflow-hidden"},be={key:0,class:"relative w-full h-full flex items-center justify-center"},fe=["src","alt"],he={key:0,class:"absolute inset-0 flex items-center justify-between p-2 sm:p-4 pointer-events-none"},ye={key:1,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10"},_e={class:"flex space-x-2"},we=["onClick"],ke={key:1,class:"w-full h-full bg-gray-300 flex items-center justify-center rounded-t-lg"},Ce={class:"p-4 sm:p-6 md:p-8"},Se={class:"grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8"},je={class:"order-2 xl:order-1"},Ie={class:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-3 sm:mb-4"},Ae={class:"mb-4 sm:mb-6"},Pe={class:"inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-gradient-to-r from-red-600 to-red-700 text-white shadow-xl border border-white/20 transform hover:scale-105 transition-all duration-300",style:{"box-shadow":"0 8px 25px rgba(220, 38, 38, 0.4), 0 0 0 2px white"}},ze={class:"space-y-3 sm:space-y-4 mb-4 sm:mb-6"},Me={class:"flex items-start text-gray-600 text-sm sm:text-base"},$e={class:"flex items-start text-gray-600 text-sm sm:text-base"},Be={class:"ml-6 text-gray-700 text-sm sm:text-base leading-relaxed"},De={class:"mb-4 sm:mb-6 order-1 xl:order-none"},Ee={class:"text-2xl sm:text-3xl font-bold text-green-600"},Re={key:0,class:"mb-4 sm:mb-6"},Ve={class:"flex items-center justify-center gap-4"},Fe={class:"flex items-center gap-3"},Ne=["disabled"],Te={class:"w-12 text-center text-lg font-semibold text-gray-800"},qe=["disabled"],Le={class:"text-center mt-2"},Ue={class:"text-xs sm:text-sm text-gray-500"},We=["disabled"],ot={__name:"DetalleProducto",props:{producto:{type:Object,required:!0}},setup(M){const $=Z(),v=z(()=>$.props.auth.user),y=J(),I=oe(),B=M,D=m(!1),A=m(null),_=m(!1),P=m(null),n=m(0),b=m(null),d=m(1),s=z(()=>B.producto),E=()=>{var x;if(!((x=s.value)!=null&&x.imagenes)||s.value.imagenes.length===0)return"https://via.placeholder.com/800x500/ef4444/ffffff?text=Sin+Imagen+Disponible";const a=s.value.imagenes[n.value];return`/storage/productos/${typeof a=="string"?a:a.nombre}`},R=()=>{s.value.imagenes&&s.value.imagenes.length>1&&(n.value=n.value===0?s.value.imagenes.length-1:n.value-1,p())},V=()=>{s.value.imagenes&&s.value.imagenes.length>1&&(n.value=(n.value+1)%s.value.imagenes.length,p())},F=a=>{n.value=a,p()},p=()=>{w(),s.value.imagenes&&s.value.imagenes.length>1&&(b.value=setInterval(()=>{n.value=(n.value+1)%s.value.imagenes.length},3e3))},w=()=>{b.value&&(clearInterval(b.value),b.value=null)},N=()=>{const a=s.value.stock_actual||0;d.value<a&&d.value++},T=()=>{d.value>1&&d.value--},q=()=>{if(s.value.stock_actual<=0){y.add({severity:"warn",summary:"Sin stock",detail:`El producto "${s.value.nombre}" no está disponible`,life:3e3});return}if(!v.value){P.value=s.value,_.value=!0;return}if(v.value.roles&&Array.isArray(v.value.roles)&&v.value.roles.some(g=>g.name==="Administrador"||g.name==="Empleado")){y.add({severity:"warn",summary:"Acceso Restringido",detail:"Solo las cuentas de Cliente pueden realizar compras. Puedes ver los detalles del producto.",life:5e3});return}const a={...s.value,cantidadSeleccionada:d.value},t=I.agregarProducto(a);t.success?d.value=1:y.add({severity:"warn",summary:"Stock insuficiente",detail:t.message,life:3e3})},L=a=>{const t=a.stock_actual||0;return t===0?"text-red-600 font-bold":t<=5?"text-orange-600 font-bold":t<=15?"text-yellow-600 font-semibold":"text-green-600 font-medium"},U=()=>{ae.visit("/tienda")};return ee(()=>{p(),I.verificarEstadoAutenticacion()}),te(()=>{w()}),(a,t)=>(l(),se(W,null,{default:f(()=>[e("div",ie,[e("div",re,[e("div",ne,[c(O)]),e("nav",de,[e("ol",ce,[e("li",null,[c(u(C),{href:"/",class:"text-red-600 hover:text-red-800"},{default:f(()=>t[1]||(t[1]=[i(" Inicio ")])),_:1,__:[1]})]),t[3]||(t[3]=e("li",{class:"text-gray-500"},"/",-1)),e("li",null,[c(u(C),{href:"/tienda",class:"text-red-600 hover:text-red-800"},{default:f(()=>t[2]||(t[2]=[i(" Tienda ")])),_:1,__:[2]})]),t[4]||(t[4]=e("li",{class:"text-gray-500"},"/",-1)),e("li",ue,r(s.value.nombre),1)])]),D.value?(l(),o("div",me,t[5]||(t[5]=[e("div",{class:"flex items-center justify-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"}),e("span",{class:"ml-3 text-gray-600"},"Cargando detalles del producto...")],-1)]))):A.value?(l(),o("div",xe,[e("div",ge,[t[7]||(t[7]=e("div",{class:"text-red-600 mb-4"},[e("svg",{class:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[8]||(t[8]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Error al cargar el producto",-1)),e("p",pe,r(A.value),1),c(u(C),{href:"/tienda",class:"bg-red-600 hover:bg-red-700 px-4 py-2 text-white rounded-lg transition-colors inline-block"},{default:f(()=>t[6]||(t[6]=[i(" Volver a la tienda ")])),_:1,__:[6]})])])):s.value?(l(),o("div",ve,[e("div",{class:"relative w-full h-64 sm:h-72 md:h-80 lg:h-96 bg-gray-100 rounded-t-lg overflow-hidden flex items-center justify-center",onMouseenter:w,onMouseleave:p},[s.value.imagenes&&s.value.imagenes.length>0?(l(),o("div",be,[e("img",{src:E(),alt:s.value.nombre,class:"max-w-full max-h-full object-contain transition-opacity duration-500"},null,8,fe),s.value.imagenes.length>1?(l(),o("div",he,[e("button",{onClick:R,class:"bg-black/50 text-white hover:bg-black/70 rounded-full p-2 sm:p-3 transition-all duration-200 pointer-events-auto flex items-center justify-center"},t[9]||(t[9]=[e("i",{class:"pi pi-chevron-left text-sm sm:text-lg"},null,-1)])),e("button",{onClick:V,class:"bg-black/50 text-white hover:bg-black/70 rounded-full p-2 sm:p-3 transition-all duration-200 pointer-events-auto flex items-center justify-center"},t[10]||(t[10]=[e("i",{class:"pi pi-chevron-right text-sm sm:text-lg"},null,-1)]))])):h("",!0),s.value.imagenes.length>1?(l(),o("div",ye,[e("div",_e,[(l(!0),o(S,null,le(s.value.imagenes,(x,g)=>(l(),o("button",{key:g,onClick:Ge=>F(g),class:j(["w-3 h-3 rounded-full transition-all duration-200 hover:scale-110",n.value===g?"bg-white":"bg-white/50 hover:bg-white/70"])},null,10,we))),128))])])):h("",!0)])):(l(),o("div",ke,t[11]||(t[11]=[e("span",{class:"text-gray-500 text-lg"},"Sin imagen disponible",-1)])))],32),e("div",Ce,[e("div",Se,[e("div",je,[e("h1",Ie,r(s.value.nombre),1),e("div",Ae,[e("span",Pe,r(s.value.categoria||"Sin categoría"),1)]),e("div",ze,[e("div",Me,[t[13]||(t[13]=e("i",{class:"pi pi-tag mr-2 sm:mr-3 text-blue-600 mt-0.5 text-sm sm:text-base"},null,-1)),e("span",null,[t[12]||(t[12]=e("strong",null,"Categoría:",-1)),i(" "+r(s.value.categoria||"Sin categoría"),1)])]),e("div",$e,[t[15]||(t[15]=e("i",{class:"pi pi-box mr-2 sm:mr-3 text-blue-600 mt-0.5 text-sm sm:text-base"},null,-1)),e("span",null,[t[14]||(t[14]=e("strong",null,"Stock disponible:",-1)),e("span",{class:j(L(s.value))},r(s.value.stock_actual||0)+" unidades ",3)])]),t[16]||(t[16]=e("div",{class:"flex items-start text-gray-600 text-sm sm:text-base"},[e("i",{class:"pi pi-info-circle mr-2 sm:mr-3 text-blue-600 mt-0.5 text-sm sm:text-base"}),e("span",null,[e("strong",null,"Descripción:")])],-1)),e("div",Be,r(s.value.descripcion||"Sin descripción disponible"),1)]),e("div",De,[e("div",Ee," $"+r(parseFloat(s.value.precio||0).toFixed(2)),1),t[17]||(t[17]=e("div",{class:"text-gray-600 text-sm sm:text-base"},"Por unidad",-1))]),(s.value.stock_actual||0)>0?(l(),o("div",Re,[e("div",Ve,[t[18]||(t[18]=e("label",{class:"text-sm sm:text-base text-gray-700 font-medium"},"Cantidad:",-1)),e("div",Fe,[e("button",{onClick:T,class:"w-10 h-10 flex items-center justify-center border-2 border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:d.value<=1},[c(u(k),{icon:u(Q),class:"w-4 h-4 text-gray-600"},null,8,["icon"])],8,Ne),e("span",Te,r(d.value),1),e("button",{onClick:N,class:"w-10 h-10 flex items-center justify-center border-2 border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:d.value>=(s.value.stock_actual||0)},[c(u(k),{icon:u(X),class:"w-4 h-4 text-gray-600"},null,8,["icon"])],8,qe)])]),e("div",Le,[e("span",Ue," Máximo disponible: "+r(s.value.stock_actual||0)+" unidades ",1)])])):h("",!0),e("button",{onClick:q,disabled:(s.value.stock_actual||0)===0,class:j(["w-full font-semibold py-2 sm:py-3 px-4 sm:px-6 rounded-lg transition-colors duration-200 text-sm sm:text-base flex items-center justify-center gap-2",(s.value.stock_actual||0)===0?"bg-gray-400 text-white cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"])},[(s.value.stock_actual||0)===0?(l(),o(S,{key:0},[i(" Sin Stock Disponible ")],64)):(l(),o(S,{key:1},[c(u(k),{icon:u(Y),class:"w-4 h-4"},null,8,["icon"]),i(" Agregar "+r(d.value)+" al Carrito ",1)],64))],10,We)]),t[19]||(t[19]=e("div",{class:"order-3 xl:order-2"},[e("div",{class:"mb-4 sm:mb-6"},[e("div",{class:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 sm:p-6 border border-blue-200"},[e("h3",{class:"text-lg sm:text-xl font-semibold text-blue-900 mb-3 flex items-center"},[e("i",{class:"pi pi-shopping-cart mr-2 text-sm sm:text-base"}),i(" Información de compra ")]),e("ul",{class:"text-blue-800 space-y-2 text-sm sm:text-base"},[e("li",{class:"flex items-center"},[e("i",{class:"pi pi-check-circle mr-2 text-green-600"}),i(" Producto en stock y disponible ")]),e("li",{class:"flex items-center"},[e("i",{class:"pi pi-shield mr-2 text-green-600"}),i(" Garantía de calidad ")]),e("li",{class:"flex items-center"},[e("i",{class:"pi pi-credit-card mr-2 text-green-600"}),i(" Wompi como pasarela de pago segura ")])])])]),e("div",{class:"bg-yellow-50 rounded-lg p-3 sm:p-4 border border-yellow-200"},[e("h3",{class:"text-base sm:text-lg font-semibold text-yellow-900 mb-2"},[e("i",{class:"pi pi-exclamation-triangle mr-2 text-sm sm:text-base"}),i(" Información importante ")]),e("ul",{class:"text-yellow-800 space-y-1 text-xs sm:text-sm"},[e("li",null,"• Verificar disponibilidad antes de realizar el pedido"),e("li",null,"• Los precios pueden variar según la disponibilidad"),e("li",null,"• Producto sujeto a stock disponible"),e("li",null,"• Para pedidos especiales, contactar directamente")])])],-1))])])])):h("",!0),e("div",{class:"mt-4 sm:mt-8 text-center px-4"},[e("button",{onClick:U,class:"inline-flex items-center text-white text-sm sm:text-base py-2 sm:py-3 px-4 sm:px-6 rounded-lg transition-colors duration-200 bg-red-400 hover:bg-red-500"},t[20]||(t[20]=[e("i",{class:"pi pi-arrow-left mr-2"},null,-1),i(" Regresar a la Tienda ")]))])])]),c(u(K),{class:"z-[9999]"}),c(H,{visible:_.value,"onUpdate:visible":t[0]||(t[0]=x=>_.value=x),productoInfo:P.value},null,8,["visible","productoInfo"]),c(G)]),_:1}))}};export{ot as default};
