import{a4 as z,r as o,k as D,h as p,d,x as F,p as f,e as t,$ as S,c as C,F as R,l as T,y as w,t as x,j as k,a3 as E}from"./vendor-CqKcGHPa.js";import{A as L,s as V}from"./AuthenticatedLayout-CQ7S6qGK.js";import{z as O,A as W}from"./ui-CVJOYm3g.js";import{a2 as G}from"./index-mhZfaEHg.js";import H from"./CorporateSettings-DSYSKs9S.js";import M from"./DatabaseSettings-Cyl-FCCQ.js";import q from"./UnsavedChangesModal--p8Dtm2i.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"container mx-auto px-2 sm:px-4 py-4 sm:py-6 lg:py-8"},K={class:"bg-white rounded-lg shadow-lg overflow-hidden"},P={class:"bg-gradient-to-r from-red-600 to-red-700 px-2 sm:px-4 lg:px-6 py-2 sm:py-3 lg:py-4"},Q={class:"text-sm sm:text-lg lg:text-2xl font-bold text-white flex items-center"},X={class:"flex flex-col lg:flex-row min-h-screen"},Y={class:"w-full lg:w-72 bg-gray-50 border-b lg:border-b-0 lg:border-r border-gray-200 p-3 sm:p-4 lg:p-5"},Z={class:"flex flex-row lg:flex-col gap-2 lg:space-y-2 lg:gap-0"},ee=["onClick"],se={class:"text-lg lg:text-xl mb-1 lg:mb-0 lg:mr-3"},te={class:"flex-1"},ae={class:"font-semibold text-sm lg:text-base"},oe={class:"flex-1 p-3 sm:p-4 lg:p-5"},ge={__name:"Settings",props:{siteSettings:{type:Object,default:()=>({})},companyValues:{type:Array,default:()=>[]},databaseInfo:{type:Object,default:()=>({last_backup_formatted:"No disponible",database_size:"No disponible",status:"unknown",status_text:"Desconocido"})}},setup(y){z();const v=O(),u=y,m=o(!1),l=o("corporate"),b=o(u.companyValues),g=o(!1),r=o(!1),c=o(null),U=e=>{g.value?(c.value=e,r.value=!0):l.value=e},j=()=>{g.value=!1,r.value=!1,c.value&&(l.value=c.value,c.value=null)},A=()=>{r.value=!1,c.value=null},h=e=>{g.value=e},B=o([{id:"corporate",icon:"ðŸ¢",title:"InformaciÃ³n Corporativa",description:"Contenido empresarial"},{id:"database",icon:"ðŸ’¾",title:"Base de Datos",description:"Respaldos y mantenimiento"}]),s=o({mission:u.siteSettings.mission||"",vision:u.siteSettings.vision||"",description:u.siteSettings.description||""}),n=o({...s.value}),I=async()=>{m.value=!0;try{await E.post(V("settings.update"),{mission:s.value.mission,vision:s.value.vision,description:s.value.description},{onSuccess:e=>{n.value.mission=s.value.mission,n.value.vision=s.value.vision,n.value.description=s.value.description,v.add({severity:"success",summary:"Â¡Ã‰xito!",detail:"ConfiguraciÃ³n de la empresa actualizada correctamente",life:3e3})},onError:e=>{console.error("Error al guardar la configuraciÃ³n:",e),v.add({severity:"error",summary:"Error",detail:"Error al guardar la configuraciÃ³n",life:5e3})}})}catch(e){console.error("Error al guardar la configuraciÃ³n:",e),v.add({severity:"error",summary:"Error",detail:"Error al guardar la configuraciÃ³n",life:5e3})}finally{m.value=!1}},_=()=>{confirm("Â¿EstÃ¡ seguro de restablecer todos los cambios?")&&(s.value={...n.value})},N=()=>{E.get(V("settings"),{},{preserveState:!1,preserveScroll:!0,only:["siteSettings","companyValues"],onSuccess:e=>{s.value.mission=e.props.siteSettings.mission||"",s.value.vision=e.props.siteSettings.vision||"",s.value.description=e.props.siteSettings.description||"",n.value.mission=s.value.mission,n.value.vision=s.value.vision,n.value.description=s.value.description,b.value=e.props.companyValues},onError:e=>{console.error("âŒ Error al recargar settings:",e)}})};return(e,i)=>{const $=D("Toast");return d(),p(L,null,{default:F(()=>[f($),t("div",J,[t("div",K,[t("div",P,[t("h1",Q,[f(S(W),{icon:S(G),class:"mr-1 sm:mr-2 lg:mr-3 text-sm sm:text-base lg:text-xl"},null,8,["icon"]),i[1]||(i[1]=t("span",{class:"hidden sm:inline"},"ConfiguraciÃ³n del Sistema",-1)),i[2]||(i[2]=t("span",{class:"sm:hidden"},"ConfiguraciÃ³n del sistema",-1))]),i[3]||(i[3]=t("p",{class:"text-red-100 mt-0.5 sm:mt-1 lg:mt-2 text-xs sm:text-sm lg:text-base hidden sm:block"},"Configure los parÃ¡metros generales del sistema",-1))]),t("div",X,[t("div",Y,[t("nav",Z,[(d(!0),C(R,null,T(B.value,a=>(d(),C("button",{key:a.id,onClick:ie=>U(a.id),class:w(["flex-1 lg:w-full flex flex-col lg:flex-row items-center justify-center lg:justify-start px-3 py-3 lg:px-4 lg:py-3 text-center lg:text-left rounded-lg transition-all duration-200 font-medium",l.value===a.id?"bg-red-600 text-white shadow-md":"text-gray-700 hover:bg-red-50 hover:text-red-700 hover:shadow-sm"])},[t("span",se,x(a.icon),1),t("div",te,[t("div",ae,x(a.title),1),t("div",{class:w(["text-xs hidden lg:block mt-0.5",l.value===a.id?"text-red-100":"text-gray-500"])},x(a.description),3)])],10,ee))),128))])]),t("div",oe,[l.value==="corporate"?(d(),p(H,{key:0,settings:s.value,"company-values":b.value,"is-saving":m.value,onReset:_,onUnsavedChanges:h,onSettingsUpdated:N},null,8,["settings","company-values","is-saving"])):k("",!0),l.value==="database"?(d(),p(M,{key:1,"database-info":y.databaseInfo,"is-saving":m.value,onSave:I,onReset:_,onUnsavedChanges:h},null,8,["database-info","is-saving"])):k("",!0)])])])]),f(q,{visible:r.value,"onUpdate:visible":i[0]||(i[0]=a=>r.value=a),onContinueEditing:A,onExitWithoutSaving:j},null,8,["visible"])]),_:1})}}};export{ge as default};
