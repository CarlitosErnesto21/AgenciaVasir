import{s as b}from"./app-BWF6YGNI.js";import{E as f,c,d as l,e as o,h,$ as g}from"./vendor-CqKcGHPa.js";import"./ui-CVJOYm3g.js";const y={class:"bg-gray-50 rounded-lg shadow-xl border border-[#fbeee6] p-4 sm:p-6 mt-4 sm:mt-6"},v={class:"h-48 sm:h-64"},_={key:1,class:"flex items-center justify-center h-full"},R={__name:"GraficosSection",props:{resumenReservasData:{type:Array,required:!1,default:()=>[]},reservasData:{type:Array,required:!1,default:()=>[]}},setup(u){const i=u,m={maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Tours Más Reservados",font:{size:18}},legend:{display:!0,position:"bottom",labels:{usePointStyle:!0,color:"#374151"}},tooltip:{callbacks:{label:function(s){return`${s.label}: ${s.parsed} reservas`}}}}},d=f(()=>{const s={},t=i.resumenReservasData,n=i.reservasData;t&&t.length>0&&t.forEach(e=>{if(e.tipo==="tours"&&e.nombre){const a=(e.total_pendientes||0)+(e.total_confirmadas||0);if(a>0){const p=e.nombre.length>30?e.nombre.substring(0,27)+"...":e.nombre;s[p]=a}}}),Object.keys(s).length===0&&n&&n.length>0&&n.forEach(e=>{if(e.entidad_nombre){const a=e.entidad_nombre.length>30?e.entidad_nombre.substring(0,27)+"...":e.entidad_nombre;s[a]=(s[a]||0)+1}});let r=Object.entries(s).sort(([,e],[,a])=>a-e).slice(0,5);return r.length===0&&(r=[["Sin reservas",0]]),{labels:r.map(([e])=>e),datasets:[{label:"Tours Más Reservados",data:r.map(([,e])=>e),backgroundColor:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"]}]}});return(s,t)=>(l(),c("div",y,[t[1]||(t[1]=o("h3",{class:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4"},[o("i",{class:"pi pi-star text-yellow-500 mr-2"}),o("span",{class:"hidden sm:inline"},"Top 5 Tours Más Reservados"),o("span",{class:"sm:hidden"},"Top Tours")],-1)),o("div",v,[d.value?(l(),h(g(b),{key:0,type:"doughnut",data:d.value,options:m,class:"w-full h-full"},null,8,["data"])):(l(),c("div",_,t[0]||(t[0]=[o("p",{class:"text-gray-500 text-xs sm:text-sm"},"No hay reservas registradas",-1)])))])]))}};export{R as default};
