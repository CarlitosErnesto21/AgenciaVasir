import{_ as Q}from"./Catalogo-FUr85EO0.js";import Y from"./ModalReservaTour-Y2TM0PiJ.js";import Z from"./ModalAuthRequerido-ChE5jSPm.js";import{a4 as ee,E as z,r as y,o as te,a6 as se,k as le,h as oe,d as o,x as S,e,p as x,c as n,j as A,$ as g,a1 as M,y as v,q as d,t as r,F as w,l as k,a3 as ne}from"./vendor-CqKcGHPa.js";import{z as ae,A as $}from"./ui-CVJOYm3g.js";import{av as ie,am as re,u as ue}from"./index-3QIPUEnJ.js";import"./carrito-BeQIbo0h.js";import"./app-Myg8lxFC.js";import"./ResumenTour-CO5hrD8z.js";import"./FormularioDatosPersonales-Ch0kcR_y.js";import"./vue-tel-input-J95PmLrS.js";import"./SelectorCupos-BBMvtogU.js";const de={class:"min-h-screen bg-gray-50 py-4 sm:py-8 mt-32"},me={class:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8"},ce={class:"mb-4 sm:mb-8"},pe={class:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm"},xe={class:"text-gray-900 font-medium truncate"},ge={key:0,class:"bg-white rounded-lg shadow-lg overflow-hidden p-8"},ve={class:"flex items-center justify-center"},be={key:1,class:"bg-white rounded-lg shadow-lg overflow-hidden p-8"},fe={class:"text-center"},ye={class:"text-gray-600 mb-4"},he={key:2,class:"bg-white rounded-lg shadow-lg overflow-hidden"},_e={key:0,class:"relative w-full h-full flex items-center justify-center"},we=["src","alt"],ke={key:0,class:"absolute inset-0 flex items-center justify-between p-2 sm:p-4 pointer-events-none"},Ce={key:1,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10"},Te={class:"flex space-x-2"},Ie=["onClick"],je={key:1,class:"w-full h-full bg-gray-300 flex items-center justify-center rounded-t-lg"},Ae={class:"p-4 sm:p-6 md:p-8"},Re={class:"grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8"},De={class:"order-2 xl:order-1"},Ne={class:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-3 sm:mb-4"},Se={class:"mb-4 sm:mb-6"},$e={class:"inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-blue-100 text-blue-800"},Ee={class:"space-y-3 sm:space-y-4 mb-4 sm:mb-6"},Le={class:"flex items-start text-gray-600 text-sm sm:text-base"},qe={class:"flex items-start text-gray-600 text-sm sm:text-base"},ze={class:"flex items-start text-gray-600 text-sm sm:text-base"},Me={class:"flex items-start text-gray-600 text-sm sm:text-base"},Fe={key:0,class:"flex items-start text-gray-600 text-sm sm:text-base"},Ue={class:"flex items-start text-gray-600 text-sm sm:text-base"},Be={class:"mb-4 sm:mb-6 order-1 xl:order-none"},Oe={class:"text-2xl sm:text-3xl font-bold text-red-600"},Pe=["disabled"],Ve={class:"order-3 xl:order-2"},Ge={class:"mb-4 sm:mb-6"},We={class:"sm:hidden"},Xe={class:"grid grid-cols-2 gap-2"},He={class:"bg-green-50 rounded-lg p-2"},Je={key:0,class:"space-y-1"},Ke={key:1,class:"text-gray-500 text-xs italic"},Qe={class:"bg-red-50 rounded-lg p-2"},Ye={key:0,class:"space-y-1"},Ze={key:1,class:"text-gray-500 text-xs italic"},et={class:"hidden sm:block"},tt={class:"mb-4 sm:mb-6"},st={class:"bg-green-50 rounded-lg p-3 sm:p-4"},lt={key:0,class:"space-y-2"},ot={key:1,class:"text-gray-500 text-sm sm:text-base italic"},nt={class:"mb-4 sm:mb-6"},at={class:"bg-red-50 rounded-lg p-3 sm:p-4"},it={key:0,class:"space-y-2"},rt={key:1,class:"text-gray-500 text-sm sm:text-base italic"},ut={class:"px-6 pb-6"},dt={class:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 sm:p-6 border border-blue-200 shadow-sm"},mt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ct={class:"p-3 bg-white/70 rounded-lg border-l-4 border-green-500"},pt={class:"font-semibold text-green-800 mb-2 text-sm flex items-center"},xt={class:"mr-1"},gt={class:"p-3 bg-white/70 rounded-lg border-l-4 border-blue-500"},vt={class:"font-semibold text-blue-800 mb-2 text-sm flex items-center"},bt={class:"mr-1"},ft={class:"p-3 bg-white/70 rounded-lg border-l-4 border-orange-500"},yt={class:"font-semibold text-orange-800 mb-2 text-sm flex items-center"},ht={class:"mr-1"},_t={class:"mt-4 sm:mt-8 text-center px-4"},wt="/api/tours",Lt={__name:"DetalleTour",props:{tour:{type:Object,required:!0},tipo:{type:String,required:!0,validator:m=>["nacional","internacional"].includes(m)}},setup(m){const F=ee(),h=z(()=>F.props.auth.user),E=ae(),C=y(!1),R=y(!1),b=m,f=y({}),T=y(!0),I=y(null),c=y(0),j=y(null),s=z(()=>Object.keys(f.value).length>0?f.value:b.tour),L=async()=>{var l;if(!((l=b.tour)!=null&&l.id)){T.value=!1;return}try{T.value=!0,I.value=null;const t=b.tour.id,u=`${wt}/${t}`,a=await fetch(u,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});if(!a.ok)throw new Error(`Error ${a.status}: ${a.statusText}`);const i=await a.json();(i.cupos_disponibles===void 0||i.cupos_disponibles===null)&&(i.cupos_disponibles=i.cupo_max||0),f.value=i}catch(t){console.error("Error al obtener el tour:",t),I.value=t.message,f.value=b.tour||{}}finally{T.value=!1}},q=l=>l?new Date(l).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"",U=(l,t)=>{if(!l||!t)return"1 día";const u=new Date(l),i=new Date(t).getTime()-u.getTime();if(i<=0)return"1 día";const N=Math.ceil(i/(1e3*60*60*24));return N===1?"1 día":`${N} días`},p=l=>l?l.split("|").filter(t=>t.trim()).map(t=>t.trim()):[],B=()=>{var u;if(!((u=s.value)!=null&&u.imagenes)||s.value.imagenes.length===0)return"https://via.placeholder.com/800x500/2563eb/ffffff?text=Sin+Imagen+Disponible";const l=s.value.imagenes[c.value];return`/storage/tours/${typeof l=="string"?l:l.nombre}`},O=()=>{s.value.imagenes&&s.value.imagenes.length>1&&(c.value=c.value===0?s.value.imagenes.length-1:c.value-1,_())},P=()=>{s.value.imagenes&&s.value.imagenes.length>1&&(c.value=(c.value+1)%s.value.imagenes.length,_())},V=l=>{c.value=l,_()},_=()=>{D(),s.value.imagenes&&s.value.imagenes.length>1&&(j.value=setInterval(()=>{c.value=(c.value+1)%s.value.imagenes.length},3e3))},D=()=>{j.value&&(clearInterval(j.value),j.value=null)},G=()=>{if(!h.value)R.value=!0;else{if(h.value.roles&&Array.isArray(h.value.roles)&&h.value.roles.some(t=>t.name==="Administrador"||t.name==="Empleado")){E.add({severity:"warn",summary:"Acceso Restringido",detail:"Solo las cuentas de Cliente pueden realizar reservas. Los detalles del tour están disponibles para consulta.",life:5e3});return}C.value=!0}},W=l=>{E.add({severity:"success",summary:"Reserva Confirmada",detail:"Tu reserva ha sido registrada. Te contactaremos pronto.",life:5e3}),C.value=!1},X=l=>{const{tourId:t,cuposDisponibles:u}=l;f.value.id===t&&(f.value.cupos_disponibles=u)},H=async()=>{var l;if((l=b.tour)!=null&&l.id)try{const t=b.tour.id,u=await fetch(`/api/tours/${t}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(u.ok){const a=await u.json();f.value=a}}catch(t){console.error("Error al refrescar tour:",t)}};te(async()=>{await L(),_()}),se(()=>{D()});const J=l=>{const t=l.cupos_disponibles!==null&&l.cupos_disponibles!==void 0?l.cupos_disponibles:0,u=l.cupo_max||1,a=t/u*100;return t===0?"text-red-600 font-bold":a<=20?"text-orange-600 font-bold":a<=50?"text-yellow-600 font-semibold":"text-green-600 font-medium"},K=()=>{const l=b.tipo==="nacional"?"/tours-nacionales":"/tours-internacionales";ne.visit(l)};return(l,t)=>{const u=le("Toast");return o(),oe(Q,null,{default:S(()=>[e("div",de,[e("div",me,[e("nav",ce,[e("ol",pe,[e("li",null,[x(g(M),{href:"/",class:v(m.tipo==="nacional"?"text-red-600 hover:text-red-800":"text-blue-600 hover:text-blue-800")},{default:S(()=>t[2]||(t[2]=[d(" Inicio ")])),_:1,__:[2]},8,["class"])]),t[3]||(t[3]=e("li",{class:"text-gray-500"},"/",-1)),e("li",null,[x(g(M),{href:m.tipo==="nacional"?"/tours-nacionales":"/tours-internacionales",class:v(m.tipo==="nacional"?"text-red-600 hover:text-red-800":"text-blue-600 hover:text-blue-800")},{default:S(()=>[d(r(m.tipo==="nacional"?"Tours Nacionales":"Tours Internacionales"),1)]),_:1},8,["href","class"])]),t[4]||(t[4]=e("li",{class:"text-gray-500"},"/",-1)),e("li",xe,r(s.value.nombre),1)])]),T.value?(o(),n("div",ge,[e("div",ve,[e("div",{class:v(["animate-spin rounded-full h-12 w-12 border-b-2",m.tipo==="nacional"?"border-red-600":"border-blue-600"])},null,2),t[5]||(t[5]=e("span",{class:"ml-3 text-gray-600"},"Cargando detalles del tour...",-1))])])):I.value?(o(),n("div",be,[e("div",fe,[t[6]||(t[6]=e("div",{class:"text-red-600 mb-4"},[e("svg",{class:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Error al cargar el tour",-1)),e("p",ye,r(I.value),1),e("button",{onClick:L,class:v([m.tipo==="nacional"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700","px-4 py-2 text-white rounded-lg transition-colors"])}," Reintentar ",2)])])):s.value?(o(),n("div",he,[e("div",{class:"relative w-full h-64 sm:h-72 md:h-80 lg:h-96 bg-gray-100 rounded-t-lg overflow-hidden flex items-center justify-center",onMouseenter:D,onMouseleave:_},[s.value.imagenes&&s.value.imagenes.length>0?(o(),n("div",_e,[e("img",{src:B(),alt:s.value.nombre,class:"max-w-full max-h-full object-contain transition-opacity duration-500"},null,8,we),s.value.imagenes.length>1?(o(),n("div",ke,[e("button",{onClick:O,class:"bg-black/50 text-white hover:bg-black/70 rounded-full p-2 sm:p-3 transition-all duration-200 pointer-events-auto flex items-center justify-center"},t[8]||(t[8]=[e("i",{class:"pi pi-chevron-left text-sm sm:text-lg"},null,-1)])),e("button",{onClick:P,class:"bg-black/50 text-white hover:bg-black/70 rounded-full p-2 sm:p-3 transition-all duration-200 pointer-events-auto flex items-center justify-center"},t[9]||(t[9]=[e("i",{class:"pi pi-chevron-right text-sm sm:text-lg"},null,-1)]))])):A("",!0),s.value.imagenes.length>1?(o(),n("div",Ce,[e("div",Te,[(o(!0),n(w,null,k(s.value.imagenes,(a,i)=>(o(),n("button",{key:i,onClick:N=>V(i),class:v(["w-3 h-3 rounded-full transition-all duration-200 hover:scale-110",c.value===i?"bg-white":"bg-white/50 hover:bg-white/70"])},null,10,Ie))),128))])])):A("",!0)])):(o(),n("div",je,t[10]||(t[10]=[e("span",{class:"text-gray-500 text-lg"},"Sin imagen disponible",-1)])))],32),e("div",Ae,[e("div",Re,[e("div",De,[e("h1",Ne,r(s.value.nombre),1),e("div",Se,[e("span",$e,r(s.value.categoria==="NACIONAL"?"Nacional":s.value.categoria==="INTERNACIONAL"?"Internacional":"Categoría no asignada"),1)]),e("div",Ee,[e("div",Le,[t[12]||(t[12]=e("i",{class:"pi pi-calendar mr-2 sm:mr-3 text-blue-600 mt-0.5 text-sm sm:text-base"},null,-1)),e("span",null,[t[11]||(t[11]=e("strong",null,"Fecha de salida:",-1)),d(" "+r(q(s.value.fecha_salida)),1)])]),e("div",qe,[t[14]||(t[14]=e("i",{class:"pi pi-calendar mr-2 sm:mr-3 text-blue-600 mt-0.5 text-sm sm:text-base"},null,-1)),e("span",null,[t[13]||(t[13]=e("strong",null,"Fecha de regreso:",-1)),d(" "+r(q(s.value.fecha_regreso)),1)])]),e("div",ze,[t[16]||(t[16]=e("i",{class:"pi pi-clock mr-2 sm:mr-3 text-blue-600 mt-0.5 text-sm sm:text-base"},null,-1)),e("span",null,[t[15]||(t[15]=e("strong",null,"Duración:",-1)),d(" "+r(U(s.value.fecha_salida,s.value.fecha_regreso)),1)])]),e("div",Me,[t[18]||(t[18]=e("i",{class:"pi pi-map-marker mr-2 sm:mr-3 text-blue-600 mt-0.5 text-sm sm:text-base"},null,-1)),e("span",null,[t[17]||(t[17]=e("strong",null,"Punto de salida:",-1)),d(" "+r(s.value.punto_salida),1)])]),s.value.transporte?(o(),n("div",Fe,[t[20]||(t[20]=e("i",{class:"pi pi-car mr-2 sm:mr-3 text-blue-600 mt-0.5 text-sm sm:text-base"},null,-1)),e("span",null,[t[19]||(t[19]=e("strong",null,"Transporte:",-1)),d(" "+r(s.value.transporte.nombre),1)])])):A("",!0),e("div",Ue,[t[22]||(t[22]=e("i",{class:"pi pi-users mr-2 sm:mr-3 text-blue-600 mt-0.5 text-sm sm:text-base"},null,-1)),e("span",null,[t[21]||(t[21]=e("strong",null,"Cupos disponibles: ",-1)),e("span",{class:v(J(s.value))},r(s.value.cupos_disponibles!==null&&s.value.cupos_disponibles!==void 0?s.value.cupos_disponibles:0)+" cupos ",3)])])]),e("div",Be,[e("div",Oe," $"+r(parseFloat(s.value.precio).toLocaleString("en-US",{minimumFractionDigits:2})),1),t[23]||(t[23]=e("div",{class:"text-gray-600 text-sm sm:text-base"},"Por persona",-1))]),e("button",{onClick:G,disabled:(s.value.cupos_disponibles!==null&&s.value.cupos_disponibles!==void 0?s.value.cupos_disponibles:0)===0,class:v(["w-full font-semibold py-2 sm:py-3 px-4 sm:px-6 rounded-lg transition-colors duration-200 text-sm sm:text-base",(s.value.cupos_disponibles!==null&&s.value.cupos_disponibles!==void 0?s.value.cupos_disponibles:0)===0?"bg-gray-400 text-white cursor-not-allowed":m.tipo==="nacional"?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"])},r((s.value.cupos_disponibles!==null&&s.value.cupos_disponibles!==void 0?s.value.cupos_disponibles:0)===0?"Sin Cupos Disponibles":"Reservar Tour"),11,Pe)]),e("div",Ve,[e("div",Ge,[e("div",We,[e("div",Xe,[e("div",null,[t[25]||(t[25]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2 flex items-center"},[e("i",{class:"pi pi-check-circle mr-1 text-green-600 text-xs"}),e("span",{class:"truncate"},"Lo que incluye")],-1)),e("div",He,[p(s.value.incluye).length>0?(o(),n("ul",Je,[(o(!0),n(w,null,k(p(s.value.incluye),(a,i)=>(o(),n("li",{key:i,class:"text-gray-700 text-xs leading-tight flex items-start"},[t[24]||(t[24]=e("span",{class:"text-green-600 mr-1 mt-0.5 text-xs"},"▶",-1)),e("span",null,r(a),1)]))),128))])):(o(),n("p",Ke,"No hay información disponible"))])]),e("div",null,[t[27]||(t[27]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2 flex items-center"},[e("i",{class:"pi pi-times-circle mr-1 text-red-600 text-xs"}),e("span",{class:"truncate"},"No incluye")],-1)),e("div",Qe,[p(s.value.no_incluye).length>0?(o(),n("ul",Ye,[(o(!0),n(w,null,k(p(s.value.no_incluye),(a,i)=>(o(),n("li",{key:i,class:"text-gray-700 text-xs leading-tight flex items-start"},[t[26]||(t[26]=e("span",{class:"text-red-600 mr-1 mt-0.5 text-xs"},"▶",-1)),e("span",null,r(a),1)]))),128))])):(o(),n("p",Ze,"No hay información disponible"))])])])]),e("div",et,[e("div",tt,[t[29]||(t[29]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 mb-2 sm:mb-3 flex items-center"},[e("i",{class:"pi pi-check-circle mr-2 text-green-600 text-sm sm:text-base"}),d(" Lo que incluye ")],-1)),e("div",st,[p(s.value.incluye).length>0?(o(),n("ul",lt,[(o(!0),n(w,null,k(p(s.value.incluye),(a,i)=>(o(),n("li",{key:i,class:"text-gray-700 text-sm sm:text-base flex items-start"},[t[28]||(t[28]=e("span",{class:"text-green-600 mr-2 mt-1 text-sm"},"▶",-1)),e("span",null,r(a),1)]))),128))])):(o(),n("p",ot,"No hay información disponible"))])]),e("div",nt,[t[31]||(t[31]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 mb-2 sm:mb-3 flex items-center"},[e("i",{class:"pi pi-times-circle mr-2 text-red-600 text-sm sm:text-base"}),d(" Lo que NO incluye ")],-1)),e("div",at,[p(s.value.no_incluye).length>0?(o(),n("ul",it,[(o(!0),n(w,null,k(p(s.value.no_incluye),(a,i)=>(o(),n("li",{key:i,class:"text-gray-700 text-sm sm:text-base flex items-start"},[t[30]||(t[30]=e("span",{class:"text-red-600 mr-2 mt-1 text-sm"},"▶",-1)),e("span",null,r(a),1)]))),128))])):(o(),n("p",rt,"No hay información disponible"))])])])])])])]),e("div",ut,[e("div",dt,[t[38]||(t[38]=e("h3",{class:"text-lg sm:text-xl font-bold text-blue-900 mb-4 flex items-center"},[e("i",{class:"pi pi-info-circle mr-3 text-blue-600 text-lg"}),d(" Información Importante ")],-1)),e("div",mt,[e("div",ct,[e("h4",pt,[e("span",xt,[x(g($),{icon:g(ie),class:"text-green-500 mr-1"},null,8,["icon"])]),t[32]||(t[32]=d(" Nuestras Acreditaciones "))]),t[33]||(t[33]=e("div",{class:"space-y-1 text-green-700 text-xs"},[e("p",null,"• Somos una marca registrada ®️"),e("p",null,"• Somos una Agencia respaldada por el MITUR y CORSATUR"),e("p",null,"• Poseemos Sello de Verificación de Protocolos de Bioseguridad")],-1))]),e("div",gt,[e("h4",vt,[e("span",bt,[x(g($),{icon:g(re),class:"text-blue-500 mr-1"},null,8,["icon"])]),t[34]||(t[34]=d(" Términos de Reserva "))]),t[35]||(t[35]=e("div",{class:"space-y-1 text-blue-700 text-xs"},[e("p",null,"• Tours sujetos a completar cupo mínimo"),e("p",null,"• Reservás tu cupo con el 50% y el resto el día del tour")],-1))]),e("div",ft,[e("h4",yt,[e("span",ht,[x(g($),{icon:g(ue),class:"text-orange-500 mr-1"},null,8,["icon"])]),t[36]||(t[36]=d(" Políticas de Cancelación "))]),t[37]||(t[37]=e("div",{class:"space-y-1 text-orange-700 text-xs"},[e("p",{class:"font-medium text-green-600"},"• Si por cualquier motivo como organizadores cancelamos el tour, te devolvemos el total de tu dinero"),e("p",{class:"font-medium text-red-600"},"• Si no asistís en la fecha y hora indicada no hay devolución de tu reserva"),e("p",{class:"font-medium text-red-600"},"• Para cancelaciones con menos de 72 horas antes del tour, no hay devolución de tu reserva")],-1))])])])])])):A("",!0),e("div",_t,[e("button",{onClick:K,class:v(["inline-flex items-center text-white text-sm sm:text-base py-2 sm:py-3 px-4 sm:px-6 rounded-lg transition-colors duration-200",m.tipo==="nacional"?"bg-red-400 hover:bg-red-500":"bg-blue-400 hover:bg-blue-500"])},t[39]||(t[39]=[e("i",{class:"pi pi-arrow-left mr-2"},null,-1),d(" Regresar a Tours ")]),2)])])]),x(u),x(Y,{visible:C.value,"onUpdate:visible":t[0]||(t[0]=a=>C.value=a),"tour-seleccionado":s.value,user:h.value,onConfirmarReserva:W,onActualizarCupos:X,onRefrescarTour:H},null,8,["visible","tour-seleccionado","user"]),x(Z,{visible:R.value,"onUpdate:visible":t[1]||(t[1]=a=>R.value=a),"tour-info":s.value},null,8,["visible","tour-info"])]),_:1})}}};export{Lt as default};
