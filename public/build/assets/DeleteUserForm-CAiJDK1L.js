import{c as t,d as o,f as j,y as C,r as h,w as W,o as L,a6 as q,E as N,e,p as m,x as y,v as A,C as V,B as U,j as T,_ as K,$ as d,F as c,q as u,t as w,D as R,n as H}from"./vendor-gbh1WW5n.js";import{_ as G,a as Y,b as Z}from"./TextInput-D8O_0gxS.js";import{z as J,F as $}from"./ui-BrU4k96Z.js";import{i as B}from"./index-CxdKLTk2.js";const Q=["disabled"],F={__name:"DangerButton",props:{disabled:{type:Boolean,default:!1}},setup(n){return(p,s)=>(o(),t("button",{disabled:n.disabled,class:C(["inline-flex items-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out",n.disabled?"opacity-50 cursor-not-allowed bg-red-300 hover:bg-red-300 active:bg-red-300":"hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 active:bg-red-700"])},[j(p.$slots,"default")],10,Q))}},X={class:"fixed inset-0 z-50 overflow-y-auto px-4 py-6 sm:px-0","scroll-region":""},ee={__name:"Modal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0}},emits:["close"],setup(n,{emit:p}){const s=n,_=p,f=h(),v=h(s.show);W(()=>s.show,()=>{var r;s.show?(document.body.style.overflow="hidden",v.value=!0,(r=f.value)==null||r.showModal()):(document.body.style.overflow="",setTimeout(()=>{var g;(g=f.value)==null||g.close(),v.value=!1},200))});const k=()=>{s.closeable&&_("close")},l=r=>{r.key==="Escape"&&(r.preventDefault(),s.show&&k())};L(()=>document.addEventListener("keydown",l)),q(()=>{document.removeEventListener("keydown",l),document.body.style.overflow=""});const b=N(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[s.maxWidth]);return(r,g)=>(o(),t("dialog",{class:"z-50 m-0 min-h-full min-w-full overflow-y-auto bg-transparent backdrop:bg-transparent",ref_key:"dialog",ref:f},[e("div",X,[m(U,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[A(e("div",{class:"fixed inset-0 transform transition-all",onClick:k},g[0]||(g[0]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)]),512),[[V,n.show]])]),_:1}),m(U,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:y(()=>[A(e("div",{class:C(["mb-6 transform overflow-hidden rounded-lg bg-white shadow-xl transition-all sm:mx-auto sm:w-full",b.value])},[v.value?j(r.$slots,"default",{key:0}):T("",!0)],2),[[V,n.show]])]),_:3})])],512))}},se=["type"],te={__name:"SecondaryButton",props:{type:{type:String,default:"button"}},setup(n){return(p,s)=>(o(),t("button",{type:n.type,class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-xs font-semibold uppercase tracking-widest text-gray-700 shadow-sm transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25"},[j(p.$slots,"default")],8,se))}},oe={class:"bg-white/90 rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 md:p-8"},ae={class:"bg-red-50 border border-red-200 rounded-xl p-4 sm:p-5 mb-8 shadow-sm"},re={class:"flex flex-col sm:flex-row sm:items-start gap-3"},ne={class:"flex-shrink-0 flex justify-center sm:block mb-2 sm:mb-0"},le={class:"bg-red-100 rounded-full p-2 mx-auto"},ie={class:"flex-1"},de={class:"text-red-800 text-sm leading-relaxed mb-3"},ce={class:"bg-white bg-opacity-60 rounded-md p-3 border-l-2 border-red-500"},ue={class:"text-red-900 font-medium text-xs"},me={key:0,class:"block mt-2 text-xs text-red-600 font-medium"},fe={class:"flex justify-center mt-2"},pe={class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ve={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},xe={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},be={class:"bg-white rounded-2xl shadow-xl w-full max-w-md mx-auto"},ge={class:"bg-red-600 rounded-t-2xl px-4 sm:px-8 py-6"},he={class:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4"},we={class:"flex-shrink-0 w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto sm:mx-0"},ye={class:"text-center sm:text-left"},_e={class:"text-2xl font-bold text-white"},ke={class:"text-red-100 text-base"},Ee={class:"p-4 sm:p-8"},Se={class:"bg-red-50 border-l-4 border-red-400 p-4 sm:p-5 mb-8 rounded-xl shadow-sm"},Ce={class:"flex flex-col sm:flex-row sm:items-start gap-3"},Me={class:"flex-shrink-0 flex justify-center sm:block mb-2 sm:mb-0"},$e={class:"text-red-800 text-base leading-relaxed"},Be={class:"space-y-5"},Ie={class:"relative"},Te={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},je={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},De={class:"flex flex-col sm:flex-row justify-end gap-3 pt-8 border-t border-gray-100 mt-8"},I="account_deletion_cooldown",Fe={__name:"DeleteUserForm",props:{disabled:{type:Boolean,default:!1},rol:{type:String,default:""}},setup(n){const p=n,s=N(()=>p.rol==="Cliente"),_=h(!1),f=h(null),v=h(!1),k=J(),l=h(!1),b=h(0);let r=null;const g=()=>{const x=Date.now()+3e5;localStorage.setItem(I,x.toString()),l.value=!0,M()},M=()=>{const x=localStorage.getItem(I);if(!x){l.value=!1,b.value=0;return}const a=Math.max(0,Math.ceil((parseInt(x)-Date.now())/1e3));if(a<=0){localStorage.removeItem(I),l.value=!1,b.value=0,r&&(clearInterval(r),r=null);return}l.value=!0,b.value=a,r||(r=setInterval(()=>{M()},1e3))},O=()=>{M()},D=x=>{const a=Math.floor(x/60),S=x%60;return`${a}m ${S.toString().padStart(2,"0")}s`},i=K({password:""}),P=()=>{p.disabled||s.value&&l.value||(_.value=!0,H(()=>f.value&&f.value.focus()))},z=()=>{p.disabled||(s.value?i.post(route("profile.request-deletion"),{preserveScroll:!0,onSuccess:()=>{E(),k.add({severity:"success",summary:"Solicitud Enviada",detail:"Tu solicitud de eliminación ha sido enviada al equipo de la Agencia VASIR. Recibirás una respuesta pronto.",life:6e3}),g()},onError:()=>{f.value&&f.value.focus(),k.add({severity:"error",summary:"Error",detail:"Error al enviar la solicitud. Por favor, intenta de nuevo.",life:4e3})},onFinish:()=>i.reset()}):i.delete(route("profile.destroy"),{preserveScroll:!0,onSuccess:()=>E(),onError:()=>f.value&&f.value.focus(),onFinish:()=>i.reset()}))},E=()=>{_.value=!1,i.clearErrors(),i.reset()};return L(()=>{O()}),q(()=>{r&&(clearInterval(r),r=null)}),(x,a)=>(o(),t("section",oe,[e("div",ae,[e("div",re,[e("div",ne,[e("div",le,[m(d($),{icon:d(B),class:"w-5 h-5 text-red-600"},null,8,["icon"])])]),e("div",ie,[a[3]||(a[3]=e("h3",{class:"text-sm font-semibold text-red-900 mb-2"},"Zona de Peligro",-1)),e("p",de,[s.value?(o(),t(c,{key:0},[u(" Esta es irreversible. Al enviar la solicitud de eliminación, se notificará a nuestro equipo para que procese la eliminación de tu cuenta. ")],64)):(o(),t(c,{key:1},[u(" Una vez eliminada tu cuenta, todos los recursos y datos serán eliminados permanentemente. ")],64))]),e("div",ce,[e("p",ue,[n.disabled?(o(),t(c,{key:0},[n.rol==="Administrador"?(o(),t(c,{key:0},[u(" Para eliminar tu cuenta, por favor ponte en contacto con soporte. Siendo Administrador no puedes eliminar tu cuenta directamente desde esta interfaz por fines de seguridad. ")],64)):n.rol==="Empleado"?(o(),t(c,{key:1},[u(" Para eliminar tu cuenta, por favor ponte en contacto con el Administrador de tu empresa. ")],64)):T("",!0)],64)):(o(),t(c,{key:1},[s.value?(o(),t(c,{key:0},[a[2]||(a[2]=u(" Nuestro equipo revisará tu solicitud y te contactará si es necesario. ")),l.value?(o(),t("span",me," Debes esperar "+w(D(b.value))+" antes de enviar otra solicitud. ",1)):T("",!0)],64)):(o(),t(c,{key:1},[u(" Esta acción no se puede deshacer. Todos tus datos se perderán permanentemente. ")],64))],64))])])])])]),e("div",fe,[m(F,{onClick:P,disabled:p.disabled||s.value&&l.value,class:C(["inline-flex items-center px-6 sm:px-7 py-3 text-white text-base font-semibold rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors shadow-md w-full sm:w-auto",l.value&&s.value?"bg-gray-500 cursor-not-allowed":"bg-red-600 hover:bg-red-700","disabled:opacity-50 disabled:cursor-not-allowed"])},{default:y(()=>[l.value&&s.value?(o(),t(c,{key:0},[a[4]||(a[4]=e("svg",{class:"w-5 h-5 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"})],-1)),u(" Esperar "+w(D(b.value)),1)],64)):(o(),t(c,{key:1},[(o(),t("svg",pe,[s.value?(o(),t("path",xe)):(o(),t("path",ve))])),u(" "+w(s.value?"Enviar Solicitud de Eliminación":"Eliminar Mi Cuenta"),1)],64))]),_:1},8,["disabled","class"])]),m(ee,{show:_.value,onClose:E},{default:y(()=>[e("div",be,[e("div",ge,[e("div",he,[e("div",we,[m(d($),{icon:d(B),class:"w-6 h-6 text-white"},null,8,["icon"])]),e("div",ye,[e("h2",_e,w(s.value?"Solicitar Eliminación":"Confirmar Eliminación"),1),e("p",ke,w(s.value?"Enviar solicitud al administrador":"Esta acción es irreversible"),1)])])]),e("div",Ee,[e("div",Se,[e("div",Ce,[e("div",Me,[m(d($),{icon:d(B),class:"w-5 h-5 text-red-500 mt-0.5"},null,8,["icon"])]),e("div",null,[e("p",$e,[s.value?(o(),t(c,{key:0},[u(" Se enviará una solicitud al administrador para eliminar tu cuenta. Una vez procesada, todos tus recursos y datos serán eliminados permanentemente. Ingresa tu contraseña para confirmar el envío de la solicitud. ")],64)):(o(),t(c,{key:1},[u(" Una vez eliminada tu cuenta, todos los recursos y datos serán eliminados permanentemente. Ingresa tu contraseña para confirmar esta acción. ")],64))])])])]),e("div",Be,[m(G,{for:"password",value:"Confirma con tu contraseña:",class:"text-gray-700 font-semibold text-base"}),e("div",Ie,[m(Y,{id:"password",ref_key:"passwordInput",ref:f,modelValue:d(i).password,"onUpdate:modelValue":a[0]||(a[0]=S=>d(i).password=S),type:v.value?"text":"password",class:"w-full border border-red-300 rounded-xl px-4 py-3 pr-12 text-gray-900 text-base shadow-sm focus:border-red-500 focus:ring-2 focus:ring-red-100 hover:border-red-400 transition-colors bg-red-50 focus:bg-white placeholder-gray-500",placeholder:"Tu contraseña actual",onKeyup:R(z,["enter"])},null,8,["modelValue","type"]),e("button",{type:"button",onClick:a[1]||(a[1]=S=>v.value=!v.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-red-400 hover:text-red-600 transition-colors"},[v.value?(o(),t("svg",je,a[6]||(a[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},null,-1)]))):(o(),t("svg",Te,a[5]||(a[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])]),m(Z,{message:d(i).errors.password,class:"text-red-600 text-sm"},null,8,["message"])]),e("div",De,[m(te,{onClick:E,class:"px-5 py-2.5 bg-gray-100 text-gray-700 text-base font-semibold rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition-colors border border-gray-300 w-full sm:w-auto"},{default:y(()=>a[7]||(a[7]=[u(" Cancelar ")])),_:1,__:[7]}),m(F,{class:C([{"opacity-50":d(i).processing},"px-5 py-2.5 bg-red-600 text-white text-base font-semibold rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-md transition-colors w-full sm:w-auto"]),disabled:d(i).processing,onClick:z},{default:y(()=>[u(w(d(i).processing?s.value?"Enviando solicitud...":"Eliminando...":s.value?"Sí, Enviar Solicitud":"Sí, Eliminar"),1)]),_:1},8,["class","disabled"])])])])]),_:1},8,["show"])]))}};export{Fe as default};
