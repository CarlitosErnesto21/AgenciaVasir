import{s as p}from"./app-B0ws2w9U.js";import{E as f,c,d as n,a1 as h,e as u,h as g,$ as x}from"./vendor-gbh1WW5n.js";import"./ui-BrU4k96Z.js";const v={class:"bg-gray-50 rounded-lg shadow-xl border border-[#fbeee6] p-4 sm:p-6 mt-4 sm:mt-6"},y={class:"h-48 sm:h-64"},_={key:1,class:"flex items-center justify-center h-full"},C={__name:"GraficosSection",props:{resumenReservasData:{type:Array,required:!1,default:()=>[]},reservasData:{type:Array,required:!1,default:()=>[]}},setup(m){const l=m,b={maintainAspectRatio:!1,responsive:!0,plugins:{title:{display:!0,text:"Tours Más Reservados",font:{size:18}},legend:{display:!0,position:"bottom",labels:{usePointStyle:!0,color:"#374151",padding:10,font:{size:function(s){return window.innerWidth<640?10:12}},generateLabels:function(s){const t=s.data;return t.labels.length&&t.datasets.length?t.labels.map((r,a)=>{const e=t.datasets[0],o=e.data[a];return{text:`${window.innerWidth<640&&r.length>20?r.substring(0,17)+"...":r} (${o})`,fillStyle:e.backgroundColor[a],strokeStyle:e.borderColor?e.borderColor[a]:e.backgroundColor[a],lineWidth:e.borderWidth||0,hidden:!1,index:a}}):[]}}},tooltip:{callbacks:{label:function(s){return`${s.label}: ${s.parsed} reservas`}}}}},i=f(()=>{const s={},t=l.resumenReservasData,r=l.reservasData;t&&t.length>0&&t.forEach(e=>{if(e.tipo==="tours"&&e.nombre){const o=(e.total_pendientes||0)+(e.total_confirmadas||0);if(o>0){const d=e.nombre.length>30?e.nombre.substring(0,27)+"...":e.nombre;s[d]=o}}}),Object.keys(s).length===0&&r&&r.length>0&&r.forEach(e=>{if(e.entidad_nombre){const o=e.entidad_nombre.length>30?e.entidad_nombre.substring(0,27)+"...":e.entidad_nombre;s[o]=(s[o]||0)+1}});let a=Object.entries(s).sort(([,e],[,o])=>o-e).slice(0,5);return a.length===0&&(a=[["Sin reservas",0]]),{labels:a.map(([e])=>e),datasets:[{label:"Tours Más Reservados",data:a.map(([,e])=>e),backgroundColor:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"]}]}});return(s,t)=>(n(),c("div",v,[t[1]||(t[1]=h('<h3 class="text-base sm:text-lg font-semibold text-gray-900 mb-2 sm:mb-3"><i class="pi pi-star text-yellow-500 mr-2"></i><span class="hidden sm:inline">Top 5 Tours Más Reservados</span><span class="sm:hidden">Top Tours</span></h3><div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3 sm:mb-4"><div class="flex items-start space-x-2"><i class="pi pi-info-circle text-blue-500 text-sm mt-0.5 flex-shrink-0"></i><div class="text-xs sm:text-sm text-blue-700"><p class="font-medium mb-1">Mostrando tours finalizados de los últimos 6 meses</p><p class="text-blue-600">Se actualiza automáticamente según la fecha actual. Solo incluye tours completados ordenados por cantidad de reservas.</p></div></div></div>',2)),u("div",y,[i.value?(n(),g(x(p),{key:0,type:"doughnut",data:i.value,options:b,class:"w-full h-full"},null,8,["data"])):(n(),c("div",_,t[0]||(t[0]=[u("p",{class:"text-gray-500 text-xs sm:text-sm"},"No hay reservas registradas",-1)])))])]))}};export{C as default};
