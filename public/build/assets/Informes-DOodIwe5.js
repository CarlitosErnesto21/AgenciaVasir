import{r as f,p as U,i as D,f as p,o as b,a as c,u as a,g as $,w as B,b as o,z as L,h as T,j as S,G as V,a2 as k,n as z,e as A,F as E}from"./app-DP8tsAem.js";import{_ as H}from"./logo-DN1bLr27.js";import{_ as P}from"./AuthenticatedLayout-BvfF3yw2.js";import"./index-ClJ1gEnJ.js";const G={class:"min-h-[70vh] flex flex-col lg:flex-row items-start justify-center py-10 bg-gray-50 gap-8"},J={class:"bg-white rounded-xl shadow-2xl border border-blue-100 px-8 py-10 max-w-lg w-full flex flex-col items-center sticky top-8 self-start"},R={class:"w-full flex items-center mb-3 gap-3"},Y={class:"w-full mb-5"},q={class:"w-full flex items-center mb-5 gap-3"},O={class:"w-full mb-4 flex flex-col sm:flex-row gap-4"},W={class:"flex-1"},X={class:"flex-1"},K={class:"w-full flex flex-row gap-3 mb-4 justify-center"},Q=["disabled"],Z={key:0,class:"w-full mt-4 flex flex-col items-center lg:hidden"},ee=["src"],oe={class:"flex-1 flex flex-col items-center min-w-[400px] max-w-[900px] w-full"},se={key:0,class:"w-full flex flex-col items-center"},le=["src"],te={key:1,class:"w-full h-[700px] flex items-center justify-center border-2 border-dashed border-gray-300 rounded-lg bg-white"},ue={__name:"Informes",setup(ae){const g={firstDayOfWeek:1,dayNames:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],dayNamesShort:["dom","lun","mar","mié","jue","vie","sáb"],dayNamesMin:["D","L","M","X","J","V","S"],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],today:"Hoy",clear:"Limpiar"};function _(){const l=[],e=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];let s=new Date(2022,0,1);const n=new Date;for(;s<=n;){const i=`${s.getFullYear()}-${(s.getMonth()+1).toString().padStart(2,"0")}`,C=`${e[s.getMonth()]} ${s.getFullYear()}`;l.push({value:i,label:C}),s.setMonth(s.getMonth()+1)}return l}const x=_(),r=f(null),d=f(null),h=new Date,t=f("unico"),u=f(null),m=f(null),F=U(),I=new Date(2019,2,1),w=l=>l?`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}`:"",M=D(()=>{if(!r.value||!d.value)return[];const l=w(r.value),e=w(d.value),s=x.findIndex(i=>i.value===l),n=x.findIndex(i=>i.value===e);return s===-1||n===-1||s>n?[]:x.slice(s,n+1).map(i=>i.value)}),y=D(()=>t.value==="unico"?!!u.value:!!(r.value&&d.value&&M.value.length));function v(l,e,s,n=3500){F.add({severity:l,summary:e,detail:s,life:n})}function j(){let l=new URLSearchParams,e=[];if(t.value==="unico"){if(!u.value){v("error","Error","Seleccione un mes para generar el informe.");return}e=[w(u.value)]}else{if(!y.value){v("error","Error","Seleccione un rango válido de meses para generar el informe.");return}e=M.value}e.forEach(s=>l.append("meses[]",s)),v("info","Generando informe","",2e3),m.value=`/descargar-informe?${l.toString()}`,setTimeout(()=>{v("success","Vista previa lista","",2500)},1200)}function N(){u.value=null,r.value=null,d.value=null,m.value=null}return(l,e)=>(b(),p(E,null,[c(a($),{title:"Informe de Tours"}),c(P,null,{default:B(()=>[c(a(L)),o("div",G,[o("div",J,[e[11]||(e[11]=o("img",{src:H,alt:"Logo VASIR",class:"w-32 h-auto mb-6 drop-shadow-lg",loading:"lazy"},null,-1)),e[12]||(e[12]=o("div",{class:"flex items-center gap-3 mb-3"},[o("svg",{class:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 17v-2a4 4 0 014-4h6M9 17v2a4 4 0 004 4h6M9 17H5a2 2 0 01-2-2V7a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-4"})]),o("h1",{class:"text-2xl font-extrabold text-gray-800 tracking-tight"},"Informe de Cupos Vendidos Mensuales por Tour")],-1)),e[13]||(e[13]=o("p",{class:"text-gray-600 mb-5 text-center text-base"}," Seleccione el rango de meses o un solo mes para generar el informe PDF. ",-1)),o("div",R,[S(o("input",{id:"radio-mes-unico",type:"radio","onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s),value:"unico",class:"mr-2 accent-blue-600"},null,512),[[V,t.value]]),e[5]||(e[5]=o("label",{for:"radio-mes-unico",class:"font-semibold text-gray-700 cursor-pointer select-none mr-2"}," Seleccionar un solo mes ",-1)),o("button",{onClick:N,class:"px-4 py-1 bg-gray-200 text-gray-700 rounded-lg shadow hover:bg-gray-300 transition font-semibold text-sm border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-200"}," Limpiar fechas ")]),o("div",Y,[e[6]||(e[6]=o("label",{for:"mes-unico-picker",class:"block mb-2 font-semibold text-gray-700"},"Mes único:",-1)),c(a(k),{id:"mes-unico-picker",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),view:"month",dateFormat:"MM yy",showIcon:"",class:"w-full",placeholder:"Seleccione un mes",manualInput:!1,maxDate:a(h),minDate:a(I),locale:g,disabled:t.value!=="unico"},null,8,["modelValue","maxDate","minDate","disabled"])]),o("div",q,[S(o("input",{id:"radio-activar-fechas",type:"radio","onUpdate:modelValue":e[2]||(e[2]=s=>t.value=s),value:"rango",class:"mr-2 accent-blue-600"},null,512),[[V,t.value]]),e[7]||(e[7]=o("label",{for:"radio-activar-fechas",class:"font-semibold text-gray-700 cursor-pointer select-none mr-2"}," Activar selección de meses ",-1))]),o("div",O,[o("div",W,[e[8]||(e[8]=o("label",{for:"desde-picker",class:"block mb-2 font-semibold text-gray-700"},"Desde:",-1)),c(a(k),{id:"desde-picker",modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=s=>r.value=s),view:"month",dateFormat:"MM yy",showIcon:"",class:"w-full",placeholder:"Seleccione mes",manualInput:!1,maxDate:a(h),locale:g,disabled:t.value!=="rango"},null,8,["modelValue","maxDate","disabled"])]),o("div",X,[e[9]||(e[9]=o("label",{for:"hasta-picker",class:"block mb-2 font-semibold text-gray-700"},"Hasta:",-1)),c(a(k),{id:"hasta-picker",modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s),view:"month",dateFormat:"MM yy",showIcon:"",class:"w-full",placeholder:"Seleccione mes",manualInput:!1,maxDate:a(h),minDate:r.value,locale:g,disabled:t.value!=="rango"},null,8,["modelValue","maxDate","minDate","disabled"])])]),o("div",K,[o("button",{onClick:j,class:z(["bg-gradient-to-r from-red-800 to-red-500 flex items-center gap-2 px-7 py-2 text-white rounded-lg shadow-lg hover:from-red-900 hover:to-red-600 transition font-semibold text-base border border-red-800 focus:outline-none focus:ring-2 focus:ring-red-400",{"opacity-60 cursor-not-allowed":!y.value}]),disabled:!y.value},e[10]||(e[10]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1),A(" Vista previa PDF ")]),10,Q)]),m.value?(b(),p("div",Z,[o("iframe",{src:m.value,width:"100%",height:"500",class:"border rounded shadow",style:{"min-height":"350px","max-width":"800px"}},null,8,ee)])):T("",!0)]),o("div",oe,[m.value?(b(),p("div",se,[o("iframe",{src:m.value,width:"100%",height:"700",class:"border rounded shadow",style:{"min-height":"500px","max-width":"900px"}},null,8,le)])):(b(),p("div",te,e[14]||(e[14]=[o("div",{class:"text-center px-6"},[o("svg",{class:"mx-auto mb-4 w-16 h-16 text-gray-300",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})]),o("div",{class:"text-lg font-semibold text-gray-500 mb-2"},"Aquí se mostrará la vista previa del PDF"),o("div",{class:"text-gray-400 text-sm"},"Genera un informe para ver la vista previa aquí.")],-1)])))])])]),_:1})],64))}};export{ue as default};
