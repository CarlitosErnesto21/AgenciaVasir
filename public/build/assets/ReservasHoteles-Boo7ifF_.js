import{r as c,E as V,o as se,h as L,d as R,x as m,p as n,e,c as q,j as N,$ as t,a0 as te,y as G,t as l,q as u,I as ae,N as le}from"./vendor-CaDzpwPW.js";import{A as oe}from"./AuthenticatedLayout-DP4XRzmf.js";import{z as ne,F as de,a as re,A as d,e as ie,f as h,h as ce}from"./ui-BjYE_i4I.js";import{f as P,A as ue,z as y,C as H,D as Z,t as me,E as U,q as xe,w as ge,e as K,y as fe,g as be,B as pe}from"./index-DIJG4gfJ.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";const he={class:"container mx-auto px-4 py-6"},ye={class:"bg-white rounded-lg shadow-md"},_e={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},we={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},Ce=["disabled"],Ae={class:"block sm:hidden"},Re={class:"hidden sm:block"},ke={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},Ne={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},De={class:"flex items-center gap-3"},Fe={class:"text-base font-medium text-gray-800 flex items-center gap-2"},Ee={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},Ie=["disabled"],Le=["disabled"],Pe={class:"space-y-3"},He={class:"flex flex-col"},ze={class:"font-medium text-gray-900 text-sm"},Te={class:"text-xs text-gray-500 hidden sm:block"},Me={class:"flex flex-col"},je={class:"font-medium text-gray-900 text-sm"},Se={class:"text-xs text-gray-500"},$e={class:"flex flex-col text-xs"},Be={class:"text-green-600 font-medium"},Oe={class:"text-red-600 font-medium"},Ve={class:"text-xs text-blue-600 font-bold"},qe={class:"flex flex-col text-xs"},Ge={class:"text-blue-600"},Ze={class:"text-green-600"},Ue={class:"font-bold text-green-600"},Ke={class:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 rounded-t-xl"},We={class:"flex items-center justify-between text-white"},Xe={class:"text-xl font-bold flex items-center gap-3"},Je={key:0,class:"p-6"},Qe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},Ye={class:"bg-gray-50 p-4 rounded-lg"},es={class:"font-bold text-lg text-gray-800 mb-3 flex items-center gap-2"},ss={class:"space-y-2 text-sm"},ts={class:"ml-2 text-gray-900"},as={class:"ml-2 text-gray-900"},ls={class:"ml-2 text-gray-900"},os={class:"ml-2 text-gray-900"},ns={class:"bg-gray-50 p-4 rounded-lg"},ds={class:"font-bold text-lg text-gray-800 mb-3 flex items-center gap-2"},rs={class:"space-y-2 text-sm"},is={class:"ml-2 text-gray-900"},cs={class:"ml-2 text-gray-900"},us={class:"bg-blue-50 p-4 rounded-lg mb-6"},ms={class:"font-bold text-lg text-gray-800 mb-3 flex items-center gap-2"},xs={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm"},gs={class:"text-center p-3 bg-white rounded-lg shadow-sm"},fs={class:"text-lg font-bold text-gray-900"},bs={class:"text-center p-3 bg-white rounded-lg shadow-sm"},ps={class:"text-lg font-bold text-gray-900"},vs={class:"text-center p-3 bg-white rounded-lg shadow-sm"},hs={class:"text-lg font-bold text-gray-900"},ys={class:"text-center p-3 bg-white rounded-lg shadow-sm"},_s={class:"text-lg font-bold text-gray-900"},ws={class:"bg-yellow-50 p-4 rounded-lg"},Cs={class:"font-bold text-lg text-gray-800 mb-3 flex items-center gap-2"},As={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Rs={class:"ml-2 text-gray-900 font-bold"},ks={class:"ml-2 text-red-600 font-bold"},Ns={class:"bg-gray-50 px-6 py-4 rounded-b-xl flex justify-end"},Ds={__name:"ReservasHoteles",setup(Fs){const D=ne(),F=c([]),z=c(!1);c({busqueda:"",fechaDesde:null,fechaHasta:null,estadoReserva:""});const _=c(!1),r=c(null),b=c(!1),x=c(!1),E=c(10),W=c([5,10,20,50]),w=c({global:{value:null,matchMode:de.CONTAINS}}),X=[{label:"Pendientes",value:"PENDIENTE",severity:"warn",color:"bg-yellow-100 text-yellow-800",icon:fe},{label:"Confirmadas",value:"CONFIRMADA",severity:"success",color:"bg-green-100 text-green-800",icon:K},{label:"Rechazadas",value:"RECHAZADA",severity:"danger",color:"bg-red-100 text-red-800",icon:be},{label:"Reprogramadas",value:"REPROGRAMADA",severity:"info",color:"bg-blue-100 text-blue-800",icon:y},{label:"Finalizadas",value:"FINALIZADA",severity:"secondary",color:"bg-gray-100 text-gray-800",icon:pe}];V(()=>{const a={pendientes:0,confirmadas:0,rechazadas:0,reprogramadas:0,finalizadas:0,totalIngresos:0};return F.value.forEach(s=>{switch(s.estado){case"PENDIENTE":a.pendientes++;break;case"CONFIRMADA":a.confirmadas++,a.totalIngresos+=parseFloat(s.total||0);break;case"RECHAZADA":a.rechazadas++;break;case"REPROGRAMADA":a.reprogramadas++;break;case"FINALIZADA":a.finalizadas++,a.totalIngresos+=parseFloat(s.total||0);break}}),a});const I=V(()=>{let a=F.value;if(w.value.global.value){const s=w.value.global.value.toLowerCase();a=a.filter(i=>{var v,p,C,A;return(((v=i.cliente)==null?void 0:v.nombres)||"").toLowerCase().includes(s)||(((p=i.hotel)==null?void 0:p.nombre)||"").toLowerCase().includes(s)||(((C=i.cliente)==null?void 0:C.correo)||"").toLowerCase().includes(s)||(((A=i.id)==null?void 0:A.toString())||"").includes(s)})}return a}),T=async()=>{try{z.value=!0;const a=await le.get("/api/reservas-hoteles");F.value=a.data.data||a.data.reservas||a.data||[]}catch(a){console.error("Error al cargar reservas de hoteles:",a),D.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las reservas de hoteles",life:5e3})}finally{z.value=!1}},J=async()=>{b.value=!0,await T(),b.value=!1,D.add({severity:"success",summary:"Datos actualizados",detail:"Las reservas de hoteles han sido recargadas",life:3e3})},Q=a=>{r.value=a,_.value=!0},k=a=>a?new Date(a).toLocaleDateString("es-ES"):"",M=(a,s)=>{if(!a||!s)return 0;const i=new Date(a),p=new Date(s).getTime()-i.getTime();return Math.ceil(p/(1e3*3600*24))},j=()=>{x.value=!0,w.value.global.value=null,setTimeout(()=>{x.value=!1,D.add({severity:"success",summary:"Filtro limpiado",detail:"Se ha limpiado el filtro de b칰squeda",life:3e3})},500)},Y=a=>{const s=X.find(i=>i.value===a);return(s==null?void 0:s.color)||"bg-gray-100 text-gray-800"},ee=a=>{Q(a.data)};return se(()=>{T()}),(a,s)=>(R(),L(oe,null,{default:m(()=>{var i,v,p,C,A,S,$,B;return[n(t(te),{title:"Reservas de Hoteles"}),n(t(re),{class:"z-[9999]"}),e("div",he,[s[8]||(s[8]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Gesti칩n de Reservas de Hoteles"),e("p",{class:"text-gray-600"},"Administra todas las reservas de hoteles del sistema")],-1)),e("div",ye,[e("div",_e,[s[6]||(s[6]=e("div",null,[e("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Reservas de Hoteles"),e("p",{class:"text-gray-500 text-sm text-center sm:text-start mt-1"}," 游낃 Gestiona las reservas de hoteles organizadas por estado "),e("p",{class:"text-blue-600 text-xs text-center sm:text-start mt-1 font-medium"}," 游녡 Haz clic en cualquier fila para ver los detalles de la reserva ")],-1)),e("div",we,[e("button",{onClick:J,disabled:b.value,class:"bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 flex items-center gap-2"},[n(t(d),{icon:b.value?t(P):t(ue),class:G({"animate-spin":b.value,"h-4":!0})},null,8,["icon","class"]),e("span",Ae,l(b.value?"Cargando...":"Recargar"),1),e("span",Re,l(b.value?"Recargando...":"Recargar datos"),1)],8,Ce)])]),n(t(ie),{value:I.value,dataKey:"id",paginator:!0,rows:E.value,rowsPerPageOptions:W.value,rowsPerPage:E.value,"onUpdate:rowsPerPage":s[1]||(s[1]=o=>E.value=o),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} reservas",class:"overflow-x-auto max-w-full cursor-pointer",responsiveLayout:"scroll",onRowClick:ee,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:m(()=>[e("div",ke,[e("div",Ne,[e("div",De,[e("h3",Fe,[n(t(d),{icon:t(me),class:"text-blue-600 text-sm"},null,8,["icon"]),s[7]||(s[7]=e("span",null,"Filtros",-1))]),e("div",Ee,l(I.value.length)+" resultado"+l(I.value.length!==1?"s":""),1),e("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:j,disabled:x.value},[x.value?(R(),L(t(d),{key:0,icon:t(P),class:"animate-spin h-3 w-3"},null,8,["icon"])):N("",!0),e("span",null,l(x.value?"Limp...":"Limpiar"),1)],8,Ie)]),e("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:j,disabled:x.value},[x.value?(R(),L(t(d),{key:0,icon:t(P),class:"animate-spin h-3 w-3"},null,8,["icon"])):N("",!0),e("span",null,l(x.value?"Limpiando...":"Limpiar b칰squeda"),1)],8,Le)]),e("div",Pe,[e("div",null,[n(t(ce),{modelValue:w.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=o=>w.value.global.value=o),placeholder:"游댌 Buscar reservas...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])])])])]),default:m(()=>[n(t(h),{field:"cliente.nombres",header:"Cliente",sortable:"",class:"w-52"},{body:m(o=>{var g,f;return[e("div",He,[e("span",ze,l(((g=o.data.cliente)==null?void 0:g.nombres)||"N/A"),1),e("span",Te,l(((f=o.data.cliente)==null?void 0:f.correo)||"N/A"),1)])]}),_:1}),n(t(h),{field:"hotel.nombre",header:"Hotel",sortable:"",headerClass:"w-44 hidden-sm",bodyClass:"hidden-sm"},{body:m(o=>{var g,f;return[e("div",Me,[e("span",je,l(((g=o.data.hotel)==null?void 0:g.nombre)||"N/A"),1),e("span",Se,l(((f=o.data.hotel)==null?void 0:f.direccion)||"N/A"),1)])]}),_:1}),n(t(h),{header:"Fechas",headerClass:"w-36 hidden-md",bodyClass:"hidden-md"},{body:m(o=>[e("div",$e,[e("span",Be,[n(t(d),{icon:t(y),class:"mr-1"},null,8,["icon"]),u(" "+l(k(o.data.fecha_entrada)),1)]),e("span",Oe,[n(t(d),{icon:t(y),class:"mr-1"},null,8,["icon"]),u(" "+l(k(o.data.fecha_salida)),1)]),e("span",Ve,l(M(o.data.fecha_entrada,o.data.fecha_salida))+" d칤as ",1)])]),_:1}),n(t(h),{header:"Detalles",headerClass:"w-32 hidden-lg",bodyClass:"hidden-lg"},{body:m(o=>{var g,f,O;return[e("div",qe,[e("span",Ge,[n(t(d),{icon:t(H),class:"mr-1"},null,8,["icon"]),u(" "+l(((g=o.data.detalles)==null?void 0:g.cantidad_personas)||o.data.mayores_edad)+" persona"+l((((f=o.data.detalles)==null?void 0:f.cantidad_personas)||o.data.mayores_edad)!==1?"s":""),1)]),e("span",Ze,[n(t(d),{icon:t(Z),class:"mr-1"},null,8,["icon"]),u(" "+l(((O=o.data.detalles)==null?void 0:O.cantidad_habitaciones)||"N/A")+" hab. ",1)])])]}),_:1}),n(t(h),{field:"estado",header:"Estado",sortable:"",class:"w-32"},{body:m(o=>[e("span",{class:G(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Y(o.data.estado)])},l(o.data.estado),3)]),_:1}),n(t(h),{header:"Total",headerClass:"w-24 hidden-sm",bodyClass:"hidden-sm"},{body:m(o=>[e("span",Ue," $"+l(parseFloat(o.data.total||0).toFixed(2)),1)]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"])])]),_.value?(R(),q("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s[5]||(s[5]=o=>_.value=!1)},[e("div",{class:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:s[4]||(s[4]=ae(()=>{},["stop"]))},[e("div",Ke,[e("div",We,[e("h3",Xe,[n(t(d),{icon:t(U),class:"text-2xl"},null,8,["icon"]),s[9]||(s[9]=u(" Detalles de Reserva de Hotel "))]),e("button",{onClick:s[2]||(s[2]=o=>_.value=!1),class:"hover:bg-white hover:bg-opacity-20 p-2 rounded-full transition-all"},[n(t(d),{icon:t(xe),class:"text-xl"},null,8,["icon"])])])]),r.value?(R(),q("div",Je,[e("div",Qe,[e("div",Ye,[e("h4",es,[n(t(d),{icon:t(H),class:"text-blue-600"},null,8,["icon"]),s[10]||(s[10]=u(" Informaci칩n del Cliente "))]),e("div",ss,[e("div",null,[s[11]||(s[11]=e("span",{class:"font-medium text-gray-600"},"Nombre:",-1)),e("span",ts,l(((i=r.value.cliente)==null?void 0:i.nombres)||"N/A"),1)]),e("div",null,[s[12]||(s[12]=e("span",{class:"font-medium text-gray-600"},"Email:",-1)),e("span",as,l(((v=r.value.cliente)==null?void 0:v.correo)||"N/A"),1)]),e("div",null,[s[13]||(s[13]=e("span",{class:"font-medium text-gray-600"},"Tel칠fono:",-1)),e("span",ls,l(((p=r.value.cliente)==null?void 0:p.telefono)||"N/A"),1)]),e("div",null,[s[14]||(s[14]=e("span",{class:"font-medium text-gray-600"},"Identificaci칩n:",-1)),e("span",os,l(((C=r.value.cliente)==null?void 0:C.numero_identificacion)||"N/A"),1)])])]),e("div",ns,[e("h4",ds,[n(t(d),{icon:t(U),class:"text-green-600"},null,8,["icon"]),s[15]||(s[15]=u(" Informaci칩n del Hotel "))]),e("div",rs,[e("div",null,[s[16]||(s[16]=e("span",{class:"font-medium text-gray-600"},"Hotel:",-1)),e("span",is,l(((A=r.value.hotel)==null?void 0:A.nombre)||"N/A"),1)]),e("div",null,[s[17]||(s[17]=e("span",{class:"font-medium text-gray-600"},"Direcci칩n:",-1)),e("span",cs,l(((S=r.value.hotel)==null?void 0:S.direccion)||"N/A"),1)])])])]),e("div",us,[e("h4",ms,[n(t(d),{icon:t(y),class:"text-purple-600"},null,8,["icon"]),s[18]||(s[18]=u(" Detalles de la Reserva "))]),e("div",xs,[e("div",gs,[n(t(d),{icon:t(y),class:"text-green-600 text-2xl mb-2"},null,8,["icon"]),s[19]||(s[19]=e("p",{class:"font-medium text-gray-600"},"Fecha Entrada",-1)),e("p",fs,l(k(r.value.fecha_entrada)),1)]),e("div",bs,[n(t(d),{icon:t(y),class:"text-red-600 text-2xl mb-2"},null,8,["icon"]),s[20]||(s[20]=e("p",{class:"font-medium text-gray-600"},"Fecha Salida",-1)),e("p",ps,l(k(r.value.fecha_salida)),1)]),e("div",vs,[n(t(d),{icon:t(H),class:"text-blue-600 text-2xl mb-2"},null,8,["icon"]),s[21]||(s[21]=e("p",{class:"font-medium text-gray-600"},"Personas",-1)),e("p",hs,l((($=r.value.detalles)==null?void 0:$.cantidad_personas)||r.value.mayores_edad||"N/A"),1)]),e("div",ys,[n(t(d),{icon:t(Z),class:"text-purple-600 text-2xl mb-2"},null,8,["icon"]),s[22]||(s[22]=e("p",{class:"font-medium text-gray-600"},"Habitaciones",-1)),e("p",_s,l(((B=r.value.detalles)==null?void 0:B.cantidad_habitaciones)||"N/A"),1)])])]),e("div",ws,[e("h4",Cs,[n(t(d),{icon:t(ge),class:"text-yellow-600"},null,8,["icon"]),s[23]||(s[23]=u(" Informaci칩n Adicional "))]),e("div",As,[e("div",null,[s[24]||(s[24]=e("span",{class:"font-medium text-gray-600"},"D칤as de estad칤a:",-1)),e("span",Rs,l(M(r.value.fecha_entrada,r.value.fecha_salida))+" d칤as ",1)]),e("div",null,[s[25]||(s[25]=e("span",{class:"font-medium text-gray-600"},"ID de Reserva:",-1)),e("span",ks,"#"+l(r.value.id),1)])])])])):N("",!0),e("div",Ns,[e("button",{onClick:s[3]||(s[3]=o=>_.value=!1),class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 font-medium"},[n(t(d),{icon:t(K)},null,8,["icon"]),s[26]||(s[26]=u(" Cerrar "))])])])])):N("",!0)]}),_:1}))}},zs=ve(Ds,[["__scopeId","data-v-70aa9073"]]);export{zs as default};
