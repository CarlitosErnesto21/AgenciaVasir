import{d as _}from"./app-BYiN5B7a.js";import{r as l,a4 as E,E as r}from"./vendor-DcS5GX9S.js";const V=_("carrito",()=>{const a=l([]),n=l(!1),d=E(),u=r(()=>a.value.reduce((e,t)=>e+t.cantidad,0)),m=r(()=>a.value.reduce((e,t)=>e+t.precio*t.cantidad,0)),f=r(()=>a.value.length===0),v=e=>{const t=a.value.find(i=>i.id===e.id);t?t.cantidad+=1:a.value.push({id:e.id,nombre:e.nombre,precio:e.precio,imagen:e.imagen,stock_actual:e.stock_actual,cantidad:1})},s=e=>{const t=a.value.findIndex(i=>i.id===e);t>-1&&a.value.splice(t,1)},g=(e,t)=>{const i=a.value.find(y=>y.id===e);i&&(t<=0?s(e):t<=i.stock_actual&&(i.cantidad=t))},p=e=>{const t=a.value.find(i=>i.id===e);t&&t.cantidad<t.stock_actual&&(t.cantidad+=1)},C=e=>{const t=a.value.find(i=>i.id===e);t&&(t.cantidad<=1?s(e):t.cantidad-=1)},h=()=>{a.value=[]},c=()=>{a.value=[],n.value=!1},I=()=>{var i;const e=(i=d.props.auth)==null?void 0:i.user,t=a.value.length>0;!e&&t&&c()},b=()=>{n.value=!n.value},k=()=>{n.value=!0},x=()=>{n.value=!1},o=e=>a.value.find(t=>t.id===e);return{items:a,isVisible:n,itemCount:u,totalPrice:m,isEmpty:f,agregarProducto:v,eliminarProducto:s,actualizarCantidad:g,incrementarCantidad:p,decrementarCantidad:C,limpiarCarrito:h,limpiarCarritoAlCerrarSesion:c,toggleVisibility:b,mostrarCarrito:k,ocultarCarrito:x,getItem:o,hasItem:e=>a.value.some(t=>t.id===e),getItemQuantity:e=>{const t=o(e);return t?t.cantidad:0},verificarEstadoAutenticacion:I}});export{V as u};
