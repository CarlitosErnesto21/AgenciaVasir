import{N as V,r as i,E as Z,w as Pe,n as Y,o as ia,k as O,h as de,d as c,x as y,p as n,e as l,$ as r,a0 as ra,a1 as De,y as x,t as u,j as b,v as Le,c as p,F as ue,l as ce,a7 as Ee,A as na,q as P}from"./vendor-CaDzpwPW.js";import{A as da}from"./AuthenticatedLayout-DP4XRzmf.js";import{z as ua,F as ve,a as ca,A as k,o as me}from"./ui-BjYE_i4I.js";import{f as S,j as va,k as ma,b as Ve,l as pa,c as ga,d as fa,e as ba,g as ha}from"./index-DIJG4gfJ.js";import ya from"./Modales-CXGSIJN3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const xa={class:"container mx-auto px-4 py-6"},wa={class:"bg-white rounded-lg shadow-md"},_a={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},Ca={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},ka={class:"block sm:hidden"},Pa={class:"hidden sm:block"},Da={class:"block sm:hidden"},La={class:"hidden sm:block"},Ea={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},Va={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},Aa={class:"flex items-center gap-3"},Ta={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},Ia=["disabled"],Sa=["disabled"],Na={class:"space-y-3"},Ua={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-3"},Fa=["value"],Ma=["value"],Ha=["title"],za=["title"],$a={class:"text-sm leading-relaxed"},ja={class:"text-sm leading-relaxed"},qa={class:"flex gap-2 justify-center items-center"},Ba=["onClick"],Ga=["onClick"],Oa=["onClick"],Ra={class:"space-y-4"},Wa={class:"w-full flex flex-col"},Ja={class:"flex items-center gap-4"},Qa={key:0,class:"text-red-500 ml-28"},Ka={key:1,class:"text-orange-500 ml-28"},Xa={key:2,class:"text-red-500 ml-28"},Za={class:"w-full flex flex-col"},Ya={class:"flex items-start gap-4"},el={key:0,class:"text-red-500 ml-28"},al={key:1,class:"text-orange-500 ml-28"},ll={key:2,class:"text-red-500 ml-28"},sl={class:"w-full flex flex-col"},tl={class:"flex items-start gap-4"},ol={key:0,class:"text-red-500 ml-28"},il={key:1,class:"text-orange-500 ml-28"},rl={key:2,class:"text-red-500 ml-28"},nl={class:"w-full flex flex-col"},dl={class:"flex items-center gap-4 sm:gap-5"},ul={key:0,class:"text-red-500 ml-28"},cl={class:"w-full flex flex-col"},vl={class:"flex items-center gap-4 sm:gap-5"},ml={key:0,class:"text-red-500 ml-28"},pl={class:"w-full flex flex-col"},gl={class:"flex items-center gap-4 sm:gap-5"},fl={key:0,class:"text-red-500 ml-28"},bl={class:"w-full flex flex-col"},hl={class:"flex items-center gap-4"},yl={class:"flex-1"},xl={class:"flex items-center gap-3 mb-2"},wl=["disabled"],_l={class:"flex items-center gap-2"},Cl={key:0,class:"text-red-500 ml-28"},kl={class:"grid grid-cols-3 ml-2 sm:ml-5 gap-y-2"},Pl=["src"],Dl=["onClick"],Ll={class:"flex justify-center gap-4 w-full mt-6"},El=["disabled"],Vl={key:0},Al={key:1},Tl=["disabled"],ee="/api/hoteles",pe="/storage/hoteles/",$l={__name:"Hoteles",setup(Il){V.defaults.withCredentials=!0;const d=ua(),ge=i([]),a=i({id:null,nombre:"",direccion:"",descripcion:"",estado:"",provincia:null,categoria:null,imagenes:[]}),g=i([]),j=i([]),ae=i([]),q=i([]),A=i(!1),N=i(!1),R=i(!1),B=i(!1),f=i(!1),T=i(!1),D=i(null),W=i(!1),le=i(!1),L=i(null),U=i(!1),F=i(!1),se=i(!1),E=i(!1),M=i(!1),H=i(!1),I=i(!1);i(!0);const fe=i([]),J=i([]),te=i([]),z=i(""),$=i(""),w=i({global:{value:null,matchMode:ve.CONTAINS},provincia:{value:null,matchMode:ve.EQUALS},estado:{value:null,matchMode:ve.EQUALS}}),oe=i([{label:"Activo",value:"activo"},{label:"Inactivo",value:"inactivo"}]),ie=i(10),Ae=i([5,10,20,50]),G=i("Guardar"),re=i(0),be=i(null),ne=Z(()=>{let s=ge.value;if(w.value.global.value){const e=w.value.global.value.toLowerCase();s=s.filter(o=>{var m,v;return o.nombre.toLowerCase().includes(e)||o.direccion&&o.direccion.toLowerCase().includes(e)||o.descripcion&&o.descripcion.toLowerCase().includes(e)||((m=o.categoria_hotel)==null?void 0:m.nombre)&&o.categoria_hotel.nombre.toLowerCase().includes(e)||((v=o.provincia)==null?void 0:v.nombre)&&o.provincia.nombre.toLowerCase().includes(e)})}return w.value.provincia.value&&(s=s.filter(e=>e.provincia_id==w.value.provincia.value)),w.value.estado.value&&(s=s.filter(e=>e.estado===w.value.estado.value)),s}),he=Z(()=>g.value.length<5),Te=Z(()=>M.value?"Cargando...":H.value?"Abriendo...":he.value?"Seleccionar":"L√≠mite alcanzado"),ye=i(typeof window<"u"?window.innerWidth:1024),xe=Z(()=>ye.value<640?{width:"95vw",maxWidth:"380px"}:ye.value<768?{width:"400px"}:{width:"450px"});Pe([a,g,q],()=>{D.value&&A.value&&Y(()=>{const s={...a.value,imagenes_actuales:[...g.value]},e=JSON.stringify(s)!==JSON.stringify({...D.value,imagenes_actuales:D.value.imagenes_originales})||q.value.length>0,o=!D.value.id,m=a.value.nombre||a.value.direccion||a.value.descripcion||a.value.estado||a.value.provincia||a.value.categoria||g.value.length>0;T.value=e||o&&m})},{deep:!0,flush:"post"});function Q(){a.value={id:null,nombre:"",direccion:"",descripcion:"",estado:"",provincia:null,categoria:null,imagenes:[]},g.value=[],j.value=[],q.value=[],f.value=!1}const Ie=async()=>{try{d.add({severity:"info",summary:"Cargando datos...",life:2e3}),await Promise.all([X(),Se(),Ne(),we()]),d.add({severity:"success",summary:"Datos cargados",life:2e3})}catch{}},K=()=>{Y(()=>{setTimeout(()=>{document.querySelectorAll(".p-select").forEach(e=>{const o=e.querySelector(".p-select-label, .p-placeholder");o&&(o.style.overflow="hidden",o.style.textOverflow="ellipsis",o.style.whiteSpace="nowrap",o.style.maxWidth="calc(100% - 2.5rem)",o.style.display="block")})},100)})};ia(()=>{Ie(),Ue(),K()});const X=async()=>{try{const s=await V.get(ee);ge.value=(s.data.data||s.data||[]).map(e=>({...e,imagenes:(e.imagenes||[]).map(o=>typeof o=="string"?o:o.nombre)})).sort((e,o)=>{const m=new Date(e.created_at);return new Date(o.created_at)-m})}catch{d.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los hoteles",life:4e3})}},Se=async()=>{try{const s=await V.get("/api/paises");fe.value=s.data.data||s.data||[]}catch{fe.value=[],d.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los pa√≠ses",life:4e3})}},Ne=async()=>{try{const s=await V.get("/api/provincias");J.value=s.data.data||s.data||[]}catch{J.value=[],d.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las provincias",life:4e3})}},we=async()=>{try{const s=await V.get("/api/categorias-hoteles");te.value=s.data.data||s.data||[]}catch{te.value=[],d.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las categor√≠as",life:4e3})}},Ue=we,Fe=()=>{w.value.provincia.value=z.value===""?null:z.value,K()},Me=()=>{w.value.estado.value=$.value===""?null:$.value,K()};Pe([z,$],()=>{K()},{deep:!0});const _e=async()=>{E.value=!0;try{await new Promise(s=>setTimeout(s,300)),z.value="",$.value="",w.value.global.value=null,w.value.provincia.value=null,w.value.estado.value=null,d.add({severity:"success",summary:"Filtros limpiados",life:2e3})}finally{E.value=!1}},He=()=>{U.value=!0},ze=()=>{F.value=!0},$e=()=>{Q(),G.value="Guardar",f.value=!1,A.value=!0,Y(()=>{D.value={...a.value,imagenes_originales:[...g.value]},T.value=!1})},je=s=>{Q(),f.value=!1,a.value={...s},a.value.categoria=s.categoria_hotel?s.categoria_hotel.id:null,a.value.provincia=s.provincia?s.provincia.id:null,g.value=Array.isArray(s.imagenes)?s.imagenes.map(e=>typeof e=="string"?e:e.nombre):[],T.value=!1,G.value="Actualizar",A.value=!0,Y(()=>{D.value={...a.value,imagenes_originales:[...g.value]},T.value=!1})},qe=async()=>{if(f.value=!0,!a.value.nombre||a.value.nombre.length<3||a.value.nombre.length>100){d.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios est√©n completos y cumplan los requisitos.",life:4e3});return}if(!a.value.direccion||a.value.direccion.length<10||a.value.direccion.length>255){d.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios est√©n completos y cumplan los requisitos.",life:4e3});return}if(!a.value.descripcion||a.value.descripcion.length<10||a.value.descripcion.length>500){d.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios est√©n completos y cumplan los requisitos.",life:4e3});return}if(!a.value.estado||!a.value.provincia||!a.value.categoria||g.value.length===0){d.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios est√©n completos.",life:4e3});return}const s=2*1024*1024;if(j.value.filter(o=>o.size>s).length>0){d.add({severity:"warn",summary:"Verificar archivos",detail:"Por favor revisa el tama√±o de las im√°genes seleccionadas.",life:4e3});return}try{I.value=!0;const o=new FormData;o.append("nombre",a.value.nombre||""),o.append("direccion",a.value.direccion||""),o.append("descripcion",a.value.descripcion||""),o.append("estado",a.value.estado||""),o.append("provincia_id",a.value.provincia||""),o.append("categoria_id",a.value.categoria||""),j.value.forEach(v=>o.append("imagenes[]",v)),q.value.forEach(v=>{const h=v.includes("/")?v.split("/").pop():v;o.append("removed_images[]",h)});let m;a.value.id?(o.append("_method","PUT"),m=await V.post(`${ee}/${a.value.id}`,o,{headers:{"Content-Type":"multipart/form-data"}}),d.add({severity:"success",summary:"¬°√âxito!",detail:"El hotel ha sido actualizado correctamente.",life:5e3})):(m=await V.post(ee,o,{headers:{"Content-Type":"multipart/form-data"}}),d.add({severity:"success",summary:"¬°√âxito!",detail:"El hotel ha sido creado correctamente.",life:5e3})),await X(),A.value=!1,T.value=!1,D.value=null,Q()}catch{d.add({severity:"warn",summary:"Error de validaci√≥n",detail:"Por favor revisa los campos e intenta nuevamente.",life:6e3})}finally{I.value=!1}},Be=s=>{a.value={...s},N.value=!0},Ge=async()=>{var s,e,o,m,v;se.value=!0;try{await V.delete(`${ee}/${a.value.id}`),await X(),N.value=!1,d.add({severity:"success",summary:"¬°Eliminado!",detail:"El hotel ha sido eliminado correctamente.",life:5e3})}catch(h){if(N.value=!1,((s=h.response)==null?void 0:s.status)===422){const _=h.response.data;let t=_.error||"El hotel est√° siendo utilizado en el sistema.";_.details&&Array.isArray(_.details)&&(t+=`

üìã Detalles:
‚Ä¢ `+_.details.join(`
‚Ä¢ `)),d.add({severity:"warn",summary:"‚ùå No se puede eliminar",detail:t,life:1e4})}else if(((e=h.response)==null?void 0:e.status)===404)d.add({severity:"error",summary:"Hotel no encontrado",detail:"El hotel que intentas eliminar no existe o ya fue eliminado.",life:5e3}),await X();else if(((o=h.response)==null?void 0:o.status)===500)d.add({severity:"error",summary:"Error del servidor",detail:"Ocurri√≥ un error interno. Por favor, contacta al administrador.",life:6e3});else{const _=((v=(m=h.response)==null?void 0:m.data)==null?void 0:v.error)||h.message||"Error desconocido";d.add({severity:"error",summary:"Error",detail:`No se pudo eliminar el hotel: ${_}`,life:6e3})}}finally{se.value=!1}},Oe=()=>{T.value?B.value=!0:Ce()},Ce=()=>{A.value=!1,B.value=!1,T.value=!1,D.value=null,Q()},Re=()=>{B.value=!1},We=s=>{L.value=s,W.value=!0},Je=s=>{W.value=!1,L.value=s,R.value=!0},Qe=s=>{if(L.value&&L.value.imagenes&&L.value.imagenes.length>0){ae.value=L.value.imagenes.map(o=>{const m=typeof o=="string"?o:o.nombre;return pe+m});const e=Math.max(0,Math.min(s,ae.value.length-1));re.value=e,setTimeout(()=>{le.value=!0},50)}else d.add({severity:"warn",summary:"Sin im√°genes",detail:"No hay im√°genes disponibles para mostrar.",life:5e3})},Ke=s=>{s.originalEvent.target.closest("button")||(L.value=s.data,R.value=!0)},Xe=async()=>{H.value=!0;try{await new Promise(s=>setTimeout(s,100)),be.value.click()}finally{setTimeout(()=>{H.value=!1},200)}},Ze=async s=>{const e=s.target?s.target.files:s.files,o=2*1024*1024;if(!e||e.length===0)return;if(g.value.length+e.length>5){d.add({severity:"warn",summary:"L√≠mite de im√°genes",detail:`Solo puedes subir m√°ximo 5 im√°genes. Actualmente tienes ${g.value.length} y est√°s intentando agregar ${e.length}.`,life:5e3});return}M.value=!0;try{for(const v of e)if(v instanceof File){if(g.value.length>=5){d.add({severity:"warn",summary:"L√≠mite alcanzado",detail:"Has alcanzado el l√≠mite m√°ximo de 5 im√°genes.",life:4e3});break}if(v.size>o){d.add({severity:"warn",summary:"Archivo demasiado grande",detail:`El archivo "${v.name}" excede el tama√±o m√°ximo de 2MB.`,life:5e3});continue}if(!v.type.startsWith("image/")){d.add({severity:"warn",summary:"Formato no v√°lido",detail:`El archivo "${v.name}" no es una imagen v√°lida.`,life:4e3});continue}await new Promise(_=>setTimeout(_,100)),j.value.push(v);const h=new FileReader;h.onload=_=>g.value.push(_.target.result),h.readAsDataURL(v)}e.length>0&&d.add({severity:"success",summary:"Im√°genes cargadas",detail:`Se han cargado ${e.length} imagen(es) correctamente.`,life:3e3})}catch{d.add({severity:"error",summary:"Error",detail:"Ocurri√≥ un error al procesar las im√°genes.",life:4e3})}finally{M.value=!1,s.target&&(s.target.value="")}},Ye=s=>{const e=g.value[s];typeof e=="string"&&e.startsWith("data:image")?(g.value.splice(s,1),j.value.splice(s,1)):(q.value.push(e),g.value.splice(s,1))},ea=()=>{a.value.nombre&&a.value.nombre.length>50&&(a.value.nombre=a.value.nombre.substring(0,50))},aa=()=>{a.value.direccion&&a.value.direccion.length>200&&(a.value.direccion=a.value.direccion.substring(0,200))},la=()=>{a.value.descripcion&&a.value.descripcion.length>255&&(a.value.descripcion=a.value.descripcion.substring(0,255))};function sa(s){const e=oe.value.find(o=>o.value===s);return e?e.label:""}function ke(s){return s.replace(/^\s+/,"").replace(/[^A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√±√ú√º\s]/g,"")}function ta(s,e){typeof e=="string"&&(a.value[s]=ke(e))}function oa(s,e){e&&e.value&&(e.value=ke(e.value))}return(s,e)=>{const o=O("InputText"),m=O("Column"),v=O("DataTable"),h=O("Textarea"),_=O("Dialog");return c(),de(da,null,{default:y(()=>[n(r(ra),{title:"Hoteles"}),n(r(ca),{class:"z-[9999]"}),l("div",xa,[e[41]||(e[41]=l("div",{class:"mb-6"},[l("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Cat√°logo de Hoteles"),l("p",{class:"text-gray-600"},"Gesti√≥n completa del cat√°logo de hoteles")],-1)),l("div",wa,[l("div",_a,[e[22]||(e[22]=l("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Lista de Hoteles",-1)),l("div",Ca,[n(r(De),{href:s.route("controlPaisesProvincias"),onClick:He,class:x([{"opacity-50 cursor-not-allowed":U.value},"bg-blue-500 border border-blue-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 flex items-center gap-2"])},{default:y(()=>[n(r(k),{icon:U.value?r(S):r(va),class:x({"animate-spin":U.value,"h-4":!0})},null,8,["icon","class"]),l("span",ka,u(U.value?"Car...":"Pa√≠ses"),1),l("span",Pa,u(U.value?"Cargando...":"Control pa√≠ses"),1)]),_:1},8,["href","class"]),n(r(De),{href:s.route("catHoteles"),onClick:ze,class:x([{"opacity-50 cursor-not-allowed":F.value},"bg-blue-500 border border-blue-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 flex items-center gap-2"])},{default:y(()=>[n(r(k),{icon:F.value?r(S):r(ma),class:x({"animate-spin":F.value,"h-4":!0})},null,8,["icon","class"]),l("span",Da,u(F.value?"Cargando...":"Categor√≠as"),1),l("span",La,u(F.value?"Cargando...":"Gestionar categor√≠as"),1)]),_:1},8,["href","class"]),l("button",{class:"bg-red-500 border flex justify-center border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:$e},[n(r(k),{icon:r(Ve),class:"h-4 w-4 mr-1 text-white"},null,8,["icon"]),e[20]||(e[20]=l("span",{class:"block sm:hidden"},"Agregar",-1)),e[21]||(e[21]=l("span",{class:"hidden sm:block"},"Agregar hotel",-1))])])]),n(v,{value:ne.value,dataKey:"id",paginator:!0,rows:ie.value,rowsPerPageOptions:Ae.value,rowsPerPage:ie.value,"onUpdate:rowsPerPage":e[3]||(e[3]=t=>ie.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} hoteles",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:Ke,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:y(()=>[l("div",Ea,[l("div",Va,[l("div",Aa,[e[23]||(e[23]=l("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[l("i",{class:"pi pi-filter text-blue-600 text-sm"}),l("span",null,"Filtros")],-1)),l("div",Ta,u(ne.value.length)+" resultado"+u(ne.value.length!==1?"s":""),1),l("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:_e,disabled:E.value},[E.value?(c(),de(r(k),{key:0,icon:r(S),class:"animate-spin h-3 w-3"},null,8,["icon"])):b("",!0),l("span",null,u(E.value?"Limp...":"Limpiar"),1)],8,Ia)]),l("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:_e,disabled:E.value},[E.value?(c(),de(r(k),{key:0,icon:r(S),class:"animate-spin h-3 w-3"},null,8,["icon"])):b("",!0),l("span",null,u(E.value?"Limpiando...":"Limpiar filtros"),1)],8,Sa)]),l("div",Na,[l("div",null,[n(o,{modelValue:w.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=t=>w.value.global.value=t),placeholder:"üîç Buscar hoteles...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),l("div",Ua,[l("div",null,[Le(l("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>z.value=t),onChange:Fe,class:"w-full h-9 text-sm border border-blue-300 rounded-md px-3 py-1 bg-white text-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 truncate"},[e[24]||(e[24]=l("option",{value:"",disabled:"",selected:"",hidden:""},"Provincia",-1)),(c(!0),p(ue,null,ce(J.value,t=>(c(),p("option",{key:t.id,value:t.id,class:"truncate text-gray-900 text-lg"},u(t.nombre),9,Fa))),128))],544),[[Ee,z.value]])]),l("div",null,[Le(l("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>$.value=t),onChange:Me,class:"w-full h-9 text-sm border border-blue-300 rounded-md px-3 py-1 bg-white text-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 truncate"},[e[25]||(e[25]=l("option",{value:"",disabled:"",selected:"",hidden:""},"Estado",-1)),(c(!0),p(ue,null,ce(oe.value,t=>(c(),p("option",{key:t.value,value:t.value,class:"truncate text-gray-900 text-lg"},u(t.label),9,Ma))),128))],544),[[Ee,$.value]])])])])])]),default:y(()=>[n(m,{field:"nombre",header:"Nombre",sortable:"",class:"w-28"},{body:y(t=>[l("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"100px","text-overflow":"ellipsis","white-space":"nowrap"},title:t.data.nombre},u(t.data.nombre),9,Ha)]),_:1}),n(m,{field:"direccion",header:"Direcci√≥n",class:"w-28 hidden md:table-cell"},{body:y(t=>[l("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"100px","text-overflow":"ellipsis","white-space":"nowrap"},title:t.data.direccion},u(t.data.direccion),9,za)]),_:1}),n(m,{field:"categoria_hotel.nombre",header:"Categor√≠a",class:"w-32 hidden md:table-cell"},{body:y(t=>{var C;return[l("div",$a,u(((C=t.data.categoria_hotel)==null?void 0:C.nombre)||"Sin categor√≠a"),1)]}),_:1}),n(m,{field:"provincia.nombre",header:"Provincia",class:"w-32 hidden sm:table-cell"},{body:y(t=>{var C;return[l("div",ja,u(((C=t.data.provincia)==null?void 0:C.nombre)||"Sin provincia"),1)]}),_:1}),n(m,{field:"estado",header:"Estado",class:"w-28 hidden sm:table-cell"},{body:y(t=>[l("span",{class:x("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(t.data.estado==="activo"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"))},u(sa(t.data.estado)),3)]),_:1}),n(m,{exportable:!1,class:"w-52 min-w-36"},{header:y(()=>e[26]||(e[26]=[l("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:y(t=>[l("div",qa,[l("button",{class:"flex bg-green-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:C=>We(t.data)},[n(r(k),{icon:r(pa),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[27]||(e[27]=l("span",{class:"hidden md:block text-white"},"M√°s",-1))],8,Ba),l("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:C=>je(t.data)},[n(r(k),{icon:r(ga),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[28]||(e[28]=l("span",{class:"hidden md:block text-white"},"Editar",-1))],8,Ga),l("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:C=>Be(t.data)},[n(r(k),{icon:r(fa),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[29]||(e[29]=l("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,Oa)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"]),n(_,{visible:A.value,"onUpdate:visible":e[12]||(e[12]=t=>A.value=t),header:G.value+" Hotel",modal:!0,style:na(xe.value),closable:!1,draggable:!1},{footer:y(()=>[l("div",Ll,[l("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:qe,disabled:I.value},[n(r(k),{icon:I.value?r(S):r(ba),class:x(["h-5 text-white",{"animate-spin":I.value}])},null,8,["icon","class"]),I.value?(c(),p("span",Al,u(G.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(c(),p("span",Vl,u(G.value),1))],8,El),l("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Oe,disabled:I.value},[n(r(k),{icon:r(ha),class:"h-5"},null,8,["icon"]),e[40]||(e[40]=P("Cancelar "))],8,Tl)])]),default:y(()=>[l("div",Ra,[l("div",Wa,[l("div",Ja,[e[30]||(e[30]=l("label",{for:"nombre",class:"w-24 flex items-center gap-1"},[P(" Nombre: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),n(o,{modelValue:a.value.nombre,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.nombre=t),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:100,class:x([{"p-invalid":f.value&&(!a.value.nombre||a.value.nombre.length<3||a.value.nombre.length>100)},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"Hotel Paradise, etc.",onInput:ea},null,8,["modelValue","class"])]),a.value.nombre&&a.value.nombre.length<3?(c(),p("small",Qa," El nombre debe tener al menos 3 caracteres. Actual: "+u(a.value.nombre.length)+"/3 ",1)):b("",!0),a.value.nombre&&a.value.nombre.length>=90&&a.value.nombre.length<=100?(c(),p("small",Ka," Caracteres restantes: "+u(100-a.value.nombre.length),1)):b("",!0),f.value&&!a.value.nombre?(c(),p("small",Xa," El nombre es obligatorio. ")):b("",!0)]),l("div",Za,[l("div",Ya,[e[31]||(e[31]=l("label",{for:"direccion",class:"w-24 flex items-center gap-1 mt-2"},[P(" Direcci√≥n: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),n(h,{modelValue:a.value.direccion,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.direccion=t),modelModifiers:{trim:!0},id:"direccion",name:"direccion",maxlength:255,rows:"3",class:x([{"p-invalid":f.value&&(!a.value.direccion||a.value.direccion.length<10||a.value.direccion.length>255)},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),onInput:aa,placeholder:"Calle 123, Ciudad, Pa√≠s, etc."},null,8,["modelValue","class"])]),a.value.direccion&&a.value.direccion.length<10?(c(),p("small",el," La direcci√≥n debe tener al menos 10 caracteres. Actual: "+u(a.value.direccion.length)+"/10 ",1)):b("",!0),a.value.direccion&&a.value.direccion.length>=230&&a.value.direccion.length<=255?(c(),p("small",al," Caracteres restantes: "+u(255-a.value.direccion.length),1)):b("",!0),f.value&&!a.value.direccion?(c(),p("small",ll," La direcci√≥n es obligatoria. ")):b("",!0)]),l("div",sl,[l("div",tl,[e[32]||(e[32]=l("label",{for:"descripcion",class:"w-24 flex items-center gap-1 mt-2"},[P(" Descripci√≥n: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),n(h,{modelValue:a.value.descripcion,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.descripcion=t),modelModifiers:{trim:!0},id:"descripcion",name:"descripcion",maxlength:500,rows:"4",class:x([{"p-invalid":f.value&&(!a.value.descripcion||a.value.descripcion.length<10||a.value.descripcion.length>500)},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),onInput:la,placeholder:"Hotel de lujo con todas las comodidades, etc."},null,8,["modelValue","class"])]),a.value.descripcion&&a.value.descripcion.length<10?(c(),p("small",ol," La descripci√≥n debe tener al menos 10 caracteres. Actual: "+u(a.value.descripcion.length)+"/10 ",1)):b("",!0),a.value.descripcion&&a.value.descripcion.length>=470&&a.value.descripcion.length<=500?(c(),p("small",il," Caracteres restantes: "+u(500-a.value.descripcion.length),1)):b("",!0),f.value&&!a.value.descripcion?(c(),p("small",rl," La descripci√≥n es obligatoria. ")):b("",!0)]),l("div",nl,[l("div",dl,[e[33]||(e[33]=l("label",{for:"estado",class:"w-36 sm:w-32 flex items-center gap-1"},[P(" Estado: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),n(r(me),{modelValue:a.value.estado,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.estado=t),options:oe.value,optionLabel:"label",optionValue:"value",id:"estado",name:"estado",class:x(["w-full rounded-md border-2 border-gray-400 hover:border-gray-500",{"p-invalid":f.value&&!a.value.estado}]),placeholder:"Seleccionar"},null,8,["modelValue","options","class"])]),f.value&&!a.value.estado?(c(),p("small",ul," El estado es obligatorio. ")):b("",!0)]),l("div",cl,[l("div",vl,[e[34]||(e[34]=l("label",{for:"categoria",class:"w-36 sm:w-32 flex items-center gap-1"},[P(" Categor√≠a: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),n(r(me),{modelValue:a.value.categoria,"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.categoria=t),options:te.value,optionLabel:"nombre",optionValue:"id",id:"categoria",name:"categoria",class:x(["w-full rounded-md border-2 border-gray-400 hover:border-gray-500",{"p-invalid":f.value&&!a.value.categoria}]),placeholder:"Seleccionar"},null,8,["modelValue","options","class"])]),f.value&&!a.value.categoria?(c(),p("small",ml," La categor√≠a es obligatoria. ")):b("",!0)]),l("div",pl,[l("div",gl,[e[35]||(e[35]=l("label",{for:"provincia",class:"w-36 sm:w-32 flex items-center gap-1"},[P(" Provincia: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),n(r(me),{modelValue:a.value.provincia,"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.provincia=t),options:J.value,optionLabel:"nombre",optionValue:"id",id:"provincia",name:"provincia",filter:!0,filterPlaceholder:"Buscar provincia...",showClear:!0,class:x(["w-full rounded-md border-2 border-gray-400 hover:border-gray-500",{"p-invalid":f.value&&!a.value.provincia}]),placeholder:"Seleccionar",onInput:e[10]||(e[10]=t=>ta("provincia",t)),onFilter:e[11]||(e[11]=t=>oa("provincia",t))},null,8,["modelValue","options","class"])]),f.value&&!a.value.provincia?(c(),p("small",fl," La provincia es obligatoria. ")):b("",!0)]),l("div",bl,[l("div",hl,[e[38]||(e[38]=l("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},[P("Im√°genes:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),l("div",yl,[l("div",xl,[l("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:Ze,class:"hidden",ref_key:"fileInput",ref:be},null,544),l("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 outline-none focus:outline-none active:outline-none disabled:opacity-50 disabled:cursor-not-allowed",onClick:Xe,disabled:M.value||H.value||!he.value},[n(r(k),{icon:M.value?r(S):H.value?r(S):r(Ve),class:x({"animate-spin":M.value||H.value})},null,8,["icon","class"]),P(" "+u(Te.value),1)],8,wl),l("div",_l,[l("span",{class:x(["text-sm font-medium",g.value.length>=5?"text-red-600":"text-gray-600"])},u(g.value.length)+"/5 ",3),e[36]||(e[36]=l("span",{class:"text-xs text-gray-500"},"im√°genes",-1))])]),e[37]||(e[37]=l("div",{class:"text-xs text-gray-500 mb-2"}," M√°ximo 5 im√°genes por hotel ‚Ä¢ Formatos: JPG, PNG, GIF ‚Ä¢ Tama√±o m√°ximo: 2MB por imagen ",-1))])]),f.value&&g.value.length===0?(c(),p("small",Cl,"Las im√°genes son obligatorias (al menos una).")):b("",!0)]),l("div",kl,[(c(!0),p(ue,null,ce(g.value,(t,C)=>(c(),p("div",{key:C,class:"relative w-24 sm:w-28 h-24 sm:h-28"},[l("img",{src:t.startsWith("data:image")?t:pe+t,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,Pl),l("button",{onClick:Sl=>Ye(C),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow",style:{transform:"translate(50%, -50%)"}},e[39]||(e[39]=[l("i",{class:"pi pi-times text-xs"},null,-1)]),8,Dl)]))),128))])])]),_:1},8,["visible","header","style"]),n(ya,{visible:W.value,"onUpdate:visible":e[13]||(e[13]=t=>W.value=t),"details-visible":R.value,"onUpdate:detailsVisible":e[14]||(e[14]=t=>R.value=t),"carousel-visible":le.value,"onUpdate:carouselVisible":e[15]||(e[15]=t=>le.value=t),"delete-visible":N.value,"onUpdate:deleteVisible":e[16]||(e[16]=t=>N.value=t),"unsaved-changes-visible":B.value,"onUpdate:unsavedChangesVisible":e[17]||(e[17]=t=>B.value=t),"carousel-index":re.value,"onUpdate:carouselIndex":e[18]||(e[18]=t=>re.value=t),hotel:L.value||a.value,"dialog-style":xe.value,"selected-images":ae.value,"image-path":pe,"is-deleting":se.value,onDeleteHotel:Ge,onCancelDelete:e[19]||(e[19]=()=>N.value=!1),onCloseWithoutSaving:Ce,onContinueEditing:Re,onViewDetails:Je,onOpenImageModal:Qe},null,8,["visible","details-visible","carousel-visible","delete-visible","unsaved-changes-visible","carousel-index","hotel","dialog-style","selected-images","is-deleting"])])])]),_:1})}}};export{$l as default};
