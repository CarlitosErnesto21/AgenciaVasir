import{r as d,E as Te,o as ba,a5 as ha,N as O,w as J,n as De,k as A,c as p,d as f,p as i,$ as n,a0 as ya,x as b,e as l,t as _,F as Q,l as se,A as ke,j as H,q as V,v as Pe,D as Ve,a6 as Ae,y as Fe}from"./vendor-Bf9odu9b.js";import{A as xa}from"./AuthenticatedLayout-DLrSmUd9.js";import{z as wa,F as ue,A as g}from"./ui-ByAzYu1X.js";import{f as te,a as _a,b as $e,c as Ca,d as Da,e as X,g as je,h as Re,i as ze,k as ka}from"./index-dTLVUhwl.js";import Pa from"./Modales-CbwiIEgW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Va={class:"py-4 sm:py-6 px-4 sm:px-7 mt-6 sm:mt-10 mx-auto bg-red-50 shadow-md rounded-lg h-screen-full"},Aa={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center mb-4 gap-4"},Fa={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},Sa={class:"flex items-center justify-between mb-3"},Ia={class:"flex items-center gap-3"},qa={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},La={class:"space-y-3"},Ea={class:"grid grid-cols-3 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-5 gap-3"},Ua={class:"text-sm font-medium leading-relaxed"},Ma={class:"text-sm leading-relaxed whitespace-normal ps-3 mb-0"},Na={class:"text-sm leading-relaxed"},Ta={class:"text-sm leading-relaxed"},$a={class:"text-sm leading-relaxed"},ja={class:"text-sm font-medium leading-relaxed"},Ra={class:"flex gap-2 justify-center items-center"},za=["onClick"],Oa=["onClick"],Ha=["onClick"],Wa={class:"space-y-4"},Ba={class:"w-full flex flex-col"},Ga={class:"flex items-center gap-4"},Ka={key:0,class:"text-red-500 ml-28"},Ja={class:"w-full flex flex-col"},Qa={class:"flex items-start gap-4"},Xa={class:"flex-1"},Ya={class:"flex gap-2 mb-3"},Za=["disabled"],el={class:"space-y-2 max-h-40 overflow-y-auto"},al={class:"flex-1"},ll=["onClick"],sl={key:0,class:"text-gray-500 text-sm mt-2"},tl={class:"w-full flex flex-col"},il={class:"flex items-start gap-4"},ol={class:"flex-1"},nl={class:"flex gap-2 mb-3"},rl=["disabled"],dl={class:"space-y-2 max-h-40 overflow-y-auto"},ul={class:"flex-1"},cl=["onClick"],vl={key:0,class:"text-gray-500 text-sm mt-2"},ml={class:"w-full flex flex-col"},pl={class:"flex items-start gap-4"},fl={class:"flex-1"},gl={class:"flex gap-2 mb-3"},bl=["disabled"],hl={class:"space-y-2 max-h-40 overflow-y-auto"},yl={class:"flex-1"},xl=["onClick"],wl={key:0,class:"text-gray-500 text-sm mt-2"},_l={class:"flex gap-4"},Cl={class:"w-full flex flex-col"},Dl={class:"flex items-center gap-4"},kl={key:0,class:"text-red-500 ml-28"},Pl={class:"flex gap-4"},Vl={class:"flex-1"},Al={class:"flex-1"},Fl={class:"w-full flex flex-col"},Sl={class:"flex items-center gap-4"},Il={key:0,class:"text-red-500 ml-28"},ql={class:"w-full flex flex-col"},Ll={class:"flex items-center gap-4"},El={class:"flex-1"},Ul={key:0,class:"text-red-500 ml-28"},Ml={class:"flex gap-4 flex-wrap mt-4 ml-28"},Nl=["src"],Tl=["onClick"],$l={class:"flex justify-center gap-4 w-full"},jl=["disabled"],Rl=["disabled"],zl={key:0},Ol={key:1},Hl={class:"flex items-center gap-3"},Wl={class:"flex flex-col"},Bl={class:"flex justify-center gap-4 w-full"},Gl=["disabled"],Kl=["disabled"],Jl={key:0},Ql={key:1},Xl={class:"flex items-center gap-3"},Yl={class:"flex justify-center gap-3 w-full"},Zl={key:0,class:"flex flex-col items-center justify-center"},es={class:"flex justify-center items-center w-full h-96"},as=["src"],ls={key:1,class:"text-center text-gray-500 py-8"},ss={class:"flex justify-center w-full"},ie="/api/paquetes",ts="/storage/paquetes/",vs={__name:"GestionPaquetes",setup(is){const F=d([]),U=d(""),Se=()=>{U.value.trim()&&(F.value.push(U.value.trim()),U.value="")},Oe=a=>{F.value.splice(a,1)},S=d([]),M=d(""),Ie=()=>{M.value.trim()&&(S.value.push(M.value.trim()),M.value="")},He=a=>{S.value.splice(a,1)},u=wa(),N=d(!1),I=d(!1),ce=d(typeof window<"u"?window.innerWidth:1024),oe=Te(()=>ce.value<640?{width:"95vw",maxWidth:"380px"}:ce.value<768?{width:"500px"}:{width:"600px"}),qe=()=>{typeof window<"u"&&(ce.value=window.innerWidth)},ve=d([]),t=d({id:null,nombre:"",incluye:"",condiciones:"",recordatorio:"",precio:null,pais_id:null,provincia_id:null,fecha_salida:null,fecha_regreso:null,imagenes:[]}),C=d([]),T=d(""),x=d([]),W=d([]),B=d([]),q=d(!1),L=d(!1),$=d(!1),j=d(!1),R=d(!1),E=d(null),me=d(!1),pe=d(!1),fe=d(!1),ne=d(null),y=d({global:{value:null,matchMode:ue.CONTAINS},pais_id:{value:null,matchMode:ue.EQUALS},provincia_id:{value:null,matchMode:ue.EQUALS},fecha_salida:{value:null,matchMode:ue.DATE_IS}}),Y=d(null),Z=d(null),D=d(null),k=d(null),ge=d(10),We=d([5,10,20,50]),ee=d("Guardar"),G=d([]),P=d([]),be=d(!1),K=d([]),ae=d(0),Be=d(null),he=Te(()=>{let a=ve.value.slice().sort((e,r)=>{const o=new Date(e.created_at||e.fecha_salida||0);return new Date(r.created_at||r.fecha_salida||0)-o});if(y.value.global.value){const e=y.value.global.value.toLowerCase();a=a.filter(r=>{var o,h,c,z;return((o=r.nombre)==null?void 0:o.toLowerCase().includes(e))||((h=r.incluye)==null?void 0:h.toLowerCase().includes(e))||((c=r.condiciones)==null?void 0:c.toLowerCase().includes(e))||((z=r.recordatorio)==null?void 0:z.toLowerCase().includes(e))})}return y.value.pais_id.value&&(a=a.filter(e=>e.pais_id==y.value.pais_id.value)),y.value.provincia_id.value&&(a=a.filter(e=>e.provincia_id==y.value.provincia_id.value)),(D.value||k.value)&&(a=a.filter(e=>{if(!e.fecha_salida)return!1;const r=new Date(e.fecha_salida);let o=!0;if(D.value){const h=new Date(D.value);o=o&&r>=h}if(k.value){const h=new Date(k.value);h.setHours(23,59,59,999),o=o&&r<=h}return o})),a}),Le=()=>{const a=new Date;return a.setHours(a.getHours()+1),a},Ge=()=>{if(!t.value.fecha_salida)return Le();const a=new Date(t.value.fecha_salida);return a.setHours(a.getHours()+1),a},Ke=()=>{if(!t.value.fecha_regreso)return null;const a=new Date(t.value.fecha_regreso);return a.setHours(a.getHours()-1),a},Je=()=>{if(!t.value.fecha_salida)return!0;const a=new Date,e=new Date(t.value.fecha_salida),r=new Date(a.getTime()+60*60*1e3);return!(e<r||t.value.fecha_regreso&&(new Date(t.value.fecha_regreso)-e)/(1e3*60*60)<1)},Qe=()=>{if(!t.value.fecha_regreso)return!0;const a=new Date(t.value.fecha_regreso);if(t.value.fecha_salida){const e=new Date(t.value.fecha_salida);if((a-e)/(1e3*60*60)<1)return!1}return!0},Xe=()=>{if(D.value&&k.value){const a=new Date(D.value),e=new Date(k.value);a>e&&(k.value=null,u.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'hasta' se limpió porque era anterior a la fecha 'desde'.",life:3e3}))}},Ye=()=>{if(D.value&&k.value){const a=new Date(D.value);new Date(k.value)<a&&(D.value=null,u.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'desde' se limpió porque era posterior a la fecha 'hasta'.",life:3e3}))}};ba(async()=>{Y.value=null,Z.value=null,D.value=null,k.value=null,y.value.global.value=null,y.value.pais_id.value=null,y.value.provincia_id.value=null,y.value.fecha_salida.value=null,await Ze(),await ea(),typeof window<"u"&&window.addEventListener("resize",qe)}),ha(()=>{typeof window<"u"&&window.removeEventListener("resize",qe)});const Ee=async()=>{const{data:a}=await O.get(ie),e=Array.isArray(a)?a:a.data||a.paquetes||[];ve.value=e.map(r=>({...r,pais:r.pais||(r.pais_id?G.value.find(o=>o.id===r.pais_id):null),provincia:r.provincia||(r.provincia_id?P.value.find(o=>o.id===r.provincia_id):null),imagenes:(r.imagenes||[]).map(o=>typeof o=="string"?o:o.nombre)}))},Ze=async()=>{u.add({severity:"info",summary:"Cargando paquetes...",life:2e3});try{const{data:a}=await O.get(ie),e=Array.isArray(a)?a:a.data||a.paquetes||[];ve.value=e.map(r=>({...r,pais:r.pais||(r.pais_id?G.value.find(o=>o.id===r.pais_id):null),provincia:r.provincia||(r.provincia_id?P.value.find(o=>o.id===r.provincia_id):null),imagenes:(r.imagenes||[]).map(o=>typeof o=="string"?o:o.nombre)})),u.add({severity:"success",summary:"Paquetes cargados",life:2e3})}catch{u.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los paquetes.",life:4e3})}},ea=async()=>{const{data:a}=await O.get("/api/paises");G.value=a},le=async a=>{const{data:e}=await O.get(`/api/provincias?pais_id=${a}`);P.value=e};J(()=>t.value.pais_id,a=>{a?(P.value=[],t.value.provincia_id=null,le(a)):(P.value=[],t.value.provincia_id=null)});function ye(){t.value={id:null,nombre:"",incluye:"",condiciones:"",recordatorio:"",precio:null,pais_id:null,provincia_id:null,fecha_salida:null,fecha_regreso:null,imagenes:[]},x.value=[],W.value=[],B.value=[],C.value=[],T.value="",F.value=[],U.value="",S.value=[],M.value="",j.value=!1}function aa(){ye(),ee.value="Guardar",t.value.pais_id?le(t.value.pais_id):G.value.length>0?(t.value.pais_id=G.value[0].id,le(t.value.pais_id)):P.value=[],q.value=!0,De(()=>{E.value={...t.value,incluye_lista:[...C.value],imagenes_originales:[...x.value]},R.value=!1})}function la(a){ye(),t.value={...a},C.value=re(a.incluye),F.value=re(a.condiciones),S.value=re(a.recordatorio),x.value=(a.imagenes||[]).map(e=>typeof e=="string"?e:e.nombre),ee.value="Actualizar",a.pais_id?le(a.pais_id).then(()=>{t.value.provincia_id=a.provincia_id}):P.value=[],q.value=!0,De(()=>{E.value={...t.value,incluye_lista:[...C.value],imagenes_originales:[...x.value]},R.value=!1})}const sa=()=>{R.value?$.value=!0:xe()},xe=()=>{q.value=!1,$.value=!1,R.value=!1,E.value=null,ye()},Ue=()=>{$.value=!1},Me=()=>{T.value.trim()&&(C.value.push(T.value.trim()),T.value="")},ta=a=>{C.value.splice(a,1)},re=a=>a?a.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],we=a=>a.join("|"),ia=a=>{const e=a.target?a.target.files:a.files,r=2*1024*1024;for(const o of e)if(o instanceof File){if(o.size>r){u.add({severity:"warn",summary:"Archivo no válido",detail:"Máximo 2MB por imagen.",life:5e3});continue}if(!o.type.startsWith("image/")){u.add({severity:"warn",summary:"Formato no válido",detail:"Solo imágenes válidas.",life:4e3});continue}W.value.push(o);const h=new FileReader;h.onload=c=>x.value.push(c.target.result),h.readAsDataURL(o)}},oa=a=>{const e=x.value[a];typeof e=="string"&&e.startsWith("data:image")?(x.value.splice(a,1),W.value.splice(a,1)):(B.value.push(e),x.value.splice(a,1))},na=async()=>{if(j.value=!0,!t.value.nombre||t.value.nombre.length<6||t.value.nombre.length>100){u.add({severity:"warn",summary:"Campos requeridos",detail:"El nombre debe tener entre 6 y 100 caracteres.",life:4e3});return}if(!t.value.fecha_salida||!t.value.fecha_regreso){u.add({severity:"warn",summary:"Campos requeridos",detail:"Debes ingresar las fechas de salida y regreso.",life:4e3});return}if(!Je()||!Qe()){u.add({severity:"warn",summary:"Verifica las fechas",detail:"La fecha de salida debe ser futura y la de regreso posterior a la salida (mínimo 1 hora).",life:4e3});return}if(!t.value.precio||t.value.precio<=0||t.value.precio>999999.99){u.add({severity:"warn",summary:"Precio inválido",detail:"El precio debe ser mayor a 0 y menor o igual a 9999.99.",life:4e3});return}const a=C.value.filter(m=>m.trim()!=="");if(a.length===0){u.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos un elemento en Incluye.",life:4e3});return}const e=F.value.filter(m=>m.trim()!=="");if(e.length===0){u.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos una condición válida.",life:4e3});return}const r=S.value.filter(m=>m.trim()!=="");if(r.length===0){u.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos un recordatorio válido.",life:4e3});return}if(x.value.length===0){u.add({severity:"warn",summary:"Imágenes requeridas",detail:"Debes subir al menos una imagen.",life:4e3});return}const o=2*1024*1024;if(W.value.filter(m=>m.size>o).length>0){u.add({severity:"warn",summary:"Imágenes muy grandes",detail:"Máximo 2MB por imagen.",life:4e3});return}let c=new FormData;c.append("nombre",t.value.nombre||""),c.append("incluye",we(a)),c.append("condiciones",we(e)),c.append("recordatorio",we(r)),c.append("precio",t.value.precio||"");let z=P.value.find(m=>m.id===t.value.provincia_id),de=z?z.pais_id:"";c.append("pais_id",de),c.append("provincia_id",t.value.provincia_id||""),t.value.fecha_salida instanceof Date?c.append("fecha_salida",t.value.fecha_salida.toISOString().slice(0,19).replace("T"," ")):t.value.fecha_salida&&c.append("fecha_salida",t.value.fecha_salida),t.value.fecha_regreso instanceof Date?c.append("fecha_regreso",t.value.fecha_regreso.toISOString().slice(0,19).replace("T"," ")):t.value.fecha_regreso&&c.append("fecha_regreso",t.value.fecha_regreso),W.value.forEach(m=>c.append("imagenes[]",m)),B.value.forEach(m=>{const w=m.includes("/")?m.split("/").pop():m;c.append("removed_images[]",w)}),N.value=!0;try{t.value.id?(c.append("_method","PUT"),await O.post(`${ie}/${t.value.id}`,c),u.add({severity:"success",summary:"Actualizado",detail:"Paquete actualizado",life:4e3})):(await O.post(ie,c),u.add({severity:"success",summary:"Creado",detail:"Paquete creado",life:4e3})),q.value=!1,R.value=!1,await Ee()}catch(m){if(m.response&&m.response.status===422&&m.response.data){const w=m.response.data.errors||m.response.data;console.error("Validation errors:",w),typeof w=="object"?Object.keys(w).forEach(_e=>{const s=w[_e];Array.isArray(s)?s.forEach(v=>u.add({severity:"warn",summary:"Validación",detail:v,life:6e3})):typeof s=="string"&&u.add({severity:"warn",summary:"Validación",detail:s,life:6e3})}):typeof w=="string"&&u.add({severity:"warn",summary:"Validación",detail:w,life:6e3})}else console.error(m),u.add({severity:"error",summary:"Error",detail:"Revisa los campos e intenta nuevamente.",life:5e3})}finally{N.value=!1}},ra=a=>{t.value={...a},L.value=!0},Ne=async()=>{I.value=!0;try{await O.delete(`${ie}/${t.value.id}`),await Ee(),L.value=!1,u.add({severity:"success",summary:"Eliminado",detail:"Paquete eliminado",life:4e3})}catch(a){if(a.response&&a.response.status===422&&a.response.data){const e=a.response.data.errors||a.response.data;console.error("Delete validation errors:",e),typeof e=="object"?Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(h=>u.add({severity:"warn",summary:"Validación",detail:h,life:6e3})):typeof o=="string"&&u.add({severity:"warn",summary:"Validación",detail:o,life:6e3})}):typeof e=="string"&&u.add({severity:"warn",summary:"Validación",detail:e,life:6e3})}else console.error(a),u.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el paquete.",life:5e3})}finally{I.value=!1}},da=a=>{ne.value=a,me.value=!0},ua=a=>{ne.value=a,pe.value=!0},ca=a=>{var e;ae.value=a,K.value=((e=ne.value)==null?void 0:e.imagenes)||[],fe.value=!0},va=a=>{t.value={id:null,nombre:`${a.nombre} (Copia)`,descripcion:a.descripcion,precio:a.precio,duracion:a.duracion,fecha_salida:a.fecha_salida,fecha_regreso:a.fecha_regreso,pais_id:a.pais_id,provincia_id:a.provincia_id,condiciones:a.condiciones||[],recordatorio:a.recordatorio||[],imagenes:[]},F.value=Array.isArray(a.condiciones)?[...a.condiciones]:[],S.value=Array.isArray(a.recordatorio)?[...a.recordatorio]:[],x.value=Array.isArray(a.imagenes)?a.imagenes.map(e=>typeof e=="string"?e:e.nombre):[],W.value=[],B.value=[],j.value=!1,ee.value="Guardar",R.value=!1,E.value={...a,id:null,nombre:`${a.nombre} (Copia)`,imagenes_originales:Array.isArray(a.imagenes)?a.imagenes.map(e=>typeof e=="string"?e:e.nombre):[]},q.value=!0,u.add({severity:"info",summary:"Paquete duplicado",detail:"Se ha creado una copia del paquete para editar",life:3e3})},ma=a=>{u.add({severity:"info",summary:"Cambio de estado",detail:`Función para cambiar estado de: ${a.nombre}`,life:3e3})},pa=a=>{u.add({severity:"info",summary:"Generar reporte",detail:`Generando reporte para: ${a.nombre}`,life:3e3})},fa=a=>{u.add({severity:"info",summary:"Archivar paquete",detail:`Archivando paquete: ${a.nombre}`,life:3e3})},ga=()=>{Y.value=null,Z.value=null,D.value=null,k.value=null,y.value.global.value=null,y.value.pais_id.value=null,y.value.provincia_id.value=null,y.value.fecha_salida.value=null,u.add({severity:"info",summary:"Filtros limpiados",detail:"Se han removido todos los filtros aplicados.",life:3e3})};return J(()=>Y.value,a=>{y.value.pais_id.value=a,a?le(a):P.value=[]}),J(()=>Z.value,a=>{y.value.provincia_id.value=a}),J(()=>D.value,Xe),J(()=>k.value,Ye),J([t,C,x,B],()=>{E.value&&q.value&&De(()=>{const a={...t.value,incluye_lista:[...C.value],imagenes_actuales:[...x.value]},e=JSON.stringify(a)!==JSON.stringify({...E.value,imagenes_actuales:E.value.imagenes_originales})||B.value.length>0,r=!E.value.id,o=t.value.nombre||t.value.destino||t.value.fecha_salida||t.value.fecha_regreso||t.value.precio||t.value.pais_id||t.value.provincia_id||C.value.length>0||x.value.length>0;R.value=e||r&&o})},{deep:!0,flush:"post"}),(a,e)=>{const r=A("Toast"),o=A("InputText"),h=A("Select"),c=A("Column"),z=A("DataTable"),de=A("DatePicker"),m=A("InputNumber"),w=A("Dialog"),_e=A("Carousel");return f(),p(Q,null,[i(n(ya),{title:"Paquetes"}),i(xa,null,{default:b(()=>[i(r,{class:"z-[9999]"}),l("div",Va,[l("div",Aa,[e[30]||(e[30]=l("h3",{class:"text-lg sm:text-2xl text-blue-600 font-bold"},"Catálogo de Paquetes",-1)),l("button",{class:"bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:aa},[i(n(g),{icon:n(te),class:"h-4 w-4 text-white"},null,8,["icon"]),e[29]||(e[29]=l("span",null," Agregar paquete",-1))])]),i(z,{value:he.value,dataKey:"id",paginator:!0,rows:ge.value,rowsPerPageOptions:We.value,rowsPerPage:ge.value,"onUpdate:rowsPerPage":e[3]||(e[3]=s=>ge.value=s),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} paquetes",class:"overflow-x-auto max-w-full",style:{display:"block","max-width":"84vw"},responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:b(()=>[l("div",Fa,[l("div",Sa,[l("div",Ia,[e[31]||(e[31]=l("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[l("i",{class:"pi pi-filter text-blue-600 text-sm"}),l("span",null,"Filtros")],-1)),l("div",qa,_(he.value.length)+" resultado"+_(he.value.length!==1?"s":""),1)]),l("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md",onClick:ga},[i(n(g),{icon:n(Da),class:"h-4 w-4 text-white"},null,8,["icon"]),e[32]||(e[32]=l("span",null," Limpiar filtros",-1))])]),l("div",La,[l("div",null,[i(o,{modelValue:y.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=s=>y.value.global.value=s),placeholder:"🔍 Buscar paquetes...",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),l("div",Ea,[l("div",null,[i(h,{modelValue:Y.value,"onUpdate:modelValue":e[1]||(e[1]=s=>Y.value=s),options:G.value,optionLabel:"nombre",optionValue:"id",placeholder:"País",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},clearable:!0},null,8,["modelValue","options"])]),l("div",null,[i(h,{modelValue:Z.value,"onUpdate:modelValue":e[2]||(e[2]=s=>Z.value=s),options:P.value,optionLabel:"nombre",optionValue:"id",placeholder:"Provincia",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},clearable:!0},null,8,["modelValue","options"])])])])])]),default:b(()=>[i(c,{field:"nombre",header:"Nombre",sortable:"",class:"w-44 min-w-44"},{body:b(s=>[l("div",Ua,_(s.data.nombre),1)]),_:1}),i(c,{field:"incluye",header:"Incluye",class:"w-40 min-w-40"},{body:b(s=>[l("ul",Ma,[(f(!0),p(Q,null,se(re(s.data.incluye),v=>(f(),p("li",{key:v},_(v),1))),128))])]),_:1}),i(c,{field:"pais.nombre",header:"País",class:"w-32 min-w-32"},{body:b(s=>{var v;return[l("div",Na,_((v=s.data.pais)==null?void 0:v.nombre),1)]}),_:1}),i(c,{field:"provincia.nombre",header:"Provincia",class:"w-32 min-w-32"},{body:b(s=>{var v;return[l("div",Ta,_((v=s.data.provincia)==null?void 0:v.nombre),1)]}),_:1}),i(c,{field:"fecha_salida",header:"Fecha salida",class:"w-36 min-w-36"},{body:b(s=>[l("div",$a,_(s.data.fecha_salida),1)]),_:1}),i(c,{field:"precio",header:"Precio",class:"w-24 min-w-24"},{body:b(s=>[l("div",ja,_(isNaN(Number(s.data.precio))?"":`$${Number(s.data.precio).toFixed(2)}`),1)]),_:1}),i(c,{exportable:!1,class:"w-56 min-w-56"},{header:b(()=>e[33]||(e[33]=[l("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:b(s=>[l("div",Ra,[l("button",{class:"flex bg-green-500 hover:bg-green-600 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:v=>da(s.data),title:"Más acciones"},[i(n(g),{icon:n(_a),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[34]||(e[34]=l("span",{class:"hidden md:block text-white"},"Más",-1))],8,za),l("button",{class:"flex bg-blue-500 hover:bg-blue-600 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:v=>la(s.data),title:"Editar paquete"},[i(n(g),{icon:n($e),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[35]||(e[35]=l("span",{class:"hidden md:block text-white"},"Editar",-1))],8,Oa),l("button",{class:"flex bg-red-500 hover:bg-red-600 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:v=>ra(s.data),title:"Eliminar paquete"},[i(n(g),{icon:n(Ca),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[36]||(e[36]=l("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,Ha)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"]),i(w,{visible:q.value,"onUpdate:visible":e[15]||(e[15]=s=>q.value=s),header:ee.value+" Paquete",modal:!0,style:ke(oe.value),closable:!1},{footer:b(()=>[l("div",$l,[l("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:sa,disabled:N.value},[i(n(g),{icon:n(X),class:"h-5 text-green-600"},null,8,["icon"]),e[48]||(e[48]=V("Cancelar "))],8,jl),l("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:na,disabled:N.value},[i(n(g),{icon:N.value?n(je):n(Re),class:Fe(["h-5 text-white",{"animate-spin":N.value}])},null,8,["icon","class"]),N.value?(f(),p("span",Ol,"Procesando...")):(f(),p("span",zl,_(ee.value),1))],8,Rl)])]),default:b(()=>[l("div",Wa,[l("div",Ba,[l("div",Ga,[e[37]||(e[37]=l("label",{for:"nombre",class:"w-24 flex items-center gap-1"},[V("Nombre: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(o,{modelValue:t.value.nombre,"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.nombre=s),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:100,class:"flex-1"},null,8,["modelValue"])]),t.value.nombre&&t.value.nombre.length<6?(f(),p("small",Ka," El nombre debe tener al menos 6 caracteres. ")):H("",!0)]),l("div",Ja,[l("div",Qa,[e[38]||(e[38]=l("label",{class:"w-24 flex items-center gap-1 mt-2"},"Incluye:",-1)),l("div",Xa,[l("div",Ya,[Pe(l("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>T.value=s),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:Ve(Me,["enter"])},null,544),[[Ae,T.value]]),l("button",{type:"button",onClick:Me,disabled:!T.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[i(n(g),{icon:n(te),class:"h-5"},null,8,["icon"])],8,Za)]),l("div",el,[(f(!0),p(Q,null,se(C.value,(s,v)=>(f(),p("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[l("span",al,_(s),1),l("button",{type:"button",onClick:Ce=>ta(v),class:"text-red-500 hover:text-red-700 p-1"},[i(n(g),{icon:n(X),class:"h-5"},null,8,["icon"])],8,ll)]))),128))]),C.value.length===0?(f(),p("div",sl,"Sin elementos agregados.")):H("",!0)])])]),l("div",tl,[l("div",il,[e[39]||(e[39]=l("label",{class:"w-24 flex items-center gap-1 mt-2"},[V("Condiciones:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),l("div",ol,[l("div",nl,[Pe(l("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>U.value=s),type:"text",placeholder:"Agregar condición...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:Ve(Se,["enter"])},null,544),[[Ae,U.value]]),l("button",{type:"button",onClick:Se,disabled:!U.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[i(n(g),{icon:n(te),class:"h-5"},null,8,["icon"])],8,rl)]),l("div",dl,[(f(!0),p(Q,null,se(F.value,(s,v)=>(f(),p("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[l("span",ul,_(s),1),l("button",{type:"button",onClick:Ce=>Oe(v),class:"text-red-500 hover:text-red-700 p-1"},[i(n(g),{icon:n(X),class:"h-5"},null,8,["icon"])],8,cl)]))),128))]),F.value.length===0?(f(),p("div",vl,"Sin condiciones agregadas.")):H("",!0)])])]),l("div",ml,[l("div",pl,[e[40]||(e[40]=l("label",{class:"w-24 flex items-center gap-1 mt-2"},[V("Recordatorio:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),l("div",fl,[l("div",gl,[Pe(l("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>M.value=s),type:"text",placeholder:"Agregar recordatorio...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:Ve(Ie,["enter"])},null,544),[[Ae,M.value]]),l("button",{type:"button",onClick:Ie,disabled:!M.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[i(n(g),{icon:n(te),class:"h-5"},null,8,["icon"])],8,bl)]),l("div",hl,[(f(!0),p(Q,null,se(S.value,(s,v)=>(f(),p("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[l("span",yl,_(s),1),l("button",{type:"button",onClick:Ce=>He(v),class:"text-red-500 hover:text-red-700 p-1"},[i(n(g),{icon:n(X),class:"h-5"},null,8,["icon"])],8,xl)]))),128))]),S.value.length===0?(f(),p("div",wl,"Sin recordatorios agregados.")):H("",!0)])])]),l("div",_l,[l("div",Cl,[l("div",Dl,[e[41]||(e[41]=l("label",{for:"provincia",class:"w-24"},[V("Provincia:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(h,{modelValue:t.value.provincia_id,"onUpdate:modelValue":e[8]||(e[8]=s=>t.value.provincia_id=s),options:P.value,optionLabel:"nombre",optionValue:"id",id:"provincia",filter:!0,filterPlaceholder:"Buscar provincia...",showClear:!0,class:Fe([{"p-invalid":j.value&&!t.value.provincia_id},"flex-1"]),placeholder:"Selecciona una provincia",onInput:e[9]||(e[9]=s=>a.onInputDropdown&&a.onInputDropdown("provincia",s)),onFilter:e[10]||(e[10]=s=>a.onFilterDropdown&&a.onFilterDropdown("provincia",s))},null,8,["modelValue","options","class"])]),j.value&&!t.value.provincia_id?(f(),p("small",kl,"La provincia es obligatoria.")):H("",!0)])]),l("div",Pl,[l("div",Vl,[e[42]||(e[42]=l("label",{class:"flex items-center gap-1 mb-2"},[V("Fecha salida:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(de,{modelValue:t.value.fecha_salida,"onUpdate:modelValue":e[11]||(e[11]=s=>t.value.fecha_salida=s),class:"w-full",minDate:Le(),maxDate:Ke(),dateFormat:"yy-mm-dd",showIcon:"",iconDisplay:"input",placeholder:"Selecciona fecha de salida"},null,8,["modelValue","minDate","maxDate"])]),l("div",Al,[e[43]||(e[43]=l("label",{class:"flex items-center gap-1 mb-2"},[V("Fecha regreso:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(de,{modelValue:t.value.fecha_regreso,"onUpdate:modelValue":e[12]||(e[12]=s=>t.value.fecha_regreso=s),class:"w-full",minDate:Ge(),dateFormat:"yy-mm-dd",showIcon:"",iconDisplay:"input",placeholder:"Selecciona fecha de regreso"},null,8,["modelValue","minDate"])])]),l("div",Fl,[l("div",Sl,[e[44]||(e[44]=l("label",{class:"w-24 flex items-center gap-1"},[V("Precio:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(m,{modelValue:t.value.precio,"onUpdate:modelValue":e[13]||(e[13]=s=>t.value.precio=s),mode:"currency",currency:"USD",locale:"en-US",min:.01,max:999999.99,maxFractionDigits:2,minFractionDigits:2,class:"flex-1",placeholder:"$0.00"},null,8,["modelValue"])]),j.value&&(t.value.precio==null||t.value.precio<=0||t.value.precio>999999.99)?(f(),p("small",Il,"El precio es obligatorio, debe ser mayor a 0 y menor o igual a 99999999.99.")):H("",!0)]),l("div",ql,[l("div",Ll,[e[46]||(e[46]=l("label",{class:"w-24 flex items-center gap-1"},[V("Imágenes:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),l("div",El,[l("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:ia,class:"hidden",ref_key:"fileInput",ref:Be},null,544),l("button",{type:"button",class:"bg-white hover:bg-red-50 text-red-500 hover:text-red-600 border border-red-500 hover:border-red-600 px-6 py-2 rounded-md flex items-center gap-2",onClick:e[14]||(e[14]=s=>a.$refs.fileInput.click())},[i(n(g),{icon:n(te),class:"h-4"},null,8,["icon"]),e[45]||(e[45]=l("span",null,"Subir imágenes",-1))])])]),j.value&&x.value.length===0?(f(),p("small",Ul,"Las imágenes son obligatorias (al menos una).")):H("",!0)]),l("div",Ml,[(f(!0),p(Q,null,se(x.value,(s,v)=>(f(),p("div",{key:v,class:"relative w-32 h-32"},[l("img",{src:s.startsWith("data:image")?s:"/storage/"+s,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,Nl),l("button",{onClick:Ce=>oa(v),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow",style:{transform:"translate(50%, -50%)"}},e[47]||(e[47]=[l("i",{class:"pi pi-times text-xs"},null,-1)]),8,Tl)]))),128))])])]),_:1},8,["visible","header","style"]),i(w,{visible:L.value,"onUpdate:visible":e[17]||(e[17]=s=>L.value=s),header:"Eliminar paquete",modal:!0,style:ke(oe.value),closable:!1},{footer:b(()=>[l("div",Bl,[l("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[16]||(e[16]=s=>L.value=!1),disabled:I.value},[i(n(g),{icon:n(X),class:"h-5"},null,8,["icon"]),e[52]||(e[52]=l("span",null,"No",-1))],8,Gl),l("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Ne,disabled:I.value},[i(n(g),{icon:I.value?n(je):n(Re),class:Fe(["h-5",{"animate-spin":I.value}])},null,8,["icon","class"]),I.value?(f(),p("span",Ql,"Eliminando...")):(f(),p("span",Jl,"Sí"))],8,Kl)])]),default:b(()=>[l("div",Hl,[i(n(g),{icon:n(ze),class:"h-8 w-8 text-red-500"},null,8,["icon"]),l("div",Wl,[l("span",null,[e[49]||(e[49]=V("¿Estás seguro de eliminar el paquete: ")),l("b",null,_(t.value.nombre),1),e[50]||(e[50]=V("?"))]),e[51]||(e[51]=l("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acción es irreversible.",-1))])])]),_:1},8,["visible","style"]),i(w,{visible:$.value,"onUpdate:visible":e[18]||(e[18]=s=>$.value=s),header:"Cambios sin guardar",modal:!0,style:ke(oe.value),closable:!1},{footer:b(()=>[l("div",Yl,[l("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Ue},[i(n(g),{icon:n($e),class:"h-4"},null,8,["icon"]),e[54]||(e[54]=l("span",null,"Continuar",-1))]),l("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:xe},[i(n(g),{icon:n(ka),class:"h-4"},null,8,["icon"]),e[55]||(e[55]=l("span",null,"Salir sin guardar",-1))])])]),default:b(()=>[l("div",Xl,[i(n(g),{icon:n(ze),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e[53]||(e[53]=l("div",{class:"flex flex-col"},[l("span",null,"¡Tienes información sin guardar!"),l("span",{class:"text-red-600 text-sm font-medium mt-1"},"¿Deseas salir sin guardar?")],-1))])]),_:1},8,["visible","style"]),i(w,{visible:be.value,"onUpdate:visible":e[21]||(e[21]=s=>be.value=s),header:"Imágenes del paquete",modal:!0,closable:!1,style:{width:"700px"}},{footer:b(()=>[l("div",ss,[l("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[20]||(e[20]=s=>be.value=!1)},[i(n(g),{icon:n(X),class:"h-5"},null,8,["icon"]),e[56]||(e[56]=l("span",null,"Cerrar",-1))])])]),default:b(()=>[K.value.length?(f(),p("div",Zl,[i(_e,{value:K.value,numVisible:1,numScroll:1,circular:!0,page:ae.value,"onUpdate:page":e[19]||(e[19]=s=>ae.value=s),class:"w-full",showIndicators:K.value.length>1,showNavigators:K.value.length>1,style:{"max-width":"610px"}},{item:b(s=>[l("div",es,[l("img",{src:s.data,alt:"Imagen paquete",class:"w-auto h-full max-h-96 object-contain rounded shadow"},null,8,as)])]),_:1},8,["value","page","showIndicators","showNavigators"])])):(f(),p("div",ls,"No hay imágenes para este paquete."))]),_:1},8,["visible"])]),i(Pa,{visible:me.value,"onUpdate:visible":e[22]||(e[22]=s=>me.value=s),detailsVisible:pe.value,"onUpdate:detailsVisible":e[23]||(e[23]=s=>pe.value=s),carouselVisible:fe.value,"onUpdate:carouselVisible":e[24]||(e[24]=s=>fe.value=s),deleteVisible:L.value,"onUpdate:deleteVisible":e[25]||(e[25]=s=>L.value=s),unsavedChangesVisible:$.value,"onUpdate:unsavedChangesVisible":e[26]||(e[26]=s=>$.value=s),paquete:ne.value,dialogStyle:oe.value,selectedImages:K.value,carouselIndex:ae.value,imagePath:ts,isDeleting:I.value,"onUpdate:carouselIndex":e[27]||(e[27]=s=>ae.value=s),onDuplicate:va,onChangeStatus:ma,onGenerateReport:pa,onArchive:fa,onViewDetails:ua,onOpenImageModal:ca,onDeletePaquete:Ne,onCancelDelete:e[28]||(e[28]=s=>L.value=!1),onCloseWithoutSaving:xe,onContinueEditing:Ue},null,8,["visible","detailsVisible","carouselVisible","deleteVisible","unsavedChangesVisible","paquete","dialogStyle","selectedImages","carouselIndex","isDeleting"])]),_:1})],64)}}};export{vs as default};
