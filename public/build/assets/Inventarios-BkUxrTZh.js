import{r as d,E as ie,w as xe,o as fe,k as w,h as E,d as r,x as u,p as l,e as t,$ as n,a0 as ye,t as a,q as c,y as F,j as y,A as K,c as m,F as we,l as he,N as I}from"./vendor-CLNWHdEK.js";import{A as _e}from"./AuthenticatedLayout-F65G6cJn.js";import{A as ke,D as b}from"./ui-DPmvhuIJ.js";import{t as Ae,u as Ce,h as re,v as je,f as B,c as Se,w as Q,l as Ve}from"./index-Bl_KdgJY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const De={class:"container mx-auto px-4 py-6"},Pe={class:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-8"},Te={class:"flex items-center justify-between text-white p-2 sm:p-4"},Le={class:"text-xl sm:text-3xl font-bold"},Ee={class:"flex items-center justify-between text-white p-2 sm:p-4"},Fe={class:"text-xl sm:text-3xl font-bold"},Me={class:"flex items-center justify-between text-white p-2 sm:p-4"},Re={class:"text-xl sm:text-3xl font-bold"},Ne={class:"flex items-center justify-between text-white p-2 sm:p-4"},Ue={class:"text-sm sm:text-3xl font-bold"},Ie={class:"bg-white rounded-lg shadow-md"},Be={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},$e={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},We={class:"flex items-center gap-3"},ze={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},Oe=["disabled"],qe=["disabled"],Je={class:"space-y-3"},Ge={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-3"},He={class:"col-span-1"},Ke={class:"col-span-1"},Qe={class:"col-span-1 hidden md:block"},Xe={class:"col-span-1 hidden md:block"},Ye={class:"col-span-2 flex gap-3 md:hidden"},Ze={class:"text-sm font-medium leading-relaxed"},et=["title"],tt={class:"block text-xs text-gray-500"},ot=["title"],st={class:"text-sm leading-relaxed"},lt={class:"space-y-4"},at={key:0,class:"p-error"},nt={key:0,class:"p-4 bg-blue-50 rounded-lg"},it={class:"text-sm text-blue-700"},rt={key:0,class:"p-error"},dt={class:"flex justify-center gap-4 w-full mt-6"},ut=["disabled"],ct={key:2},mt={key:3},pt=["disabled"],vt={key:0,class:"space-y-4"},bt={class:"grid grid-cols-2 gap-4"},gt={class:"col-span-2"},xt={key:0,class:"text-sm text-gray-600 mt-1"},ft={key:0},yt={key:0},wt={class:"mt-1 p-3 bg-gray-50 rounded-lg"},ht={key:1,class:"p-3 bg-blue-50 rounded-lg"},_t={class:"flex justify-center gap-4 w-full mt-6"},kt={key:0,class:"text-center py-8"},At={key:1,class:"text-center py-8"},Ct={key:2,class:"space-y-4"},jt={class:"max-h-96 overflow-y-auto"},St={class:"flex-1"},Vt={class:"font-semibold text-gray-800"},Dt={class:"text-sm text-gray-500"},Pt={class:"flex gap-4 text-xs text-gray-600 mt-1"},Tt={key:0},Lt={class:"ml-4"},Et={class:"border-t pt-4"},Ft={class:"text-sm text-gray-600 mb-3"},Mt={class:"flex justify-center gap-4 w-full mt-6"},Wt={__name:"Inventarios",setup(Rt){const C=ke(),$=d([]),x=d([]),h=d({}),X=d(!1),M=d(!1),R=d(""),N=d(null),k=d(!1);d(!1),d(!1);const U=d(!1),i=d(null),P=d(!1),j=d([]),T=d(""),S=d(""),W=d(!1),p=d({producto_id:null,tipo_movimiento:null,fecha_desde:null,fecha_hasta:null}),V=d({}),de=[{label:"Entrada",value:"ENTRADA"},{label:"Salida",value:"SALIDA"},{label:"Ajuste",value:"AJUSTE"}],Y=d(typeof window<"u"?window.innerWidth:1024),z=ie(()=>{let s=$.value;if(R.value){const e=R.value.toLowerCase();s=s.filter(g=>{var v,L,D,A,_;return((L=(v=g.producto)==null?void 0:v.nombre)==null?void 0:L.toLowerCase().includes(e))||((D=g.motivo)==null?void 0:D.toLowerCase().includes(e))||((_=(A=g.user)==null?void 0:A.name)==null?void 0:_.toLowerCase().includes(e))})}return s}),O=ie(()=>Y.value<640?{width:"95vw",maxWidth:"380px"}:Y.value<768?{width:"400px"}:{width:"450px"}),q=async()=>{try{const[s,e,g]=await Promise.all([I.get("/api/inventario",{params:p.value}),I.get("/api/productos"),I.get("/api/inventario/resumen")]);$.value=s.data.data||s.data||[];const v=e.data.data||e.data||[];x.value=Array.isArray(v)?v:[],x.value.length>0&&!Array.isArray(x.value)&&(console.warn("Los productos no tienen el formato esperado:",x.value),x.value=[]),h.value=g.data||{}}catch(s){console.error("Error al cargar datos:",s),$.value=[],x.value=[],h.value={},C.add({severity:"error",summary:"Error",detail:"Error al cargar los datos del inventario",life:4e3})}},ue=async()=>{X.value=!0,C.add({severity:"info",summary:"Cargando inventario...",life:2e3});try{await q(),C.add({severity:"success",summary:"Inventario cargado",life:2e3})}finally{X.value=!1}},Z=async()=>{k.value=!0;try{await new Promise(s=>setTimeout(s,300)),p.value={producto_id:null,tipo_movimiento:null,fecha_desde:null,fecha_hasta:null},C.add({severity:"success",summary:"Filtros limpiados",life:2e3}),await q()}finally{k.value=!1}},ce=()=>{if(formAjustar.value.producto_id&&Array.isArray(x.value)){const s=x.value.find(e=>e.id===formAjustar.value.producto_id);N.value=(s==null?void 0:s.stock_actual)||0}else N.value=null},J=async s=>{let e=0,g="";switch(s){case"disponibles":e=h.value.productos_disponibles||0,g="/api/admin/productos/disponibles",T.value="Productos Disponibles";break;case"agotados":e=h.value.productos_agotados||0,g="/api/inventario/agotados",T.value="Productos Agotados";break;case"stock_bajo":e=h.value.productos_stock_bajo||0,g="/api/inventario/stock-bajo",T.value="Productos con Stock Bajo";break}if(e===0){C.add({severity:"info",summary:"Sin registros",detail:`No hay productos en estado: ${T.value.toLowerCase()}`,life:3e3});return}S.value=s,W.value=!0;try{const v=await I.get(g);j.value=v.data.data||v.data||[],P.value=!0}catch{C.add({severity:"error",summary:"Error",detail:"Error al cargar los productos",life:4e3})}finally{W.value=!1}},me=()=>{P.value=!1,window.location.href="/productos"},pe=s=>{s.originalEvent.target.closest("button")||(i.value=s.data,U.value=!0)},ee=s=>{const e=new Date(s);return window.innerWidth<640?e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):e.toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},te=s=>new Intl.NumberFormat("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s||0),G=s=>{const e={venta:"Venta",ajuste_aumento:"Ajuste (Aumento)",ajuste_reduccion:"Ajuste (Reducci칩n)",entrada_manual:"Entrada Manual",cancelacion_venta:"Cancelaci칩n de Venta",eliminacion_venta:"Eliminaci칩n de Venta","":"Sin especificar",null:"Sin especificar",undefined:"Sin especificar"};return!e[s]&&s?s.charAt(0).toUpperCase()+s.slice(1).replace(/_/g," "):e[s]||"Sin especificar"},oe=s=>s.tipo_movimiento||"Sin definir",ve=s=>{const e=s.tipo_movimiento;return e==="ENTRADA"?"success":e==="SALIDA"?"danger":e==="AJUSTE"?"warning":"secondary"};return xe(p,()=>{q()},{deep:!0}),fe(()=>{ue()}),(s,e)=>{const g=w("Toast"),v=w("Card"),L=w("InputText"),D=w("Select"),A=w("DatePicker"),_=w("Column"),se=w("Tag"),be=w("DataTable"),ge=w("Textarea"),H=w("Dialog");return r(),E(_e,null,{default:u(()=>[l(n(ye),{title:"Inventarios"}),l(g,{class:"z-[9999]"}),t("div",De,[e[29]||(e[29]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Inventarios"),t("p",{class:"text-gray-600"},"Monitoreo y an치lisis del estado del inventario")],-1)),t("div",Pe,[l(v,{class:"bg-gradient-to-r from-green-500 to-green-600 cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:e[0]||(e[0]=o=>J("disponibles"))},{content:u(()=>[t("div",Te,[t("div",null,[e[20]||(e[20]=t("p",{class:"text-xs sm:text-sm opacity-90"},"Productos Disponibles",-1)),t("p",Le,a(h.value.productos_disponibles||0),1),e[21]||(e[21]=t("p",{class:"text-xs opacity-75 mt-1"},"游녡 Clic para ver detalles",-1))]),l(n(b),{icon:n(Ae),class:"text-2xl sm:text-4xl opacity-75"},null,8,["icon"])])]),_:1}),l(v,{class:"bg-gradient-to-r from-red-500 to-red-600 cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:e[1]||(e[1]=o=>J("agotados"))},{content:u(()=>[t("div",Ee,[t("div",null,[e[22]||(e[22]=t("p",{class:"text-xs sm:text-sm opacity-90"},"Productos Agotados",-1)),t("p",Fe,a(h.value.productos_agotados||0),1),e[23]||(e[23]=t("p",{class:"text-xs opacity-75 mt-1"},"游녡 Clic para ver detalles",-1))]),l(n(b),{icon:n(Ce),class:"text-2xl sm:text-4xl opacity-75"},null,8,["icon"])])]),_:1}),l(v,{class:"bg-gradient-to-r from-yellow-500 to-yellow-600 cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:e[2]||(e[2]=o=>J("stock_bajo"))},{content:u(()=>[t("div",Me,[t("div",null,[e[24]||(e[24]=t("p",{class:"text-xs sm:text-sm opacity-90"},"Stock Bajo",-1)),t("p",Re,a(h.value.productos_stock_bajo||0),1),e[25]||(e[25]=t("p",{class:"text-xs opacity-75 mt-1"},"游녡 Clic para ver detalles",-1))]),l(n(b),{icon:n(re),class:"text-2xl sm:text-4xl opacity-75"},null,8,["icon"])])]),_:1}),l(v,{class:"bg-gradient-to-r from-blue-500 to-blue-600"},{content:u(()=>[t("div",Ne,[t("div",null,[e[26]||(e[26]=t("p",{class:"text-xs sm:text-sm opacity-90"},"Valor Total",-1)),t("p",Ue,"$"+a(te(h.value.valor_total_inventario)),1)]),l(n(b),{icon:n(je),class:"text-2xl sm:text-4xl opacity-75"},null,8,["icon"])])]),_:1})]),t("div",Ie,[e[28]||(e[28]=t("div",{class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},[t("div",null,[t("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Historial de Movimientos"),t("p",{class:"text-gray-500 text-sm text-center sm:text-start mt-1"},[c(" 游늵 Vista de solo lectura - Para gestionar stock, ve a "),t("span",{class:"text-blue-600 font-medium"},"Productos > M치s Acciones > Actualizar Stock")])])],-1)),l(be,{value:z.value,dataKey:"id",paginator:!0,rows:10,rowsPerPageOptions:[10,25,50],globalFilterFields:["producto.nombre","motivo","user.name"],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} movimientos",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:pe,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:u(()=>[t("div",Be,[t("div",$e,[t("div",We,[e[27]||(e[27]=t("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[t("i",{class:"pi pi-filter text-blue-600 text-sm"}),t("span",null,"Filtros")],-1)),t("div",ze,a(z.value.length)+" resultado"+a(z.value.length!==1?"s":""),1),t("button",{onClick:Z,disabled:k.value,class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2"},[k.value?(r(),E(n(b),{key:0,icon:n(B),class:"animate-spin h-3 w-3"},null,8,["icon"])):y("",!0),t("span",null,a(k.value?"Limpiando...":"Limpiar filtros"),1)],8,Oe)]),t("button",{onClick:Z,disabled:k.value,class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2"},[k.value?(r(),E(n(b),{key:0,icon:n(B),class:"animate-spin h-3 w-3"},null,8,["icon"])):y("",!0),t("span",null,a(k.value?"Limpiando...":"Limpiar filtros"),1)],8,qe)]),t("div",Je,[t("div",null,[l(L,{modelValue:R.value,"onUpdate:modelValue":e[3]||(e[3]=o=>R.value=o),placeholder:"游댌 Buscar movimientos...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),t("div",Ge,[t("div",He,[l(D,{modelValue:p.value.producto_id,"onUpdate:modelValue":e[4]||(e[4]=o=>p.value.producto_id=o),options:Array.isArray(x.value)?x.value:[],optionLabel:"nombre",optionValue:"id",placeholder:"Producto",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},showClear:""},null,8,["modelValue","options"])]),t("div",Ke,[l(D,{modelValue:p.value.tipo_movimiento,"onUpdate:modelValue":e[5]||(e[5]=o=>p.value.tipo_movimiento=o),options:de,optionLabel:"label",optionValue:"value",placeholder:"Tipo",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},showClear:""},null,8,["modelValue"])]),t("div",Qe,[l(A,{modelValue:p.value.fecha_desde,"onUpdate:modelValue":e[6]||(e[6]=o=>p.value.fecha_desde=o),placeholder:"Fecha desde",dateFormat:"yy-mm-dd",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},showIcon:""},null,8,["modelValue"])]),t("div",Xe,[l(A,{modelValue:p.value.fecha_hasta,"onUpdate:modelValue":e[7]||(e[7]=o=>p.value.fecha_hasta=o),placeholder:"Fecha hasta",dateFormat:"yy-mm-dd",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},showIcon:""},null,8,["modelValue"])]),t("div",Ye,[l(A,{modelValue:p.value.fecha_desde,"onUpdate:modelValue":e[8]||(e[8]=o=>p.value.fecha_desde=o),placeholder:"Fecha desde",dateFormat:"dd/mm/yy",class:"flex-1 h-9 text-sm rounded-md border border-blue-300",showIcon:""},null,8,["modelValue"]),l(A,{modelValue:p.value.fecha_hasta,"onUpdate:modelValue":e[9]||(e[9]=o=>p.value.fecha_hasta=o),placeholder:"Fecha hasta",dateFormat:"dd/mm/yy",class:"flex-1 h-9 text-sm rounded-md border border-blue-300",showIcon:""},null,8,["modelValue"])])])])])]),default:u(()=>[l(_,{field:"fecha_movimiento",header:"Fecha",sortable:"",class:"w-32"},{body:u(({data:o})=>[t("div",Ze,a(ee(o.fecha_movimiento)),1)]),_:1}),l(_,{field:"producto.nombre",header:"Producto",sortable:"",class:"w-40"},{body:u(({data:o})=>{var f,le,ae,ne;return[t("div",null,[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"150px","text-overflow":"ellipsis","white-space":"nowrap"},title:(f=o.producto)==null?void 0:f.nombre},a((le=o.producto)==null?void 0:le.nombre),9,et),t("span",tt,a((ne=(ae=o.producto)==null?void 0:ae.categoria)==null?void 0:ne.nombre),1)])]}),_:1}),l(_,{field:"tipo_movimiento",header:"Tipo",sortable:"",class:"w-24 hidden sm:table-cell"},{body:u(({data:o})=>[l(se,{value:o.tipo_movimiento,severity:o.tipo_movimiento==="ENTRADA"?"success":o.tipo_movimiento==="SALIDA"?"danger":"warning",class:"text-xs"},null,8,["value","severity"])]),_:1}),l(_,{field:"cantidad",header:"Cantidad",sortable:"",class:"w-20 hidden sm:table-cell"},{body:u(({data:o})=>[t("span",{class:F([o.tipo_movimiento==="ENTRADA"?"text-green-600":o.tipo_movimiento==="SALIDA"?"text-red-600":"text-orange-600","text-sm font-medium"])},a(o.tipo_movimiento==="ENTRADA"?"+":o.tipo_movimiento==="SALIDA"?"-":"췀")+a(o.cantidad),3)]),_:1}),l(_,{field:"motivo",header:"Motivo",sortable:"",class:"w-32 hidden md:table-cell"},{body:u(({data:o})=>[t("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"120px","text-overflow":"ellipsis","white-space":"nowrap"},title:G(o.motivo)},a(G(o.motivo)),9,ot)]),_:1}),l(_,{field:"user.name",header:"Usuario",sortable:"",class:"w-28 hidden lg:table-cell"},{body:u(({data:o})=>{var f;return[t("div",st,a(((f=o.user)==null?void 0:f.name)||"Sistema"),1)]}),_:1})]),_:1},8,["value"])])]),l(H,{visible:s.mostrarModalAjustar,"onUpdate:visible":e[15]||(e[15]=o=>s.mostrarModalAjustar=o),modal:"",header:"Ajustar Stock",style:K(O.value)},{footer:u(()=>[t("div",dt,[t("button",{onClick:e[13]||(e[13]=(...o)=>s.ajustarStock&&s.ajustarStock(...o)),disabled:M.value,class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[M.value?(r(),E(n(b),{key:0,icon:n(B),class:"animate-spin h-5 text-white"},null,8,["icon"])):(r(),E(n(b),{key:1,icon:n(Se),class:"h-5"},null,8,["icon"])),M.value?(r(),m("span",mt,"Ajustando...")):(r(),m("span",ct,"Ajustar Stock"))],8,ut),t("button",{type:"button",onClick:e[14]||(e[14]=o=>s.mostrarModalAjustar=!1),disabled:M.value,class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},[l(n(b),{icon:n(Q),class:"h-5"},null,8,["icon"]),e[34]||(e[34]=c("Cancelar "))],8,pt)])]),default:u(()=>[t("div",lt,[t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Producto",-1)),l(D,{modelValue:s.formAjustar.producto_id,"onUpdate:modelValue":e[10]||(e[10]=o=>s.formAjustar.producto_id=o),options:Array.isArray(x.value)?x.value:[],optionLabel:"nombre",optionValue:"id",placeholder:"Seleccionar producto",class:F(["w-full",{"p-invalid":V.value.producto_id}]),onChange:ce},null,8,["modelValue","options","class"]),V.value.producto_id?(r(),m("small",at,a(V.value.producto_id[0]),1)):y("",!0)]),N.value!==null?(r(),m("div",nt,[t("p",it,[e[31]||(e[31]=t("strong",null,"Stock actual:",-1)),c(" "+a(N.value)+" unidades ",1)])])):y("",!0),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nuevo Stock",-1)),l(L,{modelValue:s.formAjustar.nuevo_stock,"onUpdate:modelValue":e[11]||(e[11]=o=>s.formAjustar.nuevo_stock=o),placeholder:"Nuevo stock",type:"number",min:"0",class:F(["w-full",{"p-invalid":V.value.nuevo_stock}])},null,8,["modelValue","class"]),V.value.nuevo_stock?(r(),m("small",rt,a(V.value.nuevo_stock[0]),1)):y("",!0)]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Observaciones",-1)),l(ge,{modelValue:s.formAjustar.observacion,"onUpdate:modelValue":e[12]||(e[12]=o=>s.formAjustar.observacion=o),placeholder:"Motivo del ajuste",rows:"3",class:"w-full"},null,8,["modelValue"])])])]),_:1},8,["visible","style"]),l(H,{visible:U.value,"onUpdate:visible":e[17]||(e[17]=o=>U.value=o),modal:"",header:"Detalle del Movimiento",style:K(O.value),closable:!1,draggable:!1},{footer:u(()=>[t("div",_t,[t("button",{type:"button",onClick:e[16]||(e[16]=o=>U.value=!1),class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},[l(n(b),{icon:n(Q),class:"h-5"},null,8,["icon"]),e[44]||(e[44]=c("Cerrar "))])])]),default:u(()=>{var o,f;return[i.value?(r(),m("div",vt,[t("div",bt,[t("div",null,[e[35]||(e[35]=t("strong",null,"Fecha:",-1)),c(" "+a(ee(i.value.fecha_movimiento)),1)]),t("div",null,[e[36]||(e[36]=t("strong",null,"Tipo:",-1)),l(se,{value:oe(i.value),severity:ve(i.value)},{default:u(()=>[c(a(oe(i.value)),1)]),_:1},8,["value","severity"])]),t("div",null,[e[37]||(e[37]=t("strong",null,"Producto:",-1)),c(" "+a((o=i.value.producto)==null?void 0:o.nombre),1)]),t("div",null,[e[38]||(e[38]=t("strong",null,"Cantidad:",-1)),t("span",{class:F(i.value.tipo_movimiento==="ENTRADA"?"text-green-600":"text-red-600")},a(i.value.tipo_movimiento==="ENTRADA"?"+":"-")+a(i.value.cantidad),3)]),t("div",gt,[e[41]||(e[41]=t("strong",null,"Usuario:",-1)),c(" "+a(((f=i.value.user)==null?void 0:f.name)||"Sistema")+" ",1),i.value.user?(r(),m("div",xt,[t("div",null,[e[39]||(e[39]=t("strong",null,"Email:",-1)),c(" "+a(i.value.user.email),1)]),i.value.user.roles&&i.value.user.roles.length>0?(r(),m("div",ft,[e[40]||(e[40]=t("strong",null,"Rol:",-1)),c(" "+a(i.value.user.roles[0].name),1)])):y("",!0)])):y("",!0)]),t("div",null,[e[42]||(e[42]=t("strong",null,"Motivo:",-1)),c(" "+a(G(i.value.motivo)),1)])]),i.value.observacion?(r(),m("div",yt,[e[43]||(e[43]=t("strong",null,"Observaciones:",-1)),t("p",wt,a(i.value.observacion),1)])):y("",!0),i.value.venta_id?(r(),m("div",ht,[t("strong",null,"Relacionado con venta #"+a(i.value.venta_id),1)])):y("",!0)])):y("",!0)]}),_:1},8,["visible","style"]),l(H,{visible:P.value,"onUpdate:visible":e[19]||(e[19]=o=>P.value=o),modal:"",header:T.value,style:K(O.value),closable:!1,draggable:!1},{footer:u(()=>[t("div",Mt,[t("button",{onClick:me,class:"bg-green-500 hover:bg-green-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},[l(n(b),{icon:n(Ve),class:"h-5"},null,8,["icon"]),e[50]||(e[50]=c(" Gestionar Productos "))]),t("button",{type:"button",onClick:e[18]||(e[18]=o=>P.value=!1),class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},[l(n(b),{icon:n(Q),class:"h-5"},null,8,["icon"]),e[51]||(e[51]=c("Cerrar "))])])]),default:u(()=>[W.value?(r(),m("div",kt,[l(n(b),{icon:n(B),class:"animate-spin h-8 w-8 text-blue-600 mb-3"},null,8,["icon"]),e[45]||(e[45]=t("p",{class:"text-gray-600"},"Cargando productos...",-1))])):j.value.length===0?(r(),m("div",At,[l(n(b),{icon:n(re),class:"h-12 w-12 text-gray-400 mb-3"},null,8,["icon"]),e[46]||(e[46]=t("p",{class:"text-gray-600"},"No se encontraron productos en este estado.",-1))])):(r(),m("div",Ct,[t("div",jt,[(r(!0),m(we,null,he(j.value,o=>{var f;return r(),m("div",{key:o.id,class:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50"},[t("div",St,[t("h4",Vt,a(o.nombre),1),t("p",Dt,a(((f=o.categoria)==null?void 0:f.nombre)||"Sin categor칤a"),1),t("div",Pt,[t("span",null,[e[47]||(e[47]=c("Stock: ")),t("strong",null,a(o.stock_actual||0),1)]),t("span",null,[e[48]||(e[48]=c("M칤nimo: ")),t("strong",null,a(o.stock_minimo||1),1)]),o.precio?(r(),m("span",Tt,[e[49]||(e[49]=c("Precio: ")),t("strong",null,"$"+a(te(o.precio)),1)])):y("",!0)])]),t("div",Lt,[t("span",{class:F(["px-2 py-1 rounded-full text-xs font-medium",{"bg-green-100 text-green-800":S.value==="disponibles","bg-red-100 text-red-800":S.value==="agotados","bg-yellow-100 text-yellow-800":S.value==="stock_bajo"}])},a(S.value==="disponibles"?"Disponible":S.value==="agotados"?"Agotado":"Stock Bajo"),3)])])}),128))]),t("div",Et,[t("p",Ft,[t("strong",null,a(j.value.length),1),c(" producto"+a(j.value.length!==1?"s":"")+" encontrado"+a(j.value.length!==1?"s":""),1)])])]))]),_:1},8,["visible","header","style"])]),_:1})}}};export{Wt as default};
