import{A as u}from"./ui-BT-X-j9i.js";import{C as J,g as y,ac as Q,k as Y,h as j,f as N,d as _,c as ee,e as se}from"./index-qhcjOIPB.js";import{E,r as ae,k as P,c,d as m,p as l,x as f,e as s,q as b,a0 as a,t as g,F as w,l as z,A as x,y as h,j as T}from"./vendor-Du8cTcRM.js";const te={key:0,class:"space-y-6"},le={class:"bg-gray-50 p-4 rounded-lg"},oe={class:"text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2"},ie={class:"flex flex-col gap-2"},ne={class:"ml-2 text-gray-900"},de={class:"ml-2 text-gray-900"},re={class:"ml-2 text-gray-900 break-words"},ue={class:"ml-2 text-gray-900"},ce={class:"ml-2 text-gray-900"},me={key:1,class:"text-center text-gray-500 py-8"},be={class:"flex justify-center w-full mt-6"},ge={class:"space-y-3"},pe={class:"flex items-center gap-4 mb-4"},fe={class:"text-gray-600"},ve={class:"flex justify-center gap-4 w-full"},xe=["disabled"],ye=["disabled"],we={class:"flex items-center gap-4 mb-4"},he={class:"flex justify-center gap-4 w-full"},Ce={class:"space-y-4"},ke={class:"text-sm text-gray-600 mb-4"},Ve={class:"w-full flex flex-col"},De={class:"flex items-center gap-4"},Ee={key:0,class:"ml-36 mt-1"},Le={class:"w-full flex flex-col"},Ae={class:"flex items-center gap-4"},Be={key:0,class:"text-red-500 ml-36 mt-1"},Ue={class:"flex justify-center gap-4 w-full mt-6"},Se=["disabled"],je={key:0},Ne={key:1},Pe=["disabled"],Me={__name:"Modales",props:{visible:Boolean,deleteVisible:Boolean,unsavedChangesVisible:Boolean,passwordVisible:Boolean,empleado:Object,usuario:Object,detailsVisible:Boolean,dialogStyle:Object,isDeleting:Boolean,isLoading:Boolean,submitted:Boolean},emits:["update:visible","update:delete-visible","update:unsaved-changes-visible","update:password-visible","update:details-visible","change-password","send-credentials","view-details","delete-empleado","cancel-delete","close-without-saving","continue-editing","update-password"],setup(t,{emit:F}){const i=t,d=F,C=E({get:()=>i.detailsVisible,set:o=>d("update:details-visible",o)}),n=ae({password:"",password_confirmation:""}),k=E(()=>{const o=[],e=n.value.password||"";return e.length>0&&e.length<8&&o.push("La contraseña debe tener al menos 8 caracteres."),e.length>0&&!/[A-Z]/.test(e)&&o.push("La contraseña debe incluir al menos una letra mayúscula."),e.length>0&&!/[0-9]/.test(e)&&o.push("La contraseña debe incluir al menos un número."),e.length>0&&/[\s.]/.test(e)&&o.push("La contraseña no puede contener espacios ni puntos."),o}),V=E(()=>n.value.password_confirmation.length>0&&n.value.password!==n.value.password_confirmation?"Las contraseñas no coinciden.":""),M=()=>{n.value={password:"",password_confirmation:""}},q=()=>{d("change-password",i.empleado)},O=()=>{d("view-details",i.empleado)},I=()=>{d("delete-empleado")},R=()=>{d("cancel-delete")},$=()=>{d("close-without-saving")},K=()=>{d("continue-editing")},W=()=>{!n.value.password||n.value.password!==n.value.password_confirmation||d("update-password",n.value)},X=o=>{d("update:visible",o)},Z=o=>{d("update:delete-visible",o)},G=o=>{d("update:unsaved-changes-visible",o)},L=o=>{d("update:password-visible",o),o||M()};return(o,e)=>{const v=P("Dialog"),A=P("Password");return m(),c(w,null,[l(v,{visible:C.value,"onUpdate:visible":e[1]||(e[1]=r=>C.value=r),header:"Detalles del Empleado",modal:!0,style:x(t.dialogStyle),closable:!1,draggable:!1},{footer:f(()=>[s("div",be,[s("button",{class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[0]||(e[0]=r=>C.value=!1)},[l(a(u),{icon:a(y),class:"h-5"},null,8,["icon"]),e[11]||(e[11]=b(" Cerrar "))])])]),default:f(()=>{var r,p,B,U,S;return[i.usuario||i.empleado?(m(),c("div",te,[s("div",le,[s("h3",oe,[l(a(u),{icon:a(J),class:"h-5 w-5 text-blue-600"},null,8,["icon"]),e[5]||(e[5]=b(" Usuario "))]),s("div",ie,[s("div",null,[e[6]||(e[6]=s("span",{class:"font-medium text-gray-700"},"Nombre:",-1)),s("span",ne,g(((r=i.usuario)==null?void 0:r.name)??"-"),1)]),s("div",null,[e[7]||(e[7]=s("span",{class:"font-medium text-gray-700"},"Email:",-1)),s("span",de,g(((p=i.usuario)==null?void 0:p.email)??"-"),1)]),s("div",null,[e[8]||(e[8]=s("span",{class:"font-medium text-gray-700"},"Rol:",-1)),s("span",re,[Array.isArray((B=i.usuario)==null?void 0:B.roles)&&i.usuario.roles.length?(m(!0),c(w,{key:0},z(i.usuario.roles,(D,H)=>(m(),c("span",{key:D.id||H,class:"inline-block bg-blue-100 text-blue-800 rounded px-2 py-0.5 text-xs font-semibold mr-1 mb-1"},g(D.name||D),1))),128)):(m(),c(w,{key:1},[b(" - ")],64))])]),s("div",null,[e[9]||(e[9]=s("span",{class:"font-medium text-gray-700"},"Cargo:",-1)),s("span",ue,g(((U=i.empleado)==null?void 0:U.cargo)??"-"),1)]),s("div",null,[e[10]||(e[10]=s("span",{class:"font-medium text-gray-700"},"Teléfono:",-1)),s("span",ce,g(((S=i.empleado)==null?void 0:S.telefono)??"-"),1)])])])])):(m(),c("div",me,"No hay datos para mostrar."))]}),_:1},8,["visible","style"]),l(v,{visible:t.visible,"onUpdate:visible":X,header:"Más Acciones",modal:!0,style:x(t.dialogStyle),closable:!0,draggable:!1},{default:f(()=>[s("div",ge,[s("button",{onClick:q,class:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-blue-50 rounded-lg transition-colors duration-200 border border-gray-200 hover:border-blue-300"},[l(a(u),{icon:a(Q),class:"h-5 w-5 text-blue-600"},null,8,["icon"]),e[12]||(e[12]=s("div",null,[s("div",{class:"font-medium text-gray-900"},"Cambiar Contraseña"),s("div",{class:"text-sm text-gray-500"},"Actualizar la contraseña de acceso")],-1))]),s("button",{onClick:O,class:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-purple-50 rounded-lg transition-colors duration-200 border border-gray-200 hover:border-purple-300"},[l(a(u),{icon:a(Y),class:"h-5 w-5 text-purple-600"},null,8,["icon"]),e[13]||(e[13]=s("div",null,[s("div",{class:"font-medium text-gray-900"},"Ver Detalles"),s("div",{class:"text-sm text-gray-500"},"Información completa del empleado")],-1))])])]),_:1},8,["visible","style"]),l(v,{visible:t.deleteVisible,"onUpdate:visible":Z,header:"Confirmar Eliminación",modal:!0,style:x(t.dialogStyle),closable:!1,draggable:!1},{footer:f(()=>[s("div",ve,[s("button",{class:"bg-red-500 hover:bg-red-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:I,disabled:t.isDeleting},[l(a(u),{icon:t.isDeleting?a(N):a(_),class:h(["h-4 w-4",{"animate-spin":t.isDeleting}])},null,8,["icon","class"]),s("span",null,g(t.isDeleting?"Eliminando...":"Eliminar"),1)],8,xe),s("button",{type:"button",class:"bg-gray-500 hover:bg-gray-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:R,disabled:t.isDeleting},[l(a(u),{icon:a(y),class:"h-4 w-4"},null,8,["icon"]),e[18]||(e[18]=b(" Cancelar "))],8,ye)])]),default:f(()=>{var r;return[s("div",pe,[l(a(u),{icon:a(j),class:"h-12 w-12 text-red-500"},null,8,["icon"]),s("div",null,[e[16]||(e[16]=s("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"¿Eliminar empleado?",-1)),s("p",fe,[e[14]||(e[14]=b(" ¿Estás seguro de que deseas eliminar al empleado ")),s("strong",null,'"'+g((r=t.empleado)==null?void 0:r.nombre)+'"',1),e[15]||(e[15]=b("? "))]),e[17]||(e[17]=s("p",{class:"text-sm text-red-600 mt-2"}," Esta acción no se puede deshacer y eliminará tanto el empleado como su usuario asociado. ",-1))])])]}),_:1},8,["visible","style"]),l(v,{visible:t.unsavedChangesVisible,"onUpdate:visible":G,header:"Cambios sin guardar",modal:!0,style:x(t.dialogStyle),closable:!1,draggable:!1},{footer:f(()=>[s("div",he,[s("button",{class:"bg-red-500 hover:bg-red-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:$},[l(a(u),{icon:a(y),class:"h-4 w-4"},null,8,["icon"]),e[20]||(e[20]=b(" Descartar cambios "))]),s("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:K},[l(a(u),{icon:a(ee),class:"h-4 w-4"},null,8,["icon"]),e[21]||(e[21]=b(" Continuar editando "))])])]),default:f(()=>[s("div",we,[l(a(u),{icon:a(j),class:"h-12 w-12 text-yellow-500"},null,8,["icon"]),e[19]||(e[19]=s("div",null,[s("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"¿Descartar cambios?"),s("p",{class:"text-gray-600"}," Tienes cambios sin guardar. ¿Estás seguro de que deseas cerrar sin guardar? ")],-1))])]),_:1},8,["visible","style"]),l(v,{visible:t.passwordVisible,"onUpdate:visible":L,header:"Cambiar Contraseña",modal:!0,style:x(t.dialogStyle),closable:!1,draggable:!1},{footer:f(()=>[s("div",Ue,[s("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:W,disabled:t.isLoading},[l(a(u),{icon:t.isLoading?a(N):a(se),class:h(["h-5 text-white",{"animate-spin":t.isLoading}])},null,8,["icon","class"]),t.isLoading?(m(),c("span",Ne,"Actualizando...")):(m(),c("span",je,"Actualizar"))],8,Se),s("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[4]||(e[4]=r=>L(!1)),disabled:t.isLoading},[l(a(u),{icon:a(y),class:"h-5"},null,8,["icon"]),e[25]||(e[25]=b(" Cancelar "))],8,Pe)])]),default:f(()=>{var r;return[s("div",Ce,[s("div",ke,[e[22]||(e[22]=b(" Actualizar la contraseña para: ")),s("strong",null,g((r=t.empleado)==null?void 0:r.nombre),1)]),s("div",Ve,[s("div",De,[e[23]||(e[23]=s("label",{for:"new_password",class:"w-32 flex items-center gap-1"},[b(" Nueva contraseña: "),s("span",{class:"text-red-500 font-bold"},"*")],-1)),l(A,{modelValue:n.value.password,"onUpdate:modelValue":e[2]||(e[2]=p=>n.value.password=p),id:"new_password",name:"new_password",class:h([{"p-invalid":i.submitted&&k.value.length>0},"flex-1"]),placeholder:"Nueva contraseña",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),k.value.length>0?(m(),c("div",Ee,[(m(!0),c(w,null,z(k.value,p=>(m(),c("small",{key:p,class:"block text-red-500 text-xs"},g(p),1))),128))])):T("",!0)]),s("div",Le,[s("div",Ae,[e[24]||(e[24]=s("label",{for:"confirm_password",class:"w-32 flex items-center gap-1"},[b(" Confirmar: "),s("span",{class:"text-red-500 font-bold"},"*")],-1)),l(A,{modelValue:n.value.password_confirmation,"onUpdate:modelValue":e[3]||(e[3]=p=>n.value.password_confirmation=p),id:"confirm_password",name:"confirm_password",class:h([{"p-invalid":i.submitted&&V.value},"flex-1"]),placeholder:"Repetir nueva contraseña",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),V.value?(m(),c("small",Be,g(V.value),1)):T("",!0)])])]}),_:1},8,["visible","style"])],64)}}};export{Me as default};
