import{D as d}from"./ui-DN6aYgk-.js";import{aa as K,I as W,m as X,h as D,f as E,d as Z,g as C,c as G,e as H}from"./index-DObSwni0.js";import{r as J,E as L,k as B,c as u,d as c,p as l,x as m,e as s,$ as a,A as w,q as r,t as f,y as x,j as S,F as A,l as Q}from"./vendor-DcS5GX9S.js";const Y={class:"space-y-3"},_={class:"flex items-center gap-4 mb-4"},ee={class:"text-gray-600"},se={class:"flex justify-center gap-4 w-full"},ae=["disabled"],te=["disabled"],le={class:"flex items-center gap-4 mb-4"},oe={class:"flex justify-center gap-4 w-full"},ne={class:"space-y-4"},ie={class:"text-sm text-gray-600 mb-4"},de={class:"w-full flex flex-col"},re={class:"flex items-center gap-4"},ue={key:0,class:"ml-36 mt-1"},ce={class:"w-full flex flex-col"},me={class:"flex items-center gap-4"},be={key:0,class:"text-red-500 ml-36 mt-1"},ge={class:"flex justify-center gap-4 w-full mt-6"},pe=["disabled"],fe={key:0},ve={key:1},we=["disabled"],Ce={__name:"Modales",props:{visible:Boolean,deleteVisible:Boolean,unsavedChangesVisible:Boolean,passwordVisible:Boolean,empleado:Object,dialogStyle:Object,isDeleting:Boolean,isLoading:Boolean,submitted:Boolean},emits:["update:visible","update:delete-visible","update:unsaved-changes-visible","update:password-visible","change-password","send-credentials","view-details","delete-empleado","cancel-delete","close-without-saving","continue-editing","update-password"],setup(t,{emit:U}){const p=t,i=U,n=J({password:"",password_confirmation:""}),y=L(()=>{const o=[],e=n.value.password||"";return e.length>0&&e.length<8&&o.push("La contraseña debe tener al menos 8 caracteres."),e.length>0&&!/[A-Z]/.test(e)&&o.push("La contraseña debe incluir al menos una letra mayúscula."),e.length>0&&!/[0-9]/.test(e)&&o.push("La contraseña debe incluir al menos un número."),e.length>0&&/[\s.]/.test(e)&&o.push("La contraseña no puede contener espacios ni puntos."),o}),h=L(()=>n.value.password_confirmation.length>0&&n.value.password!==n.value.password_confirmation?"Las contraseñas no coinciden.":""),P=()=>{n.value={password:"",password_confirmation:""}},j=()=>{i("change-password",p.empleado)},z=()=>{i("send-credentials",p.empleado)},N=()=>{i("view-details",p.empleado)},F=()=>{i("delete-empleado")},M=()=>{i("cancel-delete")},T=()=>{i("close-without-saving")},q=()=>{i("continue-editing")},I=()=>{!n.value.password||n.value.password!==n.value.password_confirmation||i("update-password",n.value)},O=o=>{i("update:visible",o)},R=o=>{i("update:delete-visible",o)},$=o=>{i("update:unsaved-changes-visible",o)},k=o=>{i("update:password-visible",o),o||P()};return(o,e)=>{const v=B("Dialog"),V=B("Password");return c(),u(A,null,[l(v,{visible:t.visible,"onUpdate:visible":O,header:"Más Acciones",modal:!0,style:w(t.dialogStyle),closable:!0,draggable:!1},{default:m(()=>[s("div",Y,[s("button",{onClick:j,class:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-blue-50 rounded-lg transition-colors duration-200 border border-gray-200 hover:border-blue-300"},[l(a(d),{icon:a(K),class:"h-5 w-5 text-blue-600"},null,8,["icon"]),e[3]||(e[3]=s("div",null,[s("div",{class:"font-medium text-gray-900"},"Cambiar Contraseña"),s("div",{class:"text-sm text-gray-500"},"Actualizar la contraseña de acceso")],-1))]),s("button",{onClick:z,class:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-green-50 rounded-lg transition-colors duration-200 border border-gray-200 hover:border-green-300"},[l(a(d),{icon:a(W),class:"h-5 w-5 text-green-600"},null,8,["icon"]),e[4]||(e[4]=s("div",null,[s("div",{class:"font-medium text-gray-900"},"Enviar Credenciales"),s("div",{class:"text-sm text-gray-500"},"Reenviar datos de acceso por email")],-1))]),s("button",{onClick:N,class:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-purple-50 rounded-lg transition-colors duration-200 border border-gray-200 hover:border-purple-300"},[l(a(d),{icon:a(X),class:"h-5 w-5 text-purple-600"},null,8,["icon"]),e[5]||(e[5]=s("div",null,[s("div",{class:"font-medium text-gray-900"},"Ver Detalles"),s("div",{class:"text-sm text-gray-500"},"Información completa del empleado")],-1))])])]),_:1},8,["visible","style"]),l(v,{visible:t.deleteVisible,"onUpdate:visible":R,header:"Confirmar Eliminación",modal:!0,style:w(t.dialogStyle),closable:!1,draggable:!1},{footer:m(()=>[s("div",se,[s("button",{class:"bg-red-500 hover:bg-red-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:F,disabled:t.isDeleting},[l(a(d),{icon:t.isDeleting?a(E):a(Z),class:x(["h-4 w-4",{"animate-spin":t.isDeleting}])},null,8,["icon","class"]),s("span",null,f(t.isDeleting?"Eliminando...":"Eliminar"),1)],8,ae),s("button",{type:"button",class:"bg-gray-500 hover:bg-gray-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:M,disabled:t.isDeleting},[l(a(d),{icon:a(C),class:"h-4 w-4"},null,8,["icon"]),e[10]||(e[10]=r(" Cancelar "))],8,te)])]),default:m(()=>{var b;return[s("div",_,[l(a(d),{icon:a(D),class:"h-12 w-12 text-red-500"},null,8,["icon"]),s("div",null,[e[8]||(e[8]=s("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"¿Eliminar empleado?",-1)),s("p",ee,[e[6]||(e[6]=r(" ¿Estás seguro de que deseas eliminar al empleado ")),s("strong",null,'"'+f((b=t.empleado)==null?void 0:b.nombre)+'"',1),e[7]||(e[7]=r("? "))]),e[9]||(e[9]=s("p",{class:"text-sm text-red-600 mt-2"}," Esta acción no se puede deshacer y eliminará tanto el empleado como su usuario asociado. ",-1))])])]}),_:1},8,["visible","style"]),l(v,{visible:t.unsavedChangesVisible,"onUpdate:visible":$,header:"Cambios sin guardar",modal:!0,style:w(t.dialogStyle),closable:!1,draggable:!1},{footer:m(()=>[s("div",oe,[s("button",{class:"bg-red-500 hover:bg-red-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:T},[l(a(d),{icon:a(C),class:"h-4 w-4"},null,8,["icon"]),e[12]||(e[12]=r(" Descartar cambios "))]),s("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:q},[l(a(d),{icon:a(G),class:"h-4 w-4"},null,8,["icon"]),e[13]||(e[13]=r(" Continuar editando "))])])]),default:m(()=>[s("div",le,[l(a(d),{icon:a(D),class:"h-12 w-12 text-yellow-500"},null,8,["icon"]),e[11]||(e[11]=s("div",null,[s("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"¿Descartar cambios?"),s("p",{class:"text-gray-600"}," Tienes cambios sin guardar. ¿Estás seguro de que deseas cerrar sin guardar? ")],-1))])]),_:1},8,["visible","style"]),l(v,{visible:t.passwordVisible,"onUpdate:visible":k,header:"Cambiar Contraseña",modal:!0,style:w(t.dialogStyle),closable:!1,draggable:!1},{footer:m(()=>[s("div",ge,[s("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:I,disabled:t.isLoading},[l(a(d),{icon:t.isLoading?a(E):a(H),class:x(["h-5 text-white",{"animate-spin":t.isLoading}])},null,8,["icon","class"]),t.isLoading?(c(),u("span",ve,"Actualizando...")):(c(),u("span",fe,"Actualizar"))],8,pe),s("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[2]||(e[2]=b=>k(!1)),disabled:t.isLoading},[l(a(d),{icon:a(C),class:"h-5"},null,8,["icon"]),e[17]||(e[17]=r(" Cancelar "))],8,we)])]),default:m(()=>{var b;return[s("div",ne,[s("div",ie,[e[14]||(e[14]=r(" Actualizar la contraseña para: ")),s("strong",null,f((b=t.empleado)==null?void 0:b.nombre),1)]),s("div",de,[s("div",re,[e[15]||(e[15]=s("label",{for:"new_password",class:"w-32 flex items-center gap-1"},[r(" Nueva contraseña: "),s("span",{class:"text-red-500 font-bold"},"*")],-1)),l(V,{modelValue:n.value.password,"onUpdate:modelValue":e[0]||(e[0]=g=>n.value.password=g),id:"new_password",name:"new_password",class:x([{"p-invalid":p.submitted&&y.value.length>0},"flex-1"]),placeholder:"Nueva contraseña",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),y.value.length>0?(c(),u("div",ue,[(c(!0),u(A,null,Q(y.value,g=>(c(),u("small",{key:g,class:"block text-red-500 text-xs"},f(g),1))),128))])):S("",!0)]),s("div",ce,[s("div",me,[e[16]||(e[16]=s("label",{for:"confirm_password",class:"w-32 flex items-center gap-1"},[r(" Confirmar: "),s("span",{class:"text-red-500 font-bold"},"*")],-1)),l(V,{modelValue:n.value.password_confirmation,"onUpdate:modelValue":e[1]||(e[1]=g=>n.value.password_confirmation=g),id:"confirm_password",name:"confirm_password",class:x([{"p-invalid":p.submitted&&h.value},"flex-1"]),placeholder:"Repetir nueva contraseña",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),h.value?(c(),u("small",be,f(h.value),1)):S("",!0)])])]}),_:1},8,["visible","style"])],64)}}};export{Ce as default};
