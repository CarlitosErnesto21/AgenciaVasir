import{r as u,E as V,o as se,h as L,d as R,x as m,p as n,e,c as q,j as N,$ as t,a0 as te,q as c,y as U,t as l,I as ae,N as le}from"./vendor-CqKcGHPa.js";import{A as oe}from"./AuthenticatedLayout-B2Y6uKQN.js";import{z as ne,F as de,a as re,A as d,e as ie,f as h,h as ce}from"./ui-CVJOYm3g.js";import{r as ue,f as P,B as me,A as y,D as H,E as Z,t as xe,F as G,p as ge,x as fe,e as K,z as be,g as pe,C as ve}from"./index-CTVkqtyY.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ye={class:"container mx-auto px-4 py-6"},_e={class:"bg-white rounded-lg shadow-md"},we={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},Ce={class:"w-full"},Ae={class:"text-blue-600 text-xs text-center sm:text-start mt-1 font-medium flex items-center gap-1 justify-center sm:justify-start"},Re={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},ke=["disabled"],Ne={class:"block sm:hidden"},De={class:"hidden sm:block"},Fe={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},Ee={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},Ie={class:"flex items-center gap-3"},Le={class:"text-base font-medium text-gray-800 flex items-center gap-2"},Pe={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},He=["disabled"],Te=["disabled"],ze={class:"space-y-3"},je={class:"flex flex-col"},Me={class:"font-medium text-gray-900 text-sm"},Se={class:"text-xs text-gray-500 hidden sm:block"},$e={class:"flex flex-col"},Be={class:"font-medium text-gray-900 text-sm"},Oe={class:"text-xs text-gray-500"},Ve={class:"flex flex-col text-xs"},qe={class:"text-green-600 font-medium"},Ue={class:"text-red-600 font-medium"},Ze={class:"text-xs text-blue-600 font-bold"},Ge={class:"flex flex-col text-xs"},Ke={class:"text-blue-600"},We={class:"text-green-600"},Xe={class:"font-bold text-green-600"},Je={class:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 rounded-t-xl"},Qe={class:"flex items-center justify-between text-white"},Ye={class:"text-xl font-bold flex items-center gap-3"},es={key:0,class:"p-6"},ss={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},ts={class:"bg-gray-50 p-4 rounded-lg"},as={class:"font-bold text-lg text-gray-800 mb-3 flex items-center gap-2"},ls={class:"space-y-2 text-sm"},os={class:"ml-2 text-gray-900"},ns={class:"ml-2 text-gray-900"},ds={class:"ml-2 text-gray-900"},rs={class:"ml-2 text-gray-900"},is={class:"bg-gray-50 p-4 rounded-lg"},cs={class:"font-bold text-lg text-gray-800 mb-3 flex items-center gap-2"},us={class:"space-y-2 text-sm"},ms={class:"ml-2 text-gray-900"},xs={class:"ml-2 text-gray-900"},gs={class:"bg-blue-50 p-4 rounded-lg mb-6"},fs={class:"font-bold text-lg text-gray-800 mb-3 flex items-center gap-2"},bs={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm"},ps={class:"text-center p-3 bg-white rounded-lg shadow-sm"},vs={class:"text-lg font-bold text-gray-900"},hs={class:"text-center p-3 bg-white rounded-lg shadow-sm"},ys={class:"text-lg font-bold text-gray-900"},_s={class:"text-center p-3 bg-white rounded-lg shadow-sm"},ws={class:"text-lg font-bold text-gray-900"},Cs={class:"text-center p-3 bg-white rounded-lg shadow-sm"},As={class:"text-lg font-bold text-gray-900"},Rs={class:"bg-yellow-50 p-4 rounded-lg"},ks={class:"font-bold text-lg text-gray-800 mb-3 flex items-center gap-2"},Ns={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Ds={class:"ml-2 text-gray-900 font-bold"},Fs={class:"ml-2 text-red-600 font-bold"},Es={class:"bg-gray-50 px-6 py-4 rounded-b-xl flex justify-end"},Is={__name:"ReservasHoteles",setup(Ls){const D=ne(),F=u([]),T=u(!1);u({busqueda:"",fechaDesde:null,fechaHasta:null,estadoReserva:""});const _=u(!1),r=u(null),b=u(!1),x=u(!1),E=u(10),W=u([5,10,20,50]),w=u({global:{value:null,matchMode:de.CONTAINS}}),X=[{label:"Pendientes",value:"PENDIENTE",severity:"warn",color:"bg-yellow-100 text-yellow-800",icon:be},{label:"Confirmadas",value:"CONFIRMADA",severity:"success",color:"bg-green-100 text-green-800",icon:K},{label:"Rechazadas",value:"RECHAZADA",severity:"danger",color:"bg-red-100 text-red-800",icon:pe},{label:"Reprogramadas",value:"REPROGRAMADA",severity:"info",color:"bg-blue-100 text-blue-800",icon:y},{label:"Finalizadas",value:"FINALIZADA",severity:"secondary",color:"bg-gray-100 text-gray-800",icon:ve}];V(()=>{const a={pendientes:0,confirmadas:0,rechazadas:0,reprogramadas:0,finalizadas:0,totalIngresos:0};return F.value.forEach(s=>{switch(s.estado){case"PENDIENTE":a.pendientes++;break;case"CONFIRMADA":a.confirmadas++,a.totalIngresos+=parseFloat(s.total||0);break;case"RECHAZADA":a.rechazadas++;break;case"REPROGRAMADA":a.reprogramadas++;break;case"FINALIZADA":a.finalizadas++,a.totalIngresos+=parseFloat(s.total||0);break}}),a});const I=V(()=>{let a=F.value;if(w.value.global.value){const s=w.value.global.value.toLowerCase();a=a.filter(i=>{var v,p,C,A;return(((v=i.cliente)==null?void 0:v.nombres)||"").toLowerCase().includes(s)||(((p=i.hotel)==null?void 0:p.nombre)||"").toLowerCase().includes(s)||(((C=i.cliente)==null?void 0:C.correo)||"").toLowerCase().includes(s)||(((A=i.id)==null?void 0:A.toString())||"").includes(s)})}return a}),z=async()=>{try{T.value=!0;const a=await le.get("/api/reservas-hoteles");F.value=a.data.data||a.data.reservas||a.data||[]}catch(a){console.error("Error al cargar reservas de hoteles:",a),D.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las reservas de hoteles",life:5e3})}finally{T.value=!1}},J=async()=>{b.value=!0,await z(),b.value=!1,D.add({severity:"success",summary:"Datos actualizados",detail:"Las reservas de hoteles han sido recargadas",life:3e3})},Q=a=>{r.value=a,_.value=!0},k=a=>a?new Date(a).toLocaleDateString("es-ES"):"",j=(a,s)=>{if(!a||!s)return 0;const i=new Date(a),p=new Date(s).getTime()-i.getTime();return Math.ceil(p/(1e3*3600*24))},M=()=>{x.value=!0,w.value.global.value=null,setTimeout(()=>{x.value=!1,D.add({severity:"success",summary:"Filtro limpiado",detail:"Se ha limpiado el filtro de b칰squeda",life:3e3})},500)},Y=a=>{const s=X.find(i=>i.value===a);return(s==null?void 0:s.color)||"bg-gray-100 text-gray-800"},ee=a=>{Q(a.data)};return se(()=>{z()}),(a,s)=>(R(),L(oe,null,{default:m(()=>{var i,v,p,C,A,S,$,B;return[n(t(te),{title:"Reservas de Hoteles"}),n(t(re),{class:"z-[9999]"}),e("div",ye,[s[9]||(s[9]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Gesti칩n de Reservas de Hoteles"),e("p",{class:"text-gray-600"},"Administra todas las reservas de hoteles del sistema")],-1)),e("div",_e,[e("div",we,[e("div",Ce,[s[7]||(s[7]=e("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Lista de Reservas",-1)),e("p",Ae,[n(t(d),{icon:t(ue),class:"h-4 w-4 text-yellow-500"},null,8,["icon"]),s[6]||(s[6]=c(" Haz clic en cualquier fila para ver los detalles. "))])]),e("div",Re,[e("button",{onClick:J,disabled:b.value,class:"bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 flex items-center gap-2"},[n(t(d),{icon:b.value?t(P):t(me),class:U({"animate-spin":b.value,"h-4":!0})},null,8,["icon","class"]),e("span",Ne,l(b.value?"Cargando...":"Recargar"),1),e("span",De,l(b.value?"Recargando...":"Recargar datos"),1)],8,ke)])]),n(t(ie),{value:I.value,dataKey:"id",paginator:!0,rows:E.value,rowsPerPageOptions:W.value,rowsPerPage:E.value,"onUpdate:rowsPerPage":s[1]||(s[1]=o=>E.value=o),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} reservas",class:"overflow-x-auto max-w-full cursor-pointer",responsiveLayout:"scroll",onRowClick:ee,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:m(()=>[e("div",Fe,[e("div",Ee,[e("div",Ie,[e("h3",Le,[n(t(d),{icon:t(xe),class:"text-blue-600 text-sm"},null,8,["icon"]),s[8]||(s[8]=e("span",null,"Filtros",-1))]),e("div",Pe,l(I.value.length)+" resultado"+l(I.value.length!==1?"s":""),1),e("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:M,disabled:x.value},[x.value?(R(),L(t(d),{key:0,icon:t(P),class:"animate-spin h-3 w-3"},null,8,["icon"])):N("",!0),e("span",null,l(x.value?"Limp...":"Limpiar"),1)],8,He)]),e("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:M,disabled:x.value},[x.value?(R(),L(t(d),{key:0,icon:t(P),class:"animate-spin h-3 w-3"},null,8,["icon"])):N("",!0),e("span",null,l(x.value?"Limpiando...":"Limpiar b칰squeda"),1)],8,Te)]),e("div",ze,[e("div",null,[n(t(ce),{modelValue:w.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=o=>w.value.global.value=o),placeholder:"游댌 Buscar reservas...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])])])])]),default:m(()=>[n(t(h),{field:"cliente.nombres",header:"Cliente",sortable:"",class:"w-52"},{body:m(o=>{var g,f;return[e("div",je,[e("span",Me,l(((g=o.data.cliente)==null?void 0:g.nombres)||"N/A"),1),e("span",Se,l(((f=o.data.cliente)==null?void 0:f.correo)||"N/A"),1)])]}),_:1}),n(t(h),{field:"hotel.nombre",header:"Hotel",sortable:"",headerClass:"w-44 hidden-sm",bodyClass:"hidden-sm"},{body:m(o=>{var g,f;return[e("div",$e,[e("span",Be,l(((g=o.data.hotel)==null?void 0:g.nombre)||"N/A"),1),e("span",Oe,l(((f=o.data.hotel)==null?void 0:f.direccion)||"N/A"),1)])]}),_:1}),n(t(h),{header:"Fechas",headerClass:"w-36 hidden-md",bodyClass:"hidden-md"},{body:m(o=>[e("div",Ve,[e("span",qe,[n(t(d),{icon:t(y),class:"mr-1"},null,8,["icon"]),c(" "+l(k(o.data.fecha_entrada)),1)]),e("span",Ue,[n(t(d),{icon:t(y),class:"mr-1"},null,8,["icon"]),c(" "+l(k(o.data.fecha_salida)),1)]),e("span",Ze,l(j(o.data.fecha_entrada,o.data.fecha_salida))+" d칤as ",1)])]),_:1}),n(t(h),{header:"Detalles",headerClass:"w-32 hidden-lg",bodyClass:"hidden-lg"},{body:m(o=>{var g,f,O;return[e("div",Ge,[e("span",Ke,[n(t(d),{icon:t(H),class:"mr-1"},null,8,["icon"]),c(" "+l(((g=o.data.detalles)==null?void 0:g.cantidad_personas)||o.data.mayores_edad)+" persona"+l((((f=o.data.detalles)==null?void 0:f.cantidad_personas)||o.data.mayores_edad)!==1?"s":""),1)]),e("span",We,[n(t(d),{icon:t(Z),class:"mr-1"},null,8,["icon"]),c(" "+l(((O=o.data.detalles)==null?void 0:O.cantidad_habitaciones)||"N/A")+" hab. ",1)])])]}),_:1}),n(t(h),{field:"estado",header:"Estado",sortable:"",class:"w-32"},{body:m(o=>[e("span",{class:U(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Y(o.data.estado)])},l(o.data.estado),3)]),_:1}),n(t(h),{header:"Total",headerClass:"w-24 hidden-sm",bodyClass:"hidden-sm"},{body:m(o=>[e("span",Xe," $"+l(parseFloat(o.data.total||0).toFixed(2)),1)]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"])])]),_.value?(R(),q("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s[5]||(s[5]=o=>_.value=!1)},[e("div",{class:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:s[4]||(s[4]=ae(()=>{},["stop"]))},[e("div",Je,[e("div",Qe,[e("h3",Ye,[n(t(d),{icon:t(G),class:"text-2xl"},null,8,["icon"]),s[10]||(s[10]=c(" Detalles de Reserva de Hotel "))]),e("button",{onClick:s[2]||(s[2]=o=>_.value=!1),class:"hover:bg-white hover:bg-opacity-20 p-2 rounded-full transition-all"},[n(t(d),{icon:t(ge),class:"text-xl"},null,8,["icon"])])])]),r.value?(R(),q("div",es,[e("div",ss,[e("div",ts,[e("h4",as,[n(t(d),{icon:t(H),class:"text-blue-600"},null,8,["icon"]),s[11]||(s[11]=c(" Informaci칩n del Cliente "))]),e("div",ls,[e("div",null,[s[12]||(s[12]=e("span",{class:"font-medium text-gray-600"},"Nombre:",-1)),e("span",os,l(((i=r.value.cliente)==null?void 0:i.nombres)||"N/A"),1)]),e("div",null,[s[13]||(s[13]=e("span",{class:"font-medium text-gray-600"},"Email:",-1)),e("span",ns,l(((v=r.value.cliente)==null?void 0:v.correo)||"N/A"),1)]),e("div",null,[s[14]||(s[14]=e("span",{class:"font-medium text-gray-600"},"Tel칠fono:",-1)),e("span",ds,l(((p=r.value.cliente)==null?void 0:p.telefono)||"N/A"),1)]),e("div",null,[s[15]||(s[15]=e("span",{class:"font-medium text-gray-600"},"Identificaci칩n:",-1)),e("span",rs,l(((C=r.value.cliente)==null?void 0:C.numero_identificacion)||"N/A"),1)])])]),e("div",is,[e("h4",cs,[n(t(d),{icon:t(G),class:"text-green-600"},null,8,["icon"]),s[16]||(s[16]=c(" Informaci칩n del Hotel "))]),e("div",us,[e("div",null,[s[17]||(s[17]=e("span",{class:"font-medium text-gray-600"},"Hotel:",-1)),e("span",ms,l(((A=r.value.hotel)==null?void 0:A.nombre)||"N/A"),1)]),e("div",null,[s[18]||(s[18]=e("span",{class:"font-medium text-gray-600"},"Direcci칩n:",-1)),e("span",xs,l(((S=r.value.hotel)==null?void 0:S.direccion)||"N/A"),1)])])])]),e("div",gs,[e("h4",fs,[n(t(d),{icon:t(y),class:"text-purple-600"},null,8,["icon"]),s[19]||(s[19]=c(" Detalles de la Reserva "))]),e("div",bs,[e("div",ps,[n(t(d),{icon:t(y),class:"text-green-600 text-2xl mb-2"},null,8,["icon"]),s[20]||(s[20]=e("p",{class:"font-medium text-gray-600"},"Fecha Entrada",-1)),e("p",vs,l(k(r.value.fecha_entrada)),1)]),e("div",hs,[n(t(d),{icon:t(y),class:"text-red-600 text-2xl mb-2"},null,8,["icon"]),s[21]||(s[21]=e("p",{class:"font-medium text-gray-600"},"Fecha Salida",-1)),e("p",ys,l(k(r.value.fecha_salida)),1)]),e("div",_s,[n(t(d),{icon:t(H),class:"text-blue-600 text-2xl mb-2"},null,8,["icon"]),s[22]||(s[22]=e("p",{class:"font-medium text-gray-600"},"Personas",-1)),e("p",ws,l((($=r.value.detalles)==null?void 0:$.cantidad_personas)||r.value.mayores_edad||"N/A"),1)]),e("div",Cs,[n(t(d),{icon:t(Z),class:"text-purple-600 text-2xl mb-2"},null,8,["icon"]),s[23]||(s[23]=e("p",{class:"font-medium text-gray-600"},"Habitaciones",-1)),e("p",As,l(((B=r.value.detalles)==null?void 0:B.cantidad_habitaciones)||"N/A"),1)])])]),e("div",Rs,[e("h4",ks,[n(t(d),{icon:t(fe),class:"text-yellow-600"},null,8,["icon"]),s[24]||(s[24]=c(" Informaci칩n Adicional "))]),e("div",Ns,[e("div",null,[s[25]||(s[25]=e("span",{class:"font-medium text-gray-600"},"D칤as de estad칤a:",-1)),e("span",Ds,l(j(r.value.fecha_entrada,r.value.fecha_salida))+" d칤as ",1)]),e("div",null,[s[26]||(s[26]=e("span",{class:"font-medium text-gray-600"},"ID de Reserva:",-1)),e("span",Fs,"#"+l(r.value.id),1)])])])])):N("",!0),e("div",Es,[e("button",{onClick:s[3]||(s[3]=o=>_.value=!1),class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 font-medium"},[n(t(d),{icon:t(K)},null,8,["icon"]),s[27]||(s[27]=c(" Cerrar "))])])])])):N("",!0)]}),_:1}))}},Ms=he(Is,[["__scopeId","data-v-9c640e60"]]);export{Ms as default};
