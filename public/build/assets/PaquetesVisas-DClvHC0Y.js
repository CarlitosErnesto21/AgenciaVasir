import{N as z,r as m,E as H,w as lt,o as ot,a8 as nt,k as rt,h as ye,d,x as b,p as i,e as t,$ as l,a0 as it,q as D,t as g,j as x,A as ne,v as Q,c,y as q,a9 as X,D as Ae,F as B,l as M,n as re}from"./vendor-CqKcGHPa.js";import{A as ut}from"./AuthenticatedLayout-CqAgwNuz.js";import{z as dt,F as ct,A as p,e as mt,f as ie,h as pt,a as vt}from"./ui-CVJOYm3g.js";import{j as gt,b as ue,c as Le,d as ft,q as bt,r as yt,f as G,g as S,e as xe,h as Se,i as xt,s as ht}from"./index-3QIPUEnJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const wt={class:"container mx-auto px-4 py-6"},_t={class:"bg-white rounded-lg shadow-md"},kt={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},Ct={class:"w-full"},Pt={class:"text-blue-600 text-xs text-center sm:text-start mt-1 font-medium flex items-center gap-1 justify-center sm:justify-start"},Et={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},It={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},Nt={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},Dt={class:"flex items-center gap-3"},qt={class:"text-base font-medium text-gray-800 flex items-center gap-2"},At={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},Lt=["disabled"],St=["disabled"],Vt={class:"space-y-3"},Tt={class:"py-12 text-center"},Ft=["title"],Ut=["title"],jt={class:"text-sm font-medium leading-relaxed"},$t={class:"flex gap-2 justify-center items-center"},Kt=["onClick"],Rt=["onClick"],Ot={class:"space-y-6"},zt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Bt={class:"space-y-2"},Mt={key:0,class:"text-sm text-red-600"},Gt={class:"space-y-2"},Wt={key:0,class:"text-sm text-red-600"},Jt={class:"space-y-2"},Zt={key:0,class:"text-sm text-red-600"},Ht={key:1,class:"text-sm text-orange-500"},Qt={key:2,class:"text-sm text-red-600 font-semibold"},Xt={class:"space-y-6"},Yt={class:"space-y-2"},es={class:"flex gap-2 mb-3"},ts=["disabled"],ss={class:"space-y-2 max-h-40 overflow-y-auto"},as={class:"flex-1"},ls=["onClick"],os={key:0,class:"text-gray-500 text-sm"},ns={class:"space-y-2"},rs={class:"flex gap-2 mb-3"},is=["disabled"],us={key:0,class:"space-y-2 max-h-40 overflow-y-auto"},ds={class:"flex-1"},cs=["onClick"],ms={key:1,class:"text-gray-500 text-sm"},ps={class:"w-full flex flex-col"},vs={class:"flex items-center gap-4"},gs={class:"flex-1"},fs={class:"flex items-center gap-3 mb-2"},bs=["disabled"],ys={class:"flex items-center gap-2"},xs={class:"flex justify-center ml-2 sm:ml-5"},hs=["src"],ws=["onClick"],_s={class:"flex justify-center gap-4 w-full mt-6"},ks=["disabled"],Cs={key:0},Ps={key:1},Es=["disabled"],Is={class:"flex items-center gap-3"},Ns={class:"flex flex-col"},Ds={class:"flex justify-center gap-4 w-full"},qs=["disabled"],As={key:0},Ls={key:1},Ss=["disabled"],Vs={class:"flex items-center gap-3"},Ts={class:"flex justify-center gap-3 w-full"},Fs={key:0,class:"flex flex-col items-center justify-center"},Us={class:"mb-4 text-sm text-gray-600 text-center"},js={class:"relative mb-4"},$s=["src","alt"],Ks={key:0,class:"mb-4 flex gap-2"},Rs=["onClick"],Os={key:1,class:"flex gap-4"},zs={key:1,class:"text-center text-gray-500 py-8"},Bs={class:"flex justify-center w-full mt-6"},Ms={key:0,class:"space-y-6"},Gs={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Ws={class:"text-lg font-semibold text-gray-900 mb-4"},Js={class:"space-y-3"},Zs={class:"ml-2 text-lg font-bold text-green-600"},Hs={key:0},Qs={class:"mt-1 text-sm text-gray-600"},Xs={key:0,class:"flex justify-center"},Ys={class:"relative"},ea=["src","alt"],ta={key:1,class:"flex items-center justify-center bg-gray-100 rounded-lg h-48"},sa={class:"text-center text-gray-500"},aa={key:0,class:"space-y-2"},la={class:"bg-green-50 p-4 rounded-lg"},oa={class:"space-y-1"},na={key:1,class:"space-y-2"},ra={class:"bg-red-50 p-4 rounded-lg"},ia={class:"space-y-1"},ua={class:"flex justify-center w-full mt-6"},Y="/api/paquetes-visas",Ve="/storage/paquetesvisas/",ba={__name:"PaquetesVisas",setup(da){z.defaults.withCredentials=!0;const y=dt(),de=m([]),o=m({id:null,nombre:"",descripcion:"",precio:null,incluye:"",no_incluye:""}),w=m([]),V=m([]),N=m([]),T=m([]),A=m(!1),W=m(!1),ee=m(!1),J=m(!1),E=m(!1),F=m(!1),I=m(null),ce=m(!1),h=m(null),k=m([]),_=m([]),U=m(""),j=m(""),$=m(!1),L=m(!1),K=m(!1),te=m(!1),C=m(!1),he=m(!0),Z=m({global:{value:null,matchMode:ct.CONTAINS}}),me=m(10),Te=m([5,10,20,50]),se=m("Guardar"),P=m(0),we=m(null),pe=H(()=>{let s=de.value;if(Z.value.global.value){const e=Z.value.global.value.toLowerCase();s=s.filter(n=>n.nombre.toLowerCase().includes(e)||n.descripcion&&n.descripcion.toLowerCase().includes(e)||n.precio.toString().includes(e))}return s}),ve=H(()=>w.value.length<1),Fe=H(()=>K.value?"Cargando...":te.value?"Abriendo...":ve.value?"Seleccionar":"L√≠mite alcanzado"),ae=H(()=>{const s=o.value.nombre&&o.value.nombre.trim().length>=3,e=o.value.precio&&parseFloat(o.value.precio)>0;return s&&e});lt([o,w,T,k,_],()=>{if(A.value)if(I.value){const s={nombre:o.value.nombre,descripcion:o.value.descripcion,precio:o.value.precio,incluye_lista:[...k.value],no_incluye_lista:[..._.value]},e=w.value.map(f=>f.name||f.nombre),n=I.value.imagenes?I.value.imagenes.map(f=>f.nombre):[],a=R(I.value.incluye||""),r=R(I.value.no_incluye||""),u=JSON.stringify(s)!==JSON.stringify({nombre:I.value.nombre,descripcion:I.value.descripcion,precio:I.value.precio,incluye_lista:a,no_incluye_lista:r}),v=JSON.stringify(e.sort())!==JSON.stringify(n.sort())||T.value.length>0;F.value=u||v}else{const s=o.value.nombre&&o.value.nombre.trim().length>0,e=o.value.descripcion&&o.value.descripcion.trim().length>0,n=o.value.precio&&parseFloat(o.value.precio)>0,a=k.value.length>0,r=_.value.length>0,u=w.value.length>0;F.value=s||e||n||a||r||u}},{deep:!0,flush:"post"});function le(){o.value={id:null,nombre:"",descripcion:"",precio:null,incluye:"",no_incluye:""},w.value=[],V.value=[],T.value=[],E.value=!1,k.value=[],_.value=[],U.value="",j.value=""}const _e=()=>{U.value.trim()&&(k.value.push(U.value.trim()),U.value="")},Ue=s=>{k.value.splice(s,1)},ke=()=>{j.value.trim()&&(_.value.push(j.value.trim()),j.value="")},je=s=>{_.value.splice(s,1)},R=s=>s?s.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],Ce=s=>s.join("|"),Pe=()=>{ge.value=window.innerWidth};ot(()=>{$e(),window.addEventListener("resize",Pe)}),nt(()=>{window.removeEventListener("resize",Pe)});const Ee=async()=>{try{const s=await z.get(Y);s.data.success&&(de.value=s.data.data)}catch(s){console.error("Error fetching paquetes:",s)}},$e=async()=>{var s;he.value=!0,y.add({severity:"info",summary:"Cargando paquetes...",life:2e3});try{const e=await z.get(Y);e.data.success?(de.value=e.data.data.sort((n,a)=>{const r=new Date(n.created_at);return new Date(a.created_at)-r}),y.add({severity:"success",summary:"Paquetes cargados",life:2e3})):y.add({severity:"warn",summary:"Advertencia",detail:"No se pudieron cargar los paquetes correctamente.",life:4e3})}catch(e){console.error("Error al cargar paquetes:",e),((s=e.response)==null?void 0:s.status)===401?y.add({severity:"error",summary:"No autorizado",detail:"Tu sesi√≥n ha expirado. Por favor, inicia sesi√≥n nuevamente.",life:5e3}):y.add({severity:"error",summary:"Error de conexi√≥n",detail:"No se pudieron cargar los paquetes. Verifica tu conexi√≥n.",life:5e3})}finally{he.value=!1}},Ie=async()=>{L.value=!0;try{await new Promise(s=>setTimeout(s,300)),Z.value.global.value=null,y.add({severity:"success",summary:"Filtros limpiados",detail:"Se han restablecido todos los filtros.",life:3e3})}finally{L.value=!1}},Ke=()=>{le(),I.value=null,F.value=!1,se.value="Guardar",E.value=!1,A.value=!0,re(()=>{const s=document.querySelector('input[placeholder="INGRESE EL NOMBRE DEL PAQUETE"]');s&&s.focus()})},Re=s=>{o.value={...s},I.value=JSON.parse(JSON.stringify(s)),w.value=s.imagenes?s.imagenes.map(e=>({id:e.id,name:e.nombre,url:Ve+e.nombre,isExisting:!0})):[],k.value=R(s.incluye),_.value=R(s.no_incluye),V.value=[],T.value=[],F.value=!1,se.value="Actualizar",E.value=!1,A.value=!0},Oe=async()=>{var s,e,n,a;if(E.value=!0,C.value=!0,o.value.nombre=fe(o.value.nombre||""),!((s=o.value.nombre)!=null&&s.trim())){y.add({severity:"warn",summary:"Campo requerido",detail:"El nombre del paquete es obligatorio.",life:4e3}),C.value=!1;return}if(!/^[A-Z0-9\s]+$/.test(o.value.nombre.trim())){y.add({severity:"warn",summary:"Formato inv√°lido",detail:"El nombre solo puede contener letras, n√∫meros y espacios.",life:4e3}),C.value=!1;return}if(!o.value.precio||o.value.precio<=0){y.add({severity:"warn",summary:"Campo requerido",detail:"El precio debe ser mayor a 0.",life:4e3}),C.value=!1;return}try{const r=new FormData;r.append("nombre",o.value.nombre.trim()),(e=o.value.descripcion)!=null&&e.trim()&&r.append("descripcion",o.value.descripcion.trim()),r.append("precio",o.value.precio),k.value.length>0?r.append("incluye",Ce(k.value)):r.append("incluye",""),_.value.length>0?r.append("no_incluye",Ce(_.value)):r.append("no_incluye",""),V.value.length>0&&r.append("imagenes",V.value[0]),o.value.id&&T.value.length>0&&T.value.forEach(v=>{r.append("removed_images[]",v)});let u;o.value.id?(r.append("_method","PUT"),u=await z.post(`${Y}/${o.value.id}`,r,{headers:{"Content-Type":"multipart/form-data"}})):u=await z.post(Y,r,{headers:{"Content-Type":"multipart/form-data"}}),u.data.success&&(y.add({severity:"success",summary:"√âxito",detail:o.value.id?"Paquete actualizado correctamente":"Paquete creado correctamente",life:4e3}),A.value=!1,await Ee(),le(),F.value=!1)}catch(r){if(console.error("Error saving paquete:",r),((n=r.response)==null?void 0:n.status)===422){const u=r.response.data.errors||{},v=((a=Object.values(u)[0])==null?void 0:a[0])||"Error de validaci√≥n";y.add({severity:"error",summary:"Error de validaci√≥n",detail:v,life:5e3})}else y.add({severity:"error",summary:"Error",detail:"No se pudo guardar el paquete. Intenta nuevamente.",life:5e3})}finally{C.value=!1}},ze=s=>{o.value=s,W.value=!0},Be=async()=>{$.value=!0;try{(await z.delete(`${Y}/${o.value.id}`)).data.success&&(y.add({severity:"success",summary:"√âxito",detail:"Paquete eliminado correctamente",life:4e3}),W.value=!1,await Ee())}catch(s){console.error("Error deleting paquete:",s),y.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el paquete. Intenta nuevamente.",life:5e3})}finally{$.value=!1}},Me=()=>{F.value?J.value=!0:(A.value=!1,le())},Ge=()=>{A.value=!1,J.value=!1,F.value=!1,le()},We=()=>{J.value=!1},Je=s=>{s.originalEvent.target.closest("button")||(h.value=s.data,ee.value=!0)},ge=m(typeof window<"u"?window.innerWidth:1024),oe=H(()=>ge.value<640?{width:"95vw",maxWidth:"380px"}:ge.value<768?{width:"400px"}:{width:"450px"}),Ze=async()=>{var s;if(!ve.value){y.add({severity:"warn",summary:"L√≠mite alcanzado",detail:"Solo se permite 1 imagen por paquete.",life:3e3});return}K.value=!0,await new Promise(e=>setTimeout(e,200)),(s=we.value)==null||s.click(),K.value=!1},He=async s=>{const e=Array.from(s.target.files);if(e.length!==0){if(w.value.length+e.length>1){y.add({severity:"warn",summary:"L√≠mite excedido",detail:"Solo se permite 1 imagen por paquete.",life:4e3});return}for(const n of e){if(!n.type.startsWith("image/")){y.add({severity:"error",summary:"Archivo inv√°lido",detail:`${n.name} no es una imagen v√°lida.`,life:4e3});continue}if(n.size>2*1024*1024){y.add({severity:"error",summary:"Archivo muy grande",detail:`${n.name} excede los 2MB permitidos.`,life:4e3});continue}const a=new FileReader;a.onload=r=>{w.value.push({name:n.name,url:r.target.result,isExisting:!1})},a.readAsDataURL(n),V.value.push(n)}s.target.value=""}},Qe=s=>{const e=w.value[s];if(e.isExisting)T.value.push(e.name);else{const n=V.value.findIndex(a=>a.name===e.name);n!==-1&&V.value.splice(n,1)}w.value.splice(s,1)},Ne=()=>{if(!o.value.nombre||!o.value.nombre.trim())return!1;const s=o.value.nombre.trim();return s.length>=3&&/^[A-Z0-9\s]+$/.test(s)},De=()=>!o.value.descripcion||o.value.descripcion.trim().length>=10,Xe=s=>{const e=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","F5"],n=s.key>="0"&&s.key<="9",a=s.key===".",r=s.ctrlKey&&s.key==="a",u=s.ctrlKey&&s.key==="c",v=s.ctrlKey&&s.key==="v",f=s.ctrlKey&&s.key==="x",O=s.ctrlKey&&s.key==="z";if(e.includes(s.key)||n||r||u||v||f||O){if(a&&s.target.value.includes(".")){s.preventDefault();return}return}if(a){if(s.target.value.includes(".")){s.preventDefault();return}return}s.preventDefault()},Ye=s=>{s.preventDefault();const n=(s.clipboardData||window.clipboardData).getData("text").replace(/[^0-9.]/g,"");if((n.match(/\./g)||[]).length<=1){const r=s.target.value,u=s.target.selectionStart,v=s.target.selectionEnd,f=r.substring(0,u)+n+r.substring(v);!isNaN(f)&&f!==""&&(o.value.precio=parseFloat(f))}},fe=s=>s?s.replace(/[^A-Za-z0-9\s]/g,"").replace(/\s{2,}/g," ").toUpperCase().trim():"",et=s=>{let e=s.target.value;e=e.replace(/[^A-Za-z0-9\s]/g,"").toUpperCase();const n=e.replace(/\s{3,}/g," ");if(o.value.nombre=n,s.target.value!==n){const a=s.target.selectionStart;s.target.value=n,re(()=>{const r=Math.min(a,n.length);s.target.setSelectionRange(r,r)})}},tt=s=>{const e=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","F5"],n=/^[A-Za-z0-9]$/.test(s.key),a=s.key===" ",r=s.ctrlKey&&s.key==="a",u=s.ctrlKey&&s.key==="c",v=s.ctrlKey&&s.key==="v",f=s.ctrlKey&&s.key==="x",O=s.ctrlKey&&s.key==="z";if(a){const be=s.target.value,qe=s.target.selectionStart;if(be.charAt(qe-1)===" "||qe===0){s.preventDefault();return}}e.includes(s.key)||n||a||r||u||v||f||O||s.preventDefault()},st=s=>{s.preventDefault();const e=(s.clipboardData||window.clipboardData).getData("text"),n=fe(e),a=s.target.value,r=s.target.selectionStart,u=s.target.selectionEnd,v=a.substring(0,r)+n+a.substring(u),f=fe(v);f.length<=100&&(o.value.nombre=f,s.target.value=f,re(()=>{const O=Math.min(r+n.length,f.length);s.target.setSelectionRange(O,O)}))},at=s=>{const e=s.target.value,n=e.toUpperCase();if(e!==n){const a=s.target.selectionStart;o.value.descripcion=n,re(()=>{s.target.value=n,s.target.setSelectionRange(a,a)})}};return(s,e)=>{const n=rt("Dialog");return d(),ye(ut,null,{default:b(()=>[i(l(it),{title:"Paquetes de Visa"}),t("div",wt,[e[26]||(e[26]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Cat√°logo de Paquetes de Visa"),t("p",{class:"text-gray-600"},"Gesti√≥n completa de paquetes de visa disponibles")],-1)),t("div",_t,[t("div",kt,[t("div",Ct,[e[18]||(e[18]=t("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Lista de Paquetes",-1)),t("p",Pt,[i(l(p),{icon:l(gt),class:"h-4 w-4 text-yellow-500"},null,8,["icon"]),e[17]||(e[17]=D(" Haz clic en cualquier fila para ver los detalles. "))])]),t("div",Et,[t("button",{class:"bg-red-500 border flex border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:Ke},[i(l(p),{icon:l(ue),class:"h-4 w-4 mr-1 text-white"},null,8,["icon"]),e[19]||(e[19]=t("span",null,"Agregar",-1))])])])]),i(l(mt),{value:pe.value,dataKey:"id",paginator:!0,rows:me.value,rowsPerPageOptions:Te.value,rowsPerPage:me.value,"onUpdate:rowsPerPage":e[1]||(e[1]=a=>me.value=a),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} paquetes",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:Je,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:b(()=>[t("div",It,[t("div",Nt,[t("div",Dt,[t("h3",qt,[i(l(p),{icon:l(yt),class:"text-blue-600 text-sm"},null,8,["icon"]),e[20]||(e[20]=t("span",null,"Filtros",-1))]),t("div",At,g(pe.value.length)+" resultado"+g(pe.value.length!==1?"s":""),1),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Ie,disabled:L.value},[L.value?(d(),ye(l(p),{key:0,icon:l(G),class:"animate-spin h-3 w-3"},null,8,["icon"])):x("",!0),t("span",null,g(L.value?"Limp...":"Limpiar"),1)],8,Lt)]),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Ie,disabled:L.value},[L.value?(d(),ye(l(p),{key:0,icon:l(G),class:"animate-spin h-3 w-3"},null,8,["icon"])):x("",!0),t("span",null,g(L.value?"Limpiando...":"Limpiar filtros"),1)],8,St)]),t("div",Vt,[t("div",null,[i(l(pt),{modelValue:Z.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=a=>Z.value.global.value=a),placeholder:"üîç Buscar paquetes...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])])])])]),empty:b(()=>[t("div",Tt,[i(l(p),{icon:l(bt),class:"mb-4 h-12 w-12 text-gray-300"},null,8,["icon"]),e[21]||(e[21]=t("p",{class:"text-xl font-semibold text-gray-500"},"No hay paquetes",-1)),e[22]||(e[22]=t("p",{class:"text-gray-400"},"No se encontraron paquetes de visa",-1))])]),default:b(()=>[i(l(ie),{field:"nombre",header:"Nombre",sortable:"",class:"w-28"},{body:b(a=>[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"100px","text-overflow":"ellipsis","white-space":"nowrap"},title:a.data.nombre},g(a.data.nombre),9,Ft)]),_:1}),i(l(ie),{field:"descripcion",header:"Descripci√≥n",class:"w-28 hidden md:table-cell"},{body:b(a=>[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"100px","text-overflow":"ellipsis","white-space":"nowrap"},title:a.data.descripcion},g(a.data.descripcion||"Sin descripci√≥n"),9,Ut)]),_:1}),i(l(ie),{field:"precio",header:"Precio",sortable:"",class:"w-16 hidden md:table-cell"},{body:b(a=>[t("div",jt,g(isNaN(Number(a.data.precio))?"":`$${Number(a.data.precio).toFixed(2)}`),1)]),_:1}),i(l(ie),{exportable:!1,class:"w-52 min-w-36"},{header:b(()=>e[23]||(e[23]=[t("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:b(a=>[t("div",$t,[t("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>Re(a.data)},[i(l(p),{icon:l(Le),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[24]||(e[24]=t("span",{class:"hidden md:block text-white"},"Editar",-1))],8,Kt),t("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>ze(a.data)},[i(l(p),{icon:l(ft),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[25]||(e[25]=t("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,Rt)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"])]),i(n,{visible:A.value,"onUpdate:visible":e[7]||(e[7]=a=>A.value=a),header:o.value.id?"Editar Paquete":"Nuevo Paquete",modal:!0,style:ne(oe.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",_s,[t("button",{class:q(["border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",!ae.value||C.value?"bg-gray-400 text-white cursor-not-allowed":"bg-red-500 hover:bg-red-700 text-white"]),onClick:Oe,disabled:!ae.value||C.value},[i(l(p),{icon:C.value?l(G):l(xe),class:q(["h-5 text-white",{"animate-spin":C.value}])},null,8,["icon","class"]),C.value?(d(),c("span",Ps,g(se.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(d(),c("span",Cs,g(se.value),1))],10,ks),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Me,disabled:C.value},[i(l(p),{icon:l(S),class:"h-5"},null,8,["icon"]),e[35]||(e[35]=D("Cancelar "))],8,Es)])]),default:b(()=>{var a,r;return[t("div",Ot,[t("div",zt,[t("div",Bt,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700"},[D(" Nombre "),t("span",{class:"text-red-500"},"*")],-1)),Q(t("input",{"onUpdate:modelValue":e[2]||(e[2]=u=>o.value.nombre=u),type:"text",placeholder:"INGRESE EL NOMBRE DEL PAQUETE",maxlength:"100",onInput:et,onKeydown:tt,onPaste:st,class:q(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1 uppercase",E.value&&!Ne()||!((a=o.value.nombre)!=null&&a.trim())&&!ae.value?"border-red-300 focus:border-red-500 focus:ring-red-500":(r=o.value.nombre)!=null&&r.trim()&&o.value.nombre.trim().length>=3?"border-green-300 focus:border-green-500 focus:ring-green-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[X,o.value.nombre]]),E.value&&!Ne()?(d(),c("div",Mt," El nombre es requerido (m√≠nimo 3 caracteres, solo letras, n√∫meros y espacios) ")):x("",!0)]),t("div",Gt,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700"},[D(" Precio "),t("span",{class:"text-red-500"},"*")],-1)),Q(t("input",{"onUpdate:modelValue":e[3]||(e[3]=u=>o.value.precio=u),type:"number",step:"0.01",min:"0",placeholder:"0.00",onKeydown:Xe,onPaste:Ye,class:q(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1",E.value&&(!o.value.precio||o.value.precio<=0)||!o.value.precio&&!ae.value?"border-red-300 focus:border-red-500 focus:ring-red-500":o.value.precio&&parseFloat(o.value.precio)>0?"border-green-300 focus:border-green-500 focus:ring-green-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[X,o.value.precio]]),E.value&&(!o.value.precio||o.value.precio<=0)?(d(),c("div",Wt," El precio es requerido y debe ser mayor a 0 ")):x("",!0)])]),t("div",Jt,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700"},"Descripci√≥n",-1)),Q(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=u=>o.value.descripcion=u),rows:"3",placeholder:"DESCRIPCION DEL PAQUETE (OPCIONAL)",maxlength:"255",onInput:at,class:q(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1",E.value&&!De()?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[X,o.value.descripcion]]),E.value&&!De()?(d(),c("div",Zt," La descripci√≥n debe tener al menos 10 caracteres ")):x("",!0),o.value.descripcion&&o.value.descripcion.length>245?(d(),c("div",Ht," Caracteres restantes: "+g(255-o.value.descripcion.length),1)):x("",!0),o.value.descripcion&&o.value.descripcion.length>=255?(d(),c("div",Qt," No se permiten m√°s caracteres ")):x("",!0)]),t("div",Xt,[t("div",Yt,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700"},"Incluye",-1)),t("div",es,[Q(t("input",{"onUpdate:modelValue":e[5]||(e[5]=u=>U.value=u),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border border-gray-300 rounded-lg px-3 py-2 transition-colors focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyup:Ae(_e,["enter"])},null,544),[[X,U.value]]),t("button",{type:"button",onClick:_e,disabled:!U.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[i(l(p),{icon:l(ue),class:"h-4"},null,8,["icon"])],8,ts)]),t("div",ss,[(d(!0),c(B,null,M(k.value,(u,v)=>(d(),c("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border"},[t("span",as,g(u),1),t("button",{type:"button",onClick:f=>Ue(v),class:"text-red-500 hover:text-red-700 p-1"},[i(l(p),{icon:l(S),class:"h-4"},null,8,["icon"])],8,ls)]))),128))]),k.value.length===0?(d(),c("div",os," Sin elementos agregados. ")):x("",!0)]),t("div",ns,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700"},"No Incluye",-1)),t("div",rs,[Q(t("input",{"onUpdate:modelValue":e[6]||(e[6]=u=>j.value=u),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border border-gray-300 rounded-lg px-3 py-2 transition-colors focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyup:Ae(ke,["enter"])},null,544),[[X,j.value]]),t("button",{type:"button",onClick:ke,disabled:!j.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[i(l(p),{icon:l(ue),class:"h-4"},null,8,["icon"])],8,is)]),_.value.length>0?(d(),c("div",us,[(d(!0),c(B,null,M(_.value,(u,v)=>(d(),c("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border"},[t("span",ds,g(u),1),t("button",{type:"button",onClick:f=>je(v),class:"text-red-500 hover:text-red-700 p-1"},[i(l(p),{icon:l(S),class:"h-4"},null,8,["icon"])],8,cs)]))),128))])):x("",!0),_.value.length===0?(d(),c("div",ms," Sin elementos agregados. ")):x("",!0)])]),t("div",ps,[t("div",vs,[e[34]||(e[34]=t("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},"Im√°genes:",-1)),t("div",gs,[t("div",fs,[t("input",{type:"file",id:"imagenes",name:"imagenes",accept:"image/*",onChange:He,class:"hidden",ref_key:"fileInput",ref:we},null,544),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 outline-none focus:outline-none active:outline-none disabled:opacity-50 disabled:cursor-not-allowed",onClick:Ze,disabled:K.value||te.value||!ve.value},[i(l(p),{icon:K.value?l(G):te.value?l(G):l(ue),class:q({"animate-spin":K.value||te.value})},null,8,["icon","class"]),D(" "+g(Fe.value),1)],8,bs),t("div",ys,[t("span",{class:q(["text-sm font-medium",w.value.length>=1?"text-red-600":"text-gray-600"])},g(w.value.length)+"/1 ",3),e[32]||(e[32]=t("span",{class:"text-xs text-gray-500"},"imagen",-1))])]),e[33]||(e[33]=t("div",{class:"text-xs text-gray-500 mb-2"}," M√°ximo 1 imagen por paquete ‚Ä¢ Formatos: JPG, PNG, GIF ‚Ä¢ Tama√±o m√°ximo: 2MB ",-1))])])]),t("div",xs,[(d(!0),c(B,null,M(w.value,(u,v)=>(d(),c("div",{key:v,class:"relative w-full max-w-sm"},[t("img",{src:u.url,alt:"Vista previa",class:"w-full h-48 object-cover rounded-lg border shadow"},null,8,hs),t("button",{onClick:f=>Qe(v),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow transition-colors",style:{transform:"translate(50%, -50%)"}},[i(l(p),{icon:l(S),class:"text-xs"},null,8,["icon"])],8,ws)]))),128))])])]}),_:1},8,["visible","header","style"]),i(n,{visible:W.value,"onUpdate:visible":e[9]||(e[9]=a=>W.value=a),header:"Eliminar paquete",modal:!0,style:ne(oe.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",Ds,[t("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Be,disabled:$.value},[i(l(p),{icon:$.value?l(G):l(xe),class:q(["h-5",{"animate-spin":$.value}])},null,8,["icon","class"]),$.value?(d(),c("span",Ls,"Eliminando...")):(d(),c("span",As,"Eliminar"))],8,qs),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[8]||(e[8]=a=>W.value=!1),disabled:$.value},[i(l(p),{icon:l(S),class:"h-5"},null,8,["icon"]),e[39]||(e[39]=t("span",null,"Cancelar",-1))],8,Ss)])]),default:b(()=>[t("div",Is,[i(l(p),{icon:l(Se),class:"h-8 w-8 text-red-500"},null,8,["icon"]),t("div",Ns,[t("span",null,[e[36]||(e[36]=D("¬øEst√°s seguro de eliminar el paquete: ")),t("b",null,g(o.value.nombre),1),e[37]||(e[37]=D("?"))]),e[38]||(e[38]=t("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acci√≥n es irreversible.",-1))])])]),_:1},8,["visible","style"]),i(n,{visible:J.value,"onUpdate:visible":e[10]||(e[10]=a=>J.value=a),header:"Cambios sin guardar",modal:!0,style:ne(oe.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",Ts,[t("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Ge},[i(l(p),{icon:l(xt),class:"h-4"},null,8,["icon"]),e[41]||(e[41]=t("span",null,"Salir sin guardar",-1))]),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:We},[i(l(p),{icon:l(Le),class:"h-4"},null,8,["icon"]),e[42]||(e[42]=t("span",null,"Continuar",-1))])])]),default:b(()=>[t("div",Vs,[i(l(p),{icon:l(Se),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e[40]||(e[40]=t("div",{class:"flex flex-col"},[t("span",null,"¬°Tienes informaci√≥n sin guardar!"),t("span",{class:"text-red-600 text-sm font-medium mt-1"},"¬øDeseas salir sin guardar?")],-1))])]),_:1},8,["visible","style"]),i(n,{visible:ce.value,"onUpdate:visible":e[14]||(e[14]=a=>ce.value=a),header:"Galer√≠a de Im√°genes",modal:!0,closable:!1,style:ne(oe.value),draggable:!1},{footer:b(()=>[t("div",Bs,[t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[13]||(e[13]=a=>ce.value=!1)},[i(l(p),{icon:l(S),class:"h-5"},null,8,["icon"]),e[43]||(e[43]=D(" Cerrar "))])])]),default:b(()=>{var a,r;return[N.value.length?(d(),c("div",Fs,[t("div",Us," Imagen "+g(P.value+1)+" de "+g(N.value.length),1),t("div",js,[t("img",{src:(a=N.value[P.value])==null?void 0:a.url,alt:(r=N.value[P.value])==null?void 0:r.nombre,class:"max-h-96 max-w-full rounded-lg object-contain"},null,8,$s)]),N.value.length>1?(d(),c("div",Ks,[(d(!0),c(B,null,M(N.value,(u,v)=>(d(),c("button",{key:v,onClick:f=>P.value=v,class:q(["h-3 w-3 rounded-full transition-all",v===P.value?"bg-blue-500":"bg-gray-300 hover:bg-gray-400"])},null,10,Rs))),128))])):x("",!0),N.value.length>1?(d(),c("div",Os,[t("button",{onClick:e[11]||(e[11]=u=>P.value=P.value===0?N.value.length-1:P.value-1),class:"bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-all duration-200 ease-in-out"}," Anterior "),t("button",{onClick:e[12]||(e[12]=u=>P.value=P.value===N.value.length-1?0:P.value+1),class:"bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-all duration-200 ease-in-out"}," Siguiente ")])):x("",!0)])):(d(),c("div",zs,"No hay im√°genes para este paquete."))]}),_:1},8,["visible","style"]),i(n,{visible:ee.value,"onUpdate:visible":e[16]||(e[16]=a=>ee.value=a),header:"Detalles del Paquete",modal:!0,style:{width:"90vw",maxWidth:"800px"},closable:!1,draggable:!1},{footer:b(()=>[t("div",ua,[t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[15]||(e[15]=a=>ee.value=!1)},[i(l(p),{icon:l(S),class:"h-5"},null,8,["icon"]),e[49]||(e[49]=D(" Cerrar "))])])]),default:b(()=>[h.value?(d(),c("div",Ms,[t("div",Gs,[t("div",null,[t("h3",Ws,g(h.value.nombre),1),t("div",Js,[t("div",null,[e[44]||(e[44]=t("span",{class:"text-sm font-medium text-gray-700"},"Precio:",-1)),t("span",Zs,"$"+g(parseFloat(h.value.precio).toFixed(2)),1)]),h.value.descripcion?(d(),c("div",Hs,[e[45]||(e[45]=t("span",{class:"text-sm font-medium text-gray-700"},"Descripci√≥n:",-1)),t("p",Qs,g(h.value.descripcion),1)])):x("",!0)])]),h.value.imagenes&&h.value.imagenes.length>0?(d(),c("div",Xs,[t("div",Ys,[t("img",{src:Ve+h.value.imagenes[0].nombre,alt:h.value.nombre,class:"w-full max-w-sm h-48 object-cover rounded-lg border shadow"},null,8,ea)])])):(d(),c("div",ta,[t("div",sa,[i(l(p),{icon:l(ht),class:"h-12 w-12 mb-2"},null,8,["icon"]),e[46]||(e[46]=t("p",null,"Sin imagen",-1))])]))]),h.value.incluye?(d(),c("div",aa,[e[47]||(e[47]=t("h4",{class:"text-md font-semibold text-gray-900"},"Incluye:",-1)),t("div",la,[t("ul",oa,[(d(!0),c(B,null,M(R(h.value.incluye),a=>(d(),c("li",{key:a,class:"flex items-start gap-2 text-sm text-gray-700"},[i(l(p),{icon:l(xe),class:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"},null,8,["icon"]),t("span",null,g(a),1)]))),128))])])])):x("",!0),h.value.no_incluye?(d(),c("div",na,[e[48]||(e[48]=t("h4",{class:"text-md font-semibold text-gray-900"},"No Incluye:",-1)),t("div",ra,[t("ul",ia,[(d(!0),c(B,null,M(R(h.value.no_incluye),a=>(d(),c("li",{key:a,class:"flex items-start gap-2 text-sm text-gray-700"},[i(l(p),{icon:l(S),class:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"},null,8,["icon"]),t("span",null,g(a),1)]))),128))])])])):x("",!0)])):x("",!0)]),_:1},8,["visible"]),i(l(vt))]),_:1})}}};export{ba as default};
