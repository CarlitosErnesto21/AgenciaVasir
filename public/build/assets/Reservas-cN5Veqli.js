import{r as u,E as L,w as he,o as ga,a5 as Ve,a6 as ba,h as ne,d as w,x as A,p as i,e as a,$ as t,a0 as xa,A as ye,t as n,a2 as ha,y as N,c as C,j as R,q as D,v as $e,a9 as Ue,N as F,n as ya}from"./vendor-gbh1WW5n.js";import{A as wa}from"./AuthenticatedLayout-CSuYxj7F.js";import{z as Ea,D as _a,a as Aa,r as Ra,F as m,h as Ca,q as de,o as Da,e as Na,f as H,g as He}from"./ui-BrU4k96Z.js";import{i as we,c as O,e as Sa,f as X,D as Ta,E as La,F as Oa,G as ka,H as Q,I as qe,p as Ee,o as Ia,n as je,J as Be,K as Fa,a as Ma,z as Pa}from"./index-B6nVaz6S.js";import za from"./Modales-BcFjLx0n.js";import Va from"./CambiarEstado-ByMiPkHw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DtyEsSN9.js";const $a={class:"flex items-center gap-3"},Ua={class:"flex flex-col"},Ha={class:"text-red-600 text-sm font-medium mt-1"},qa={class:"container mx-auto px-4 py-6"},ja={class:"mb-6"},Ba={class:"bg-white rounded-lg shadow-md"},Ga={key:0,class:"p-6 border-b border-gray-200"},Za={class:"text-lg font-semibold text-blue-600 mb-4",style:{"word-break":"break-all","overflow-wrap":"break-word","max-width":"100%","white-space":"pre-wrap"}},Wa={class:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-3 mb-4 shadow-sm"},Ya={class:"text-xs font-semibold text-gray-700 mb-3 flex items-center gap-2 uppercase tracking-wide"},Ja={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 mb-3"},Ka={class:"bg-white rounded-lg p-2 shadow-sm border border-gray-100"},Xa={class:"text-gray-500 font-medium mb-1 text-xs uppercase tracking-wider flex items-center gap-1"},Qa={class:"text-gray-800 font-semibold truncate"},es={class:"bg-white rounded-lg p-2 shadow-sm border border-gray-100"},as={class:"text-gray-500 font-medium mb-1 text-xs uppercase tracking-wider flex items-center gap-1"},ss=["title"],ts={class:"bg-white rounded-lg p-2 shadow-sm border border-gray-100"},rs={class:"text-green-600 font-bold"},os={class:"bg-white rounded-lg p-2 shadow-sm border border-gray-100"},ls={class:"text-gray-800 font-semibold"},is={class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},ns={class:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-2 border border-blue-200"},ds={class:"text-blue-700 font-medium mb-2 text-xs uppercase tracking-wider flex items-center gap-1"},us={class:"space-y-1"},cs={class:"text-gray-800 font-semibold text-xs"},ms={class:"text-blue-600 font-bold"},vs={class:"bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-2 border border-purple-200"},fs={class:"text-purple-700 font-medium mb-2 text-xs uppercase tracking-wider flex items-center gap-1"},ps={class:"space-y-1"},gs={class:"text-gray-800 font-semibold text-xs"},bs={class:"text-purple-600 font-bold"},xs={class:"mb-4 space-y-2"},hs={class:"text-sm text-blue-600 flex items-center gap-2"},ys={key:0,class:"bg-amber-50 p-3 rounded-md border border-amber-200"},ws={class:"flex items-start gap-2"},Es={class:"flex-1"},_s={class:"text-sm text-amber-600 mb-2"},As={class:"flex flex-col sm:flex-row gap-2 items-start sm:items-center"},Rs={key:1,class:"text-sm text-blue-600 flex items-center gap-2 bg-blue-50 p-3 rounded-md border border-blue-200"},Cs={key:2,class:"text-sm text-purple-600 flex items-center gap-2 bg-purple-50 p-3 rounded-md border border-purple-200"},Ds={key:3,class:"text-sm text-gray-600 flex items-center gap-2 bg-gray-50 p-2 rounded-md"},Ns={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:flex lg:flex-wrap gap-2 md:gap-3"},Ss={class:"bg-gray-100 border-2 border-gray-300 rounded-lg px-2 py-2 md:px-4 md:py-3 flex-1 min-w-0"},Ts={class:"text-xs md:text-sm font-bold text-gray-800"},Ls={class:"flex items-center gap-2 text-white"},Os={class:"flex items-center gap-2 text-white"},ks={class:"flex items-center gap-2 text-white"},Is=["title"],Fs={class:"flex items-center gap-2 text-white"},Ms={class:"flex-1"},Ps={key:0,class:"text-xs opacity-70"},zs={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4 mx-4"},Vs={class:"flex flex-wrap items-center justify-between gap-2 mb-3"},$s={class:"flex items-center gap-2 flex-wrap"},Us={class:"bg-blue-50 border border-blue-200 text-blue-700 px-2 py-1 rounded text-xs font-medium"},Hs=["disabled"],qs={class:"space-y-3"},js={class:"relative"},Bs={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},Gs={class:"px-1 mt-3"},Zs={class:"text-blue-600 text-xs font-medium flex items-center gap-1"},Ws={key:1,class:"flex flex-col items-center justify-center py-12 space-y-4 bg-white rounded-lg shadow-md"},Ys={class:"flex flex-col items-center justify-center py-12 space-y-4"},Js={class:"text-center"},Ks={class:"text-gray-500 mb-2"},Xs={class:"text-gray-400 text-sm"},Qs={class:"font-medium text-xs sm:text-sm"},et={class:"flex items-center gap-1 sm:gap-3"},at={class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0"},st={class:"min-w-0 flex-1"},tt=["title"],rt=["title"],ot={class:"text-xs sm:text-sm"},lt={class:"font-medium"},it={class:"text-xs text-gray-500"},nt={class:"font-medium text-green-600 text-xs sm:text-sm"},dt={class:"hidden xl:inline"},ut={class:"xl:hidden"},ct=["onClick"],mt={class:"space-y-4"},vt={class:"bg-red-50 p-4 rounded-lg border border-red-200 mb-4"},ft={class:"flex items-start gap-3"},pt={class:"font-bold text-red-800 mb-2"},gt={class:"text-sm text-red-700 space-y-1"},bt={class:"text-gray-500"},xt={class:"flex justify-end gap-3 pt-4"},ht=["disabled"],yt={class:"space-y-4"},wt={class:"bg-blue-50 p-4 rounded-lg border border-blue-200"},Et={class:"font-semibold text-blue-800 mb-2"},_t={class:"text-sm text-blue-600"},At={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Rt={key:0,class:"text-red-500 text-xs mt-1"},Ct={key:0,class:"text-red-500 text-xs mt-1"},Dt={class:"flex justify-center items-center gap-3 pt-4"},Nt=["disabled"],St=["disabled"],Vt={__name:"Reservas",setup(Tt){const g=Ea(),Ge=_a(),x=u([]),Ze=u([]),ue=u(!1);u(!1);const q=u(null),r=u(null),_e=u(!1),ee=u(!1),E=u({cambiarEstado:!1}),ae=u(!1),M=u(!1),p=u({fechaSalida:null,fechaRegreso:null,motivo:""}),d=u({busqueda:"",fechaDesde:null,fechaHasta:null,estado:null}),P=u(!1),se=u(!1),j=u(!1),te=u(!1),B=u(null),ce=u(null),We=u(""),k=u("");u(null),u(""),u("");const G=u(""),Z=u(""),Ae=u(typeof window<"u"?window.innerWidth:1024),W=u(!1),me=u(!1),ve=u(!1),fe=u(!1),I=u(!1),re=[{label:"Pendiente",value:"PENDIENTE",severity:"warn",color:"bg-yellow-100 text-yellow-800",icon:Fa},{label:"Confirmada",value:"CONFIRMADA",severity:"success",color:"bg-green-100 text-green-800",icon:Ma},{label:"En Curso",value:"EN_CURSO",severity:"info",color:"bg-blue-100 text-blue-800",icon:Q},{label:"Finalizada",value:"FINALIZADA",severity:"secondary",color:"bg-gray-100 text-gray-800",icon:qe},{label:"Rechazada",value:"CANCELADA",severity:"danger",color:"bg-red-100 text-red-800",icon:Ee},{label:"Reprogramada",value:"REPROGRAMADA",severity:"info",color:"bg-purple-100 text-purple-800",icon:Q}],Re=[{label:"Disponible",value:"DISPONIBLE",color:"bg-green-100 text-green-800"},{label:"Completo",value:"COMPLETO",color:"bg-orange-100 text-orange-800"},{label:"En Curso",value:"EN_CURSO",color:"bg-blue-100 text-blue-800"},{label:"Finalizado",value:"FINALIZADO",color:"bg-gray-100 text-gray-800"},{label:"Cancelada",value:"CANCELADA",color:"bg-red-100 text-red-800"},{label:"Reprogramada",value:"REPROGRAMADA",color:"bg-purple-100 text-purple-800"}],z=L(()=>{if(!r.value)return!1;const s=Y.value.filter(l=>["CONFIRMADA","REPROGRAMADA"].includes(l.estado)).reduce((l,c)=>{const v=c.mayores_edad||0,f=c.menores_edad||0;return l+v+f},0),e=r.value.cupo_min||0;return s>=e}),V=L(()=>!r.value||!x.value?!1:x.value.some(s=>["PENDIENTE","CONFIRMADA","EN_CURSO","REPROGRAMADA"].includes(s.estado))),oe=L(()=>{if(!r.value||!x.value||x.value.length===0)return!1;const s=x.value.some(l=>l.estado==="PENDIENTE"),e=x.value.some(l=>l.estado==="CONFIRMADA");return!s&&e}),pe=L(()=>!r.value||!x.value||x.value.length===0?!1:r.value.estado==="REPROGRAMADA"?!x.value.some(e=>e.estado==="PENDIENTE")&&z.value:r.value.estado==="DISPONIBLE"?z.value:r.value.estado==="COMPLETO"?oe.value&&z.value:!1),Y=L(()=>{let s=x.value;if(d.value.busqueda){const l=d.value.busqueda.toLowerCase();s=s.filter(c=>{var v,f,b,h,T,o;return(((f=(v=c.cliente)==null?void 0:v.user)==null?void 0:f.name)||((b=c.cliente)==null?void 0:b.nombres)||"").toLowerCase().includes(l)||(((T=(h=c.cliente)==null?void 0:h.user)==null?void 0:T.email)||((o=c.cliente)==null?void 0:o.correo)||"").toLowerCase().includes(l)})}return d.value.fechaDesde&&(s=s.filter(l=>new Date(l.fecha_reserva)>=new Date(d.value.fechaDesde))),d.value.fechaHasta&&(s=s.filter(l=>new Date(l.fecha_reserva)<=new Date(d.value.fechaHasta))),d.value.estado&&(s=s.filter(l=>l.estado===d.value.estado)),s.sort((l,c)=>{const v={PENDIENTE:1,CONFIRMADA:2,EN_CURSO:3,REPROGRAMADA:4,COMPLETADA:5,SUSPENDIDA:6,CANCELADA:7},f=v[l.estado]||6,b=v[c.estado]||6;return f!==b?f-b:new Date(c.fecha_reserva)-new Date(l.fecha_reserva)})});L(()=>({pendientes:x.value.filter(s=>s.estado==="PENDIENTE").length,confirmadas:x.value.filter(s=>s.estado==="CONFIRMADA").length}));const Ce=s=>{if(!s)return"No especificada";try{return new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}catch(e){return console.error("Error formateando fecha del tour:",e),"Fecha invÃ¡lida"}},De=s=>{if(!s)return"No especificada";try{return new Date(s).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(e){return console.error("Error extrayendo hora del tour:",e),"Hora invÃ¡lida"}},J=L(()=>{var s;return r.value?{...r.value,categoriaTexto:typeof r.value.categoria=="string"?r.value.categoria:((s=r.value.categoria)==null?void 0:s.nombre)||"No especificada",fechaSalidaFormateada:Ce(r.value.fecha_salida),horaSalida:De(r.value.fecha_salida),fechaRegresoFormateada:Ce(r.value.fecha_regreso),horaRegreso:De(r.value.fecha_regreso)}:null}),Ye=async s=>{_e.value=!0;try{const e=await F.get(`/api/tours/${s}`);r.value=e.data}catch(e){console.error("Error cargando tour:",e),g.add({severity:"error",summary:"Error",detail:"No se pudo cargar la informaciÃ³n del tour",life:4e3})}finally{_e.value=!1}},Je=()=>new URLSearchParams(window.location.search).get("tour"),le=async s=>{if(!r.value)return;if(s==="REPROGRAMADA"){$(),p.value={fechaSalida:r.value.fecha_salida?new Date(r.value.fecha_salida):null,fechaRegreso:r.value.fecha_regreso?new Date(r.value.fecha_regreso):null,motivo:""},G.value="",Z.value="",M.value=!0;return}if(s==="CANCELADA"){ra();return}const l={EN_CURSO:{header:"Cambio de Estado del Tour",message:"Â¡Tienes un cambio de estado pendiente!",detail:'Â¿Deseas marcar este tour como "En Curso"?'},FINALIZADO:{header:"Finalizar Tour",message:"Â¡Tienes un cambio de estado pendiente!",detail:"Â¿Deseas finalizar este tour permanentemente?"}}[s];l&&Ge.require({message:{header:l.message,content:l.detail},header:l.header,icon:"pi pi-exclamation-triangle",position:"center",rejectClass:"bg-blue-500 hover:bg-blue-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",acceptClass:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 ml-3",rejectLabel:"âœ“ Continuar",acceptLabel:"âœ• Cancelar",accept:()=>{},reject:async()=>{await Ke(s)}})},Ke=async s=>{var e,l,c,v;E.value.cambiarEstado=!0;try{const f=await F.put(`/api/tours/${r.value.id}/cambiar-estado`,{estado:s});r.value.estado=s,g.add({severity:"success",summary:"Estado actualizado",detail:`El tour ahora estÃ¡ ${s.toLowerCase()}`,life:3e3}),await U()}catch(f){console.error("Error actualizando estado:",f),console.error("Respuesta del servidor:",(e=f.response)==null?void 0:e.data),((l=f.response)==null?void 0:l.status)===422?g.add({severity:"warn",summary:"ValidaciÃ³n fallida",detail:f.response.data.message||"No se pudo actualizar el estado",life:8e3}):g.add({severity:"error",summary:"Error",detail:((v=(c=f.response)==null?void 0:c.data)==null?void 0:v.message)||"No se pudo actualizar el estado",life:4e3})}finally{E.value.cambiarEstado=!1}},Xe=async s=>{r.value=s,ae.value=!1;const e={CANCELADA:{severity:"warn",summary:"Tour cancelado",detail:`El tour ha sido cancelado. Se enviaron notificaciones de cancelaciÃ³n a ${s.reservas_canceladas||0} cliente(s) con reservas.`},FINALIZADO:{severity:"success",summary:"Tour finalizado",detail:`El tour ha sido finalizado correctamente. Se enviaron notificaciones a ${s.reservas_finalizadas||0} cliente(s).`},default:{severity:"success",summary:"Estado actualizado",detail:"El estado del tour se ha actualizado correctamente"}},l=e[s.estado]||e.default;g.add({severity:l.severity,summary:l.summary,detail:l.detail,life:5e3}),await U()},ge=()=>{document.body.style.overflow="",document.body.style.paddingRight=""},$=()=>{P.value=!1,se.value=!1,j.value=!1,te.value=!1,ae.value=!1,M.value=!1,B.value=null,ce.value=null,We.value="",k.value="",I.value=!1,ge()},Qe=()=>{const s=new Date;return s.setFullYear(s.getFullYear()+1),s},ea=()=>{if(!p.value.fechaSalida)return new Date;const s=new Date(p.value.fechaSalida);return s.setHours(s.getHours()+1),s},be=()=>{if(G.value="",!p.value.fechaSalida)return!1;const s=new Date;return new Date(p.value.fechaSalida)<=s?(G.value="La fecha de salida debe ser futura",!1):!0},xe=()=>{if(Z.value="",!p.value.fechaRegreso||!p.value.fechaSalida)return!1;const s=new Date(p.value.fechaSalida);return(new Date(p.value.fechaRegreso)-s)/(1e3*60*60)<1?(Z.value="La fecha de regreso debe ser al menos 1 hora despuÃ©s de la salida",!1):!0},aa=async()=>{var l,c;if(!p.value.fechaSalida||!p.value.fechaRegreso){g.add({severity:"warn",summary:"Campos requeridos",detail:"Debe seleccionar las nuevas fechas de salida y regreso",life:4e3});return}const s=be(),e=xe();if(!s||!e){g.add({severity:"error",summary:"Fechas invÃ¡lidas",detail:"Por favor corrige los errores en las fechas antes de continuar",life:4e3});return}if(!p.value.motivo.trim()){g.add({severity:"warn",summary:"Motivo requerido",detail:"Debe ingresar un motivo para la reprogramaciÃ³n",life:4e3});return}E.value.cambiarEstado=!0;try{const v=h=>{if(h instanceof Date){const T=h.getFullYear(),o=String(h.getMonth()+1).padStart(2,"0"),y=String(h.getDate()).padStart(2,"0"),S=String(h.getHours()).padStart(2,"0"),_=String(h.getMinutes()).padStart(2,"0"),ie=String(h.getSeconds()).padStart(2,"0");return`${T}-${o}-${y} ${S}:${_}:${ie}`}return h},f=await F.put(`/api/tours/${r.value.id}/cambiar-estado`,{estado:"REPROGRAMADA",fecha_salida:v(p.value.fechaSalida),fecha_regreso:v(p.value.fechaRegreso),motivo_reprogramacion:p.value.motivo,reprogramar_reservas:!0});r.value={...r.value,...f.data},$();const b=f.data.reservas_reprogramadas||0;g.add({severity:"success",summary:"Tour y reservas reprogramados",detail:`El tour ha sido reprogramado correctamente. ${b} reserva(s) fueron reprogramada(s) y se enviaron notificaciones por correo.`,life:5e3}),await U()}catch(v){console.error("Error reprogramando tour:",v),g.add({severity:"error",summary:"Error",detail:((c=(l=v.response)==null?void 0:l.data)==null?void 0:c.message)||"No se pudo reprogramar el tour",life:4e3})}finally{E.value.cambiarEstado=!1}},sa=()=>{ee.value=!0},ta=()=>{r.value&&Ve.visit("/tours",{data:{editTour:r.value.id},preserveState:!0,onSuccess:()=>{g.add({severity:"info",summary:"Redirigiendo...",detail:"Abriendo editor de tours",life:2e3})}})},K=L(()=>Ae.value<640?{width:"95vw",maxWidth:"380px"}:Ae.value<768?{width:"400px"}:{width:"450px"}),U=async()=>{if(q.value){ue.value=!0;try{const s={busqueda:d.value.busqueda||void 0,fecha_inicio:d.value.fechaDesde||void 0,fecha_fin:d.value.fechaHasta||void 0,tour_id:q.value},e=await F.get("/api/reservas",{params:s,withCredentials:!0});x.value=Array.isArray(e.data)?e.data:e.data.data||[]}catch(s){console.error("Error cargando reservas:",s),g.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las reservas del tour",life:4e3}),x.value=[]}finally{ue.value=!1}}},ra=()=>{$(),k.value="",j.value=!0},oa=async()=>{var s,e;if(!k.value.trim()){g.add({severity:"warn",summary:"Campo requerido",detail:"Debe ingresar un motivo para cancelar el tour",life:4e3});return}I.value=!0;try{const l=await F.put(`/api/tours/${r.value.id}/cambiar-estado`,{estado:"CANCELADA",motivo_cancelacion:k.value,cancelar_reservas:!0});r.value.estado="CANCELADA",await U(),$();const c=l.data.reservas_canceladas||0;g.add({severity:"warn",summary:"Â¡Tour Cancelado!",detail:`El tour ha sido cancelado. Se cancelaron ${c} reserva(s) y se enviaron notificaciones por correo.`,life:5e3})}catch(l){console.error("Error cancelando tour:",l),g.add({severity:"error",summary:"Error",detail:((e=(s=l.response)==null?void 0:s.data)==null?void 0:e.message)||"No se pudo cancelar el tour",life:4e3})}finally{I.value=!1}},Ne=s=>{$(),B.value=s,te.value=!0},la=s=>{$(),B.value=s;const e=Ze.value.find(l=>{var c;return((c=s.detallesTours)==null?void 0:c.some(v=>v.tour_id===l.id))||s.entidad_nombre===l.nombre});ce.value=e,P.value=!0},ia=s=>{s.originalEvent.target.closest("button")||Ne(s.data)},na=s=>{const e=re.find(l=>l.value===s);return(e==null?void 0:e.color)||"bg-gray-100 text-gray-800"},da=s=>{const e=Re.find(l=>l.value===s);return(e==null?void 0:e.label)||s},ua=s=>{if(!s)return"N/A";const e=new Date(s);return e.getHours()===0&&e.getMinutes()===0?e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):e.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},Se=s=>{if(!s)return"N/A";const e=new Date(s);return e.getHours()===0&&e.getMinutes()===0?e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})+" (Sin hora especificada)":e.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},ca=async()=>{W.value=!0;try{d.value={busqueda:"",fechaDesde:null,fechaHasta:null,estado:null},g.add({severity:"success",summary:"Filtros limpiados",life:1500})}finally{W.value=!1}};L(()=>{if(p.value.fechaSalida instanceof Date){const s=new Date(p.value.fechaSalida);return s.setHours(s.getHours()+1),s}return new Date});const ma=async s=>{var e,l,c,v,f;ve.value=!0;try{await F.put(`/api/reservas/${s.id}/confirmar`);const b=x.value.findIndex(h=>h.id===s.id);b!==-1&&(x.value[b].estado="CONFIRMADA"),P.value=!1,g.add({severity:"success",summary:"Â¡Confirmada!",detail:`Reserva de ${((l=(e=s.cliente)==null?void 0:e.user)==null?void 0:l.name)||((c=s.cliente)==null?void 0:c.nombres)} confirmada correctamente`,life:4e3})}catch(b){console.error("Error confirmando reserva:",b),g.add({severity:"error",summary:"Error",detail:((f=(v=b.response)==null?void 0:v.data)==null?void 0:f.message)||"No se pudo confirmar la reserva",life:4e3})}finally{ve.value=!1}},va=async s=>{var e,l,c,v,f;fe.value=!0,me.value=!0;try{const b=await F.put(`/api/reservas/${s.reserva.id}/rechazar`,{motivo:s.motivo}),h=x.value.findIndex(T=>T.id===s.reserva.id);h!==-1&&x.value.splice(h,1),se.value=!1,P.value=!1,g.add({severity:"success",summary:"Â¡Eliminada!",detail:`Reserva de ${((l=(e=s.reserva.cliente)==null?void 0:e.user)==null?void 0:l.name)||((c=s.reserva.cliente)==null?void 0:c.nombres)} eliminada correctamente`,life:4e3})}catch(b){console.error("Error rechazando reserva:",b),g.add({severity:"error",summary:"Error",detail:((f=(v=b.response)==null?void 0:v.data)==null?void 0:f.message)||"No se pudo rechazar la reserva",life:4e3})}finally{me.value=!1,fe.value=!1}},fa=s=>{Ne(s)},pa=s=>{B.value=s};he(()=>[d.value.busqueda,d.value.fechaDesde,d.value.fechaHasta,d.value.estado],()=>{clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{U()},500)},{deep:!0}),he(M,s=>{s?(document.body.style.overflow="hidden",document.body.style.paddingRight="15px"):(document.body.style.overflow="",document.body.style.paddingRight="")});const Te=()=>{ya(()=>{setTimeout(()=>{document.querySelectorAll(".p-select").forEach(e=>{const l=e.querySelector(".p-select-label, .p-placeholder");l&&(l.style.overflow="hidden",l.style.textOverflow="ellipsis",l.style.whiteSpace="nowrap",l.style.maxWidth="calc(100% - 2.5rem)",l.style.display="block")})},100)})};return he([d],()=>{Te()},{deep:!0}),ga(async()=>{try{if(q.value=Je(),!q.value){g.add({severity:"warn",summary:"Tour no especificado",detail:"Redirigiendo a la lista de tours...",life:3e3}),setTimeout(()=>{Ve.visit("/tours")},2e3);return}await Promise.all([Ye(q.value),U()]),Te()}catch(s){console.error("Error cargando datos iniciales:",s)}}),ba(()=>{ge()}),(s,e)=>(w(),ne(wa,null,{default:A(()=>{var l,c,v,f,b,h,T;return[i(t(xa),{title:"GestiÃ³n de Reservas"}),i(t(Aa),{class:"z-[9999]"}),i(t(Ra),{class:"z-[9999]",style:ye(K.value),draggable:!1,closable:!1},{message:A(o=>[a("div",$a,[i(t(m),{icon:t(we),class:"h-8 w-8 text-red-500"},null,8,["icon"]),a("div",Ua,[a("span",null,n(o.message.header),1),a("span",Ha,n(o.message.content),1)])])]),_:1},8,["style"]),a("div",qa,[a("div",ja,[i(t(ha),{href:s.route("tours"),onClick:sa,class:N([{"opacity-50 cursor-not-allowed":ee.value},"inline-flex p-2 items-center bg-blue-500 hover:bg-blue-600 text-white hover:text-gray-200 rounded-md transition-colors duration-200"]),title:"Regresar a Tours"},{default:A(()=>[i(t(m),{icon:ee.value?t(O):t(Sa),class:N([{"animate-spin":ee.value},"h-5 w-5 mr-2"])},null,8,["icon","class"]),e[20]||(e[20]=a("span",{class:"font-medium"},"Volver a Tours",-1))]),_:1,__:[20]},8,["href","class"])]),a("div",Ba,[r.value?(w(),C("div",Ga,[a("h3",Za,n(r.value.nombre),1),a("div",Wa,[a("h4",Ya,[i(t(m),{icon:t(X),class:"h-3 w-3 text-blue-500"},null,8,["icon"]),e[21]||(e[21]=D(" InformaciÃ³n del Tour "))]),a("div",Ja,[a("div",Ka,[a("div",Xa,[i(t(m),{icon:t(Ta),class:"h-3 w-3"},null,8,["icon"]),e[22]||(e[22]=D(" CategorÃ­a "))]),a("div",Qa,n(((l=J.value)==null?void 0:l.categoriaTexto)||"N/E"),1)]),a("div",es,[a("div",as,[i(t(m),{icon:t(La),class:"h-3 w-3"},null,8,["icon"]),e[23]||(e[23]=D(" Transporte "))]),a("div",{class:"text-gray-800 font-semibold truncate",title:(c=r.value.transporte)==null?void 0:c.nombre},n(((v=r.value.transporte)==null?void 0:v.nombre)||"N/E"),9,ss)]),a("div",ts,[e[24]||(e[24]=a("div",{class:"text-gray-500 font-medium mb-1 text-xs uppercase tracking-wider"},"Precio",-1)),a("div",rs,"$"+n(r.value.precio||0),1)]),a("div",os,[e[28]||(e[28]=a("div",{class:"text-gray-500 font-medium mb-1 text-xs uppercase tracking-wider"},"Cupos",-1)),a("div",ls,[e[25]||(e[25]=a("span",{class:"text-xs"},"Min:",-1)),D(" "+n(r.value.cupo_min||0)+" ",1),e[26]||(e[26]=a("span",{class:"text-gray-400 mx-1"},"|",-1)),e[27]||(e[27]=a("span",{class:"text-xs"},"Max:",-1)),D(" "+n(r.value.cupo_max||"âˆž"),1)])])]),a("div",is,[a("div",ns,[a("div",ds,[i(t(m),{icon:t(Oa),class:"h-3 w-3"},null,8,["icon"]),e[29]||(e[29]=D(" Salida "))]),a("div",us,[a("div",cs,n(((f=J.value)==null?void 0:f.fechaSalidaFormateada)||"Fecha N/E"),1),a("div",ms,n(((b=J.value)==null?void 0:b.horaSalida)||"Hora N/E"),1)])]),a("div",vs,[a("div",fs,[i(t(m),{icon:t(ka),class:"h-3 w-3"},null,8,["icon"]),e[30]||(e[30]=D(" Regreso "))]),a("div",ps,[a("div",gs,n(((h=J.value)==null?void 0:h.fechaRegresoFormateada)||"Fecha N/E"),1),a("div",bs,n(((T=J.value)==null?void 0:T.horaRegreso)||"Hora N/E"),1)])])])]),a("div",xs,[a("p",hs,[i(t(m),{icon:t(X),class:"h-4 w-4 text-blue-500"},null,8,["icon"]),e[31]||(e[31]=D(" Haz clic en cualquier tarjeta para cambiar el estado del tour "))]),!z.value&&r.value.estado==="DISPONIBLE"&&V.value?(w(),C("div",ys,[a("div",ws,[i(t(m),{icon:t(we),class:"h-4 w-4 text-amber-500 mt-0.5 flex-shrink-0"},null,8,["icon"]),a("div",Es,[a("p",_s," Cupo mÃ­nimo no cumplido ("+n(r.value.cupo_min)+" personas requeridas). Actualmente hay "+n(Y.value.filter(o=>o.estado==="CONFIRMADA").reduce((o,y)=>o+(y.mayores_edad||0)+(y.menores_edad||0),0))+" personas confirmadas. ",1),a("div",As,[e[33]||(e[33]=a("span",{class:"text-xs text-amber-700"},"Opciones: Esperar mÃ¡s confirmaciones o",-1)),a("button",{onClick:ta,class:"inline-flex items-center gap-1 px-3 py-1 bg-amber-500 hover:bg-amber-600 text-white text-xs font-medium rounded-md transition-colors duration-200 shadow-sm hover:shadow-md"},[i(t(m),{icon:t(Q),class:"h-3 w-3"},null,8,["icon"]),e[32]||(e[32]=D(" Actualizar cupo "))])])])])])):R("",!0),r.value.estado==="COMPLETO"&&!oe.value?(w(),C("p",Rs,[i(t(m),{icon:t(X),class:"h-4 w-4 text-blue-500"},null,8,["icon"]),e[34]||(e[34]=a("span",{class:"font-medium"}," Tour completo - Debe confirmar TODAS las reservas pendientes para poder poner el tour en curso ",-1))])):R("",!0),r.value.estado==="REPROGRAMADA"&&!pe.value?(w(),C("p",Cs,[i(t(m),{icon:t(X),class:"h-4 w-4 text-purple-500"},null,8,["icon"]),e[35]||(e[35]=a("span",{class:"font-medium"}," Tour reprogramado - Confirme las reservas pendientes para habilitarlo en curso ",-1))])):R("",!0),!V.value&&(r.value.estado==="DISPONIBLE"||r.value.estado==="REPROGRAMADA")?(w(),C("p",Ds,[i(t(m),{icon:t(X),class:"h-4 w-4 text-gray-500"},null,8,["icon"]),e[36]||(e[36]=a("span",null," Este tour no tiene reservas activas. ",-1))])):R("",!0)]),a("div",Ns,[a("div",Ss,[e[37]||(e[37]=a("p",{class:"text-xs md:text-sm text-gray-600 mb-1"},"Estado Actual",-1)),a("p",Ts,n(da(r.value.estado)),1)]),r.value.estado!=="EN_CURSO"&&r.value.estado!=="FINALIZADO"&&r.value.estado!=="CANCELADA"?(w(),C("div",{key:0,class:N(["rounded-lg px-2 py-2 md:px-4 md:py-3 flex-1 min-w-0 transition-all duration-200",pe.value?"bg-gradient-to-r from-blue-500 to-blue-600 cursor-pointer hover:shadow-lg hover:scale-105":"bg-gray-400 cursor-not-allowed opacity-60"]),onClick:e[0]||(e[0]=o=>pe.value?le("EN_CURSO"):null)},[a("div",Ls,[e[38]||(e[38]=a("div",{class:"flex-1"},[a("p",{class:"text-xs md:text-sm opacity-90"},"En Curso")],-1)),i(t(m),{icon:E.value.cambiarEstado?t(O):t(Q),class:N([{"animate-spin":E.value.cambiarEstado},"text-xs md:text-sm opacity-75"])},null,8,["icon","class"])])],2)):R("",!0),r.value.estado!=="FINALIZADO"&&r.value.estado!=="CANCELADA"&&r.value.estado==="EN_CURSO"?(w(),C("div",{key:1,class:"bg-gradient-to-r from-gray-500 to-gray-600 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 rounded-lg px-2 py-2 md:px-4 md:py-3 flex-1 min-w-0",onClick:e[1]||(e[1]=o=>le("FINALIZADO"))},[a("div",Os,[e[39]||(e[39]=a("div",{class:"flex-1"},[a("p",{class:"text-xs md:text-sm opacity-90"},"Finalizar")],-1)),i(t(m),{icon:E.value.cambiarEstado?t(O):t(qe),class:N([{"animate-spin":E.value.cambiarEstado},"text-xs md:text-sm opacity-75"])},null,8,["icon","class"])])])):R("",!0),r.value.estado!=="REPROGRAMADA"&&r.value.estado!=="FINALIZADO"&&r.value.estado!=="CANCELADA"&&r.value.estado!=="EN_CURSO"?(w(),C("div",{key:2,class:N(["rounded-lg px-2 py-2 md:px-4 md:py-3 flex-1 min-w-0 transition-all duration-200",r.value.estado==="DISPONIBLE"&&z.value||r.value.estado==="COMPLETO"&&oe.value?"bg-gradient-to-r from-purple-500 to-purple-600 cursor-pointer hover:shadow-lg hover:scale-105":"bg-gray-400 cursor-not-allowed opacity-60"]),onClick:e[2]||(e[2]=o=>r.value.estado==="DISPONIBLE"&&z.value||r.value.estado==="COMPLETO"&&oe.value?le("REPROGRAMADA"):null)},[a("div",ks,[e[40]||(e[40]=a("div",{class:"flex-1"},[a("p",{class:"text-xs md:text-sm opacity-90"},"Reprogramar")],-1)),i(t(m),{icon:E.value.cambiarEstado?t(O):t(Q),class:N([{"animate-spin":E.value.cambiarEstado},"text-xs md:text-sm opacity-75"])},null,8,["icon","class"])])],2)):R("",!0),r.value.estado!=="CANCELADA"&&r.value.estado!=="FINALIZADO"&&r.value.estado!=="EN_CURSO"?(w(),C("div",{key:3,class:N(["rounded-lg px-2 py-2 md:px-4 md:py-3 flex-1 min-w-0 transition-all duration-200",V.value||r.value.estado==="COMPLETO"||r.value.estado==="REPROGRAMADA"?"bg-gradient-to-r from-red-500 to-red-600 cursor-pointer hover:shadow-lg hover:scale-105":"bg-gray-400 cursor-not-allowed opacity-60"]),onClick:e[3]||(e[3]=o=>V.value||r.value.estado==="COMPLETO"||r.value.estado==="REPROGRAMADA"?le("CANCELADA"):null),title:!V.value&&r.value.estado!=="COMPLETO"?"No se puede cancelar un tour sin reservas activas":"Cancelar tour y todas sus reservas"},[a("div",Fs,[a("div",Ms,[e[41]||(e[41]=a("p",{class:"text-xs md:text-sm opacity-90"},"Cancelar",-1)),V.value?R("",!0):(w(),C("p",Ps,"Sin reservas"))]),i(t(m),{icon:E.value.cambiarEstado?t(O):t(Ee),class:N([{"animate-spin":E.value.cambiarEstado},"text-xs md:text-sm opacity-75"])},null,8,["icon","class"])])],10,Is)):R("",!0)])])):R("",!0),a("div",zs,[a("div",Vs,[a("div",$s,[e[42]||(e[42]=a("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[a("i",{class:"pi pi-filter text-blue-600 text-sm"}),a("span",null,"Filtros")],-1)),a("div",Us,n(Y.value.length)+" resultado"+n(Y.value.length!==1?"s":""),1)]),a("button",{onClick:ca,disabled:W.value,class:"bg-red-500 hover:bg-red-600 border border-red-500 px-2 py-1 text-xs text-white shadow-md rounded-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 shrink-0"},[W.value?(w(),ne(t(m),{key:0,icon:t(O),class:"animate-spin h-3 w-3"},null,8,["icon"])):R("",!0),a("span",null,n(W.value?"Limpiando...":"Limpiar"),1)],8,Hs)]),a("div",qs,[a("div",js,[i(t(m),{icon:t(Ia),class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"},null,8,["icon"]),i(t(Ca),{modelValue:d.value.busqueda,"onUpdate:modelValue":e[4]||(e[4]=o=>d.value.busqueda=o),placeholder:"Buscar por cliente...",class:"w-full h-9 text-sm rounded-md pl-10",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),a("div",Bs,[i(t(de),{modelValue:d.value.fechaDesde,"onUpdate:modelValue":e[5]||(e[5]=o=>d.value.fechaDesde=o),placeholder:"Fecha desde",dateFormat:"dd/mm/yy",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},showIcon:""},null,8,["modelValue"]),i(t(de),{modelValue:d.value.fechaHasta,"onUpdate:modelValue":e[6]||(e[6]=o=>d.value.fechaHasta=o),placeholder:"Fecha hasta",dateFormat:"dd/mm/yy",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},showIcon:""},null,8,["modelValue"]),i(t(Da),{modelValue:d.value.estado,"onUpdate:modelValue":e[7]||(e[7]=o=>d.value.estado=o),options:[{label:"Todos los estados",value:null},{label:"Pendientes",value:"PENDIENTE"},{label:"Confirmadas",value:"CONFIRMADA"}],optionLabel:"label",optionValue:"value",placeholder:"Filtrar por estado",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),a("div",Gs,[a("p",Zs,[i(t(m),{icon:t(je),class:"h-3 w-3 text-yellow-500"},null,8,["icon"]),e[43]||(e[43]=D(" Haz clic en cualquier fila para ver los detalles. "))])])])]),ue.value?(w(),C("div",Ws,[i(t(m),{icon:t(O),class:"animate-spin h-10 w-10 text-blue-600"},null,8,["icon"]),e[44]||(e[44]=a("span",{class:"text-gray-600 font-medium text-lg"},"Cargando reservas...",-1))])):(w(),ne(t(Na),{key:2,value:Y.value,paginator:"",rows:10,rowsPerPageOptions:[5,10,20,50],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} reservas",responsiveLayout:"scroll",class:"mt-2 sm:mt-4 overflow-x-auto",onRowClick:ia,pt:{root:{class:"text-xs sm:text-sm"},wrapper:{class:"text-xs sm:text-sm overflow-x-auto"},table:{class:"text-xs sm:text-sm min-w-full"},thead:{class:"text-xs sm:text-sm"},headerRow:{class:"text-xs sm:text-sm"},headerCell:{class:"text-xs sm:text-sm font-medium py-2 sm:py-3 px-1 sm:px-2"},tbody:{class:"text-xs sm:text-sm"},bodyRow:{class:"text-xs sm:text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-2 sm:py-3 px-1 sm:px-2 text-xs sm:text-sm"}}},{empty:A(()=>[a("div",Ys,[i(t(m),{icon:t(je),class:"h-12 w-12 text-gray-400"},null,8,["icon"]),a("div",Js,[e[45]||(e[45]=a("h3",{class:"text-lg font-semibold text-gray-700 mb-2"},"NO HAY RESERVAS DISPONIBLES",-1)),a("p",Ks,n(d.value.busqueda||d.value.fechaDesde||d.value.fechaHasta||d.value.estado?"No se encontraron reservas que coincidan con los filtros aplicados.":"Este tour aÃºn no tiene reservas registradas."),1),a("p",Xs,n(d.value.busqueda||d.value.fechaDesde||d.value.fechaHasta||d.value.estado?"Intenta ajustar o limpiar los filtros para ver mÃ¡s resultados.":"Las reservas aparecerÃ¡n aquÃ­ cuando los clientes reserven este tour."),1)])])]),loading:A(()=>e[46]||(e[46]=[a("div",{class:"text-center py-12"},[a("i",{class:"pi pi-spin pi-spinner text-3xl text-blue-500 mb-4"}),a("p",{class:"text-gray-500 text-lg"},"Cargando reservas...")],-1)])),default:A(()=>[i(t(H),{field:"fecha_reserva",header:"Fecha",class:"w-28 min-w-16"},{body:A(o=>[a("span",Qs,n(ua(o.data.fecha_reserva)),1)]),_:1}),i(t(H),{field:"cliente.nombres",header:"Cliente",class:"w-16 hidden sm:table-cell"},{body:A(o=>{var y,S,_,ie,Le,Oe,ke,Ie,Fe,Me,Pe,ze;return[a("div",et,[a("div",at,[i(t(m),{icon:t(Be),class:"text-blue-600 text-xs sm:text-sm"},null,8,["icon"])]),a("div",st,[a("div",{class:"font-medium text-gray-900 text-xs sm:text-sm truncate",title:((S=(y=o.data.cliente)==null?void 0:y.user)==null?void 0:S.name)||((_=o.data.cliente)==null?void 0:_.nombres)||"N/A"},n(((Le=(ie=o.data.cliente)==null?void 0:ie.user)==null?void 0:Le.name)||((Oe=o.data.cliente)==null?void 0:Oe.nombres)||"N/A"),9,tt),a("div",{class:"text-xs text-gray-500 truncate hidden sm:block",title:((Ie=(ke=o.data.cliente)==null?void 0:ke.user)==null?void 0:Ie.email)||((Fe=o.data.cliente)==null?void 0:Fe.correo)||"N/A"},n(((Pe=(Me=o.data.cliente)==null?void 0:Me.user)==null?void 0:Pe.email)||((ze=o.data.cliente)==null?void 0:ze.correo)||"N/A"),9,rt)])])]}),_:1}),i(t(H),{header:"Personas",class:"w-20 sm:w-24 lg:w-28 min-w-16 hidden md:table-cell"},{body:A(o=>[a("div",null,[a("div",ot,[i(t(m),{icon:t(Be),class:"text-gray-400 text-xs mr-1"},null,8,["icon"]),a("span",lt,n((o.data.mayores_edad||0)+(o.data.menores_edad||0)),1)]),a("div",it,n(o.data.mayores_edad||0)+"A â€¢ "+n(o.data.menores_edad||0)+"N ",1)])]),_:1}),i(t(H),{field:"total",header:"Total",class:"w-12 min-w-12"},{body:A(o=>[a("span",nt," $"+n(Number(o.data.total||0).toFixed(2)),1)]),_:1}),i(t(H),{field:"estado",header:"Estado",class:"w-24 sm:w-28 lg:w-36 min-w-20 hidden lg:table-cell"},{body:A(o=>{var y,S;return[a("span",{class:N([na(o.data.estado),"px-2 py-1 rounded-full text-xs font-medium"])},[a("span",dt,n(((y=re.find(_=>_.value===o.data.estado))==null?void 0:y.label)||o.data.estado),1),a("span",ut,n((((S=re.find(_=>_.value===o.data.estado))==null?void 0:S.label)||o.data.estado).substring(0,4)),1)],2)]}),_:1}),i(t(H),{header:"Acciones",class:"w-24 sm:w-28 lg:w-32 min-w-20"},{body:A(o=>[a("button",{class:"bg-green-500 hover:bg-green-600 text-white px-2 py-2 rounded-md transition-all duration-200 ease-in-out inline-flex items-center gap-1 text-xs shadow-md hover:shadow-lg hover:-translate-y-1",onClick:y=>la(o.data),title:"MÃ¡s acciones"},[i(t(m),{icon:t(Pa),class:"h-3 w-4 sm:h-4 sm:w-5"},null,8,["icon"]),e[47]||(e[47]=a("span",{class:"hidden md:inline"},"MÃ¡s",-1))],8,ct)]),_:1})]),_:1},8,["value"])),i(za,{visible:P.value,"onUpdate:visible":e[8]||(e[8]=o=>P.value=o),"detalles-visible":te.value,"onUpdate:detallesVisible":e[9]||(e[9]=o=>te.value=o),"rechazar-visible":se.value,"onUpdate:rechazarVisible":e[10]||(e[10]=o=>se.value=o),reserva:B.value,tour:ce.value,"dialog-style":K.value,procesando:me.value,"confirmando-reserva":ve.value,"rechazando-reserva":fe.value,"estados-reservas":re,"estados-tours":Re,onConfirmar:ma,onRechazar:va,onVerDetalles:fa,onActualizarReserva:pa},null,8,["visible","detalles-visible","rechazar-visible","reserva","tour","dialog-style","procesando","confirmando-reserva","rechazando-reserva"]),i(Va,{visible:ae.value,"onUpdate:visible":e[11]||(e[11]=o=>ae.value=o),tour:r.value,"dialog-style":K.value,onEstadoActualizado:Xe},null,8,["visible","tour","dialog-style"]),i(t(He),{visible:j.value,"onUpdate:visible":e[14]||(e[14]=o=>j.value=o),modal:"",header:"Cancelar Tour Completo",style:ye(K.value),closable:!1,draggable:!1},{default:A(()=>{var o;return[a("div",mt,[a("div",vt,[a("div",ft,[i(t(m),{icon:t(we),class:"text-red-600 text-lg mt-1 flex-shrink-0"},null,8,["icon"]),a("div",null,[a("h4",pt,"Cancelar Tour: "+n((o=r.value)==null?void 0:o.nombre),1),a("div",gt,[e[48]||(e[48]=a("p",null,[a("strong",null,"â€¢ AcciÃ³n PERMANENTE e IRREVERSIBLE")],-1)),a("p",null,"â€¢ Elimina todas las "+n(x.value.length)+" reserva(s) y sus datos",1),e[49]||(e[49]=a("p",null,"â€¢ EnvÃ­a notificaciones automÃ¡ticas a los clientes",-1))])])])]),a("div",null,[e[50]||(e[50]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[D(" Motivo de la CancelaciÃ³n del Tour "),a("span",{class:"text-red-500"},"*")],-1)),$e(a("textarea",{"onUpdate:modelValue":e[12]||(e[12]=y=>k.value=y),placeholder:"Explique por quÃ© se cancela el tour completo...",class:"w-full p-3 border border-gray-300 rounded-md focus:ring-red-500 focus:border-red-500",rows:"4",maxlength:"500"},null,512),[[Ue,k.value]]),a("small",bt,n(k.value.length)+"/500 caracteres",1)]),a("div",xt,[a("button",{onClick:e[13]||(e[13]=y=>j.value=!1),class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancelar "),a("button",{onClick:oa,disabled:!k.value.trim()||I.value,class:"px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 disabled:bg-red-300 flex items-center gap-2"},[i(t(m),{icon:I.value?t(O):t(Ee),class:N({"animate-spin":I.value})},null,8,["icon","class"]),D(" "+n(I.value?"Eliminando Todo...":"Eliminar Tour y Reservas Definitivamente"),1)],8,ht)])])]}),_:1},8,["visible","style"]),i(t(He),{visible:M.value,"onUpdate:visible":e[19]||(e[19]=o=>M.value=o),modal:"",header:"Reprogramar Tour",style:ye(K.value),closable:!1,draggable:!1},{default:A(()=>{var o,y,S;return[a("div",yt,[a("div",wt,[a("h4",Et,n((o=r.value)==null?void 0:o.nombre),1),a("p",_t," Fechas actuales: "+n(Se((y=r.value)==null?void 0:y.fecha_salida))+" - "+n(Se((S=r.value)==null?void 0:S.fecha_regreso)),1)]),a("div",At,[a("div",null,[e[51]||(e[51]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salida:",-1)),i(t(de),{modelValue:p.value.fechaSalida,"onUpdate:modelValue":e[15]||(e[15]=_=>p.value.fechaSalida=_),showTime:"",hourFormat:"12",dateFormat:"dd/mm/yy",showIcon:"",placeholder:"Seleccionar fecha y hora",class:"w-full",minDate:new Date,maxDate:Qe(),onDateSelect:be,onInput:be},null,8,["modelValue","minDate","maxDate"]),G.value?(w(),C("small",Rt,n(G.value),1)):R("",!0)]),a("div",null,[e[52]||(e[52]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Regreso:",-1)),i(t(de),{modelValue:p.value.fechaRegreso,"onUpdate:modelValue":e[16]||(e[16]=_=>p.value.fechaRegreso=_),showTime:"",hourFormat:"12",dateFormat:"dd/mm/yy",showIcon:"",placeholder:"Seleccionar fecha y hora",class:"w-full",minDate:ea(),onDateSelect:xe,onInput:xe},null,8,["modelValue","minDate"]),Z.value?(w(),C("small",Ct,n(Z.value),1)):R("",!0)])]),a("div",null,[e[53]||(e[53]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Motivo de la ReprogramaciÃ³n",-1)),$e(a("textarea",{"onUpdate:modelValue":e[17]||(e[17]=_=>p.value.motivo=_),placeholder:"Ingrese el motivo de la reprogramaciÃ³n...",class:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",rows:"3"},null,512),[[Ue,p.value.motivo]]),e[54]||(e[54]=a("p",{class:"text-xs text-gray-500 mt-2"}," ðŸ’¡ Al reprogramar el tour, todas las reservas asociadas serÃ¡n reprogramadas automÃ¡ticamente y se enviarÃ¡n correos de notificaciÃ³n a los clientes. ",-1))]),a("div",Dt,[a("button",{onClick:aa,disabled:E.value.cambiarEstado,class:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[E.value.cambiarEstado?(w(),ne(t(m),{key:0,icon:t(O),class:"animate-spin"},null,8,["icon"])):R("",!0),D(" "+n(E.value.cambiarEstado?"Reprogramando...":"Reprogramar Tour"),1)],8,Nt),a("button",{onClick:e[18]||(e[18]=_=>{M.value=!1,ge()}),class:"border rounded-md bg-blue-500 hover:bg-blue-700 text-white px-6 py-2",disabled:E.value.cambiarEstado}," Cancelar ",8,St)])])]}),_:1},8,["visible","style"])])])]}),_:1}))}};export{Vt as default};
