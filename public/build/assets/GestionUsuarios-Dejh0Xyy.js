import{N as T,r as v,E as U,w as Ze,n as j,o as Ie,k as q,h as Y,d,x,p as u,e as l,$ as o,a0 as Be,c as m,t as f,I as Ge,y as V,F as J,j as p,q as E,A as je,l as ne}from"./vendor-gbh1WW5n.js";import{A as qe}from"./AuthenticatedLayout-CSuYxj7F.js";import{z as Ke,A as He,a as We,F as w}from"./ui-BrU4k96Z.js";import{k as ie,c as K,l as fe,z as Oe,m as Ye,n as pe,o as Je,a as Xe,p as Qe}from"./index-B6nVaz6S.js";import{z as ea}from"./vue-tel-input-nvsKEitw.js";import ge from"./Modales-BW216lEV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const aa={class:"container mx-auto px-4 py-6"},sa={class:"bg-white rounded-lg shadow-md"},la={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center text-center sm:text-left gap-4 p-4"},ta={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},oa={key:0,class:"flex flex-col items-center justify-center py-12 px-4"},ra={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},na={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},ia={class:"flex items-center gap-3"},da={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},ua=["disabled"],ca=["disabled"],ma={class:"space-y-3"},va={class:"relative"},fa={class:"text-blue-600 text-xs font-medium flex items-center gap-1"},pa=["title"],ga=["title"],ba=["title"],wa={class:"text-sm font-medium leading-relaxed"},ya={class:"flex gap-2 justify-center items-center"},ha=["disabled"],xa={key:0},_a={key:1},Ca=["onClick"],ka=["onClick"],Ea=["onClick"],Aa={class:"flex flex-col items-center justify-center py-16 px-4 text-center"},Va={class:"bg-gray-50 rounded-full p-6 mb-6"},Pa={class:"space-y-4"},Da={class:"w-full flex flex-col"},La={class:"flex items-center gap-4"},Na={key:0,class:"ml-28 mt-1"},Ta={key:1,class:"text-gray-500 ml-28 mt-1"},Ua={key:2,class:"text-orange-500 ml-28 mt-1"},Sa={key:3,class:"text-red-500 ml-28 mt-1"},za={class:"w-full flex flex-col"},Ra={class:"flex items-center gap-4"},Ma={key:0,class:"text-red-500 ml-28"},$a={key:1,class:"text-red-500 ml-28"},Fa={key:0,class:"w-full flex flex-col"},Za={class:"flex items-center gap-4"},Ia={key:0,class:"ml-28 mt-1"},Ba={key:1,class:"w-full flex flex-col"},Ga={class:"flex items-center gap-4"},ja={key:0,class:"text-red-500 ml-28 mt-1"},qa={class:"w-full flex flex-col"},Ka={class:"flex items-center gap-4"},Ha={key:0,class:"ml-28 mt-1"},Wa={key:1,class:"text-gray-500 ml-28 mt-1"},Oa={key:2,class:"text-orange-500 ml-28 mt-1"},Ya={key:3,class:"text-red-500 ml-28 mt-1"},Ja={class:"w-full flex flex-col"},Xa={class:"flex items-start gap-4"},Qa={class:"flex-1"},es={key:0,class:"ml-28 mt-1"},as={class:"mr-1"},ss={key:1,class:"text-red-500 ml-28"},ls={class:"flex justify-center gap-4 w-full mt-6"},ts=["disabled"],os={key:0},rs={key:1},ns=["disabled"],H="/api/empleados",gs={__name:"GestionUsuarios",setup(is){T.defaults.withCredentials=!0;const c=Ke(),S=v([]),s=v({id:null,nombre:"",email:"",password:"",password_confirmation:"",cargo:"",telefono:""}),P=v(!1),z=v(!1),W=v(!1),F=v(!1),g=v(!1),D=v(!1),L=v(null),N=v(!1),R=v(!1),C=v(null),O=v(!1),X=v(null),Q=v(!1),A=v(!1),_=v(!1),ee=v(!0),Z=v({global:{value:null,matchMode:He.CONTAINS}}),ae=v(10),be=v([5,10,20,50]),I=v("Guardar"),se=U(()=>{let a=S.value;if(Z.value.global.value){const e=Z.value.global.value.toLowerCase();a=a.filter(r=>r.nombre.toLowerCase().includes(e)||r.email.toLowerCase().includes(e)||r.cargo.toLowerCase().includes(e)||r.telefono.toLowerCase().includes(e))}return a}),y=v({isValid:!1,country:null,formattedNumber:"",mensaje:""}),we=a=>{try{a&&typeof a=="object"&&(y.value.isValid=a.valid===!0,y.value.country={name:a.country,code:a.countryCode},y.value.formattedNumber=a.formatted||"",a.valid===!0&&a.formatted&&(s.value.telefono=a.formatted),s.value.telefono&&a.valid===!1?y.value.mensaje="‚úó N√∫mero de tel√©fono inv√°lido para "+a.country:a.valid===!0?y.value.mensaje="‚úì N√∫mero v√°lido para "+a.country:y.value.mensaje="")}catch{y.value.mensaje="Error en validaci√≥n"}};Ze([s],()=>{L.value&&P.value&&j(()=>{const a={...s.value};delete a.password,delete a.password_confirmation;const e={...L.value};delete e.password,delete e.password_confirmation;const r=JSON.stringify(a)!==JSON.stringify(e),n=!L.value.id,i=s.value.nombre||s.value.email||s.value.cargo||s.value.telefono;D.value=r||n&&i})},{deep:!0,flush:"post"});function B(){s.value={id:null,nombre:"",email:"",password:"",password_confirmation:"",cargo:"",telefono:""},y.value={isValid:!1,country:null,formattedNumber:"",mensaje:""},g.value=!1}Ie(()=>{ye()});const G=async()=>{try{const a=await T.get(H);S.value=(a.data.data||a.data||[]).sort((e,r)=>{const n=new Date(e.created_at);return new Date(r.created_at)-n})}catch{c.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los empleados.",life:4e3})}},ye=async()=>{ee.value=!0;try{await new Promise(a=>setTimeout(a,1500)),await G()}catch{c.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los empleados.",life:4e3})}finally{ee.value=!1}},de=async()=>{A.value=!0;try{await new Promise(a=>setTimeout(a,300)),Z.value.global.value=null,c.add({severity:"success",summary:"Filtros limpiados",life:2e3})}finally{A.value=!1}},ue=()=>{B(),I.value="Guardar",g.value=!1,P.value=!0,j(()=>{L.value={...s.value},D.value=!1})},he=a=>{B(),g.value=!1,s.value={...a,nombre:a.nombre||a.name,cargo:a.cargo?a.cargo.toUpperCase():a.cargo,password:"",password_confirmation:""},D.value=!1,I.value="Actualizar",P.value=!0,j(()=>{L.value={...s.value},D.value=!1})},xe=async()=>{var e;if(g.value=!0,!s.value.nombre||s.value.nombre.length<3||s.value.nombre.length>255){c.add({severity:"warn",summary:"Nombre inv√°lido",detail:"El nombre debe tener entre 3 y 255 caracteres.",life:4e3});return}if(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/.test(s.value.nombre)){c.add({severity:"warn",summary:"Nombre inv√°lido",detail:"El nombre solo puede contener letras y espacios.",life:4e3});return}if(ve(s.value.nombre)){c.add({severity:"warn",summary:"Nombre duplicado",detail:"Ya existe un empleado con este nombre.",life:4e3});return}if(!s.value.email||!te(s.value.email)){c.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que el correo electr√≥nico sea v√°lido.",life:4e3});return}if(!s.value.id){if(!s.value.password||s.value.password.length<8||!/[A-Z]/.test(s.value.password)||!/[0-9]/.test(s.value.password)||/[\s.]/.test(s.value.password)){c.add({severity:"warn",summary:"Contrase√±a inv√°lida",detail:"La contrase√±a debe tener al menos 8 caracteres, incluir una may√∫scula, un n√∫mero y no contener espacios ni puntos.",life:4e3});return}if(s.value.password!==s.value.password_confirmation){c.add({severity:"warn",summary:"Contrase√±as no coinciden",detail:"Por favor verifica que las contrase√±as coincidan.",life:4e3});return}}if(!s.value.cargo||s.value.cargo.length<2){c.add({severity:"warn",summary:"Cargo inv√°lido",detail:"El cargo debe tener al menos 2 caracteres.",life:4e3});return}if(/[^A-Z\s]/.test(s.value.cargo)){c.add({severity:"warn",summary:"Cargo inv√°lido",detail:"El cargo solo puede contener letras y espacios (sin tildes ni n√∫meros).",life:4e3});return}if(!s.value.telefono){c.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor completa todos los campos obligatorios.",life:4e3});return}if(!y.value.isValid){c.add({severity:"warn",summary:"Tel√©fono inv√°lido",detail:"Por favor ingresa un n√∫mero de tel√©fono v√°lido.",life:4e3});return}const a=await Fe(s.value.telefono);if(!a.available){c.add({severity:"warn",summary:"Tel√©fono no disponible",detail:a.message,life:4e3});return}try{_.value=!0;const r={name:s.value.nombre,email:s.value.email,cargo:s.value.cargo,telefono:s.value.telefono};s.value.id||(r.password=s.value.password,r.password_confirmation=s.value.password_confirmation);let n;s.value.id?(n=await T.put(`${H}/${s.value.id}`,r),c.add({severity:"success",summary:"¬°√âxito!",detail:"El empleado ha sido actualizado correctamente.",life:5e3})):(n=await T.post(H,r),c.add({severity:"success",summary:"¬°√âxito!",detail:"El empleado ha sido creado correctamente.",life:5e3})),await G(),P.value=!1,D.value=!1,L.value=null,B()}catch(r){if(((e=r.response)==null?void 0:e.status)===422){const n=r.response.data.errors||{};let i="Por favor revisa los campos e intenta nuevamente.";n.telefono?i=n.telefono[0]:n.email?i=n.email[0]:n.name&&(i=n.name[0]),c.add({severity:"warn",summary:"Error de validaci√≥n",detail:i,life:6e3})}else c.add({severity:"error",summary:"Error",detail:"Ocurri√≥ un error al procesar la solicitud.",life:6e3})}finally{_.value=!1}},_e=a=>{C.value={...a},z.value=!0},Ce=async()=>{var a,e,r,n,i;Q.value=!0;try{await T.delete(`${H}/${C.value.id}`),await G(),z.value=!1,c.add({severity:"success",summary:"¬°Eliminado!",detail:"El empleado ha sido eliminado correctamente.",life:5e3})}catch(b){if(z.value=!1,((a=b.response)==null?void 0:a.status)===422){const h=b.response.data;let t=h.error||"El empleado est√° siendo utilizado en el sistema.";h.details&&Array.isArray(h.details)&&(t+=`

üìã Detalles:
‚Ä¢ `+h.details.join(`
‚Ä¢ `)),c.add({severity:"warn",summary:"‚ùå No se puede eliminar",detail:t,life:1e4})}else if(((e=b.response)==null?void 0:e.status)===404)c.add({severity:"error",summary:"Empleado no encontrado",detail:"El empleado que intentas eliminar no existe o ya fue eliminado.",life:5e3}),await G();else if(((r=b.response)==null?void 0:r.status)===500)c.add({severity:"error",summary:"Error del servidor",detail:"Ocurri√≥ un error interno. Por favor, contacta al administrador.",life:6e3});else{const h=((i=(n=b.response)==null?void 0:n.data)==null?void 0:i.error)||b.message||"Error desconocido";c.add({severity:"error",summary:"Error",detail:`No se pudo eliminar el empleado: ${h}`,life:6e3})}}finally{Q.value=!1}},ke=()=>{D.value?F.value=!0:ce()},ce=()=>{P.value=!1,F.value=!1,D.value=!1,L.value=null,B()},Ee=()=>{F.value=!1},Ae=a=>{C.value=a,R.value=!0},Ve=a=>{R.value=!1,C.value=a,s.value={id:a.id,nombre:a.nombre,email:a.email,cargo:a.cargo?a.cargo.toUpperCase():a.cargo,telefono:a.telefono,password:"",password_confirmation:""},g.value=!1,W.value=!0},Pe=async a=>{var e;if(g.value=!0,!a.password||a.password.length<8||!/[A-Z]/.test(a.password)||!/[0-9]/.test(a.password)||/[\s.]/.test(a.password)){c.add({severity:"warn",summary:"Contrase√±a inv√°lida",detail:"La contrase√±a debe tener al menos 8 caracteres, incluir una may√∫scula, un n√∫mero y no contener espacios ni puntos.",life:4e3});return}if(a.password!==a.password_confirmation){c.add({severity:"warn",summary:"Contrase√±as no coinciden",detail:"Por favor verifica que las contrase√±as coincidan.",life:4e3});return}try{_.value=!0,await T.put(`${H}/${C.value.id}/password`,{password:a.password,password_confirmation:a.password_confirmation}),W.value=!1,g.value=!1,B(),c.add({severity:"success",summary:"¬°√âxito!",detail:"La contrase√±a ha sido actualizada correctamente. Las sesiones del usuario han sido cerradas por seguridad.",life:6e3}),await G()}catch(r){if(((e=r.response)==null?void 0:e.status)===422){const n=r.response.data.errors||{};let i="Por favor revisa los campos e intenta nuevamente.";n.password&&(i=n.password[0]),c.add({severity:"warn",summary:"Error de validaci√≥n",detail:i,life:6e3})}else c.add({severity:"error",summary:"Error",detail:"Ocurri√≥ un error al actualizar la contrase√±a.",life:6e3})}finally{_.value=!1}},De=a=>{C.value=a,X.value={id:a.user_id||a.usuario_id||null,name:a.nombre||a.name,email:a.email,roles:a.roles?a.roles:[],status:a.status||"Activo",created_at:a.created_at},O.value=!0,R.value=!1},Le=a=>{c.add({severity:"info",summary:"Enviar Credenciales",detail:`Funcionalidad de enviar credenciales al empleado "${a.nombre}" en desarrollo.`,life:5e3}),R.value=!1},Ne=a=>{var n;const e=((n=a.originalEvent)==null?void 0:n.target)||a.target;let r=!1;if(e&&(r=!!(e.closest&&e.closest("button"))),!r){const i=a.data;C.value=i;let b=null;i&&i.email&&(b={id:i.user_id||i.usuario_id||null,name:i.nombre||i.name,email:i.email,roles:i.roles?i.roles:[],status:i.status||"Activo",created_at:i.created_at}),X.value=b,O.value=!0}},me=v(typeof window<"u"?window.innerWidth:1024),le=U(()=>me.value<640?{width:"95vw",maxWidth:"380px"}:me.value<768?{width:"400px"}:{width:"450px"}),te=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),Te=()=>{s.value.nombre&&(s.value.nombre=s.value.nombre.replace(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/g,""),s.value.nombre.length>255&&(s.value.nombre=s.value.nombre.substring(0,255)))},Ue=a=>{const e=a.key;if(a.ctrlKey||a.metaKey||["Backspace","Delete","Tab","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e))return;/^[a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]$/.test(e)||a.preventDefault()},Se=a=>{a.preventDefault();const r=(a.clipboardData||window.clipboardData).getData("text").replace(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/g,""),n=a.target,i=n.selectionStart,b=n.selectionEnd,h=s.value.nombre||"",t=h.substring(0,i)+r+h.substring(b);s.value.nombre=t.substring(0,255),j(()=>{const k=i+r.length;n.setSelectionRange(k,k)})},ze=()=>{s.value.cargo&&(s.value.cargo=s.value.cargo.toUpperCase(),s.value.cargo=s.value.cargo.replace(/[^A-Z\s]/g,""),s.value.cargo.length>25&&(s.value.cargo=s.value.cargo.substring(0,25)))},Re=a=>{const e=a.key;if(a.ctrlKey||a.metaKey||["Backspace","Delete","Tab","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e))return;/^[a-zA-Z\s]$/.test(e)||a.preventDefault()},Me=a=>{a.preventDefault();const r=(a.clipboardData||window.clipboardData).getData("text").toUpperCase().replace(/[^A-Z\s]/g,""),n=a.target,i=n.selectionStart,b=n.selectionEnd,h=s.value.cargo||"",t=h.substring(0,i)+r+h.substring(b);s.value.cargo=t.substring(0,25),j(()=>{const k=i+r.length;n.setSelectionRange(k,k)})},ve=a=>!a||!S.value?!1:S.value.some(e=>e.id!==s.value.id&&e.nombre.toLowerCase().trim()===a.toLowerCase().trim()),$e=a=>!a||!S.value?!1:S.value.some(e=>e.id!==s.value.id&&e.telefono===a),Fe=async a=>{try{const e={telefono:a};return s.value.id&&(e.empleado_id=s.value.id),(await T.get("/api/empleados/check-telefono",{params:e})).data}catch(e){return console.error("Error verificando tel√©fono:",e),{available:!1,message:"Error al verificar la disponibilidad del tel√©fono"}}},M=U(()=>{const a=[],e=s.value.nombre||"";return e.length>0&&e.length<3&&a.push("El nombre debe tener al menos 3 caracteres."),e.length>0&&/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/.test(e)&&a.push("El nombre solo puede contener letras, espacios y guiones."),e.length>0&&ve(e)&&a.push("Ya existe un empleado con este nombre."),a}),$=U(()=>{const a=[],e=s.value.cargo||"";return e.length>0&&e.length<2&&a.push("El cargo debe tener al menos 2 caracteres."),e.length>0&&/[^A-Z\s]/.test(e)&&a.push("El cargo solo puede contener letras y espacios (sin tildes ni n√∫meros)."),a}),oe=U(()=>{const a=[],e=s.value.password||"";return e.length>0&&e.length<8&&a.push("La contrase√±a debe tener al menos 8 caracteres."),e.length>0&&!/[A-Z]/.test(e)&&a.push("La contrase√±a debe incluir al menos una letra may√∫scula."),e.length>0&&!/[0-9]/.test(e)&&a.push("La contrase√±a debe incluir al menos un n√∫mero."),e.length>0&&/[\s.]/.test(e)&&a.push("La contrase√±a no puede contener espacios ni puntos."),a}),re=U(()=>s.value.password&&s.value.password_confirmation&&s.value.password!==s.value.password_confirmation?"Las contrase√±as no coinciden.":"");return U(()=>{const a=[],e=s.value.telefono||"";return e.length>0&&!y.value.isValid&&a.push("El formato del tel√©fono no es v√°lido."),e.length>0&&$e(e)&&a.push("Este n√∫mero de tel√©fono ya est√° en uso por otro empleado."),a}),(a,e)=>{const r=q("InputText"),n=q("Column"),i=q("DataTable"),b=q("Password"),h=q("Dialog");return d(),Y(qe,null,{default:x(()=>[u(o(Be),{title:"Gesti√≥n de Usuarios"}),u(o(We),{class:"z-[9999]"}),l("div",aa,[l("div",sa,[l("div",la,[e[18]||(e[18]=l("div",{class:"w-full"},[l("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Gesti√≥n de Empleados"),l("p",{class:"text-gray-600"},"Gesti√≥n completa de usuarios con acceso al sistema")],-1)),l("div",ta,[l("button",{class:"flex bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:ue},[u(o(w),{icon:o(ie),class:"h-4 w-4 mr-1 text-white block lg:hidden"},null,8,["icon"]),e[16]||(e[16]=l("span",{class:"block lg:hidden"},"¬†Agregar empleado",-1)),u(o(w),{icon:o(ie),class:"h-4 w-4 mr-1 text-white hidden lg:block"},null,8,["icon"]),e[17]||(e[17]=l("span",{class:"hidden lg:block"},"¬†Agregar",-1))])])]),ee.value?(d(),m("div",oa,[u(o(w),{icon:o(K),class:"h-6 w-6 text-blue-600 animate-spin"},null,8,["icon"]),e[19]||(e[19]=l("span",{class:"text-blue-700 font-medium text-lg"},"Cargando empleados...",-1))])):(d(),Y(i,{key:1,value:se.value,dataKey:"id",paginator:!0,rows:ae.value,rowsPerPageOptions:be.value,rowsPerPage:ae.value,"onUpdate:rowsPerPage":e[2]||(e[2]=t=>ae.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} empleados",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:Ne,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:x(()=>[l("div",ra,[l("div",na,[l("div",ia,[e[20]||(e[20]=l("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[l("i",{class:"pi pi-filter text-blue-600 text-sm"}),l("span",null,"Filtros")],-1)),l("div",da,f(se.value.length)+" resultado"+f(se.value.length!==1?"s":""),1),l("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:de,disabled:A.value},[A.value?(d(),Y(o(w),{key:0,icon:o(K),class:"animate-spin h-3 w-3"},null,8,["icon"])):p("",!0),l("span",null,f(A.value?"Limpiando...":"Limpiar filtros"),1)],8,ua)]),l("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:de,disabled:A.value},[A.value?(d(),Y(o(w),{key:0,icon:o(K),class:"animate-spin h-3 w-3"},null,8,["icon"])):p("",!0),l("span",null,f(A.value?"Limpiando...":"Limpiar filtros"),1)],8,ca)]),l("div",ma,[l("div",va,[u(o(w),{icon:o(Je),class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"},null,8,["icon"]),u(r,{modelValue:Z.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=t=>Z.value.global.value=t),placeholder:"Buscar empleados...",class:"w-full h-9 text-sm rounded-md pl-10",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),l("p",fa,[u(o(w),{icon:o(pe),class:"h-3 w-3 text-yellow-500"},null,8,["icon"]),e[21]||(e[21]=E(" Haz clic en cualquier fila para ver los detalles del empleado. "))])])])]),empty:x(()=>[l("div",Aa,[l("div",Va,[u(o(w),{icon:o(pe),class:"h-16 w-16 text-gray-400"},null,8,["icon"])]),e[27]||(e[27]=l("h3",{class:"text-xl font-semibold text-gray-700 mb-3"},"NO HAY EMPLEADOS REGISTRADOS",-1)),e[28]||(e[28]=l("p",{class:"text-gray-500 max-w-md mx-auto mb-6"},' Los empleados aparecer√°n aqu√≠ cuando se registren en el sistema. Puedes agregar un nuevo empleado haciendo clic en el bot√≥n "Agregar". ',-1)),l("button",{class:"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-2",onClick:ue},[u(o(w),{icon:o(ie),class:"h-5 w-5"},null,8,["icon"]),e[26]||(e[26]=l("span",null,"Agregar primer empleado",-1))])])]),default:x(()=>[u(n,{field:"nombre",header:"Nombre",sortable:"",class:"w-28"},{body:x(t=>[l("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"150px","text-overflow":"ellipsis","white-space":"nowrap"},title:t.data.nombre},f(t.data.nombre),9,pa)]),_:1}),u(n,{field:"email",header:"Email",class:"w-28 hidden md:table-cell"},{body:x(t=>[l("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"150px","text-overflow":"ellipsis","white-space":"nowrap"},title:t.data.email},f(t.data.email),9,ga)]),_:1}),u(n,{field:"cargo",header:"Cargo",class:"w-32 hidden sm:table-cell"},{body:x(t=>[l("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"120px","text-overflow":"ellipsis","white-space":"nowrap"},title:t.data.cargo},f(t.data.cargo),9,ba)]),_:1}),u(n,{field:"telefono",header:"Tel√©fono",class:"w-16 hidden lg:table-cell"},{body:x(t=>[l("div",wa,f(t.data.telefono),1)]),_:1}),u(n,{exportable:!1,class:"w-52 min-w-36"},{header:x(()=>e[22]||(e[22]=[l("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:x(t=>[l("div",ya,[Array.isArray(t.data.roles)&&t.data.roles.includes("Administrador")?(d(),m("button",{key:0,type:"button",class:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-60",disabled:o(N),onClick:e[1]||(e[1]=Ge(k=>{o(N)||(N.value=!0,a.$inertia.visit(a.route("profile.edit"),{onFinish:()=>{N.value=!1}}))},["stop","prevent"]))},[u(o(w),{icon:o(N)?o(K):o(fe),class:V(["h-4 w-4",{"animate-spin":o(N)}])},null,8,["icon","class"]),o(N)?(d(),m("span",_a,"Cargando...")):(d(),m("span",xa,"Editar perfil"))],8,ha)):(d(),m(J,{key:1},[l("button",{class:"flex bg-green-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:k=>Ae(t.data)},[u(o(w),{icon:o(Oe),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[23]||(e[23]=l("span",{class:"hidden md:block text-white"},"M√°s",-1))],8,Ca),l("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:k=>he(t.data)},[u(o(w),{icon:o(fe),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[24]||(e[24]=l("span",{class:"hidden md:block text-white"},"Editar",-1))],8,ka),l("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:k=>_e(t.data)},[u(o(w),{icon:o(Ye),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[25]||(e[25]=l("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,Ea)],64))])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"])),u(h,{visible:P.value,"onUpdate:visible":e[9]||(e[9]=t=>P.value=t),header:I.value+" Empleado",modal:!0,style:je(le.value),closable:!1,draggable:!1},{footer:x(()=>[l("div",ls,[l("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:xe,disabled:_.value},[u(o(w),{icon:_.value?o(K):o(Xe),class:V(["h-5 text-white",{"animate-spin":_.value}])},null,8,["icon","class"]),_.value?(d(),m("span",rs,f(I.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(d(),m("span",os,f(I.value),1))],8,ts),l("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:ke,disabled:_.value},[u(o(w),{icon:o(Qe),class:"h-5"},null,8,["icon"]),e[35]||(e[35]=E("Cancelar "))],8,ns)])]),default:x(()=>[l("div",Pa,[l("div",Da,[l("div",La,[e[29]||(e[29]=l("label",{for:"nombre",class:"w-24 flex items-center gap-1"},[E(" Nombre: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),u(r,{modelValue:s.value.nombre,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.nombre=t),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:255,class:V([{"p-invalid":g.value&&(!s.value.nombre||M.value.length>0)||M.value.length>0},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"Nombre completo del empleado (solo letras, espacios y guiones)",onKeydown:Ue,onPaste:Se,onInput:Te},null,8,["modelValue","class"])]),M.value.length>0?(d(),m("div",Na,[(d(!0),m(J,null,ne(M.value,t=>(d(),m("small",{key:t,class:"text-red-500 block"},f(t),1))),128))])):p("",!0),s.value.nombre&&s.value.nombre.length>0&&M.value.length===0?(d(),m("small",Ta," Caracteres: "+f(s.value.nombre.length)+"/255 ",1)):p("",!0),s.value.nombre&&s.value.nombre.length>=230&&s.value.nombre.length<=255&&M.value.length===0?(d(),m("small",Ua," Caracteres restantes: "+f(255-s.value.nombre.length),1)):p("",!0),g.value&&!s.value.nombre?(d(),m("small",Sa," El nombre es obligatorio. ")):p("",!0)]),l("div",za,[l("div",Ra,[e[30]||(e[30]=l("label",{for:"email",class:"w-24 flex items-center gap-1"},[E(" Email: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),u(r,{modelValue:s.value.email,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.email=t),modelModifiers:{trim:!0},id:"email",name:"email",type:"email",maxlength:255,class:V([{"p-invalid":g.value&&(!s.value.email||!te(s.value.email))},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"correo@ejemplo.com"},null,8,["modelValue","class"])]),g.value&&!s.value.email?(d(),m("small",Ma," El email es obligatorio. ")):p("",!0),s.value.email&&!te(s.value.email)?(d(),m("small",$a," El formato del email no es v√°lido. ")):p("",!0)]),s.value.id?p("",!0):(d(),m("div",Fa,[l("div",Za,[e[31]||(e[31]=l("label",{for:"password",class:"w-24 flex items-center gap-1"},[E(" Contrase√±a: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),u(b,{modelValue:s.value.password,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.password=t),id:"password",name:"password",class:V([{"p-invalid":g.value&&oe.value.length>0},"flex-1"]),placeholder:"Contrase√±a segura",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),oe.value.length>0?(d(),m("div",Ia,[(d(!0),m(J,null,ne(oe.value,t=>(d(),m("small",{key:t,class:"block text-red-500 text-xs"},f(t),1))),128))])):p("",!0)])),s.value.id?p("",!0):(d(),m("div",Ba,[l("div",Ga,[e[32]||(e[32]=l("label",{for:"password_confirmation",class:"w-24 flex items-center gap-1"},[E(" Confirmar: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),u(b,{modelValue:s.value.password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.password_confirmation=t),id:"password_confirmation",name:"password_confirmation",class:V([{"p-invalid":g.value&&re.value},"flex-1"]),placeholder:"Repetir contrase√±a",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),re.value?(d(),m("small",ja,f(re.value),1)):p("",!0)])),l("div",qa,[l("div",Ka,[e[33]||(e[33]=l("label",{for:"cargo",class:"w-24 flex items-center gap-1"},[E(" Cargo: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),u(r,{modelValue:s.value.cargo,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.cargo=t),modelModifiers:{trim:!0},id:"cargo",name:"cargo",maxlength:25,class:V([{"p-invalid":g.value&&(!s.value.cargo||$.value.length>0)||$.value.length>0},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"GERENTE, VENDEDOR, etc. (solo letras y espacios)",onKeydown:Re,onPaste:Me,onInput:ze},null,8,["modelValue","class"])]),$.value.length>0?(d(),m("div",Ha,[(d(!0),m(J,null,ne($.value,t=>(d(),m("small",{key:t,class:"text-red-500 block"},f(t),1))),128))])):p("",!0),s.value.cargo&&s.value.cargo.length>0&&$.value.length===0?(d(),m("small",Wa," Caracteres: "+f(s.value.cargo.length)+"/25 ",1)):p("",!0),s.value.cargo&&s.value.cargo.length>=20&&s.value.cargo.length<=25&&$.value.length===0?(d(),m("small",Oa," Caracteres restantes: "+f(25-s.value.cargo.length),1)):p("",!0),g.value&&!s.value.cargo?(d(),m("small",Ya," El cargo es obligatorio. ")):p("",!0)]),l("div",Ja,[l("div",Xa,[e[34]||(e[34]=l("label",{for:"telefono",class:"w-24 flex items-center gap-1 mt-2"},[E(" Tel√©fono: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),l("div",Qa,[u(o(ea),{modelValue:s.value.telefono,"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.telefono=t),defaultCountry:"SV",preferredCountries:["SV","GT","HN","CR","NI","PA","BZ"],validCharactersOnly:!0,dropdownOptions:{showDialCodeInSelection:!0,showFlags:!0,showSearchBox:!0,showDialCodeInList:!0},inputOptions:{placeholder:"N√∫mero de tel√©fono"},mode:"international",class:"w-full border border-gray-300 rounded-lg",onValidate:we},null,8,["modelValue"])])]),y.value.mensaje?(d(),m("div",es,[l("small",{class:V(["text-xs flex items-center",y.value.isValid?"text-green-600":"text-red-600"])},[l("span",as,f(y.value.isValid?"‚úì":"‚ö†Ô∏è"),1),E(" "+f(y.value.mensaje),1)],2)])):p("",!0),g.value&&!s.value.telefono?(d(),m("small",ss," El tel√©fono es obligatorio. ")):p("",!0)])])]),_:1},8,["visible","header","style"]),u(ge,{visible:R.value,"onUpdate:visible":e[10]||(e[10]=t=>R.value=t),"delete-visible":z.value,"onUpdate:deleteVisible":e[11]||(e[11]=t=>z.value=t),"unsaved-changes-visible":F.value,"onUpdate:unsavedChangesVisible":e[12]||(e[12]=t=>F.value=t),"password-visible":W.value,"onUpdate:passwordVisible":e[13]||(e[13]=t=>W.value=t),empleado:C.value||s.value,"dialog-style":le.value,"is-deleting":Q.value,"is-loading":_.value,submitted:g.value,onChangePassword:Ve,onSendCredentials:Le,onViewDetails:De,onDeleteEmpleado:Ce,onCancelDelete:e[14]||(e[14]=()=>z.value=!1),onCloseWithoutSaving:ce,onContinueEditing:Ee,onUpdatePassword:Pe},null,8,["visible","delete-visible","unsaved-changes-visible","password-visible","empleado","dialog-style","is-deleting","is-loading","submitted"])]),u(ge,{"details-visible":O.value,"onUpdate:detailsVisible":e[15]||(e[15]=t=>O.value=t),usuario:X.value,empleado:C.value,"dialog-style":le.value},null,8,["details-visible","usuario","empleado","dialog-style"])])]),_:1})}}};export{gs as default};
