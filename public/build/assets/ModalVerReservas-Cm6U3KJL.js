import{r as k,i as N,y as m,p as F,o as d,w as o,b as t,c,a as n,t as i,h,f as _,n as I}from"./app-WKwrJkJC.js";const z={class:"p-6"},E={class:"flex flex-col md:flex-row gap-4 mb-6"},q={class:"flex-1"},L={class:"flex-1"},U={key:0,class:"p-8 text-center"},$={key:1,class:"p-8 text-center text-gray-500"},A={key:2,class:"overflow-hidden rounded-lg border border-gray-200"},M={class:"flex flex-col"},O={class:"font-medium"},j={class:"text-xs text-gray-500"},H={class:"flex flex-col text-xs"},P={key:0},W={key:1},G={key:0,class:"flex gap-1"},J=["onClick"],K=["onClick"],X={__name:"ModalVerReservas",props:{visible:{type:Boolean,default:!1},reservas:{type:Array,default:()=>[]},titulo:{type:String,default:"Reservas"},loading:{type:Boolean,default:!1}},emits:["update:visible","confirmarReserva","rechazarReserva"],setup(y,{emit:D}){const R=y,S=D,u=k(""),p=k(null),v=N(()=>{let s=R.reservas||[];if(u.value){const e=u.value.toLowerCase();s=s.filter(r=>{var x,l,g,f;return((l=(x=r.cliente)==null?void 0:x.nombres)==null?void 0:l.toLowerCase().includes(e))||((f=(g=r.cliente)==null?void 0:g.correo)==null?void 0:f.toLowerCase().includes(e))})}if(p.value){const e=new Date(p.value).toISOString().split("T")[0];s=s.filter(r=>r.fecha_reserva?new Date(r.fecha_reserva).toISOString().split("T")[0]===e:!1)}return s.sort((e,r)=>new Date(r.fecha_reserva)-new Date(e.fecha_reserva))}),w=()=>{u.value="",p.value=null,S("update:visible",!1)},V=s=>s?new Date(s).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",B=s=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD"}).format(s||0),T=s=>({Pendiente:"bg-yellow-100 text-yellow-800",Confirmado:"bg-green-100 text-green-800",Rechazada:"bg-red-100 text-red-800",Reprogramada:"bg-blue-100 text-blue-800"})[s]||"bg-gray-100 text-gray-800";return(s,e)=>{const r=m("InputText"),x=m("DatePicker"),l=m("Column"),g=m("DataTable"),f=m("Dialog");return d(),F(f,{visible:y.visible,"onUpdate:visible":w,modal:"",header:y.titulo,style:{width:"95vw",maxWidth:"1200px"},draggable:!1,position:"center",pt:{root:{class:"rounded-lg border border-gray-200"},header:{class:"bg-red-50 border-b px-6 py-4"},content:{class:"p-0"},footer:{class:"border-t px-6 py-4 bg-gray-50"}}},{footer:o(()=>[t("div",{class:"flex justify-end"},[t("button",{class:"bg-gray-500 border border-gray-500 text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 px-4 py-2 flex items-center gap-2",onClick:w},e[8]||(e[8]=[t("i",{class:"pi pi-times"},null,-1),h(" Cerrar ")]))])]),default:o(()=>[t("div",z,[t("div",E,[t("div",q,[e[2]||(e[2]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Buscar por cliente ",-1)),n(r,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),placeholder:"Nombre o correo del cliente...",class:"w-full"},null,8,["modelValue"])]),t("div",L,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Buscar por fecha ",-1)),n(x,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),placeholder:"Seleccionar fecha...",dateFormat:"dd/mm/yy",class:"w-full",showIcon:""},null,8,["modelValue"])])]),y.loading?(d(),c("div",U,e[4]||(e[4]=[t("div",{class:"inline-flex items-center"},[t("i",{class:"pi pi-spin pi-spinner text-2xl text-red-600 mr-3"}),t("span",{class:"text-gray-600"},"Cargando reservas...")],-1)]))):v.value.length===0?(d(),c("div",$,e[5]||(e[5]=[t("i",{class:"pi pi-inbox text-4xl text-gray-300 block mb-2"},null,-1),t("span",null,"No hay reservas que coincidan con los filtros",-1)]))):(d(),c("div",A,[n(g,{value:v.value,rows:10,paginator:v.value.length>10,rowsPerPageOptions:[10,20,30],scrollable:"",scrollHeight:"400px",class:"border-0",pt:{table:{class:"w-full"},header:{class:"bg-gray-50"},tbody:{class:"divide-y divide-gray-200"}}},{default:o(()=>[n(l,{header:"Cliente",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm text-gray-900"}}},{body:o(a=>{var b,C;return[t("div",M,[t("span",O,i(((b=a.data.cliente)==null?void 0:b.nombres)||"-"),1),t("span",j,i(((C=a.data.cliente)==null?void 0:C.correo)||"-"),1)])]}),_:1}),n(l,{header:"Fecha",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm text-gray-900"}}},{body:o(a=>[h(i(V(a.data.fecha_reserva)),1)]),_:1}),n(l,{header:"Cupos",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm text-gray-900"}}},{body:o(a=>[t("div",H,[a.data.cupos_adultos?(d(),c("span",P," Adultos: "+i(a.data.cupos_adultos),1)):_("",!0),a.data.cupos_menores?(d(),c("span",W," Menores: "+i(a.data.cupos_menores),1)):_("",!0)])]),_:1}),n(l,{header:"Precio Total",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm font-medium text-gray-900"}}},{body:o(a=>[h(i(B(a.data.precio_total)),1)]),_:1}),n(l,{header:"Estado",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm text-gray-900"}}},{body:o(a=>[t("span",{class:I(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",T(a.data.estado)])},i(a.data.estado),3)]),_:1}),n(l,{header:"Acciones",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm text-gray-900"}}},{body:o(a=>[a.data.estado==="Pendiente"?(d(),c("div",G,[t("button",{class:"bg-green-500 border border-green-500 text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 p-2",onClick:b=>s.$emit("confirmarReserva",a.data),title:"Confirmar"},e[6]||(e[6]=[t("i",{class:"pi pi-check"},null,-1)]),8,J),t("button",{class:"bg-red-500 border border-red-500 text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 p-2",onClick:b=>s.$emit("rechazarReserva",a.data),title:"Rechazar"},e[7]||(e[7]=[t("i",{class:"pi pi-times"},null,-1)]),8,K)])):_("",!0)]),_:1})]),_:1},8,["value","paginator"])]))])]),_:1},8,["visible","header"])}}};export{X as default};
