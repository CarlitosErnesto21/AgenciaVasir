import{A as Ue}from"./AuthenticatedLayout-DP4XRzmf.js";import{N as E,r as m,E as T,w as ze,n as G,o as Se,k as j,h as Q,d as i,x as h,p as u,e as l,$ as v,a0 as Re,t as f,j as p,A as $e,c as d,q as k,y as U,F as ee,l as ae}from"./vendor-CaDzpwPW.js";import{z as Me,F as Be,a as Fe,A as V}from"./ui-BjYE_i4I.js";import{b as Ze,l as Ie,c as Ge,d as je,f as se,e as qe,g as Ke}from"./index-DIJG4gfJ.js";import{z as We}from"./vue-tel-input-AlIeehSu.js";import He from"./Modales-Dw4W_5Nr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Je={class:"container mx-auto px-4 py-6"},Oe={class:"bg-white rounded-lg shadow-md"},Ye={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},Xe={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},Qe={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},ea={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},aa={class:"flex items-center gap-3"},sa={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},la=["disabled"],ta=["disabled"],oa={class:"space-y-3"},ra=["title"],na=["title"],ia=["title"],da={class:"text-sm font-medium leading-relaxed"},ua={class:"flex gap-2 justify-center items-center"},ca=["onClick"],ma=["onClick"],va=["onClick"],fa={class:"space-y-4"},pa={class:"w-full flex flex-col"},ga={class:"flex items-center gap-4"},wa={key:0,class:"ml-28 mt-1"},ba={key:1,class:"text-gray-500 ml-28 mt-1"},ya={key:2,class:"text-orange-500 ml-28 mt-1"},ha={key:3,class:"text-red-500 ml-28 mt-1"},xa={class:"w-full flex flex-col"},_a={class:"flex items-center gap-4"},Ca={key:0,class:"text-red-500 ml-28"},Ea={key:1,class:"text-red-500 ml-28"},ka={key:0,class:"w-full flex flex-col"},Va={class:"flex items-center gap-4"},Aa={key:0,class:"ml-28 mt-1"},Pa={key:1,class:"w-full flex flex-col"},Da={class:"flex items-center gap-4"},La={key:0,class:"text-red-500 ml-28 mt-1"},Na={class:"w-full flex flex-col"},Ta={class:"flex items-center gap-4"},Ua={key:0,class:"ml-28 mt-1"},za={key:1,class:"text-gray-500 ml-28 mt-1"},Sa={key:2,class:"text-orange-500 ml-28 mt-1"},Ra={key:3,class:"text-red-500 ml-28 mt-1"},$a={class:"w-full flex flex-col"},Ma={class:"flex items-start gap-4"},Ba={class:"flex-1"},Fa={key:0,class:"ml-28 mt-1"},Za={class:"mr-1"},Ia={key:1,class:"text-red-500 ml-28"},Ga={class:"flex justify-center gap-4 w-full mt-6"},ja=["disabled"],qa={key:0},Ka={key:1},Wa=["disabled"],M="/api/empleados",ss={__name:"GestionUsuarios",setup(Ha){E.defaults.withCredentials=!0;const n=Me(),A=m([]),s=m({id:null,nombre:"",email:"",password:"",password_confirmation:"",cargo:"",telefono:""}),P=m(!1),z=m(!1),q=m(!1),B=m(!1),g=m(!1),D=m(!1),L=m(null),S=m(!1),N=m(null),K=m(!1),_=m(!1),x=m(!1),le=m(!0),F=m({global:{value:null,matchMode:Be.CONTAINS}}),W=m(10),de=m([5,10,20,50]),Z=m("Guardar"),H=T(()=>{let a=A.value;if(F.value.global.value){const e=F.value.global.value.toLowerCase();a=a.filter(o=>o.nombre.toLowerCase().includes(e)||o.email.toLowerCase().includes(e)||o.cargo.toLowerCase().includes(e)||o.telefono.toLowerCase().includes(e))}return a}),w=m({isValid:!1,country:null,formattedNumber:"",mensaje:""}),ue=a=>{try{a&&typeof a=="object"&&(w.value.isValid=a.valid===!0,w.value.country={name:a.country,code:a.countryCode},w.value.formattedNumber=a.formatted||"",a.valid===!0&&a.formatted&&(s.value.telefono=a.formatted),s.value.telefono&&a.valid===!1?w.value.mensaje="‚úó N√∫mero de tel√©fono inv√°lido para "+a.country:a.valid===!0?w.value.mensaje="‚úì N√∫mero v√°lido para "+a.country:w.value.mensaje="")}catch{w.value.mensaje="Error en validaci√≥n"}};ze([s],()=>{L.value&&P.value&&G(()=>{const a={...s.value};delete a.password,delete a.password_confirmation;const e={...L.value};delete e.password,delete e.password_confirmation;const o=JSON.stringify(a)!==JSON.stringify(e),r=!L.value.id,c=s.value.nombre||s.value.email||s.value.cargo||s.value.telefono;D.value=o||r&&c})},{deep:!0,flush:"post"});function I(){s.value={id:null,nombre:"",email:"",password:"",password_confirmation:"",cargo:"",telefono:""},w.value={isValid:!1,country:null,formattedNumber:"",mensaje:""},g.value=!1}Se(()=>{ce()});const J=async()=>{try{const a=await E.get(M);A.value=(a.data.data||a.data||[]).sort((e,o)=>{const r=new Date(e.created_at);return new Date(o.created_at)-r})}catch{n.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los empleados.",life:4e3})}},ce=async()=>{le.value=!0,n.add({severity:"info",summary:"Cargando empleados...",life:2e3});try{const a=await E.get(M);A.value=(a.data.data||a.data||[]).sort((e,o)=>{const r=new Date(e.created_at);return new Date(o.created_at)-r}),n.add({severity:"success",summary:"Empleados cargados",life:2e3})}catch{n.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los empleados.",life:4e3})}finally{le.value=!1}},te=async()=>{_.value=!0;try{await new Promise(a=>setTimeout(a,300)),F.value.global.value=null,n.add({severity:"success",summary:"Filtros limpiados",life:2e3})}finally{_.value=!1}},me=()=>{I(),Z.value="Guardar",g.value=!1,P.value=!0,G(()=>{L.value={...s.value},D.value=!1})},ve=a=>{I(),g.value=!1,s.value={...a,nombre:a.nombre||a.name,cargo:a.cargo?a.cargo.toUpperCase():a.cargo,password:"",password_confirmation:""},D.value=!1,Z.value="Actualizar",P.value=!0,G(()=>{L.value={...s.value},D.value=!1})},fe=async()=>{var e;if(g.value=!0,!s.value.nombre||s.value.nombre.length<3||s.value.nombre.length>255){n.add({severity:"warn",summary:"Nombre inv√°lido",detail:"El nombre debe tener entre 3 y 255 caracteres.",life:4e3});return}if(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/.test(s.value.nombre)){n.add({severity:"warn",summary:"Nombre inv√°lido",detail:"El nombre solo puede contener letras y espacios.",life:4e3});return}if(ie(s.value.nombre)){n.add({severity:"warn",summary:"Nombre duplicado",detail:"Ya existe un empleado con este nombre.",life:4e3});return}if(!s.value.email||!O(s.value.email)){n.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que el correo electr√≥nico sea v√°lido.",life:4e3});return}if(!s.value.id){if(!s.value.password||s.value.password.length<8||!/[A-Z]/.test(s.value.password)||!/[0-9]/.test(s.value.password)||/[\s.]/.test(s.value.password)){n.add({severity:"warn",summary:"Contrase√±a inv√°lida",detail:"La contrase√±a debe tener al menos 8 caracteres, incluir una may√∫scula, un n√∫mero y no contener espacios ni puntos.",life:4e3});return}if(s.value.password!==s.value.password_confirmation){n.add({severity:"warn",summary:"Contrase√±as no coinciden",detail:"Por favor verifica que las contrase√±as coincidan.",life:4e3});return}}if(!s.value.cargo||s.value.cargo.length<2){n.add({severity:"warn",summary:"Cargo inv√°lido",detail:"El cargo debe tener al menos 2 caracteres.",life:4e3});return}if(/[^A-Z\s]/.test(s.value.cargo)){n.add({severity:"warn",summary:"Cargo inv√°lido",detail:"El cargo solo puede contener letras y espacios (sin tildes ni n√∫meros).",life:4e3});return}if(!s.value.telefono){n.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor completa todos los campos obligatorios.",life:4e3});return}if(!w.value.isValid){n.add({severity:"warn",summary:"Tel√©fono inv√°lido",detail:"Por favor ingresa un n√∫mero de tel√©fono v√°lido.",life:4e3});return}const a=await Te(s.value.telefono);if(!a.available){n.add({severity:"warn",summary:"Tel√©fono no disponible",detail:a.message,life:4e3});return}try{x.value=!0;const o={name:s.value.nombre,email:s.value.email,cargo:s.value.cargo,telefono:s.value.telefono};s.value.id||(o.password=s.value.password,o.password_confirmation=s.value.password_confirmation);let r;s.value.id?(r=await E.put(`${M}/${s.value.id}`,o),n.add({severity:"success",summary:"¬°√âxito!",detail:"El empleado ha sido actualizado correctamente.",life:5e3})):(r=await E.post(M,o),n.add({severity:"success",summary:"¬°√âxito!",detail:"El empleado ha sido creado correctamente.",life:5e3})),await J(),P.value=!1,D.value=!1,L.value=null,I()}catch(o){if(((e=o.response)==null?void 0:e.status)===422){const r=o.response.data.errors||{};let c="Por favor revisa los campos e intenta nuevamente.";r.telefono?c=r.telefono[0]:r.email?c=r.email[0]:r.name&&(c=r.name[0]),n.add({severity:"warn",summary:"Error de validaci√≥n",detail:c,life:6e3})}else n.add({severity:"error",summary:"Error",detail:"Ocurri√≥ un error al procesar la solicitud.",life:6e3})}finally{x.value=!1}},pe=a=>{N.value={...a},z.value=!0},ge=async()=>{var a,e,o,r,c;K.value=!0;try{await E.delete(`${M}/${N.value.id}`),await J(),z.value=!1,n.add({severity:"success",summary:"¬°Eliminado!",detail:"El empleado ha sido eliminado correctamente.",life:5e3})}catch(y){if(z.value=!1,((a=y.response)==null?void 0:a.status)===422){const b=y.response.data;let t=b.error||"El empleado est√° siendo utilizado en el sistema.";b.details&&Array.isArray(b.details)&&(t+=`

üìã Detalles:
‚Ä¢ `+b.details.join(`
‚Ä¢ `)),n.add({severity:"warn",summary:"‚ùå No se puede eliminar",detail:t,life:1e4})}else if(((e=y.response)==null?void 0:e.status)===404)n.add({severity:"error",summary:"Empleado no encontrado",detail:"El empleado que intentas eliminar no existe o ya fue eliminado.",life:5e3}),await J();else if(((o=y.response)==null?void 0:o.status)===500)n.add({severity:"error",summary:"Error del servidor",detail:"Ocurri√≥ un error interno. Por favor, contacta al administrador.",life:6e3});else{const b=((c=(r=y.response)==null?void 0:r.data)==null?void 0:c.error)||y.message||"Error desconocido";n.add({severity:"error",summary:"Error",detail:`No se pudo eliminar el empleado: ${b}`,life:6e3})}}finally{K.value=!1}},we=()=>{D.value?B.value=!0:oe()},oe=()=>{P.value=!1,B.value=!1,D.value=!1,L.value=null,I()},be=()=>{B.value=!1},ye=a=>{N.value=a,S.value=!0},he=a=>{S.value=!1,N.value=a,s.value={id:a.id,nombre:a.nombre,email:a.email,cargo:a.cargo?a.cargo.toUpperCase():a.cargo,telefono:a.telefono,password:"",password_confirmation:""},q.value=!0},xe=async a=>{var e;if(g.value=!0,!a.password||a.password.length<8||!/[A-Z]/.test(a.password)||!/[0-9]/.test(a.password)||/[\s.]/.test(a.password)){n.add({severity:"warn",summary:"Contrase√±a inv√°lida",detail:"La contrase√±a debe tener al menos 8 caracteres, incluir una may√∫scula, un n√∫mero y no contener espacios ni puntos.",life:4e3});return}if(a.password!==a.password_confirmation){n.add({severity:"warn",summary:"Contrase√±as no coinciden",detail:"Por favor verifica que las contrase√±as coincidan.",life:4e3});return}try{x.value=!0,await E.put(`${M}/${N.value.id}/password`,{password:a.password,password_confirmation:a.password_confirmation}),q.value=!1,g.value=!1,I(),n.add({severity:"success",summary:"¬°√âxito!",detail:"La contrase√±a ha sido actualizada correctamente.",life:5e3})}catch(o){if(((e=o.response)==null?void 0:e.status)===422){const r=o.response.data.errors||{};let c="Por favor revisa los campos e intenta nuevamente.";r.password&&(c=r.password[0]),n.add({severity:"warn",summary:"Error de validaci√≥n",detail:c,life:6e3})}else n.add({severity:"error",summary:"Error",detail:"Ocurri√≥ un error al actualizar la contrase√±a.",life:6e3})}finally{x.value=!1}},_e=a=>{n.add({severity:"info",summary:"Ver Detalles",detail:`Funcionalidad de visualizar detalles del empleado "${a.nombre}" en desarrollo.`,life:5e3}),S.value=!1},Ce=a=>{n.add({severity:"info",summary:"Enviar Credenciales",detail:`Funcionalidad de enviar credenciales al empleado "${a.nombre}" en desarrollo.`,life:5e3}),S.value=!1},Ee=a=>{a.originalEvent.target.closest("button")||(N.value=a.data)},re=m(typeof window<"u"?window.innerWidth:1024),ne=T(()=>re.value<640?{width:"95vw",maxWidth:"380px"}:re.value<768?{width:"400px"}:{width:"450px"}),O=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),ke=()=>{s.value.nombre&&(s.value.nombre=s.value.nombre.replace(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/g,""),s.value.nombre.length>255&&(s.value.nombre=s.value.nombre.substring(0,255)))},Ve=a=>{const e=a.key;if(a.ctrlKey||a.metaKey||["Backspace","Delete","Tab","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e))return;/^[a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]$/.test(e)||a.preventDefault()},Ae=a=>{a.preventDefault();const o=(a.clipboardData||window.clipboardData).getData("text").replace(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/g,""),r=a.target,c=r.selectionStart,y=r.selectionEnd,b=s.value.nombre||"",t=b.substring(0,c)+o+b.substring(y);s.value.nombre=t.substring(0,255),G(()=>{const C=c+o.length;r.setSelectionRange(C,C)})},Pe=()=>{s.value.cargo&&(s.value.cargo=s.value.cargo.toUpperCase(),s.value.cargo=s.value.cargo.replace(/[^A-Z\s]/g,""),s.value.cargo.length>25&&(s.value.cargo=s.value.cargo.substring(0,25)))},De=a=>{const e=a.key;if(a.ctrlKey||a.metaKey||["Backspace","Delete","Tab","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e))return;/^[a-zA-Z\s]$/.test(e)||a.preventDefault()},Le=a=>{a.preventDefault();const o=(a.clipboardData||window.clipboardData).getData("text").toUpperCase().replace(/[^A-Z\s]/g,""),r=a.target,c=r.selectionStart,y=r.selectionEnd,b=s.value.cargo||"",t=b.substring(0,c)+o+b.substring(y);s.value.cargo=t.substring(0,25),G(()=>{const C=c+o.length;r.setSelectionRange(C,C)})},ie=a=>!a||!A.value?!1:A.value.some(e=>e.id!==s.value.id&&e.nombre.toLowerCase().trim()===a.toLowerCase().trim()),Ne=a=>!a||!A.value?!1:A.value.some(e=>e.id!==s.value.id&&e.telefono===a),Te=async a=>{try{const e={telefono:a};return s.value.id&&(e.empleado_id=s.value.id),(await E.get("/api/empleados/check-telefono",{params:e})).data}catch(e){return console.error("Error verificando tel√©fono:",e),{available:!1,message:"Error al verificar la disponibilidad del tel√©fono"}}},R=T(()=>{const a=[],e=s.value.nombre||"";return e.length>0&&e.length<3&&a.push("El nombre debe tener al menos 3 caracteres."),e.length>0&&/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë√º√ú\s\-]/.test(e)&&a.push("El nombre solo puede contener letras, espacios y guiones."),e.length>0&&ie(e)&&a.push("Ya existe un empleado con este nombre."),a}),$=T(()=>{const a=[],e=s.value.cargo||"";return e.length>0&&e.length<2&&a.push("El cargo debe tener al menos 2 caracteres."),e.length>0&&/[^A-Z\s]/.test(e)&&a.push("El cargo solo puede contener letras y espacios (sin tildes ni n√∫meros)."),a}),Y=T(()=>{const a=[],e=s.value.password||"";return e.length>0&&e.length<8&&a.push("La contrase√±a debe tener al menos 8 caracteres."),e.length>0&&!/[A-Z]/.test(e)&&a.push("La contrase√±a debe incluir al menos una letra may√∫scula."),e.length>0&&!/[0-9]/.test(e)&&a.push("La contrase√±a debe incluir al menos un n√∫mero."),e.length>0&&/[\s.]/.test(e)&&a.push("La contrase√±a no puede contener espacios ni puntos."),a}),X=T(()=>s.value.password&&s.value.password_confirmation&&s.value.password!==s.value.password_confirmation?"Las contrase√±as no coinciden.":"");return T(()=>{const a=[],e=s.value.telefono||"";return e.length>0&&!w.value.isValid&&a.push("El formato del tel√©fono no es v√°lido."),e.length>0&&Ne(e)&&a.push("Este n√∫mero de tel√©fono ya est√° en uso por otro empleado."),a}),(a,e)=>{const o=j("InputText"),r=j("Column"),c=j("DataTable"),y=j("Password"),b=j("Dialog");return i(),Q(Ue,null,{default:h(()=>[u(v(Re),{title:"Gesti√≥n de Usuarios"}),u(v(Fe),{class:"z-[9999]"}),l("div",Je,[e[28]||(e[28]=l("div",{class:"mb-6"},[l("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Gesti√≥n de Usuarios Internos"),l("p",{class:"text-gray-600"},"Gesti√≥n completa de empleados del sistema")],-1)),l("div",Oe,[l("div",Ye,[e[15]||(e[15]=l("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Lista de Empleados",-1)),l("div",Xe,[l("button",{class:"bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:me},[u(v(V),{icon:v(Ze),class:"h-4 w-4 mr-1 text-white"},null,8,["icon"]),e[14]||(e[14]=l("span",null,"¬†Agregar empleado",-1))])])]),u(c,{value:H.value,dataKey:"id",paginator:!0,rows:W.value,rowsPerPageOptions:de.value,rowsPerPage:W.value,"onUpdate:rowsPerPage":e[1]||(e[1]=t=>W.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} empleados",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:Ee,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:h(()=>[l("div",Qe,[l("div",ea,[l("div",aa,[e[16]||(e[16]=l("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[l("i",{class:"pi pi-filter text-blue-600 text-sm"}),l("span",null,"Filtros")],-1)),l("div",sa,f(H.value.length)+" resultado"+f(H.value.length!==1?"s":""),1),l("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:te,disabled:_.value},[_.value?(i(),Q(v(V),{key:0,icon:v(se),class:"animate-spin h-3 w-3"},null,8,["icon"])):p("",!0),l("span",null,f(_.value?"Limpiando...":"Limpiar filtros"),1)],8,la)]),l("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:te,disabled:_.value},[_.value?(i(),Q(v(V),{key:0,icon:v(se),class:"animate-spin h-3 w-3"},null,8,["icon"])):p("",!0),l("span",null,f(_.value?"Limpiando...":"Limpiar filtros"),1)],8,ta)]),l("div",oa,[l("div",null,[u(o,{modelValue:F.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=t=>F.value.global.value=t),placeholder:"üîç Buscar empleados...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])])])])]),default:h(()=>[u(r,{field:"nombre",header:"Nombre",sortable:"",class:"w-28"},{body:h(t=>[l("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"150px","text-overflow":"ellipsis","white-space":"nowrap"},title:t.data.nombre},f(t.data.nombre),9,ra)]),_:1}),u(r,{field:"email",header:"Email",class:"w-28 hidden md:table-cell"},{body:h(t=>[l("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"200px","text-overflow":"ellipsis","white-space":"nowrap"},title:t.data.email},f(t.data.email),9,na)]),_:1}),u(r,{field:"cargo",header:"Cargo",class:"w-32 hidden sm:table-cell"},{body:h(t=>[l("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"120px","text-overflow":"ellipsis","white-space":"nowrap"},title:t.data.cargo},f(t.data.cargo),9,ia)]),_:1}),u(r,{field:"telefono",header:"Tel√©fono",class:"w-16 hidden lg:table-cell"},{body:h(t=>[l("div",da,f(t.data.telefono),1)]),_:1}),u(r,{exportable:!1,class:"w-52 min-w-36"},{header:h(()=>e[17]||(e[17]=[l("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:h(t=>[l("div",ua,[l("button",{class:"flex bg-green-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:C=>ye(t.data)},[u(v(V),{icon:v(Ie),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[18]||(e[18]=l("span",{class:"hidden md:block text-white"},"M√°s",-1))],8,ca),l("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:C=>ve(t.data)},[u(v(V),{icon:v(Ge),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[19]||(e[19]=l("span",{class:"hidden md:block text-white"},"Editar",-1))],8,ma),l("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:C=>pe(t.data)},[u(v(V),{icon:v(je),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[20]||(e[20]=l("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,va)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"]),u(b,{visible:P.value,"onUpdate:visible":e[8]||(e[8]=t=>P.value=t),header:Z.value+" Empleado",modal:!0,style:$e(ne.value),closable:!1,draggable:!1},{footer:h(()=>[l("div",Ga,[l("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:fe,disabled:x.value},[u(v(V),{icon:x.value?v(se):v(qe),class:U(["h-5 text-white",{"animate-spin":x.value}])},null,8,["icon","class"]),x.value?(i(),d("span",Ka,f(Z.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(i(),d("span",qa,f(Z.value),1))],8,ja),l("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:we,disabled:x.value},[u(v(V),{icon:v(Ke),class:"h-5"},null,8,["icon"]),e[27]||(e[27]=k("Cancelar "))],8,Wa)])]),default:h(()=>[l("div",fa,[l("div",pa,[l("div",ga,[e[21]||(e[21]=l("label",{for:"nombre",class:"w-24 flex items-center gap-1"},[k(" Nombre: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),u(o,{modelValue:s.value.nombre,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.nombre=t),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:255,class:U([{"p-invalid":g.value&&(!s.value.nombre||R.value.length>0)||R.value.length>0},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"Nombre completo del empleado (solo letras, espacios y guiones)",onKeydown:Ve,onPaste:Ae,onInput:ke},null,8,["modelValue","class"])]),R.value.length>0?(i(),d("div",wa,[(i(!0),d(ee,null,ae(R.value,t=>(i(),d("small",{key:t,class:"text-red-500 block"},f(t),1))),128))])):p("",!0),s.value.nombre&&s.value.nombre.length>0&&R.value.length===0?(i(),d("small",ba," Caracteres: "+f(s.value.nombre.length)+"/255 ",1)):p("",!0),s.value.nombre&&s.value.nombre.length>=230&&s.value.nombre.length<=255&&R.value.length===0?(i(),d("small",ya," Caracteres restantes: "+f(255-s.value.nombre.length),1)):p("",!0),g.value&&!s.value.nombre?(i(),d("small",ha," El nombre es obligatorio. ")):p("",!0)]),l("div",xa,[l("div",_a,[e[22]||(e[22]=l("label",{for:"email",class:"w-24 flex items-center gap-1"},[k(" Email: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),u(o,{modelValue:s.value.email,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.email=t),modelModifiers:{trim:!0},id:"email",name:"email",type:"email",maxlength:255,class:U([{"p-invalid":g.value&&(!s.value.email||!O(s.value.email))},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"correo@ejemplo.com"},null,8,["modelValue","class"])]),g.value&&!s.value.email?(i(),d("small",Ca," El email es obligatorio. ")):p("",!0),s.value.email&&!O(s.value.email)?(i(),d("small",Ea," El formato del email no es v√°lido. ")):p("",!0)]),s.value.id?p("",!0):(i(),d("div",ka,[l("div",Va,[e[23]||(e[23]=l("label",{for:"password",class:"w-24 flex items-center gap-1"},[k(" Contrase√±a: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),u(y,{modelValue:s.value.password,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.password=t),id:"password",name:"password",class:U([{"p-invalid":g.value&&Y.value.length>0},"flex-1"]),placeholder:"Contrase√±a segura",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),Y.value.length>0?(i(),d("div",Aa,[(i(!0),d(ee,null,ae(Y.value,t=>(i(),d("small",{key:t,class:"block text-red-500 text-xs"},f(t),1))),128))])):p("",!0)])),s.value.id?p("",!0):(i(),d("div",Pa,[l("div",Da,[e[24]||(e[24]=l("label",{for:"password_confirmation",class:"w-24 flex items-center gap-1"},[k(" Confirmar: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),u(y,{modelValue:s.value.password_confirmation,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.password_confirmation=t),id:"password_confirmation",name:"password_confirmation",class:U([{"p-invalid":g.value&&X.value},"flex-1"]),placeholder:"Repetir contrase√±a",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),X.value?(i(),d("small",La,f(X.value),1)):p("",!0)])),l("div",Na,[l("div",Ta,[e[25]||(e[25]=l("label",{for:"cargo",class:"w-24 flex items-center gap-1"},[k(" Cargo: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),u(o,{modelValue:s.value.cargo,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.cargo=t),modelModifiers:{trim:!0},id:"cargo",name:"cargo",maxlength:25,class:U([{"p-invalid":g.value&&(!s.value.cargo||$.value.length>0)||$.value.length>0},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"GERENTE, VENDEDOR, etc. (solo letras y espacios)",onKeydown:De,onPaste:Le,onInput:Pe},null,8,["modelValue","class"])]),$.value.length>0?(i(),d("div",Ua,[(i(!0),d(ee,null,ae($.value,t=>(i(),d("small",{key:t,class:"text-red-500 block"},f(t),1))),128))])):p("",!0),s.value.cargo&&s.value.cargo.length>0&&$.value.length===0?(i(),d("small",za," Caracteres: "+f(s.value.cargo.length)+"/25 ",1)):p("",!0),s.value.cargo&&s.value.cargo.length>=20&&s.value.cargo.length<=25&&$.value.length===0?(i(),d("small",Sa," Caracteres restantes: "+f(25-s.value.cargo.length),1)):p("",!0),g.value&&!s.value.cargo?(i(),d("small",Ra," El cargo es obligatorio. ")):p("",!0)]),l("div",$a,[l("div",Ma,[e[26]||(e[26]=l("label",{for:"telefono",class:"w-24 flex items-center gap-1 mt-2"},[k(" Tel√©fono: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),l("div",Ba,[u(v(We),{modelValue:s.value.telefono,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.telefono=t),defaultCountry:"SV",preferredCountries:["SV","GT","HN","CR","NI","PA","BZ"],validCharactersOnly:!0,dropdownOptions:{showDialCodeInSelection:!0,showFlags:!0,showSearchBox:!0,showDialCodeInList:!0},inputOptions:{placeholder:"N√∫mero de tel√©fono"},mode:"international",class:"w-full border border-gray-300 rounded-lg",onValidate:ue},null,8,["modelValue"])])]),w.value.mensaje?(i(),d("div",Fa,[l("small",{class:U(["text-xs flex items-center",w.value.isValid?"text-green-600":"text-red-600"])},[l("span",Za,f(w.value.isValid?"‚úì":"‚ö†Ô∏è"),1),k(" "+f(w.value.mensaje),1)],2)])):p("",!0),g.value&&!s.value.telefono?(i(),d("small",Ia," El tel√©fono es obligatorio. ")):p("",!0)])])]),_:1},8,["visible","header","style"]),u(He,{visible:S.value,"onUpdate:visible":e[9]||(e[9]=t=>S.value=t),"delete-visible":z.value,"onUpdate:deleteVisible":e[10]||(e[10]=t=>z.value=t),"unsaved-changes-visible":B.value,"onUpdate:unsavedChangesVisible":e[11]||(e[11]=t=>B.value=t),"password-visible":q.value,"onUpdate:passwordVisible":e[12]||(e[12]=t=>q.value=t),empleado:N.value||s.value,"dialog-style":ne.value,"is-deleting":K.value,"is-loading":x.value,submitted:g.value,onChangePassword:he,onSendCredentials:Ce,onViewDetails:_e,onDeleteEmpleado:ge,onCancelDelete:e[13]||(e[13]=()=>z.value=!1),onCloseWithoutSaving:oe,onContinueEditing:be,onUpdatePassword:xe},null,8,["visible","delete-visible","unsaved-changes-visible","password-visible","empleado","dialog-style","is-deleting","is-loading","submitted"])])])]),_:1})}}};export{ss as default};
