import{p as ea,r,U as H,i as aa,l as la,P as re,s as ta,B as A,E as F,f as u,o as d,a as i,u as I,g as oa,w as g,b as l,t as h,e as V,a2 as ae,h as _,n as S,j as ke,O as De,C as Ie,F as le,y as ue}from"./app-DP8tsAem.js";import{_ as sa}from"./AuthenticatedLayout-BvfF3yw2.js";import{F as de,n as ia,p as na,g as ra}from"./index-ClJ1gEnJ.js";import"./logo-DN1bLr27.js";const ua={class:"py-4 sm:py-6 px-4 sm:px-7 mt-6 sm:mt-10 mx-auto bg-red-100 shadow-md rounded-lg max-w-full"},da={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2 sm:gap-0"},ca={class:"bg-white p-3 rounded-lg shadow-sm border mb-4"},ma={class:"flex items-center justify-between mb-3"},pa={class:"flex items-center gap-3"},va={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},fa={class:"space-y-3"},ga={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3"},_a={class:"sm:col-span-1"},ha={class:"sm:col-span-1"},ba={class:"sm:col-span-2 md:col-span-1"},ya={class:"sm:col-span-1 md:col-span-1 lg:col-span-1"},xa={class:"sm:col-span-1 md:col-span-1 lg:col-span-1"},wa={class:"text-sm font-medium leading-relaxed"},Ca={class:"text-sm leading-relaxed whitespace-normal"},ka={class:"text-sm leading-relaxed whitespace-normal"},Da={class:"text-sm leading-relaxed"},Ia={class:"text-sm leading-relaxed"},Va={class:"text-sm font-medium leading-relaxed"},Ta={class:"flex gap-1 justify-center items-center h-full"},Fa=["onClick"],Sa=["onClick"],Pa=["onClick"],Ea={class:"space-y-4"},Na={class:"w-full flex flex-col"},Ua={class:"flex items-center gap-4"},La={key:0,class:"text-red-500 ml-28"},Aa={key:1,class:"text-orange-500 ml-28"},Oa={key:2,class:"text-red-500 ml-28"},Ra={class:"w-full flex flex-col"},Ma={class:"flex items-start gap-4"},ja={class:"flex-1"},qa={class:"flex gap-2 mb-3"},$a=["disabled"],za={class:"space-y-2 max-h-40 overflow-y-auto"},Ba={class:"flex-1"},Ha=["onClick"],Ga={key:0,class:"text-gray-500 text-sm mt-2"},Wa={class:"w-full flex flex-col"},Ka={class:"flex items-start gap-4"},Qa={class:"flex-1"},Ja={class:"flex gap-2 mb-3"},Xa=["disabled"],Ya={key:0,class:"space-y-2 max-h-40 overflow-y-auto"},Za={class:"flex-1"},el=["onClick"],al={key:1,class:"text-gray-500 text-sm mt-2"},ll={class:"w-full flex flex-col"},tl={class:"flex items-center gap-4"},ol={key:0,class:"text-red-500 ml-28"},sl={key:1,class:"text-orange-500 ml-28"},il={key:2,class:"text-red-500 ml-28"},nl={key:3,class:"text-red-500 ml-28"},rl={class:"flex gap-4"},ul={class:"flex-1"},dl={key:0,class:"text-red-500 block text-xs mt-1"},cl={class:"flex-1"},ml={key:0,class:"text-red-500 block text-xs mt-1"},pl={class:"flex gap-4"},vl={class:"flex-1"},fl={key:0,class:"text-red-500 block text-xs mt-1"},gl={class:"flex-1"},_l={key:0,class:"text-red-500 block text-xs mt-1"},hl={class:"w-full flex flex-col"},bl={class:"flex items-center gap-4"},yl={key:0,class:"text-red-500 ml-28"},xl={class:"w-full flex flex-col"},wl={class:"flex items-center gap-4"},Cl={key:0,class:"text-red-500 ml-28"},kl={class:"w-full flex flex-col"},Dl={class:"flex items-center gap-4"},Il={key:0,class:"text-red-500 ml-28"},Vl={class:"w-full flex flex-col"},Tl={class:"flex items-center gap-4"},Fl={class:"flex-1"},Sl={key:0,class:"text-red-500 ml-28"},Pl={class:"flex gap-4 flex-wrap mt-4 ml-28"},El=["src"],Nl=["onClick"],Ul={class:"flex justify-center gap-4 w-full"},Ll={class:"flex items-center gap-3"},Al={class:"flex justify-end gap-4 w-full"},Ol={class:"flex justify-end gap-3 w-full"},Rl={key:0,class:"flex flex-col items-center justify-center"},Ml={class:"flex justify-center items-center w-full h-96"},jl=["src"],ql={key:1,class:"text-center text-gray-500 py-8"},$l={class:"flex justify-center w-full"},te="/api/tours",Ve="/images/tours/",Kl={__name:"Tours",setup(zl){const p=ea(),x=r([]),b=r([]),E=r(""),N=r(""),ce=r([]),a=r({id:null,nombre:"",incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,categoria_tour_id:null,transporte_id:null,imagenes:[]}),y=r([]),O=r([]),R=r([]),me=r(null),U=r(!1),M=r(!1),j=r(!1),v=r(!1),L=r(!1),P=r(null),f=r({global:{value:null,matchMode:H.CONTAINS},categoria_tour_id:{value:null,matchMode:H.EQUALS},"transporte.nombre":{value:null,matchMode:H.EQUALS},estado:{value:null,matchMode:H.EQUALS},fecha_salida:{value:null,matchMode:H.DATE_IS}}),G=r(null),q=r(null),W=r(null),w=r(null),C=r(null),oe=r(10),Te=r([5,10,20,50]),K=r("Guardar"),c=r(null),Q=r([]),$=r([]),Fe=r([{label:"Disponible",value:"DISPONIBLE"},{label:"Agotado",value:"AGOTADO"},{label:"En Curso",value:"EN_CURSO"},{label:"Completado",value:"COMPLETADO"},{label:"Cancelado",value:"CANCELADO"},{label:"Suspendido",value:"SUSPENDIDO"},{label:"Reprogramado",value:"REPROGRAMADO"}]),J=r(!1),z=r([]),pe=r(0),Se=r(null),se=aa(()=>{let t=ce.value;if(f.value.global.value){const e=f.value.global.value.toLowerCase();t=t.filter(s=>s.nombre.toLowerCase().includes(e)||s.incluye&&s.incluye.toLowerCase().includes(e)||s.no_incluye&&s.no_incluye.toLowerCase().includes(e)||s.punto_salida.toLowerCase().includes(e))}return f.value.categoria_tour_id.value&&(t=t.filter(e=>e.categoria_tour_id===f.value.categoria_tour_id.value)),f.value["transporte.nombre"].value&&(t=t.filter(e=>e["transporte.nombre"]===f.value["transporte.nombre"].value)),f.value.estado.value&&(t=t.filter(e=>e.estado===f.value.estado.value)),(w.value||C.value)&&(t=t.filter(e=>{if(!e.fecha_salida)return!1;const s=new Date(e.fecha_salida);let n=!0;if(w.value){const m=new Date(w.value);n=n&&s>=m}if(C.value){const m=new Date(C.value);m.setHours(23,59,59,999),n=n&&s<=m}return n})),t});la([a,c,x,b,y,R],()=>{P.value&&U.value&&re(()=>{const t={...a.value,fecha_regreso:c.value,incluye_lista:[...x.value],no_incluye_lista:[...b.value],imagenes_actuales:[...y.value]},e=JSON.stringify(t)!==JSON.stringify({...P.value,imagenes_actuales:P.value.imagenes_originales})||R.value.length>0,s=!P.value.id,n=a.value.nombre||a.value.punto_salida||a.value.fecha_salida||c.value||a.value.precio||a.value.categoria_tour_id||a.value.transporte_id||x.value.length>0||b.value.length>0||y.value.length>0;L.value=e||s&&n})},{deep:!0,flush:"post"});function X(){a.value={id:null,nombre:"",incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,categoria_tour_id:null,transporte_id:null,imagenes:[]},y.value=[],O.value=[],R.value=[],c.value=null,v.value=!1,x.value=[],b.value=[],E.value="",N.value=""}const ve=()=>{E.value.trim()&&(x.value.push(E.value.trim()),E.value="")},Pe=t=>{x.value.splice(t,1)},fe=()=>{N.value.trim()&&(b.value.push(N.value.trim()),N.value="")},Ee=t=>{b.value.splice(t,1)},ge=t=>t?t.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],_e=t=>t.join("|");ta(()=>{ie(),Ne(),Ue()});const ie=async()=>{try{const t=await A.get(te);ce.value=t.data.map(e=>{var s,n,m,k,T;return{...e,imagenes:(e.imagenes||[]).map(B=>typeof B=="string"?B:B.nombre),categoria_nombre:((s=e.categoria)==null?void 0:s.nombre)||"",transporte_nombre:((n=e.transporte)==null?void 0:n.nombre)||"",transporte_capacidad:((m=e.transporte)==null?void 0:m.capacidad)||"",categoria_tour_id:((k=e.categoria)==null?void 0:k.id)||e.categoria_tour_id,"transporte.nombre":(T=e.transporte)==null?void 0:T.nombre}}).sort((e,s)=>{const n=new Date(e.created_at);return new Date(s.created_at)-n})}catch{p.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los tours.",life:4e3})}},Ne=async()=>{try{const t=await A.get("/api/categorias-tours");Q.value=t.data||[]}catch{Q.value=[],p.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las categor√≠as.",life:4e3})}},Ue=async()=>{try{const t=await A.get("/api/transportes");$.value=t.data||[]}catch{$.value=[],p.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los transportes.",life:4e3})}},Le=()=>{f.value.categoria_tour_id.value=G.value},Ae=()=>{if(q.value){const t=$.value.find(e=>e.id===q.value);f.value["transporte.nombre"].value=t?t.nombre:null}else f.value["transporte.nombre"].value=null},Oe=()=>{f.value.estado.value=W.value},he=()=>{if(w.value&&C.value){const t=new Date(w.value),e=new Date(C.value);t>e&&(C.value=null,p.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'hasta' se limpi√≥ porque era anterior a la fecha 'desde'.",life:3e3}))}},be=()=>{if(w.value&&C.value){const t=new Date(w.value);new Date(C.value)<t&&(w.value=null,p.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'desde' se limpi√≥ porque era posterior a la fecha 'hasta'.",life:3e3}))}},Re=()=>{G.value=null,q.value=null,W.value=null,w.value=null,C.value=null,f.value.global.value=null,f.value.categoria_tour_id.value=null,f.value["transporte.nombre"].value=null,f.value.estado.value=null,f.value.fecha_salida.value=null,p.add({severity:"info",summary:"Filtros limpiados",detail:"Se han removido todos los filtros aplicados.",life:3e3})},Me=()=>{X(),K.value="Guardar",v.value=!1,U.value=!0,re(()=>{P.value={...a.value,fecha_regreso:c.value,incluye_lista:[...x.value],no_incluye_lista:[...b.value],imagenes_originales:[...y.value]},L.value=!1})},je=t=>{var e,s;X(),v.value=!1,a.value={...t,categoria_tour_id:((e=t.categoria)==null?void 0:e.id)||t.categoria_tour_id||null,transporte_id:((s=t.transporte)==null?void 0:s.id)||t.transporte_id||null},t.fecha_salida&&(typeof t.fecha_salida=="string"?a.value.fecha_salida=new Date(t.fecha_salida):a.value.fecha_salida=t.fecha_salida),t.fecha_regreso&&(typeof t.fecha_regreso=="string"?c.value=new Date(t.fecha_regreso):c.value=t.fecha_regreso),y.value=(t.imagenes||[]).map(n=>typeof n=="string"?n:n.nombre),x.value=ge(t.incluye),b.value=ge(t.no_incluye),L.value=!1,K.value="Actualizar",U.value=!0,re(()=>{P.value={...a.value,fecha_regreso:c.value,incluye_lista:[...x.value],no_incluye_lista:[...b.value],imagenes_originales:[...y.value]},L.value=!1})},qe=async()=>{if(v.value=!0,!c.value){p.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios est√©n completos.",life:4e3});return}if(!a.value.nombre||a.value.nombre.length<10||a.value.nombre.length>200){p.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios est√©n completos y cumplan los requisitos.",life:4e3});return}if(!a.value.punto_salida||a.value.punto_salida.length<5||a.value.punto_salida.length>200){p.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios est√©n completos y cumplan los requisitos.",life:4e3});return}if(a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max){p.add({severity:"warn",summary:"Verificar datos",detail:"Por favor revisa los valores ingresados y corrige cualquier inconsistencia.",life:4e3});return}if(!Y()){p.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y aseg√∫rate de que sean correctas.",life:4e3});return}if(!Z()){p.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y aseg√∫rate de que sean correctas.",life:4e3});return}if(!a.value.fecha_salida||!a.value.precio||!a.value.categoria_tour_id||!a.value.transporte_id||y.value.length===0){p.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios est√©n completos.",life:4e3});return}const t=2*1024*1024;if(O.value.filter(s=>s.size>t).length>0){p.add({severity:"warn",summary:"Verificar archivos",detail:"Por favor revisa el tama√±o de las im√°genes seleccionadas.",life:4e3});return}try{const s=new FormData;s.append("nombre",a.value.nombre||""),x.value.length>0?s.append("incluye",_e(x.value)):s.append("incluye",""),s.append("punto_salida",a.value.punto_salida||""),a.value.fecha_salida instanceof Date?s.append("fecha_salida",a.value.fecha_salida.toISOString().slice(0,19).replace("T"," ")):a.value.fecha_salida&&s.append("fecha_salida",a.value.fecha_salida),c.value instanceof Date?s.append("fecha_regreso",c.value.toISOString().slice(0,19).replace("T"," ")):c.value&&s.append("fecha_regreso",c.value),s.append("precio",a.value.precio||""),s.append("categoria_tour_id",a.value.categoria_tour_id||""),s.append("transporte_id",a.value.transporte_id||""),b.value.length>0?s.append("no_incluye",_e(b.value)):s.append("no_incluye",""),a.value.cupo_min&&s.append("cupo_min",a.value.cupo_min),a.value.cupo_max&&s.append("cupo_max",a.value.cupo_max),O.value.forEach(m=>s.append("imagenes[]",m)),R.value.forEach(m=>{const k=m.includes("/")?m.split("/").pop():m;s.append("removed_images[]",k)});let n;a.value.id?(s.append("_method","PUT"),n=await A.post(`${te}/${a.value.id}`,s,{headers:{"Content-Type":"multipart/form-data"}}),p.add({severity:"success",summary:"¬°√âxito!",detail:"El tour ha sido actualizado correctamente.",life:5e3})):(n=await A.post(te,s,{headers:{"Content-Type":"multipart/form-data"}}),p.add({severity:"success",summary:"¬°√âxito!",detail:"El tour ha sido creado correctamente.",life:5e3})),await ie(),U.value=!1,L.value=!1,P.value=null,X()}catch{p.add({severity:"warn",summary:"Error de validaci√≥n",detail:"Por favor revisa los campos e intenta nuevamente.",life:6e3})}},$e=t=>{a.value={...t},M.value=!0},ze=async()=>{try{await A.delete(`${te}/${a.value.id}`),await ie(),M.value=!1,p.add({severity:"success",summary:"¬°Eliminado!",detail:"El tour ha sido eliminado correctamente.",life:5e3})}catch{p.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el tour. Int√©ntalo de nuevo.",life:5e3})}},Be=()=>{L.value?j.value=!0:ye()},ye=()=>{U.value=!1,j.value=!1,L.value=!1,P.value=null,X()},He=()=>{j.value=!1},Ge=t=>{const e=t.target?t.target.files:t.files,s=2*1024*1024;for(const n of e)if(n instanceof File){if(n.size>s){p.add({severity:"warn",summary:"Archivo no v√°lido",detail:"Por favor selecciona archivos que cumplan con los requisitos de tama√±o (m√°ximo 2MB).",life:5e3});continue}if(!n.type.startsWith("image/")){p.add({severity:"warn",summary:"Formato no v√°lido",detail:"Por favor selecciona √∫nicamente archivos de imagen v√°lidos.",life:4e3});continue}O.value.push(n);const m=new FileReader;m.onload=k=>y.value.push(k.target.result),m.readAsDataURL(n)}},We=t=>{const e=y.value[t];typeof e=="string"&&e.startsWith("data:image")?(y.value.splice(t,1),O.value.splice(t,1)):(R.value.push(e),y.value.splice(t,1))},Ke=t=>{z.value=(t||[]).map(e=>Ve+(typeof e=="string"?e:e.nombre)),J.value=!0},Qe=()=>{a.value.nombre&&a.value.nombre.length>200&&(a.value.nombre=a.value.nombre.substring(0,200))},Je=()=>{a.value.punto_salida&&a.value.punto_salida.length>200&&(a.value.punto_salida=a.value.punto_salida.substring(0,200))},xe=()=>a.value.cupo_min&&!a.value.cupo_max||a.value.cupo_max&&!a.value.cupo_min?!0:!(a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max),Y=()=>{if(!a.value.fecha_salida)return!0;const t=new Date,e=new Date(a.value.fecha_salida),s=new Date(t.getTime()+60*60*1e3);return!(e<s||c.value&&(new Date(c.value)-e)/(1e3*60*60)<1)},Z=()=>{if(!c.value)return!0;const t=new Date(c.value);if(a.value.fecha_salida){const e=new Date(a.value.fecha_salida);if((t-e)/(1e3*60*60)<1)return!1}return!0},we=()=>{const t=new Date;return t.setHours(t.getHours()+1),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},Xe=()=>{if(!a.value.fecha_salida)return we();const t=new Date(a.value.fecha_salida);return t.setHours(t.getHours()+1),t},Ye=()=>{if(!c.value)return null;const t=new Date(c.value);return t.setHours(t.getHours()-1),t};return(t,e)=>{const s=F("Toast"),n=F("Button"),m=F("InputText"),k=F("Select"),T=F("Column"),B=F("DataTable"),ne=F("InputNumber"),ee=F("Dialog"),Ze=F("Carousel");return d(),u(le,null,[i(I(oa),{title:"Tours"}),i(sa,null,{default:g(()=>[i(s,{class:"z-[9999]"}),l("div",ua,[l("div",da,[e[27]||(e[27]=l("h3",{class:"text-lg sm:text-xl font-bold"},"Cat√°logo de Tours",-1)),i(n,{label:"Agregar tour",icon:"pi pi-plus",style:{"background-color":"#ef4444 !important",color:"white !important",border:"none !important",padding:"0.5rem 1.5rem","border-radius":"0.375rem",transition:"all 0.2s ease","font-weight":"500"},onmouseover:"this.style.backgroundColor='#dc2626'",onmouseout:"this.style.backgroundColor='#ef4444'",class:"w-full sm:w-auto",onClick:Me})]),i(B,{value:se.value,selection:me.value,"onUpdate:selection":e[6]||(e[6]=o=>me.value=o),dataKey:"id",paginator:!0,rows:oe.value,rowsPerPageOptions:Te.value,rowsPerPage:oe.value,"onUpdate:rowsPerPage":e[7]||(e[7]=o=>oe.value=o),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} tours",class:"overflow-x-auto max-w-full",style:{display:"block","max-width":"84vw"},responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:g(()=>[l("div",ca,[l("div",ma,[l("div",pa,[e[28]||(e[28]=l("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[l("i",{class:"pi pi-filter text-blue-600 text-sm"}),V(" Filtros ")],-1)),l("div",va,h(se.value.length)+" resultado"+h(se.value.length!==1?"s":""),1)]),i(n,{label:"Limpiar",icon:"pi pi-filter-slash",class:"p-button-outlined p-button-sm text-xs px-3 py-1",onClick:Re})]),l("div",fa,[l("div",null,[i(m,{modelValue:f.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=o=>f.value.global.value=o),placeholder:"üîç Buscar tours...",class:"w-full h-9 text-sm"},null,8,["modelValue"])]),l("div",ga,[l("div",_a,[i(k,{modelValue:G.value,"onUpdate:modelValue":e[1]||(e[1]=o=>G.value=o),options:Q.value,optionLabel:"nombre",optionValue:"id",placeholder:"Categor√≠a",class:"w-full h-9 text-sm",onChange:Le,clearable:!0},null,8,["modelValue","options"])]),l("div",ha,[i(k,{modelValue:q.value,"onUpdate:modelValue":e[2]||(e[2]=o=>q.value=o),options:$.value,optionLabel:"nombre",optionValue:"id",placeholder:"Transporte",class:"w-full h-9 text-sm",onChange:Ae,clearable:!0},null,8,["modelValue","options"])]),l("div",ba,[i(k,{modelValue:W.value,"onUpdate:modelValue":e[3]||(e[3]=o=>W.value=o),options:Fe.value,optionLabel:"label",optionValue:"value",placeholder:"Estado",class:"w-full h-9 text-sm",onChange:Oe,clearable:!0},null,8,["modelValue","options"])]),l("div",ya,[i(I(ae),{modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=o=>w.value=o),placeholder:"Fecha desde",class:"w-full h-9 text-sm",onDateSelect:he,onClear:he,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:C.value},null,8,["modelValue","maxDate"])]),l("div",xa,[i(I(ae),{modelValue:C.value,"onUpdate:modelValue":e[5]||(e[5]=o=>C.value=o),placeholder:"Fecha hasta",class:"w-full h-9 text-sm",onDateSelect:be,onClear:be,showIcon:!0,dateFormat:"dd/mm/yy",minDate:w.value},null,8,["modelValue","minDate"])])])])])]),default:g(()=>[i(T,{field:"nombre",header:"Nombre",sortable:"",class:"w-56 min-w-56"},{body:g(o=>[l("div",wa,h(o.data.nombre),1)]),_:1}),i(T,{field:"incluye",header:"Incluye",class:"w-40 min-w-40"},{body:g(o=>[l("div",Ca,h(o.data.incluye),1)]),_:1}),i(T,{field:"no_incluye",header:"No incluye",class:"w-40 min-w-40"},{body:g(o=>[l("div",ka,h(o.data.no_incluye),1)]),_:1}),i(T,{field:"punto_salida",header:"Punto salida",class:"w-32 min-w-32"},{body:g(o=>[l("div",Da,h(o.data.punto_salida),1)]),_:1}),i(T,{field:"fecha_salida",header:"Fecha salida",class:"w-36 min-w-36"},{body:g(o=>[l("div",Ia,h(o.data.fecha_salida?new Date(o.data.fecha_salida).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):""),1)]),_:1}),i(T,{field:"precio",header:"Precio",class:"w-24 min-w-24"},{body:g(o=>[l("div",Va,h(isNaN(Number(o.data.precio))?"":`$${Number(o.data.precio).toFixed(2)}`),1)]),_:1}),i(T,{header:"Acciones",exportable:!1,class:"w-28 min-w-28"},{body:g(o=>[l("div",Ta,[l("button",{title:"Editar tour",class:"text-orange-600 hover:text-orange-900 transition-colors p-1.5 text-sm",onClick:D=>je(o.data)},[i(I(de),{icon:I(ia),class:"h-4 w-4"},null,8,["icon"])],8,Fa),l("button",{title:"Ver im√°genes",class:"text-blue-600 hover:text-blue-900 transition-colors p-1.5 text-sm",onClick:D=>Ke(o.data.imagenes)},[i(I(de),{icon:I(na),class:"h-4 w-4"},null,8,["icon"])],8,Sa),l("button",{title:"Eliminar tour",class:"text-red-600 hover:text-red-900 transition-colors p-1.5 text-sm",onClick:D=>$e(o.data)},[i(I(de),{icon:I(ra),class:"h-4 w-4"},null,8,["icon"])],8,Pa)])]),_:1})]),_:1},8,["value","selection","rows","rowsPerPageOptions","rowsPerPage"]),i(ee,{visible:U.value,"onUpdate:visible":e[20]||(e[20]=o=>U.value=o),header:K.value+" Tour",modal:!0,style:{width:"500px"},closable:!1},{footer:g(()=>[l("div",Ul,[i(n,{label:"Cancelar",icon:"pi pi-times",style:{"background-color":"white !important",border:"1px solid #10b981 !important",color:"#10b981 !important",padding:"0.5rem 1.5rem","border-radius":"0.375rem",transition:"all 0.2s ease"},onmouseover:"this.style.backgroundColor='#f0fdf4'; this.style.borderColor='#059669'; this.style.color='#059669'",onmouseout:"this.style.backgroundColor='white'; this.style.borderColor='#10b981'; this.style.color='#10b981'",text:"",onClick:Be}),i(n,{label:K.value,icon:"pi pi-check",style:{"background-color":"#ef4444 !important",color:"white !important",border:"none !important",padding:"0.5rem 1.5rem","border-radius":"0.375rem",transition:"all 0.2s ease"},onmouseover:"this.style.backgroundColor='#dc2626'",onmouseout:"this.style.backgroundColor='#ef4444'",onClick:qe},null,8,["label"])])]),default:g(()=>[l("div",Ea,[l("div",Na,[l("div",Ua,[e[29]||(e[29]=l("label",{for:"nombre",class:"w-24 flex items-center gap-1"},[V(" Nombre: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(m,{modelValue:a.value.nombre,"onUpdate:modelValue":e[8]||(e[8]=o=>a.value.nombre=o),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:200,class:S([{"p-invalid":v.value&&(!a.value.nombre||a.value.nombre.length<10||a.value.nombre.length>200)},"flex-1"]),onInput:Qe},null,8,["modelValue","class"])]),a.value.nombre&&a.value.nombre.length<10?(d(),u("small",La,"El nombre debe tener al menos 10 caracteres. Actual: "+h(a.value.nombre.length)+"/10",1)):_("",!0),a.value.nombre&&a.value.nombre.length>=180&&a.value.nombre.length<=200?(d(),u("small",Aa,"Caracteres restantes: "+h(200-a.value.nombre.length),1)):_("",!0),v.value&&!a.value.nombre?(d(),u("small",Oa,"El nombre es obligatorio.")):_("",!0)]),l("div",Ra,[l("div",Ma,[e[32]||(e[32]=l("label",{for:"incluye",class:"w-24 flex items-center gap-1 mt-2"}," Incluye: ",-1)),l("div",ja,[l("div",qa,[ke(l("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>E.value=o),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:De(ve,["enter"])},null,544),[[Ie,E.value]]),l("button",{type:"button",onClick:ve,disabled:!E.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},e[30]||(e[30]=[l("i",{class:"pi pi-plus"},null,-1)]),8,$a)]),l("div",za,[(d(!0),u(le,null,ue(x.value,(o,D)=>(d(),u("div",{key:D,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[l("span",Ba,h(o),1),l("button",{type:"button",onClick:Ce=>Pe(D),class:"text-red-500 hover:text-red-700 p-1"},e[31]||(e[31]=[l("i",{class:"pi pi-times"},null,-1)]),8,Ha)]))),128))]),x.value.length===0?(d(),u("div",Ga," Sin elementos agregados. ")):_("",!0)])])]),l("div",Wa,[l("div",Ka,[e[35]||(e[35]=l("label",{for:"no_incluye",class:"w-24 mt-2"},"No incluye:",-1)),l("div",Qa,[l("div",Ja,[ke(l("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>N.value=o),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:De(fe,["enter"])},null,544),[[Ie,N.value]]),l("button",{type:"button",onClick:fe,disabled:!N.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},e[33]||(e[33]=[l("i",{class:"pi pi-plus"},null,-1)]),8,Xa)]),b.value.length>0?(d(),u("div",Ya,[(d(!0),u(le,null,ue(b.value,(o,D)=>(d(),u("div",{key:D,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[l("span",Za,h(o),1),l("button",{type:"button",onClick:Ce=>Ee(D),class:"text-red-500 hover:text-red-700 p-1"},e[34]||(e[34]=[l("i",{class:"pi pi-times"},null,-1)]),8,el)]))),128))])):_("",!0),b.value.length===0?(d(),u("div",al," Sin elementos. Este campo es opcional. ")):_("",!0)])])]),l("div",ll,[l("div",tl,[e[36]||(e[36]=l("label",{for:"punto_salida",class:"w-24 flex items-center gap-1"},[V(" Punto de salida: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(m,{modelValue:a.value.punto_salida,"onUpdate:modelValue":e[11]||(e[11]=o=>a.value.punto_salida=o),modelModifiers:{trim:!0},id:"punto_salida",name:"punto_salida",maxlength:200,class:S([{"p-invalid":v.value&&(!a.value.punto_salida||a.value.punto_salida.length<5)},"flex-1"]),onInput:Je},null,8,["modelValue","class"])]),a.value.punto_salida&&a.value.punto_salida.length<5?(d(),u("small",ol,"Debe tener al menos 5 caracteres. Actual: "+h(a.value.punto_salida.length)+"/5",1)):_("",!0),a.value.punto_salida&&a.value.punto_salida.length>=180&&a.value.punto_salida.length<=200?(d(),u("small",sl,"Caracteres restantes: "+h(200-a.value.punto_salida.length),1)):_("",!0),v.value&&!a.value.punto_salida?(d(),u("small",il,"El punto de salida es obligatorio.")):_("",!0),v.value&&a.value.punto_salida&&a.value.punto_salida.length<5?(d(),u("small",nl,"El punto de salida debe tener al menos 5 caracteres.")):_("",!0)]),l("div",rl,[l("div",ul,[e[37]||(e[37]=l("label",{for:"cupo_min",class:"block mb-2"},"Cupo m√≠nimo:",-1)),i(ne,{modelValue:a.value.cupo_min,"onUpdate:modelValue":e[12]||(e[12]=o=>a.value.cupo_min=o),id:"cupo_min",name:"cupo_min",min:1,max:a.value.cupo_max?a.value.cupo_max-1:50,step:1,showButtons:"",useGrouping:!1,class:S([{"p-invalid":a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max},"w-full"]),onInput:xe,placeholder:"0"},null,8,["modelValue","max","class"]),a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max?(d(),u("small",dl,"Debe ser menor al m√°ximo")):_("",!0)]),l("div",cl,[e[38]||(e[38]=l("label",{for:"cupo_max",class:"block mb-2"},"Cupo m√°ximo:",-1)),i(ne,{modelValue:a.value.cupo_max,"onUpdate:modelValue":e[13]||(e[13]=o=>a.value.cupo_max=o),id:"cupo_max",name:"cupo_max",min:a.value.cupo_min?a.value.cupo_min+1:1,max:100,step:1,showButtons:"",useGrouping:!1,class:S([{"p-invalid":a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_max<=a.value.cupo_min},"w-full"]),onInput:xe,placeholder:"0"},null,8,["modelValue","min","class"]),a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_max<=a.value.cupo_min?(d(),u("small",ml,"Debe ser mayor al m√≠nimo")):_("",!0)])]),l("div",pl,[l("div",vl,[e[39]||(e[39]=l("label",{for:"fecha_salida",class:"flex items-center gap-1 mb-2"},[V(" Fecha y hora de salida "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(I(ae),{modelValue:a.value.fecha_salida,"onUpdate:modelValue":e[14]||(e[14]=o=>a.value.fecha_salida=o),id:"fecha_salida",name:"fecha_salida",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:we(),maxDate:Ye(),class:S([{"p-invalid":v.value&&!a.value.fecha_salida||a.value.fecha_salida&&!Y()},"w-full"]),manualInput:!1,onDateSelect:Y,onInput:Y},null,8,["modelValue","minDate","maxDate","class"]),v.value&&!a.value.fecha_salida?(d(),u("small",fl,"Fecha y hora de salida requerida.")):_("",!0)]),l("div",gl,[e[40]||(e[40]=l("label",{for:"horaRegresoCalendar",class:"flex items-center gap-1 mb-2"},[V(" Fecha y hora regreso "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(I(ae),{modelValue:c.value,"onUpdate:modelValue":e[15]||(e[15]=o=>c.value=o),id:"horaRegresoCalendar",name:"horaRegresoCalendar",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:Xe(),manualInput:!1,class:S([{"p-invalid":v.value&&!c.value||c.value&&!Z()},"w-full"]),onDateSelect:Z,onInput:Z},null,8,["modelValue","minDate","class"]),v.value&&!c.value?(d(),u("small",_l,"Fecha y hora de regreso requerida.")):_("",!0)])]),l("div",hl,[l("div",bl,[e[41]||(e[41]=l("label",{for:"precio",class:"w-24 flex items-center gap-1"},[V(" Precio: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(ne,{modelValue:a.value.precio,"onUpdate:modelValue":e[16]||(e[16]=o=>a.value.precio=o),id:"precio",name:"precio",mode:"currency",currency:"USD",locale:"en-US",min:.01,max:999.99,maxFractionDigits:2,minFractionDigits:2,class:S([{"p-invalid":v.value&&(!a.value.precio||a.value.precio<=0||a.value.precio>999.99)},"flex-1"])},null,8,["modelValue","class"])]),v.value&&(a.value.precio==null||a.value.precio<=0||a.value.precio>999.99)?(d(),u("small",yl," El precio es obligatorio, debe ser mayor a 0 y menor o igual a 999.99. ")):_("",!0)]),l("div",xl,[l("div",wl,[e[42]||(e[42]=l("label",{for:"categoria_tour_id",class:"w-24 flex items-center gap-1"},[V(" Categor√≠a: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(k,{modelValue:a.value.categoria_tour_id,"onUpdate:modelValue":e[17]||(e[17]=o=>a.value.categoria_tour_id=o),options:Q.value,optionLabel:"nombre",optionValue:"id",id:"categoria_tour_id",name:"categoria_tour_id",class:S(["flex-1",{"p-invalid":v.value&&!a.value.categoria_tour_id}]),placeholder:"Selecciona una categor√≠a"},null,8,["modelValue","options","class"])]),v.value&&!a.value.categoria_tour_id?(d(),u("small",Cl,"La categor√≠a es obligatoria.")):_("",!0)]),l("div",kl,[l("div",Dl,[e[43]||(e[43]=l("label",{for:"transporte_id",class:"w-24 flex items-center gap-1"},[V(" Tipo de transporte: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),i(k,{modelValue:a.value.transporte_id,"onUpdate:modelValue":e[18]||(e[18]=o=>a.value.transporte_id=o),options:$.value,optionLabel:"nombre",optionValue:"id",id:"transporte_id",name:"transporte_id",class:S(["flex-1",{"p-invalid":v.value&&!a.value.transporte_id}]),placeholder:"Selecciona un tipo de transporte"},null,8,["modelValue","options","class"])]),v.value&&!a.value.transporte_id?(d(),u("small",Il,"El tipo de transporte es obligatorio.")):_("",!0)]),l("div",Vl,[l("div",Tl,[e[44]||(e[44]=l("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},[V(" Im√°genes: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),l("div",Fl,[l("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:Ge,class:"hidden",ref_key:"fileInput",ref:Se},null,544),i(n,{label:"Seleccionar im√°genes",icon:"pi pi-plus",style:{"background-color":"white !important",border:"1px solid #ef4444 !important",color:"#ef4444 !important",padding:"0.5rem 1.5rem","border-radius":"0.375rem",transition:"all 0.2s ease"},onmouseover:"this.style.backgroundColor='#fef2f2'; this.style.borderColor='#dc2626'; this.style.color='#dc2626'",onmouseout:"this.style.backgroundColor='white'; this.style.borderColor='#ef4444'; this.style.color='#ef4444'",onClick:e[19]||(e[19]=o=>t.$refs.fileInput.click())})])]),v.value&&y.value.length===0?(d(),u("small",Sl,"Al menos una imagen es obligatoria.")):_("",!0)]),l("div",Pl,[(d(!0),u(le,null,ue(y.value,(o,D)=>(d(),u("div",{key:D,class:"relative w-32 h-32"},[l("img",{src:o.startsWith("data:image")?o:Ve+o,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,El),l("button",{onClick:Ce=>We(D),class:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 shadow",style:{transform:"translate(50%, -50%)"}},e[45]||(e[45]=[l("i",{class:"pi pi-times text-xs"},null,-1)]),8,Nl)]))),128))])])]),_:1},8,["visible","header"]),i(ee,{visible:M.value,"onUpdate:visible":e[22]||(e[22]=o=>M.value=o),header:"Confirmar",modal:!0,style:{width:"350px"},closable:!1},{footer:g(()=>[l("div",Al,[i(n,{label:"No",icon:"pi pi-times",style:{"background-color":"white !important",border:"1px solid #10b981 !important",color:"#10b981 !important",padding:"0.5rem 1.5rem","border-radius":"0.375rem",transition:"all 0.2s ease"},onmouseover:"this.style.backgroundColor='#f0fdf4'; this.style.borderColor='#059669'; this.style.color='#059669'",onmouseout:"this.style.backgroundColor='white'; this.style.borderColor='#10b981'; this.style.color='#10b981'",text:"",onClick:e[21]||(e[21]=o=>M.value=!1)}),i(n,{label:"S√≠",icon:"pi pi-check",style:{"background-color":"#ef4444 !important",color:"white !important",border:"none !important",padding:"0.5rem 1.5rem","border-radius":"0.375rem",transition:"all 0.2s ease"},onmouseover:"this.style.backgroundColor='#dc2626'",onmouseout:"this.style.backgroundColor='#ef4444'",onClick:ze})])]),default:g(()=>[l("div",Ll,[e[48]||(e[48]=l("i",{class:"pi pi-exclamation-triangle text-gray-800",style:{"font-size":"30px"}},null,-1)),l("span",null,[e[46]||(e[46]=V("¬øEliminar el tour ")),l("b",null,h(a.value.nombre),1),e[47]||(e[47]=V("?"))])])]),_:1},8,["visible"]),i(ee,{visible:j.value,"onUpdate:visible":e[23]||(e[23]=o=>j.value=o),header:"Cambios sin guardar",modal:!0,style:{width:"400px"},closable:!1},{footer:g(()=>[l("div",Ol,[i(n,{label:"Continuar",icon:"pi pi-pencil",size:"small",style:{"background-color":"white !important",border:"1px solid #10b981 !important",color:"#10b981 !important",padding:"0.4rem 1rem","border-radius":"0.375rem",transition:"all 0.2s ease","font-size":"0.875rem"},onmouseover:"this.style.backgroundColor='#f0fdf4'; this.style.borderColor='#059669'; this.style.color='#059669'",onmouseout:"this.style.backgroundColor='white'; this.style.borderColor='#10b981'; this.style.color='#10b981'",text:"",onClick:He}),i(n,{label:"Salir sin guardar",icon:"pi pi-sign-out",size:"small",style:{"background-color":"#ef4444 !important",color:"white !important",border:"none !important",padding:"0.4rem 1rem","border-radius":"0.375rem",transition:"all 0.2s ease","font-size":"0.875rem"},onmouseover:"this.style.backgroundColor='#dc2626'",onmouseout:"this.style.backgroundColor='#ef4444'",onClick:ye})])]),default:g(()=>[e[49]||(e[49]=l("div",{class:"flex items-center gap-3"},[l("i",{class:"pi pi-exclamation-triangle text-gray-800",style:{"font-size":"24px"}}),l("span",null,"Tienes informaci√≥n sin guardar. ¬øDeseas salir sin guardar?")],-1))]),_:1,__:[49]},8,["visible"]),i(ee,{visible:J.value,"onUpdate:visible":e[26]||(e[26]=o=>J.value=o),header:"Im√°genes del tour",modal:!0,closable:!1,style:{width:"700px"}},{footer:g(()=>[l("div",$l,[i(n,{label:"Cerrar",icon:"pi pi-times",style:{"background-color":"white !important",border:"1px solid #10b981 !important",color:"#10b981 !important",padding:"0.5rem 1.5rem","border-radius":"0.375rem",transition:"all 0.2s ease"},onmouseover:"this.style.backgroundColor='#f0fdf4'; this.style.borderColor='#059669'; this.style.color='#059669'",onmouseout:"this.style.backgroundColor='white'; this.style.borderColor='#10b981'; this.style.color='#10b981'",onClick:e[25]||(e[25]=o=>J.value=!1)})])]),default:g(()=>[z.value.length?(d(),u("div",Rl,[i(Ze,{value:z.value,numVisible:1,numScroll:1,circular:!0,page:pe.value,"onUpdate:page":e[24]||(e[24]=o=>pe.value=o),class:"w-full",showIndicators:z.value.length>1,showNavigators:z.value.length>1,style:{"max-width":"610px"}},{item:g(o=>[l("div",Ml,[l("img",{src:o.data,alt:"Imagen tour",class:"w-auto h-full max-h-96 object-contain rounded shadow"},null,8,jl)])]),_:1},8,["value","page","showIndicators","showNavigators"])])):(d(),u("div",ql," No hay im√°genes para este tour. "))]),_:1},8,["visible"])])]),_:1})],64)}}};export{Kl as default};
