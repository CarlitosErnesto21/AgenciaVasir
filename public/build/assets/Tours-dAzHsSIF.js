import{r as i,E as G,w as Ye,n as Te,o as Ra,a5 as $a,N as W,k as J,h as Ee,d as m,x as T,p as u,e as t,$ as d,a0 as qa,a1 as Ba,y as D,t as b,j as h,A as za,c as v,q as E,v as Ze,D as ea,a6 as aa,F as Fe,l as Se}from"./vendor-Bf9odu9b.js";import{A as Ga}from"./AuthenticatedLayout-DLrSmUd9.js";import{z as ja,F as re,A as I,p as Q}from"./ui-ByAzYu1X.js";import{g as X,G as Ha,f as ye,a as Ka,b as Wa,c as Ja,e as Ae,h as Qa}from"./index-dTLVUhwl.js";import Xa from"./Modales-C0eI1YaC.js";import Ya from"./CambiarEstado-rwAzhxrI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Za={class:"container mx-auto px-4 py-6"},el={class:"bg-white rounded-lg shadow-md"},al={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},ll={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},tl={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},ol={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},sl={class:"flex items-center gap-3"},nl={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},rl=["disabled"],il=["disabled"],ul={class:"space-y-3"},dl={class:"grid grid-cols-3 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-5 gap-3"},cl={class:"col-span-2 sm:col-span-1 md:col-span-1 lg:col-span-1 hidden sm:block"},ml={class:"col-span-2 sm:col-span-1 md:col-span-1 lg:col-span-1 hidden sm:block"},vl={class:"flex w-80 sm:hidden"},pl=["title"],fl=["title"],gl={class:"text-sm leading-relaxed"},bl={class:"text-sm font-medium leading-relaxed"},hl={class:"flex gap-2 justify-center items-center"},yl=["onClick"],xl=["onClick"],_l=["onClick"],wl={class:"space-y-4"},Cl={class:"w-full flex flex-col"},Dl={class:"flex items-center gap-4"},kl={key:0,class:"text-red-500 ml-28"},Il={key:1,class:"text-orange-500 ml-28"},Vl={key:2,class:"text-red-500 ml-28"},Tl={class:"w-full flex flex-col"},El={class:"flex items-start gap-4"},Fl={class:"flex w-full flex-col"},Sl={class:"flex gap-2 mb-3"},Al=["disabled"],Pl={class:"space-y-2 max-h-40 overflow-y-auto"},Ll={class:"flex-1"},Nl=["onClick"],Ml={key:0,class:"text-gray-500 text-sm mt-2"},Ul={class:"w-full flex flex-col"},Ol={class:"flex items-start gap-4"},Rl={class:"flex w-full flex-col"},$l={class:"flex gap-2 mb-3"},ql=["disabled"],Bl={key:0,class:"space-y-2 max-h-40 overflow-y-auto"},zl={class:"flex-1"},Gl=["onClick"],jl={key:1,class:"text-gray-500 text-sm mt-2"},Hl={class:"w-full"},Kl={class:"flex items-start gap-4"},Wl={key:0,class:"text-red-500 ml-28"},Jl={key:1,class:"text-orange-500 ml-28"},Ql={key:2,class:"text-red-500 ml-28"},Xl={key:3,class:"text-red-500 ml-28"},Yl={class:"grid grid-cols-2 gap-4"},Zl={class:"w-full"},et={for:"cupo_min",class:"flex items-center gap-1 mb-2"},at={key:0,class:"text-gray-500 text-xs"},lt={key:0,class:"text-red-500 block text-xs mt-1"},tt={key:1,class:"text-red-500 block text-xs mt-1"},ot={class:"w-full"},st={for:"cupo_max",class:"flex items-center gap-1 mb-2"},nt={key:0,class:"text-gray-500 text-xs"},rt={key:0,class:"text-red-500 block text-xs mt-1"},it={key:1,class:"text-red-500 block text-xs mt-1"},ut={class:"flex gap-4"},dt={class:"flex-1"},ct={key:0,class:"text-red-500 block text-xs mt-1"},mt={class:"flex-1"},vt={key:0,class:"text-red-500 block text-xs mt-1"},pt={class:"w-full flex flex-col"},ft={class:"flex items-center gap-10 sm:gap-9"},gt={class:"w-full relative"},bt={key:0,class:"text-red-500 ml-28"},ht={class:"w-full flex flex-col"},yt={class:"flex items-center gap-5"},xt={key:0,class:"text-red-500 ml-28"},_t={class:"w-full flex flex-col"},wt={class:"flex items-center gap-3.5"},Ct={key:0,class:"text-red-500 ml-28"},Dt={class:"w-full flex flex-col"},kt={class:"flex items-center gap-4"},It={class:"flex-1"},Vt={class:"flex items-center gap-3 mb-2"},Tt=["disabled"],Et={class:"flex items-center gap-2"},Ft={key:0,class:"text-red-500 ml-28"},St={class:"grid grid-cols-3 ml-2 sm:ml-5 gap-y-2"},At=["src"],Pt=["onClick"],Lt={class:"flex justify-center gap-4 w-full mt-6"},Nt=["disabled"],Mt={key:0},Ut={key:1},Ot=["disabled"],ie="/api/tours",Pe="/storage/tours/",Kt={__name:"Tours",setup(Rt){const c=ja(),V=i([]),k=i([]),R=i(""),$=i(""),Y=i([]),l=i({id:null,nombre:"",categoria:null,incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,transporte_id:null,imagenes:[]}),x=i([]),Z=i([]),ee=i([]),Le=i(null),P=i(!1),ae=i(!1),L=i(!1),le=i(!1),f=i(!1),q=i(!1),N=i(null),B=i(!1),xe=i(!1),z=i(!1),M=i(!1),U=i(!1),te=i(!1),ue=i(!0),_=i({global:{value:null,matchMode:re.CONTAINS},categoria:{value:null,matchMode:re.EQUALS},"transporte.nombre":{value:null,matchMode:re.EQUALS},estado:{value:null,matchMode:re.EQUALS},fecha_salida:{value:null,matchMode:re.DATE_IS}}),de=i(null),oe=i(null),ce=i(null),w=i(null),C=i(null),_e=i(10),la=i([5,10,20,50]),se=i("Guardar"),g=i(null),F=i([]),Ne=i([{label:"Nacional",value:"NACIONAL"},{label:"Internacional",value:"INTERNACIONAL"}]),Me=i([{label:"Disponible",value:"DISPONIBLE"},{label:"Agotado",value:"AGOTADO"},{label:"En Curso",value:"EN_CURSO"},{label:"Completado",value:"COMPLETADO"},{label:"Cancelado",value:"CANCELADO"},{label:"Suspendido",value:"SUSPENDIDO"},{label:"Reprogramado",value:"REPROGRAMADO"}]),me=i(!1),we=i(!1),ve=i(!1),S=i(null),Ce=i([]),De=i(0),Ue=i(null),ke=G(()=>{let a=Y.value;if(_.value.global.value){const e=_.value.global.value.toLowerCase();a=a.filter(o=>o.nombre.toLowerCase().includes(e)||o.incluye&&o.incluye.toLowerCase().includes(e)||o.no_incluye&&o.no_incluye.toLowerCase().includes(e)||o.punto_salida.toLowerCase().includes(e))}return _.value.categoria.value&&(a=a.filter(e=>e.categoria===_.value.categoria.value)),_.value["transporte.nombre"].value&&(a=a.filter(e=>e["transporte.nombre"]===_.value["transporte.nombre"].value)),_.value.estado.value&&(a=a.filter(e=>e.estado===_.value.estado.value)),(w.value||C.value)&&(a=a.filter(e=>{if(!e.fecha_salida)return!1;const o=new Date(e.fecha_salida);let n=!0;if(w.value){const r=new Date(w.value);n=n&&o>=r}if(C.value){const r=new Date(C.value);r.setHours(23,59,59,999),n=n&&o<=r}return n})),a}),Oe=G(()=>x.value.length<5),ta=G(()=>z.value?"Cargando...":M.value?"Abriendo...":Oe.value?"Seleccionar":"Límite alcanzado"),j=G(()=>{if(!l.value.cupo_min)return"";const a=parseInt(l.value.cupo_min)||0,e=parseInt(l.value.cupo_max)||0;if(a<=0)return"El cupo mínimo debe ser al menos 1.";const o=F.value.find(r=>r.id===l.value.transporte_id),n=o?o.capacidad:null;return n&&a>n?`El cupo mínimo no puede ser mayor que la capacidad del transporte (${n}).`:l.value.cupo_max&&e>0&&a>=e?"El cupo mínimo debe ser menor que el cupo máximo.":""}),H=G(()=>{if(!l.value.cupo_max)return"";const a=parseInt(l.value.cupo_min)||0,e=parseInt(l.value.cupo_max)||0;if(e<=0)return"El cupo máximo debe ser al menos 1.";const o=F.value.find(r=>r.id===l.value.transporte_id),n=o?o.capacidad:null;return n&&e>n?`El cupo máximo no puede ser mayor que la capacidad del transporte (${n}).`:l.value.cupo_min&&a>0&&e<=a?"El cupo máximo debe ser mayor que el cupo mínimo.":""}),O=G(()=>{const a=F.value.find(e=>e.id===l.value.transporte_id);return a?a.capacidad:30});Ye([l,g,V,k,x,ee],()=>{N.value&&P.value&&Te(()=>{const a={...l.value,fecha_regreso:g.value,incluye_lista:[...V.value],no_incluye_lista:[...k.value],imagenes_actuales:[...x.value]},e=JSON.stringify(a)!==JSON.stringify({...N.value,imagenes_actuales:N.value.imagenes_originales})||ee.value.length>0,o=!N.value.id,n=l.value.nombre||l.value.punto_salida||l.value.fecha_salida||g.value||l.value.precio||l.value.categoria||l.value.transporte_id||V.value.length>0||k.value.length>0||x.value.length>0;q.value=e||o&&n})},{deep:!0,flush:"post"}),Ye(()=>l.value.transporte_id,(a,e)=>{if(a&&a!==e&&P.value){const o=F.value.find(n=>n.id===a);if(o){const n=o.capacidad;l.value.cupo_min&&l.value.cupo_min>n&&(l.value.cupo_min=n),l.value.cupo_max&&l.value.cupo_max>n&&(l.value.cupo_max=n)}}});function pe(){l.value={id:null,nombre:"",categoria:null,incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,transporte_id:null,imagenes:[]},x.value=[],Z.value=[],ee.value=[],g.value=null,f.value=!1,V.value=[],k.value=[],R.value="",$.value=""}const Re=()=>{R.value.trim()&&(V.value.push(R.value.trim()),R.value="")},oa=a=>{V.value.splice(a,1)},$e=()=>{$.value.trim()&&(k.value.push($.value.trim()),$.value="")},sa=a=>{k.value.splice(a,1)},qe=a=>a?a.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],Be=a=>a.join("|");Ra(()=>{na(),ra(),typeof window<"u"&&window.addEventListener("resize",ze)});const ze=()=>{Ie.value=window.innerWidth};$a(()=>{typeof window<"u"&&window.removeEventListener("resize",ze)});const Ge=async()=>{ue.value=!0;try{const a=await W.get(ie);Y.value=a.data.map(e=>{var o,n,r;return{...e,imagenes:(e.imagenes||[]).map(p=>typeof p=="string"?p:p.nombre),transporte_nombre:((o=e.transporte)==null?void 0:o.nombre)||"",transporte_capacidad:((n=e.transporte)==null?void 0:n.capacidad)||"","transporte.nombre":(r=e.transporte)==null?void 0:r.nombre}}).sort((e,o)=>{const n=new Date(e.created_at);return new Date(o.created_at)-n})}catch{c.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los tours.",life:4e3})}finally{ue.value=!1}},na=async()=>{ue.value=!0,c.add({severity:"info",summary:"Cargando tours...",life:2e3});try{const a=await W.get(ie);Y.value=a.data.map(e=>{var o,n,r;return{...e,imagenes:(e.imagenes||[]).map(p=>typeof p=="string"?p:p.nombre),transporte_nombre:((o=e.transporte)==null?void 0:o.nombre)||"",transporte_capacidad:((n=e.transporte)==null?void 0:n.capacidad)||"","transporte.nombre":(r=e.transporte)==null?void 0:r.nombre}}).sort((e,o)=>{const n=new Date(e.created_at);return new Date(o.created_at)-n}),c.add({severity:"success",summary:"Tours cargados",life:2e3})}catch{c.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los tours.",life:4e3})}finally{ue.value=!1}},ra=async()=>{try{const a=await W.get("/api/transportes");F.value=a.data||[]}catch{F.value=[],c.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los transportes.",life:4e3})}},ia=()=>{_.value.categoria.value=de.value},ua=()=>{if(oe.value){const a=F.value.find(e=>e.id===oe.value);_.value["transporte.nombre"].value=a?a.nombre:null}else _.value["transporte.nombre"].value=null},da=()=>{_.value.estado.value=ce.value},fe=()=>{if(w.value&&C.value){const a=new Date(w.value),e=new Date(C.value);a>e&&(C.value=null,c.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'hasta' se limpió porque era anterior a la fecha 'desde'.",life:5e3}))}},ge=()=>{if(w.value&&C.value){const a=new Date(w.value);new Date(C.value)<a&&(w.value=null,c.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'desde' se limpió porque era posterior a la fecha 'hasta'.",life:5e3}))}},je=async()=>{U.value=!0;try{await new Promise(a=>setTimeout(a,300)),de.value=null,oe.value=null,ce.value=null,w.value=null,C.value=null,_.value.global.value=null,_.value.categoria.value=null,_.value["transporte.nombre"].value=null,_.value.estado.value=null,_.value.fecha_salida.value=null,c.add({severity:"success",summary:"Filtros limpiados",life:2e3})}finally{U.value=!1}},ca=()=>{te.value=!0},ma=()=>{pe(),se.value="Guardar",f.value=!1,P.value=!0,Te(()=>{N.value={...l.value,fecha_regreso:g.value,incluye_lista:[...V.value],no_incluye_lista:[...k.value],imagenes_originales:[...x.value]},q.value=!1})},va=a=>{var e;pe(),f.value=!1,l.value={...a,transporte_id:((e=a.transporte)==null?void 0:e.id)||a.transporte_id||null},a.fecha_salida&&(typeof a.fecha_salida=="string"?l.value.fecha_salida=new Date(a.fecha_salida):l.value.fecha_salida=a.fecha_salida),a.fecha_regreso&&(typeof a.fecha_regreso=="string"?g.value=new Date(a.fecha_regreso):g.value=a.fecha_regreso),x.value=(a.imagenes||[]).map(o=>typeof o=="string"?o:o.nombre),V.value=qe(a.incluye),k.value=qe(a.no_incluye),q.value=!1,se.value="Actualizar",P.value=!0,Te(()=>{N.value={...l.value,fecha_regreso:g.value,incluye_lista:[...V.value],no_incluye_lista:[...k.value],imagenes_originales:[...x.value]},q.value=!1})},pa=async()=>{if(f.value=!0,!g.value){c.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos.",life:4e3});return}if(!l.value.nombre||l.value.nombre.length<10||l.value.nombre.length>200){c.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos y cumplan los requisitos.",life:4e3});return}if(!l.value.punto_salida||l.value.punto_salida.length<5||l.value.punto_salida.length>200){c.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos y cumplan los requisitos.",life:4e3});return}if(j.value){c.add({severity:"warn",summary:"Error en cupo mínimo",detail:j.value,life:4e3});return}if(H.value){c.add({severity:"warn",summary:"Error en cupo máximo",detail:H.value,life:4e3});return}if(l.value.cupo_min&&l.value.cupo_max&&l.value.cupo_min>=l.value.cupo_max){c.add({severity:"warn",summary:"Verificar datos",detail:"Por favor revisa los valores ingresados y corrige cualquier inconsistencia.",life:4e3});return}if(!be()){c.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y asegúrate de que sean correctas.",life:4e3});return}if(!he()){c.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y asegúrate de que sean correctas.",life:4e3});return}if(!l.value.fecha_salida||!l.value.precio||!l.value.categoria||!l.value.transporte_id||!l.value.cupo_min||!l.value.cupo_max||x.value.length===0){c.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos.",life:4e3});return}if(x.value.length>5){c.add({severity:"warn",summary:"Demasiadas imágenes",detail:"No puedes subir más de 5 imágenes por tour.",life:4e3});return}const a=2*1024*1024;if(Z.value.filter(o=>o.size>a).length>0){c.add({severity:"warn",summary:"Verificar archivos",detail:"Por favor revisa el tamaño de las imágenes seleccionadas.",life:4e3});return}B.value=!0;try{const o=new FormData;o.append("nombre",l.value.nombre||""),V.value.length>0?o.append("incluye",Be(V.value)):o.append("incluye",""),o.append("punto_salida",l.value.punto_salida||""),l.value.fecha_salida instanceof Date?o.append("fecha_salida",l.value.fecha_salida.toISOString().slice(0,19).replace("T"," ")):l.value.fecha_salida&&o.append("fecha_salida",l.value.fecha_salida),g.value instanceof Date?o.append("fecha_regreso",g.value.toISOString().slice(0,19).replace("T"," ")):g.value&&o.append("fecha_regreso",g.value),o.append("precio",l.value.precio||""),o.append("categoria",l.value.categoria||""),o.append("transporte_id",l.value.transporte_id||""),k.value.length>0?o.append("no_incluye",Be(k.value)):o.append("no_incluye",""),l.value.cupo_min&&o.append("cupo_min",l.value.cupo_min),l.value.cupo_max&&o.append("cupo_max",l.value.cupo_max),Z.value.forEach(r=>o.append("imagenes[]",r)),ee.value.forEach(r=>{const p=r.includes("/")?r.split("/").pop():r;o.append("removed_images[]",p)});let n;l.value.id?(o.append("_method","PUT"),n=await W.post(`${ie}/${l.value.id}`,o,{headers:{"Content-Type":"multipart/form-data"}}),c.add({severity:"success",summary:"¡Éxito!",detail:"El tour ha sido actualizado correctamente.",life:5e3})):(n=await W.post(ie,o,{headers:{"Content-Type":"multipart/form-data"}}),c.add({severity:"success",summary:"¡Éxito!",detail:"El tour ha sido creado correctamente.",life:5e3})),await Ge(),P.value=!1,q.value=!1,N.value=null,pe()}catch{c.add({severity:"warn",summary:"Error de validación",detail:"Por favor revisa los campos e intenta nuevamente.",life:6e3})}finally{B.value=!1}},fa=a=>{l.value={...a},ae.value=!0},ga=async()=>{xe.value=!0;try{await W.delete(`${ie}/${l.value.id}`),await Ge(),ae.value=!1,c.add({severity:"success",summary:"¡Eliminado!",detail:"El tour ha sido eliminado correctamente.",life:5e3})}catch{c.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el tour. Inténtalo de nuevo.",life:5e3})}finally{xe.value=!1}},ba=()=>{q.value?le.value=!0:He()},He=()=>{P.value=!1,le.value=!1,q.value=!1,N.value=null,pe()},ha=()=>{le.value=!1},ya=async()=>{M.value=!0,await new Promise(a=>setTimeout(a,300)),Ue.value.click(),setTimeout(()=>{z.value||(M.value=!1)},1e3)},xa=async a=>{const e=a.target?a.target.files:a.files,o=2*1024*1024,n=5;if(M.value=!1,!e||e.length===0)return;const r=x.value.length,p=e.length;if(r+p>n){const A=n-r;c.add({severity:"warn",summary:"Límite de imágenes excedido",detail:`Solo puedes subir un máximo de ${n} imágenes por tour. Actualmente tienes ${r} imagen${r!==1?"es":""}, puedes agregar máximo ${A} más.`,life:6e3});return}z.value=!0;try{const A=[];let s=0;for(const y of e)if(y instanceof File){if(y.size>o){c.add({severity:"warn",summary:"Archivo muy grande",detail:`El archivo "${y.name}" excede el tamaño máximo de 2MB.`,life:5e3});continue}if(!y.type.startsWith("image/")){c.add({severity:"warn",summary:"Formato no válido",detail:`El archivo "${y.name}" no es una imagen válida.`,life:4e3});continue}Z.value.push(y),s++;const K=new Promise(Ua=>{const Xe=new FileReader;Xe.onload=Oa=>{x.value.push(Oa.target.result),Ua()},Xe.readAsDataURL(y)});A.push(K)}await Promise.all(A),s>0&&c.add({severity:"success",summary:"Imágenes cargadas",detail:`${s} imagen${s>1?"es":""} cargada${s>1?"s":""} correctamente. Total: ${x.value.length}/${n}`,life:4e3})}catch{c.add({severity:"error",summary:"Error al cargar imágenes",detail:"Hubo un problema al procesar las imágenes. Inténtalo de nuevo.",life:4e3})}finally{z.value=!1,M.value=!1,a.target&&(a.target.value="")}},_a=a=>{const e=x.value[a];typeof e=="string"&&e.startsWith("data:image")?(x.value.splice(a,1),Z.value.splice(a,1)):(ee.value.push(e),x.value.splice(a,1))},wa=a=>{if(S.value&&S.value.imagenes&&S.value.imagenes.length>0){Ce.value=S.value.imagenes.map(o=>{const n=typeof o=="string"?o:o.nombre;return Pe+n});const e=Math.max(0,Math.min(a,Ce.value.length-1));De.value=e,setTimeout(()=>{we.value=!0},50)}else c.add({severity:"warn",summary:"Sin imágenes",detail:"No hay imágenes disponibles para mostrar.",life:5e3})},Ca=()=>{l.value.nombre&&l.value.nombre.length>200&&(l.value.nombre=l.value.nombre.substring(0,200))},Da=()=>{l.value.punto_salida&&l.value.punto_salida.length>200&&(l.value.punto_salida=l.value.punto_salida.substring(0,200))},Ke=()=>{const a=F.value.find(r=>r.id===l.value.transporte_id),e=a?a.capacidad:null,o=parseInt(l.value.cupo_min)||0,n=parseInt(l.value.cupo_max)||0;return l.value.cupo_min&&o<1||l.value.cupo_max&&n<1||e&&(l.value.cupo_min&&o>e||l.value.cupo_max&&n>e)?!1:l.value.cupo_min&&!l.value.cupo_max||l.value.cupo_max&&!l.value.cupo_min?!0:!(l.value.cupo_min&&l.value.cupo_max&&o>=n)},be=()=>{if(!l.value.fecha_salida)return!0;const a=new Date,e=new Date(l.value.fecha_salida),o=new Date(a.getTime()+60*60*1e3);return!(e<o||g.value&&(new Date(g.value)-e)/(1e3*60*60)<1)},he=()=>{if(!g.value)return!0;const a=new Date(g.value);if(l.value.fecha_salida){const e=new Date(l.value.fecha_salida);if((a-e)/(1e3*60*60)<1)return!1}return!0},We=()=>{const a=new Date;return a.setHours(a.getHours()+1),a},ka=()=>{if(!l.value.fecha_salida)return We();const a=new Date(l.value.fecha_salida);return a.setHours(a.getHours()+1),a},Ia=()=>{if(!g.value)return null;const a=new Date(g.value);return a.setHours(a.getHours()-1),a},Ie=i(typeof window<"u"?window.innerWidth:1024),Ve=G(()=>Ie.value<640?{width:"95vw",maxWidth:"380px"}:Ie.value<768?{width:"400px"}:{width:"450px"}),Va=a=>{S.value=a,L.value=!0},Ta=a=>{c.add({severity:"info",summary:"Duplicar Tour",detail:`Funcionalidad de duplicar tour "${a.nombre}" en desarrollo.`,life:5e3}),L.value=!1},Ea=a=>{L.value=!1,S.value=a,ve.value=!0},Fa=a=>{c.add({severity:"info",summary:"Generar Reporte",detail:`Funcionalidad de generar reporte del tour "${a.nombre}" en desarrollo.`,life:5e3}),L.value=!1},Sa=a=>{c.add({severity:"info",summary:"Archivar Tour",detail:`Funcionalidad de archivar tour "${a.nombre}" en desarrollo.`,life:5e3}),L.value=!1},Aa=a=>{L.value=!1,S.value=a,me.value=!0},Pa=a=>{a.originalEvent.target.closest("button")||(S.value=a.data,me.value=!0)},La=async a=>{const e=Y.value.findIndex(o=>o.id===a.id);e!==-1&&(Y.value[e]=a),ve.value=!1},Je=a=>{const e=a.target.value,o=a.key;if([8,9,27,13,46,35,36,37,38,39,40].includes(a.keyCode)||a.ctrlKey&&[65,67,86,88].includes(a.keyCode))return;if(!/[0-9]/.test(o)){a.preventDefault();return}const n=e+o,r=parseInt(n),p=O.value;if(n==="0"||e===""&&o==="0"){a.preventDefault();return}if(n.length>3||r>p||r<1){a.preventDefault();return}},Qe=a=>{a.preventDefault();const o=(a.clipboardData||window.clipboardData).getData("text").replace(/[^0-9]/g,"");if(o){let n=parseInt(o);const r=O.value;n<1?n=1:n>r&&(n=r),a.target.id.includes("cupo_min")?l.value.cupo_min=n:a.target.id.includes("cupo_max")&&(l.value.cupo_max=n)}},Na=a=>{const e=a.target.value,o=a.key;if([8,9,27,13,46,35,36,37,38,39,40].includes(a.keyCode)||a.ctrlKey&&[65,67,86,88].includes(a.keyCode))return;if(!/[0-9.]/.test(o)){a.preventDefault();return}if(o==="."&&e.includes(".")){a.preventDefault();return}if(o!=="."){const p=e.split(".");if(p[0].length>=4&&!e.includes(".")){a.preventDefault();return}if(p.length>1&&p[1].length>=2){a.preventDefault();return}}const n=e+o;if(parseFloat(n)>9999.99){a.preventDefault();return}},Ma=a=>{a.preventDefault();let o=(a.clipboardData||window.clipboardData).getData("text").replace(/[^\d.]/g,"");if(!o||o===".")return;if((o.match(/\./g)||[]).length>1){const A=o.indexOf(".");o=o.substring(0,A+1)+o.substring(A+1).replace(/\./g,"")}const r=parseFloat(o);if(isNaN(r))return;const ne=Math.min(r,9999.99).toFixed(2);l.precio=ne,a.target.value=ne};return(a,e)=>{const o=J("Toast"),n=J("InputText"),r=J("Select"),p=J("Column"),ne=J("DataTable"),A=J("Dialog");return m(),Ee(Ga,null,{default:T(()=>[u(d(qa),{title:"Tours"}),u(o,{class:"z-[9999]"}),t("div",Za,[e[56]||(e[56]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Catálogo de Tours"),t("p",{class:"text-gray-600"},"Gestión completa de paquetes turísticos")],-1)),t("div",el,[t("div",al,[e[31]||(e[31]=t("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Lista de Tours",-1)),t("div",ll,[u(d(Ba),{href:a.route("transportes"),onClick:ca,class:D([{"opacity-50 cursor-not-allowed":te.value},"bg-blue-500 border border-blue-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 flex items-center gap-2"])},{default:T(()=>[u(d(I),{icon:te.value?d(X):d(Ha),class:D({"animate-spin":te.value,"h-4":!0})},null,8,["icon","class"]),t("span",null,b(te.value?"Cargando...":"Control Transportes"),1)]),_:1},8,["href","class"]),t("button",{class:"bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:ma},[u(d(I),{icon:d(ye),class:"h-4 w-4 mr-1 text-white"},null,8,["icon"]),e[30]||(e[30]=t("span",null," Agregar Tour",-1))])])]),u(ne,{value:ke.value,selection:Le.value,"onUpdate:selection":e[8]||(e[8]=s=>Le.value=s),dataKey:"id",paginator:!0,rows:_e.value,rowsPerPageOptions:la.value,rowsPerPage:_e.value,"onUpdate:rowsPerPage":e[9]||(e[9]=s=>_e.value=s),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} tours",class:"overflow-x-auto max-w-full px-auto",onRowClick:Pa,responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:T(()=>[t("div",tl,[t("div",ol,[t("div",sl,[e[32]||(e[32]=t("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[t("i",{class:"pi pi-filter text-blue-600 text-sm"}),t("span",null,"Filtros")],-1)),t("div",nl,b(ke.value.length)+" resultado"+b(ke.value.length!==1?"s":""),1),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:je,disabled:U.value},[U.value?(m(),Ee(d(I),{key:0,icon:d(X),class:"animate-spin h-3 w-3"},null,8,["icon"])):h("",!0),t("span",null,b(U.value?"Limpiando...":"Limpiar filtros"),1)],8,rl)]),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:je,disabled:U.value},[U.value?(m(),Ee(d(I),{key:0,icon:d(X),class:"animate-spin h-3 w-3"},null,8,["icon"])):h("",!0),t("span",null,b(U.value?"Limpiando...":"Limpiar filtros"),1)],8,il)]),t("div",ul,[t("div",null,[u(n,{modelValue:_.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=s=>_.value.global.value=s),placeholder:"🔍 Buscar tours...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),t("div",dl,[t("div",null,[u(r,{modelValue:de.value,"onUpdate:modelValue":e[1]||(e[1]=s=>de.value=s),options:Ne.value,optionLabel:"label",optionValue:"value",placeholder:"Categoría",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onChange:ia,clearable:!0},null,8,["modelValue","options"])]),t("div",null,[u(r,{modelValue:oe.value,"onUpdate:modelValue":e[2]||(e[2]=s=>oe.value=s),options:F.value,optionLabel:"nombre",optionValue:"id",placeholder:"Transporte",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onChange:ua,clearable:!0},null,8,["modelValue","options"])]),t("div",null,[u(r,{modelValue:ce.value,"onUpdate:modelValue":e[3]||(e[3]=s=>ce.value=s),options:Me.value,optionLabel:"label",optionValue:"value",placeholder:"Estado",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onChange:da,clearable:!0},null,8,["modelValue","options"])]),t("div",cl,[u(d(Q),{modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=s=>w.value=s),placeholder:"Fecha desde",class:"w-full h-9 text-sm rounded-md border border-blue-300",onDateSelect:fe,onClear:fe,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:C.value},null,8,["modelValue","maxDate"])]),t("div",ml,[u(d(Q),{modelValue:C.value,"onUpdate:modelValue":e[5]||(e[5]=s=>C.value=s),placeholder:"Fecha hasta",class:"w-full h-9 text-sm rounded-md border border-blue-300",onDateSelect:ge,onClear:ge,showIcon:!0,dateFormat:"dd/mm/yy",minDate:w.value},null,8,["modelValue","minDate"])]),t("div",vl,[u(d(Q),{modelValue:w.value,"onUpdate:modelValue":e[6]||(e[6]=s=>w.value=s),placeholder:"Fecha desde",class:"h-9 text-sm rounded-md",onDateSelect:fe,onClear:fe,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:C.value},null,8,["modelValue","maxDate"]),u(d(Q),{modelValue:C.value,"onUpdate:modelValue":e[7]||(e[7]=s=>C.value=s),placeholder:"Fecha hasta",class:"h-9 text-sm rounded-md",onDateSelect:ge,onClear:ge,showIcon:!0,dateFormat:"dd/mm/yy",minDate:w.value},null,8,["modelValue","minDate"])])])])])]),default:T(()=>[u(p,{field:"nombre",header:"Nombre",sortable:"",class:"w-36 min-w-24"},{body:T(s=>[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"85px","text-overflow":"ellipsis","white-space":"nowrap"},title:s.data.nombre},b(s.data.nombre),9,pl)]),_:1}),u(p,{field:"punto_salida",header:"Punto salida",class:"w-32 min-w-32 hidden md:table-cell"},{body:T(s=>[t("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"128px","text-overflow":"ellipsis","white-space":"nowrap"},title:s.data.punto_salida},b(s.data.punto_salida),9,fl)]),_:1}),u(p,{field:"fecha_salida",header:"Fecha salida",class:"w-36 min-w-36 hidden md:table-cell"},{body:T(s=>[t("div",gl,b(s.data.fecha_salida?new Date(s.data.fecha_salida).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):""),1)]),_:1}),u(p,{field:"precio",header:"Precio",class:"w-24 min-w-18"},{body:T(s=>[t("div",bl,b(isNaN(Number(s.data.precio))?"":`$${Number(s.data.precio).toFixed(2)}`),1)]),_:1}),u(p,{field:"estado",header:"Estado",class:"w-32 min-w-24 hidden lg:table-cell"},{body:T(s=>{var y;return[t("span",{class:D([{"bg-green-100 text-green-800":s.data.estado==="DISPONIBLE","bg-red-100 text-red-800":s.data.estado==="AGOTADO"||s.data.estado==="CANCELADO","bg-blue-100 text-blue-800":s.data.estado==="EN_CURSO","bg-gray-100 text-gray-800":s.data.estado==="COMPLETADO","bg-orange-100 text-orange-800":s.data.estado==="SUSPENDIDO","bg-purple-100 text-purple-800":s.data.estado==="REPROGRAMADO"},"px-2 py-1 rounded-full text-xs font-medium"])},b(((y=Me.value.find(K=>K.value===s.data.estado))==null?void 0:y.label)||s.data.estado),3)]}),_:1}),u(p,{exportable:!1,class:"w-52 min-w-36"},{header:T(()=>e[33]||(e[33]=[t("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:T(s=>[t("div",hl,[t("button",{class:"flex bg-green-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:y=>Va(s.data),title:"Más acciones"},[u(d(I),{icon:d(Ka),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[34]||(e[34]=t("span",{class:"hidden md:block text-white"},"Más",-1))],8,yl),t("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:y=>va(s.data)},[u(d(I),{icon:d(Wa),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[35]||(e[35]=t("span",{class:"hidden md:block text-white"},"Editar",-1))],8,xl),t("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:y=>fa(s.data)},[u(d(I),{icon:d(Ja),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[36]||(e[36]=t("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,_l)])]),_:1})]),_:1},8,["value","selection","rows","rowsPerPageOptions","rowsPerPage"]),u(A,{visible:P.value,"onUpdate:visible":e[21]||(e[21]=s=>P.value=s),header:se.value+" Tour",modal:!0,style:za(Ve.value),closable:!1,draggable:!1},{footer:T(()=>[t("div",Lt,[t("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:pa,disabled:B.value||!!j.value||!!H.value},[u(d(I),{icon:B.value?d(X):d(Qa),class:D(["h-5 text-white",{"animate-spin":B.value}])},null,8,["icon","class"]),B.value?(m(),v("span",Ut,b(se.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(m(),v("span",Mt,b(se.value),1))],8,Nt),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:ba,disabled:B.value},[u(d(I),{icon:d(Ae),class:"h-5"},null,8,["icon"]),e[55]||(e[55]=E("Cancelar "))],8,Ot)])]),default:T(()=>[t("div",wl,[t("div",Cl,[t("div",Dl,[e[37]||(e[37]=t("label",{for:"nombre",class:"flex items-center gap-1"},[E("Tour: "),t("span",{class:"text-red-500 font-bold"},"*")],-1)),u(n,{modelValue:l.value.nombre,"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.nombre=s),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:200,class:D([{"p-invalid":f.value&&(!l.value.nombre||l.value.nombre.length<10||l.value.nombre.length>200)},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"Tour al Cerro El Pital, etc",onInput:Ca},null,8,["modelValue","class"])]),l.value.nombre&&l.value.nombre.length<10?(m(),v("small",kl," El nombre debe tener al menos 10 caracteres. Actual: "+b(l.value.nombre.length)+"/10 ",1)):h("",!0),l.value.nombre&&l.value.nombre.length>=180&&l.value.nombre.length<=200?(m(),v("small",Il," Caracteres restantes: "+b(200-l.value.nombre.length)+". ",1)):h("",!0),f.value&&!l.value.nombre?(m(),v("small",Vl," El nombre es obligatorio. ")):h("",!0)]),t("div",Tl,[t("div",El,[e[38]||(e[38]=t("label",{for:"incluye",class:"w-12 flex items-center gap-1 mt-2"}," Incluye: ",-1)),t("div",Fl,[t("div",Sl,[Ze(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>R.value=s),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",onKeyup:ea(Re,["enter"])},null,544),[[aa,R.value]]),t("button",{type:"button",onClick:Re,disabled:!R.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[u(d(I),{icon:d(ye),class:"h-5"},null,8,["icon"])],8,Al)]),t("div",Pl,[(m(!0),v(Fe,null,Se(V.value,(s,y)=>(m(),v("div",{key:y,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[t("span",Ll,b(s),1),t("button",{type:"button",onClick:K=>oa(y),class:"text-red-500 hover:text-red-700 p-1"},[u(d(I),{icon:d(Ae),class:"h-5"},null,8,["icon"])],8,Nl)]))),128))]),V.value.length===0?(m(),v("div",Ml," Sin elementos agregados. ")):h("",!0)])])]),t("div",Ul,[t("div",Ol,[e[39]||(e[39]=t("label",{for:"no_incluye",class:"w-12 flex items-center gap-1 mt-2"}," No incluye: ",-1)),t("div",Rl,[t("div",$l,[Ze(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>$.value=s),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",onKeyup:ea($e,["enter"])},null,544),[[aa,$.value]]),t("button",{type:"button",onClick:$e,disabled:!$.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[u(d(I),{icon:d(ye),class:"h-5"},null,8,["icon"])],8,ql)]),k.value.length>0?(m(),v("div",Bl,[(m(!0),v(Fe,null,Se(k.value,(s,y)=>(m(),v("div",{key:y,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[t("span",zl,b(s),1),t("button",{type:"button",onClick:K=>sa(y),class:"text-red-500 hover:text-red-700 p-1"},[u(d(I),{icon:d(Ae),class:"h-5"},null,8,["icon"])],8,Gl)]))),128))])):h("",!0),k.value.length===0?(m(),v("div",jl," Sin elementos agregados. ")):h("",!0)])])]),t("div",Hl,[t("div",Kl,[e[40]||(e[40]=t("label",{for:"punto_salida",class:"flex w-12 items-center"},[E(" Punto salida: "),t("span",{class:"text-red-500 font-bold"}," * ")],-1)),u(n,{modelValue:l.value.punto_salida,"onUpdate:modelValue":e[13]||(e[13]=s=>l.value.punto_salida=s),modelModifiers:{trim:!0},id:"punto_salida",name:"punto_salida",maxlength:200,class:D([{"p-invalid":f.value&&(!l.value.punto_salida||l.value.punto_salida.length<5)},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"Atrio de Chalatenango, etc",onInput:Da},null,8,["modelValue","class"])]),l.value.punto_salida&&l.value.punto_salida.length<5?(m(),v("small",Wl,"Debe tener al menos 5 caracteres. Actual: "+b(l.value.punto_salida.length)+"/5",1)):h("",!0),l.value.punto_salida&&l.value.punto_salida.length>=180&&l.value.punto_salida.length<=200?(m(),v("small",Jl,"Caracteres restantes: "+b(200-l.value.punto_salida.length),1)):h("",!0),f.value&&!l.value.punto_salida?(m(),v("small",Ql,"El punto de salida es obligatorio.")):h("",!0),f.value&&l.value.punto_salida&&l.value.punto_salida.length<5?(m(),v("small",Xl,"El punto de salida debe tener al menos 5 caracteres.")):h("",!0)]),t("div",Yl,[t("div",Zl,[t("label",et,[e[41]||(e[41]=E(" Cupo mínimo: ")),e[42]||(e[42]=t("span",{class:"text-red-500 font-bold"},"*",-1)),l.value.transporte_id?(m(),v("small",at,"(Máx: "+b(O.value)+")",1)):h("",!0)]),u(n,{modelValue:l.value.cupo_min,"onUpdate:modelValue":e[14]||(e[14]=s=>l.value.cupo_min=s),id:"cupo_min",name:"cupo_min",type:"number",inputmode:"numeric",min:"1",max:O.value,class:D(["w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":f.value&&!l.value.cupo_min||j.value}]),placeholder:`1-${O.value}`,onKeydown:Je,onPaste:Qe,onInput:Ke},null,8,["modelValue","max","class","placeholder"]),f.value&&!l.value.cupo_min?(m(),v("small",lt,"El cupo mínimo es obligatorio.")):h("",!0),j.value?(m(),v("small",tt,b(j.value),1)):h("",!0)]),t("div",ot,[t("label",st,[e[43]||(e[43]=E(" Cupo máximo: ")),e[44]||(e[44]=t("span",{class:"text-red-500 font-bold"},"*",-1)),l.value.transporte_id?(m(),v("small",nt,"(Máx: "+b(O.value)+")",1)):h("",!0)]),u(n,{modelValue:l.value.cupo_max,"onUpdate:modelValue":e[15]||(e[15]=s=>l.value.cupo_max=s),id:"cupo_max",name:"cupo_max",type:"number",inputmode:"numeric",min:"1",max:O.value,class:D(["w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":f.value&&!l.value.cupo_max||H.value}]),placeholder:`1-${O.value}`,onKeydown:Je,onPaste:Qe,onInput:Ke},null,8,["modelValue","max","class","placeholder"]),f.value&&!l.value.cupo_max?(m(),v("small",rt,"El cupo máximo es obligatorio.")):h("",!0),H.value?(m(),v("small",it,b(H.value),1)):h("",!0)])]),t("div",ut,[t("div",dt,[e[45]||(e[45]=t("label",{for:"fecha_salida",class:"flex items-center gap-1 mb-2"},[E("Fecha y hora de salida:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),u(d(Q),{modelValue:l.value.fecha_salida,"onUpdate:modelValue":e[16]||(e[16]=s=>l.value.fecha_salida=s),id:"fecha_salida",name:"fecha_salida",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:We(),maxDate:Ia(),class:D([{"p-invalid":f.value&&!l.value.fecha_salida||l.value.fecha_salida&&!be()},"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),manualInput:!1,onDateSelect:be,onInput:be},null,8,["modelValue","minDate","maxDate","class"]),f.value&&!l.value.fecha_salida?(m(),v("small",ct,"Fecha y hora de salida requerida.")):h("",!0)]),t("div",mt,[e[46]||(e[46]=t("label",{for:"horaRegresoCalendar",class:"flex items-center gap-1 mb-2"},[E("Fecha y hora regreso:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),u(d(Q),{modelValue:g.value,"onUpdate:modelValue":e[17]||(e[17]=s=>g.value=s),id:"horaRegresoCalendar",name:"horaRegresoCalendar",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:ka(),manualInput:!1,class:D([{"p-invalid":f.value&&!g.value||g.value&&!he()},"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),onDateSelect:he,onInput:he},null,8,["modelValue","minDate","class"]),f.value&&!g.value?(m(),v("small",vt,"Fecha y hora de regreso requerida.")):h("",!0)])]),t("div",pt,[t("div",ft,[e[48]||(e[48]=t("label",{for:"precio",class:"w-24 flex items-center gap-1"},[E("Precio:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),t("div",gt,[e[47]||(e[47]=t("span",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"},"$",-1)),u(n,{modelValue:l.value.precio,"onUpdate:modelValue":e[18]||(e[18]=s=>l.value.precio=s),id:"precio",name:"precio",type:"text",inputmode:"decimal",class:D(["w-full pl-8 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":f.value&&(!l.value.precio||l.value.precio<.01||l.value.precio>9999.99)}]),placeholder:"0.00",onKeydown:Na,onPaste:Ma},null,8,["modelValue","class"])])]),f.value&&(l.value.precio==null||l.value.precio<.01||l.value.precio>9999.99)?(m(),v("small",bt,"El precio es obligatorio, debe ser mayor o igual a 0.01 y menor o igual a 9999.99.")):h("",!0)]),t("div",ht,[t("div",yt,[e[49]||(e[49]=t("label",{for:"categoria",class:"w-24 flex items-center gap-1"},[E("Categoría:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),u(r,{modelValue:l.value.categoria,"onUpdate:modelValue":e[19]||(e[19]=s=>l.value.categoria=s),options:Ne.value,optionLabel:"label",optionValue:"value",id:"categoria",name:"categoria",class:D(["w-full rounded-md border-2 border-gray-400 hover:border-gray-500",{"p-invalid":f.value&&!l.value.categoria}]),placeholder:"Seleccionar"},null,8,["modelValue","options","class"])]),f.value&&!l.value.categoria?(m(),v("small",xt,"La categoría es obligatoria.")):h("",!0)]),t("div",_t,[t("div",wt,[e[50]||(e[50]=t("label",{for:"transporte_id",class:"w-24 flex items-center gap-1"},[E("Transporte:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),u(r,{modelValue:l.value.transporte_id,"onUpdate:modelValue":e[20]||(e[20]=s=>l.value.transporte_id=s),options:F.value,optionLabel:"nombre",optionValue:"id",id:"transporte_id",name:"transporte_id",class:D(["w-full rounded-md border-2 border-gray-400 hover:border-gray-500",{"p-invalid":f.value&&!l.value.transporte_id}]),placeholder:"Seleccionar"},null,8,["modelValue","options","class"])]),f.value&&!l.value.transporte_id?(m(),v("small",Ct,"El tipo de transporte es obligatorio.")):h("",!0)]),t("div",Dt,[t("div",kt,[e[53]||(e[53]=t("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},[E("Imágenes:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),t("div",It,[t("div",Vt,[t("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:xa,class:"hidden",ref_key:"fileInput",ref:Ue},null,544),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 outline-none focus:outline-none active:outline-none disabled:opacity-50 disabled:cursor-not-allowed",onClick:ya,disabled:z.value||M.value||!Oe.value},[u(d(I),{icon:z.value?d(X):M.value?d(X):d(ye),class:D({"animate-spin":z.value||M.value})},null,8,["icon","class"]),E(" "+b(ta.value),1)],8,Tt),t("div",Et,[t("span",{class:D(["text-sm font-medium",x.value.length>=5?"text-red-600":"text-gray-600"])},b(x.value.length)+"/5 ",3),e[51]||(e[51]=t("span",{class:"text-xs text-gray-500"},"imágenes",-1))])]),e[52]||(e[52]=t("div",{class:"text-xs text-gray-500 mb-2"}," Máximo 5 imágenes por tour • Formatos: JPG, PNG, GIF • Tamaño máximo: 2MB por imagen ",-1))])]),f.value&&x.value.length===0?(m(),v("small",Ft,"Las imágenes son obligatorias (al menos una).")):h("",!0)]),t("div",St,[(m(!0),v(Fe,null,Se(x.value,(s,y)=>(m(),v("div",{key:y,class:"relative w-24 sm:w-28 h-24 sm:h-28"},[t("img",{src:s.startsWith("data:image")?s:Pe+s,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,At),t("button",{onClick:K=>_a(y),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow",style:{transform:"translate(50%, -50%)"}},e[54]||(e[54]=[t("i",{class:"pi pi-times text-xs"},null,-1)]),8,Pt)]))),128))])])]),_:1},8,["visible","header","style"]),u(Xa,{visible:L.value,"onUpdate:visible":e[22]||(e[22]=s=>L.value=s),"details-visible":me.value,"onUpdate:detailsVisible":e[23]||(e[23]=s=>me.value=s),"carousel-visible":we.value,"onUpdate:carouselVisible":e[24]||(e[24]=s=>we.value=s),"delete-visible":ae.value,"onUpdate:deleteVisible":e[25]||(e[25]=s=>ae.value=s),"unsaved-changes-visible":le.value,"onUpdate:unsavedChangesVisible":e[26]||(e[26]=s=>le.value=s),"carousel-index":De.value,"onUpdate:carouselIndex":e[27]||(e[27]=s=>De.value=s),tour:S.value||l.value,"dialog-style":Ve.value,"selected-images":Ce.value,"image-path":Pe,"is-deleting":xe.value,onDuplicate:Ta,onChangeStatus:Ea,onGenerateReport:Fa,onArchive:Sa,onDeleteTour:ga,onCancelDelete:e[28]||(e[28]=()=>ae.value=!1),onCloseWithoutSaving:He,onContinueEditing:ha,onViewDetails:Aa,onOpenImageModal:wa},null,8,["visible","details-visible","carousel-visible","delete-visible","unsaved-changes-visible","carousel-index","tour","dialog-style","selected-images","is-deleting"]),u(Ya,{visible:ve.value,"onUpdate:visible":e[29]||(e[29]=s=>ve.value=s),tour:S.value,"dialog-style":Ve.value,onEstadoActualizado:La},null,8,["visible","tour","dialog-style"])])])]),_:1})}}};export{Kt as default};
