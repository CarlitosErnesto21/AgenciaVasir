import{q as H,af as J,r as p,i as h,s as K,y as E,p as O,o as g,w as D,a as r,b as e,c as _,f as A,u as i,S as Q,h as W,t as n,j as M,M as N,A as X,B as Y,e as Z,E as b}from"./app-WKwrJkJC.js";import{s as ee,_ as te}from"./AuthenticatedLayout-baeqBx4a.js";import{F as v,f as se,w as L,v as oe,D as $}from"./index-Cz7jU3Cp.js";import"./logo-DN1bLr27.js";const ae={class:"py-12"},ie={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},re={class:"p-6 bg-white border-b border-gray-200"},ne={class:"flex justify-between items-center"},de={class:"flex items-center space-x-4"},ce={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},ue={class:"bg-white overflow-hidden shadow sm:rounded-lg"},pe={class:"p-5"},me={class:"flex items-center"},xe={class:"flex-shrink-0"},ve={class:"ml-5 w-0 flex-1"},fe={class:"text-lg font-medium text-gray-900"},ge={class:"bg-white overflow-hidden shadow sm:rounded-lg"},ye={class:"p-5"},he={class:"flex items-center"},_e={class:"flex-shrink-0"},be={class:"ml-5 w-0 flex-1"},we={class:"text-lg font-medium text-gray-900"},Te={class:"bg-white overflow-hidden shadow sm:rounded-lg"},Ce={class:"p-5"},ke={class:"flex items-center"},Ee={class:"flex-shrink-0"},De={class:"ml-5 w-0 flex-1"},Ae={class:"text-lg font-medium text-gray-900"},Me={class:"bg-white shadow overflow-hidden sm:rounded-lg"},Ne={class:"px-4 py-5 sm:p-6"},Le={class:"mb-4"},$e={class:"overflow-x-auto"},je={class:"min-w-full divide-y divide-gray-200"},Be={class:"bg-white divide-y divide-gray-200"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Se={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"flex items-center"},Ie={class:"text-sm font-medium text-gray-900"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ze={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},qe={class:"flex space-x-2"},Ge=["onClick"],Pe=["onClick"],Re={key:0,class:"text-center py-8"},He={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Je={class:"bg-white rounded-lg p-6 w-96 max-w-full mx-4"},Ke={class:"text-lg font-semibold mb-4"},Oe={class:"flex justify-end space-x-3 pt-4"},Qe=["disabled"],et={__name:"TiposDocumento",props:{tipoDocumentos:Array},setup(j){const B=j,d=H(),F=J(),y=p(""),m=p(!1),w=p(!1),f=p(null),c=p(!1),l=p(B.tipoDocumentos||[]),x=p({nombre:""}),k=h(()=>l.value.filter(s=>!y.value||s.nombre.toLowerCase().includes(y.value.toLowerCase()))),S=h(()=>l.value.length),V=h(()=>l.value.filter(s=>s.clientes_count>0).length),I=h(()=>l.value.filter(s=>(s.clientes_count||0)===0).length),U=async()=>{try{const s=await b.get("/api/tipo-documentos");s.data.success&&(l.value=s.data.tipos)}catch{d.add({severity:"error",summary:"Error",detail:"Error al cargar los tipos de documento",life:3e3})}},z=async()=>{var s,t;c.value=!0;try{const a=await b.post("/api/tipo-documentos",x.value);a.data.success&&(l.value.push(a.data.tipo_documento),T(),d.add({severity:"success",summary:"Éxito",detail:"Tipo de documento creado exitosamente",life:3e3}))}catch(a){d.add({severity:"error",summary:"Error",detail:((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Error al crear el tipo de documento",life:3e3})}finally{c.value=!1}},q=s=>{f.value=s,x.value={nombre:s.nombre},w.value=!0},G=async()=>{var s,t;if(f.value){c.value=!0;try{const a=await b.put(`/api/tipo-documentos/${f.value.id}`,x.value);if(a.data.success){const u=l.value.findIndex(o=>o.id===f.value.id);u!==-1&&(l.value[u]=a.data.tipo_documento),T(),d.add({severity:"success",summary:"Éxito",detail:"Tipo de documento actualizado exitosamente",life:3e3})}}catch(a){d.add({severity:"error",summary:"Error",detail:((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Error al actualizar el tipo de documento",life:3e3})}finally{c.value=!1}}},P=async s=>{F.require({message:"¿Está seguro de eliminar este tipo de documento? Esta acción no se puede deshacer.",header:"Confirmación de Eliminación",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",acceptLabel:"Aceptar",rejectLabel:"Cancelar",accept:async()=>{var t,a;try{if((await b.delete(`/api/tipo-documentos/${s.id}`)).data.success){const o=l.value.findIndex(C=>C.id===s.id);o!==-1&&l.value.splice(o,1),d.add({severity:"success",summary:"Éxito",detail:"Tipo de documento eliminado exitosamente",life:3e3})}}catch(u){d.add({severity:"error",summary:"Error",detail:((a=(t=u.response)==null?void 0:t.data)==null?void 0:a.message)||"Error al eliminar el tipo de documento",life:3e3})}}})},T=()=>{m.value=!1,w.value=!1,f.value=null,c.value=!1,x.value={nombre:""}},R=s=>new Date(s).toLocaleDateString("es-ES");return K(()=>{l.value.length===0&&U()}),(s,t)=>{const a=E("Toast"),u=E("ConfirmDialog");return g(),O(te,null,{default:D(()=>[r(a),r(u),e("div",ae,[e("div",ie,[e("div",le,[e("div",re,[e("div",ne,[e("div",de,[r(i(Q),{href:i(ee)("clientes"),class:"flex items-center text-gray-600 hover:text-red-600 transition-colors duration-200 p-2 rounded-lg hover:bg-gray-100",title:"Regresar a Clientes"},{default:D(()=>[r(i(v),{icon:i(se),class:"h-5 w-5"},null,8,["icon"])]),_:1},8,["href"]),t[4]||(t[4]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Tipos de Documento"),e("p",{class:"mt-1 text-sm text-gray-500"}," Gestiona los tipos de documentos disponibles para los clientes ")],-1))]),e("button",{onClick:t[0]||(t[0]=o=>m.value=!0),class:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2"},t[5]||(t[5]=[e("i",{class:"pi pi-plus"},null,-1),W(" Agregar Tipo ")]))])])]),e("div",ce,[e("div",ue,[e("div",pe,[e("div",me,[e("div",xe,[r(i(v),{icon:i(L),class:"h-6 w-6 text-blue-600"},null,8,["icon"])]),e("div",ve,[e("dl",null,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total de Tipos",-1)),e("dd",fe,n(S.value),1)])])])])]),e("div",ge,[e("div",ye,[e("div",he,[e("div",_e,[r(i(v),{icon:i(oe),class:"h-6 w-6 text-green-600"},null,8,["icon"])]),e("div",be,[e("dl",null,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"En Uso",-1)),e("dd",we,n(V.value),1)])])])])]),e("div",Te,[e("div",Ce,[e("div",ke,[e("div",Ee,[r(i(v),{icon:i($),class:"h-6 w-6 text-yellow-600"},null,8,["icon"])]),e("div",De,[e("dl",null,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Disponibles",-1)),e("dd",Ae,n(I.value),1)])])])])])]),e("div",Me,[e("div",Ne,[e("div",Le,[M(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>y.value=o),type:"text",placeholder:"Buscar tipos de documento...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"},null,512),[[N,y.value]])]),e("div",$e,[e("table",je,[t[11]||(t[11]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ID "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha de Creación "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ")])],-1)),e("tbody",Be,[(g(!0),_(X,null,Y(k.value,o=>(g(),_("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Fe,n(o.id),1),e("td",Se,[e("div",Ve,[r(i(v),{icon:i(L),class:"h-5 w-5 text-gray-400 mr-2"},null,8,["icon"]),e("div",Ie,n(o.nombre),1)])]),e("td",Ue,n(R(o.created_at)),1),e("td",ze,[e("div",qe,[e("button",{onClick:C=>q(o),class:"text-blue-600 hover:text-blue-900 p-1",title:"Editar"},t[9]||(t[9]=[e("i",{class:"pi pi-pencil"},null,-1)]),8,Ge),e("button",{onClick:C=>P(o),class:"text-red-600 hover:text-red-900 p-1",title:"Eliminar"},t[10]||(t[10]=[e("i",{class:"pi pi-trash"},null,-1)]),8,Pe)])])]))),128))])])]),k.value.length===0?(g(),_("div",Re,[r(i(v),{icon:i($),class:"h-12 w-12 text-gray-400 mx-auto mb-4"},null,8,["icon"]),t[12]||(t[12]=e("p",{class:"text-gray-500"},"No se encontraron tipos de documento",-1))])):A("",!0)])])])]),m.value||w.value?(g(),_("div",He,[e("div",Je,[e("h3",Ke,n(m.value?"Crear Nuevo Tipo de Documento":"Editar Tipo de Documento"),1),e("form",{onSubmit:t[3]||(t[3]=Z(o=>m.value?z():G(),["prevent"])),class:"space-y-4"},[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre del Tipo",-1)),M(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>x.value.nombre=o),type:"text",required:"",maxlength:"20",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Ej: Cédula, Pasaporte, etc."},null,512),[[N,x.value.nombre]]),t[14]||(t[14]=e("small",{class:"text-gray-500"},"Máximo 20 caracteres",-1))]),e("div",Oe,[e("button",{type:"button",onClick:T,class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancelar "),e("button",{type:"submit",disabled:c.value,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 transition-colors duration-200"},n(c.value?"Guardando...":m.value?"Crear Tipo":"Actualizar Tipo"),9,Qe)])],32)])])):A("",!0)]),_:1})}}};export{et as default};
