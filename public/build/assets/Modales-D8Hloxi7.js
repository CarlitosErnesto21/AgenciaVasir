import{A as r,g as x}from"./ui-CyD9Ijjf.js";import{o as B,a as le,b as M,e as N,c as oe,d as k,g as U,k as O,h as ae}from"./index-DRTZt2OH.js";import ie from"./ActualizarStock-CfQKrQCd.js";import{E as f,r as ne,w as T,c as g,d as b,p as n,x as m,e,q as v,t as c,$ as s,A as y,j as C,y as w,F as S,l as $}from"./vendor-BiysG-4G.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const de={class:"space-y-4"},re={class:"text-center mb-4"},ce={class:"text-lg font-semibold text-gray-800"},ue={class:"text-blue-600"},ge={class:"grid grid-cols-1 gap-3"},be={class:"flex justify-center w-full"},me={key:0,class:"space-y-4"},pe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},fe={class:"bg-gray-50 p-3 rounded-lg"},ve={class:"text-sm text-gray-900 mt-1"},xe={class:"bg-gray-50 p-3 rounded-lg"},ye={class:"text-sm text-gray-900 mt-1"},he={class:"bg-gray-50 p-3 rounded-lg"},ke={class:"text-sm text-gray-900 mt-1 font-semibold"},we={class:"bg-gray-50 p-3 rounded-lg"},Se={class:"mt-1"},Ce={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ie={class:"bg-gray-50 p-3 rounded-lg"},Ve={class:"text-sm text-gray-900 mt-1 font-semibold"},De={class:"bg-gray-50 p-3 rounded-lg"},je={class:"text-sm text-gray-900 mt-1"},Pe={class:"bg-gray-50 p-3 rounded-lg"},Ee={class:"text-sm text-gray-900 mt-2 leading-relaxed"},Ae={key:0,class:"bg-gray-50 p-3 rounded-lg"},Be={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},Me=["onClick"],Ne=["src","alt"],Ue={class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-50 rounded-lg"},Oe={key:1,class:"bg-gray-50 p-3 rounded-lg text-center"},Te={class:"flex justify-center w-full mt-6"},$e={key:0,class:"flex flex-col items-center justify-center"},ze={class:"mb-4 text-sm text-gray-600 text-center"},Re={class:"relative w-full",style:{"max-width":"610px"}},Fe={class:"flex justify-center items-center w-full h-96 bg-gray-50 rounded-lg"},Ge=["src"],We={key:1,class:"flex justify-center mt-4 space-x-2"},Le=["onClick"],qe={key:1,class:"text-center text-gray-500 py-8"},Je={class:"flex justify-center w-full mt-6"},Ke={class:"flex items-center gap-3"},Xe={class:"flex flex-col"},He={class:"flex justify-center gap-4 w-full"},Qe=["disabled"],Ye=["disabled"],Ze={class:"flex items-center gap-3"},_e={class:"flex justify-center gap-3 w-full"},it=Object.assign({name:"ProductoModals"},{__name:"Modales",props:{visible:{type:Boolean,default:!1},detailsVisible:{type:Boolean,default:!1},carouselVisible:{type:Boolean,default:!1},deleteVisible:{type:Boolean,default:!1},unsavedChangesVisible:{type:Boolean,default:!1},updateStockVisible:{type:Boolean,default:!1},producto:{type:Object,default:()=>({})},dialogStyle:{type:Object,default:()=>({})},selectedImages:{type:Array,default:()=>[]},carouselIndex:{type:Number,default:0},imagePath:{type:String,default:"/storage/productos/"},isDeleting:{type:Boolean,default:!1}},emits:["update:visible","duplicate","updateStock","generateReport","archive","viewDetails","update:detailsVisible","openImageModal","update:carouselVisible","update:carouselIndex","update:deleteVisible","deleteProduct","cancelDelete","update:unsavedChangesVisible","closeWithoutSaving","continueEditing","update:updateStockVisible","stockUpdated"],setup(l,{emit:z}){const i=l,a=z,I=f({get:()=>i.visible,set:o=>a("update:visible",o)}),V=f({get:()=>i.detailsVisible,set:o=>a("update:detailsVisible",o)}),D=f({get:()=>i.carouselVisible,set:o=>a("update:carouselVisible",o)}),j=f({get:()=>i.deleteVisible,set:o=>a("update:deleteVisible",o)}),P=f({get:()=>i.unsavedChangesVisible,set:o=>a("update:unsavedChangesVisible",o)}),E=f({get:()=>i.updateStockVisible,set:o=>a("update:updateStockVisible",o)}),u=ne(0);T(()=>i.carouselIndex,o=>{u.value=o},{immediate:!0}),T(u,o=>{a("update:carouselIndex",o)});const A=o=>o.stock_actual<=0?{label:"Agotado",value:"AGOTADO",class:"bg-red-100 text-red-800"}:o.stock_actual<=o.stock_minimo?{label:"Stock Bajo",value:"STOCK_BAJO",class:"bg-yellow-100 text-yellow-800"}:{label:"Disponible",value:"DISPONIBLE",class:"bg-green-100 text-green-800"},R=()=>{a("update:visible",!1),a("duplicate",i.producto)},F=()=>{a("update:visible",!1),a("updateStock",i.producto)},G=()=>{a("update:visible",!1),a("generateReport",i.producto)},W=()=>{a("update:visible",!1),a("archive",i.producto)},L=()=>{a("update:visible",!1),a("viewDetails",i.producto)},q=()=>{a("update:visible",!1)},J=o=>{a("openImageModal",o)},K=()=>{a("update:detailsVisible",!1)},X=()=>{a("update:carouselVisible",!1)},H=()=>{if(i.selectedImages.length>1){const o=u.value===0?i.selectedImages.length-1:u.value-1;u.value=o}},Q=()=>{if(i.selectedImages.length>1){const o=u.value===i.selectedImages.length-1?0:u.value+1;u.value=o}},Y=o=>{o>=0&&o<i.selectedImages.length&&(u.value=o)},Z=()=>{a("deleteProduct",i.producto)},_=()=>{a("cancelDelete"),a("update:deleteVisible",!1)},ee=()=>{a("closeWithoutSaving")},te=()=>{a("continueEditing")},se=o=>{a("stockUpdated",o)};return(o,t)=>(b(),g(S,null,[n(s(x),{visible:I.value,"onUpdate:visible":t[0]||(t[0]=d=>I.value=d),header:"Más Acciones",modal:!0,style:y(l.dialogStyle),closable:!1,draggable:!1},{footer:m(()=>[e("div",be,[e("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:q},[n(s(r),{icon:s(k),class:"h-5"},null,8,["icon"]),t[14]||(t[14]=v(" Cerrar "))])])]),default:m(()=>[e("div",de,[e("div",re,[e("h4",ce,[t[6]||(t[6]=v(" Producto: ")),e("span",ue,c(l.producto.nombre||"Producto"),1)]),t[7]||(t[7]=e("p",{class:"text-sm text-gray-600 mt-1"},"Selecciona una acción a realizar",-1))]),e("div",ge,[e("button",{class:"w-full bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:L},[n(s(r),{icon:s(B),class:"h-5 w-5"},null,8,["icon"]),t[8]||(t[8]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Ver Detalles"),e("div",{class:"text-xs opacity-90"},"Información completa del producto")],-1))]),e("button",{class:"w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:R},[n(s(r),{icon:s(le),class:"h-5 w-5"},null,8,["icon"]),t[9]||(t[9]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Duplicar Producto"),e("div",{class:"text-xs opacity-90"},"Crear una copia de este producto")],-1))]),e("button",{class:"w-full bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:F},[n(s(r),{icon:s(M),class:"h-5 w-5"},null,8,["icon"]),t[10]||(t[10]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Actualizar Stock"),e("div",{class:"text-xs opacity-90"},"Modificar inventario del producto")],-1))]),e("button",{class:"w-full bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:G},[n(s(r),{icon:s(N),class:"h-5 w-5"},null,8,["icon"]),t[11]||(t[11]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Generar Reporte"),e("div",{class:"text-xs opacity-90"},"Reporte de ventas y movimientos")],-1))]),e("button",{class:"w-full bg-gray-500 hover:bg-gray-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:W},[n(s(r),{icon:s(oe),class:"h-5 w-5"},null,8,["icon"]),t[12]||(t[12]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Archivar Producto"),e("div",{class:"text-xs opacity-90"},"Mover a productos archivados")],-1))])]),t[13]||(t[13]=e("div",{class:"mt-6 pt-4 border-t border-gray-200 text-center"},[e("p",{class:"text-xs text-gray-500"}," 💡 Selecciona una acción para continuar. ")],-1))])]),_:1},8,["visible","style"]),n(s(x),{visible:V.value,"onUpdate:visible":t[1]||(t[1]=d=>V.value=d),header:"Detalles del Producto",modal:!0,closable:!1,style:y(l.dialogStyle),draggable:!1},{footer:m(()=>[e("div",Te,[e("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:K},[n(s(r),{icon:s(k),class:"h-5"},null,8,["icon"]),t[24]||(t[24]=v(" Cerrar "))])])]),default:m(()=>{var d;return[l.producto?(b(),g("div",me,[e("div",pe,[e("div",fe,[t[15]||(t[15]=e("label",{class:"text-sm font-semibold text-gray-700"},"Nombre:",-1)),e("p",ve,c(l.producto.nombre||"Sin nombre"),1)]),e("div",xe,[t[16]||(t[16]=e("label",{class:"text-sm font-semibold text-gray-700"},"Categoría:",-1)),e("p",ye,c(((d=l.producto.categoria)==null?void 0:d.nombre)||"Sin categoría"),1)]),e("div",he,[t[17]||(t[17]=e("label",{class:"text-sm font-semibold text-gray-700"},"Precio:",-1)),e("p",ke,c(l.producto.precio?`$${Number(l.producto.precio).toFixed(2)}`:"No definido"),1)]),e("div",we,[t[18]||(t[18]=e("label",{class:"text-sm font-semibold text-gray-700"},"Estado:",-1)),e("div",Se,[e("span",{class:w("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+A(l.producto).class)},c(A(l.producto).label),3)])])]),e("div",Ce,[e("div",Ie,[t[19]||(t[19]=e("label",{class:"text-sm font-semibold text-gray-700"},"Stock Actual:",-1)),e("p",Ve,c(l.producto.stock_actual||0)+" unidades",1)]),e("div",De,[t[20]||(t[20]=e("label",{class:"text-sm font-semibold text-gray-700"},"Stock Mínimo:",-1)),e("p",je,c(l.producto.stock_minimo||1)+" unidades",1)])]),e("div",Pe,[t[21]||(t[21]=e("label",{class:"text-sm font-semibold text-gray-700"},"Descripción:",-1)),e("p",Ee,c(l.producto.descripcion||"Sin descripción disponible"),1)]),l.producto.imagenes&&l.producto.imagenes.length>0?(b(),g("div",Ae,[t[22]||(t[22]=e("label",{class:"text-sm font-semibold text-gray-700 mb-3 block"},"Imágenes del Producto:",-1)),e("div",Be,[(b(!0),g(S,null,$(l.producto.imagenes,(p,h)=>(b(),g("div",{key:h,class:"relative cursor-pointer group",onClick:et=>J(h)},[e("img",{src:l.imagePath+(typeof p=="string"?p:p.nombre),alt:`Imagen ${h+1} del producto`,class:"w-full h-20 object-cover rounded-lg border group-hover:opacity-75 transition-opacity"},null,8,Ne),e("div",Ue,[n(s(r),{icon:s(B),class:"h-6 w-6 text-white"},null,8,["icon"])])],8,Me))),128))])])):(b(),g("div",Oe,t[23]||(t[23]=[e("p",{class:"text-gray-500"},"No hay imágenes disponibles para este producto.",-1)])))])):C("",!0)]}),_:1},8,["visible","style"]),n(s(x),{visible:D.value,"onUpdate:visible":t[2]||(t[2]=d=>D.value=d),header:"Galería de Imágenes",modal:!0,closable:!1,style:y(l.dialogStyle),draggable:!1},{footer:m(()=>[e("div",Je,[e("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:X},[n(s(r),{icon:s(k),class:"h-5"},null,8,["icon"]),t[27]||(t[27]=v(" Cerrar "))])])]),default:m(()=>[i.selectedImages.length?(b(),g("div",$e,[e("div",ze," Imagen "+c(u.value+1)+" de "+c(i.selectedImages.length),1),e("div",Re,[e("div",Fe,[e("img",{src:i.selectedImages[u.value],alt:"Imagen del producto",class:"w-auto h-full max-h-96 object-contain rounded shadow"},null,8,Ge)]),i.selectedImages.length>1?(b(),g(S,{key:0},[e("button",{onClick:H,class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-75 text-white p-2 rounded-full transition-all"},t[25]||(t[25]=[e("i",{class:"pi pi-chevron-left"},null,-1)])),e("button",{onClick:Q,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-75 text-white p-2 rounded-full transition-all"},t[26]||(t[26]=[e("i",{class:"pi pi-chevron-right"},null,-1)]))],64)):C("",!0),i.selectedImages.length>1?(b(),g("div",We,[(b(!0),g(S,null,$(i.selectedImages,(d,p)=>(b(),g("button",{key:p,onClick:h=>Y(p),class:w(["w-3 h-3 rounded-full transition-all",p===u.value?"bg-blue-500":"bg-gray-300 hover:bg-gray-400"])},null,10,Le))),128))])):C("",!0)])])):(b(),g("div",qe,"No hay imágenes para este producto."))]),_:1},8,["visible","style"]),n(s(x),{visible:j.value,"onUpdate:visible":t[3]||(t[3]=d=>j.value=d),header:"Eliminar producto",modal:!0,style:y(l.dialogStyle),closable:!1,draggable:!1},{footer:m(()=>[e("div",He,[e("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:_,disabled:l.isDeleting},[n(s(r),{icon:l.isDeleting?s(O):s(k),class:w({"animate-spin":l.isDeleting,"h-5":!0})},null,8,["icon","class"]),e("span",null,c(l.isDeleting?"Cancelando...":"No"),1)],8,Qe),e("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Z,disabled:l.isDeleting},[n(s(r),{icon:l.isDeleting?s(O):s(N),class:w({"animate-spin":l.isDeleting,"h-5":!0})},null,8,["icon","class"]),e("span",null,c(l.isDeleting?"Eliminando...":"Sí"),1)],8,Ye)])]),default:m(()=>[e("div",Ke,[n(s(r),{icon:s(U),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e("div",Xe,[e("span",null,[t[28]||(t[28]=v("¿Estás seguro de eliminar el producto: ")),e("b",null,c(l.producto.nombre),1),t[29]||(t[29]=v("?"))]),t[30]||(t[30]=e("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acción es irreversible.",-1))])])]),_:1},8,["visible","style"]),n(s(x),{visible:P.value,"onUpdate:visible":t[4]||(t[4]=d=>P.value=d),header:"Cambios sin guardar",modal:!0,style:y(l.dialogStyle),closable:!1,draggable:!1},{footer:m(()=>[e("div",_e,[e("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:te},[n(s(r),{icon:s(M),class:"h-4"},null,8,["icon"]),t[32]||(t[32]=e("span",null,"Continuar",-1))]),e("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:ee},[n(s(r),{icon:s(ae),class:"h-4"},null,8,["icon"]),t[33]||(t[33]=e("span",null,"Salir sin guardar",-1))])])]),default:m(()=>[e("div",Ze,[n(s(r),{icon:s(U),class:"h-8 w-8 text-red-500"},null,8,["icon"]),t[31]||(t[31]=e("div",{class:"flex flex-col"},[e("span",null,"¡Tienes información sin guardar!"),e("span",{class:"text-red-600 text-sm font-medium mt-1"},"¿Deseas salir sin guardar?")],-1))])]),_:1},8,["visible","style"]),n(ie,{visible:E.value,"onUpdate:visible":t[5]||(t[5]=d=>E.value=d),producto:l.producto,"dialog-style":l.dialogStyle,onStockUpdated:se},null,8,["visible","producto","dialog-style"])],64))}});export{it as default};
