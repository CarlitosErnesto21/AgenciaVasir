import{i as z,y as B,p as D,o,w as f,c as a,f as n,b as e,t as r,n as u,A as M,B as N,h as d}from"./app-WKwrJkJC.js";const j={key:0,class:"p-6"},P={class:"bg-gray-50 rounded-lg p-4 mb-6"},S={class:"flex justify-between items-start"},A={class:"font-medium text-gray-900 mb-2"},F={class:"grid grid-cols-2 gap-4 text-sm"},H={class:"block text-gray-900"},T={class:"block text-gray-900"},U={class:"block text-gray-900 font-medium"},V={key:0,class:"p-8 text-center"},I={key:1,class:"p-8 text-center text-gray-500"},L={key:2,class:"space-y-4"},O={class:"relative"},$={class:"ml-4 flex-1 min-w-0"},q={class:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm"},G={class:"flex justify-between items-start mb-2"},J={class:"font-medium text-gray-900"},K={class:"text-xs text-gray-500"},Q={key:0,class:"text-sm text-gray-600 mb-2"},W={key:1,class:"text-xs text-gray-500 space-y-1"},X={key:0},Y={key:0},Z={key:1},ee={key:1},te={key:0},se={key:2},oe={key:2,class:"mt-2 text-xs text-gray-400"},re={__name:"ModalHistorial",props:{visible:{type:Boolean,default:!1},reserva:{type:Object,default:()=>null},historial:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["update:visible"],setup(i,{emit:v}){const h=i,k=v,c=l=>l?new Date(l).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",g=l=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD"}).format(l||0),w=l=>({creacion:"pi-plus-circle",confirmacion:"pi-check-circle",rechazo:"pi-times-circle",reprogramacion:"pi-calendar",modificacion:"pi-pencil",cancelacion:"pi-ban",pago:"pi-credit-card",comentario:"pi-comment"})[l]||"pi-info-circle",C=l=>({creacion:"text-blue-600 bg-blue-100",confirmacion:"text-green-600 bg-green-100",rechazo:"text-red-600 bg-red-100",reprogramacion:"text-yellow-600 bg-yellow-100",modificacion:"text-purple-600 bg-purple-100",cancelacion:"text-gray-600 bg-gray-100",pago:"text-emerald-600 bg-emerald-100",comentario:"text-indigo-600 bg-indigo-100"})[l]||"text-gray-600 bg-gray-100",R=l=>({creacion:"Reserva Creada",confirmacion:"Reserva Confirmada",rechazo:"Reserva Rechazada",reprogramacion:"Reserva Reprogramada",modificacion:"Reserva Modificada",cancelacion:"Reserva Cancelada",pago:"Pago Registrado",comentario:"Comentario Agregado"})[l.tipo]||"Evento",m=z(()=>[...h.historial].sort((l,t)=>new Date(t.fecha)-new Date(l.fecha))),p=()=>{k("update:visible",!1)};return(l,t)=>{const E=B("Dialog");return o(),D(E,{visible:i.visible,"onUpdate:visible":p,modal:"",header:"Historial de Reserva",style:{width:"800px"},draggable:!1,position:"center",pt:{root:{class:"rounded-lg border border-gray-200"},header:{class:"bg-red-50 border-b px-6 py-4"},content:{class:"p-0"},footer:{class:"border-t px-6 py-4 bg-gray-50"}}},{footer:f(()=>[e("div",{class:"flex justify-end"},[e("button",{class:"bg-gray-500 border border-gray-500 text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 px-4 py-2 flex items-center gap-2",onClick:p},t[14]||(t[14]=[e("i",{class:"pi pi-times"},null,-1),d(" Cerrar ")]))])]),default:f(()=>{var y,x,b;return[i.reserva?(o(),a("div",j,[e("div",P,[e("div",S,[e("div",null,[e("h4",A,"Reserva #"+r(i.reserva.id),1),e("div",F,[e("div",null,[t[0]||(t[0]=e("span",{class:"font-medium text-gray-600"},"Cliente:",-1)),e("span",H,r(((y=i.reserva.cliente)==null?void 0:y.nombres)||"-"),1)]),e("div",null,[t[1]||(t[1]=e("span",{class:"font-medium text-gray-600"},"Estado Actual:",-1)),e("span",{class:u(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ml-2",{"bg-yellow-100 text-yellow-800":i.reserva.estado==="Pendiente","bg-green-100 text-green-800":i.reserva.estado==="Confirmado","bg-red-100 text-red-800":i.reserva.estado==="Rechazada","bg-blue-100 text-blue-800":i.reserva.estado==="Reprogramada"}])},r(i.reserva.estado),3)]),e("div",null,[t[2]||(t[2]=e("span",{class:"font-medium text-gray-600"},"Tour/Hotel:",-1)),e("span",T,r(((x=i.reserva.tour)==null?void 0:x.nombre)||((b=i.reserva.hotel)==null?void 0:b.nombre)||"-"),1)]),e("div",null,[t[3]||(t[3]=e("span",{class:"font-medium text-gray-600"},"Precio Total:",-1)),e("span",U,r(g(i.reserva.precio_total)),1)])])])])]),i.loading?(o(),a("div",V,t[4]||(t[4]=[e("div",{class:"inline-flex items-center"},[e("i",{class:"pi pi-spin pi-spinner text-2xl text-red-600 mr-3"}),e("span",{class:"text-gray-600"},"Cargando historial...")],-1)]))):m.value.length===0?(o(),a("div",I,t[5]||(t[5]=[e("i",{class:"pi pi-clock text-4xl text-gray-300 block mb-2"},null,-1),e("span",null,"No hay eventos en el historial",-1)]))):(o(),a("div",L,[t[13]||(t[13]=e("h5",{class:"font-medium text-gray-900 mb-4"},"Cronología de Eventos",-1)),e("div",O,[t[12]||(t[12]=e("div",{class:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"},null,-1)),(o(!0),a(M,null,N(m.value,(s,_)=>(o(),a("div",{key:_,class:"relative flex items-start pb-6"},[e("div",{class:u(["flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center relative z-10",C(s.tipo)])},[e("i",{class:u(`pi ${w(s.tipo)} text-lg`)},null,2)],2),e("div",$,[e("div",q,[e("div",G,[e("h6",J,r(R(s)),1),e("span",K,r(c(s.fecha)),1)]),s.descripcion?(o(),a("p",Q,r(s.descripcion),1)):n("",!0),s.detalles?(o(),a("div",W,[s.tipo==="reprogramacion"&&s.detalles.fecha_anterior?(o(),a("div",X,[t[6]||(t[6]=e("strong",null,"Fecha anterior:",-1)),d(" "+r(c(s.detalles.fecha_anterior))+" ",1),t[7]||(t[7]=e("br",null,null,-1)),t[8]||(t[8]=e("strong",null,"Nueva fecha:",-1)),d(" "+r(c(s.detalles.fecha_nueva))+" ",1),s.detalles.motivo?(o(),a("br",Y)):n("",!0),s.detalles.motivo?(o(),a("strong",Z,"Motivo:")):n("",!0),d(" "+r(s.detalles.motivo),1)])):s.tipo==="pago"&&s.detalles.monto?(o(),a("div",ee,[t[9]||(t[9]=e("strong",null,"Monto:",-1)),d(" "+r(g(s.detalles.monto))+" ",1),s.detalles.metodo?(o(),a("br",te)):n("",!0),t[10]||(t[10]=e("strong",null,"Método:",-1)),d(" "+r(s.detalles.metodo),1)])):s.detalles.usuario?(o(),a("div",se,[t[11]||(t[11]=e("strong",null,"Usuario:",-1)),d(" "+r(s.detalles.usuario),1)])):n("",!0)])):n("",!0),s.usuario?(o(),a("div",oe," Por: "+r(s.usuario),1)):n("",!0)])])]))),128))])]))])):n("",!0)]}),_:1},8,["visible"])}}};export{re as default};
