import{A as Se}from"./AuthenticatedLayout-B1--8ivd.js";import{N as R,r as v,w as Fe,E as K,o as Le,h as J,d as L,x as m,p as n,e,$ as a,a0 as $e,t as d,y as b,c as U,j as A,A as je,q as w,a3 as Ae}from"./vendor-CLNWHdEK.js";import{A as Te,F as de,a as Be,D as u,e as ie,f as h,h as Ie,o as ce,q as W,g as ue}from"./ui-DPmvhuIJ.js";import{e as Q,f as E,g as I,v as me,H as ve,l as He,d as Ne,j as Re,I as pe,J as Ue,K as We,L as Me,h as fe}from"./index-Bt2ku3xk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Oe={class:"container mx-auto px-4 py-6"},ze={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},qe={class:"bg-gradient-to-r from-green-400 to-green-600 text-white rounded-lg p-4 shadow-md"},Ge={class:"flex items-center justify-between"},Ke={class:"text-2xl font-bold"},Je={class:"bg-gradient-to-r from-yellow-400 to-yellow-600 text-white rounded-lg p-4 shadow-md"},Qe={class:"flex items-center justify-between"},Xe={class:"text-2xl font-bold"},Ye={class:"bg-gradient-to-r from-red-400 to-red-600 text-white rounded-lg p-4 shadow-md"},Ze={class:"flex items-center justify-between"},et={class:"text-2xl font-bold"},tt={class:"bg-gradient-to-r from-blue-400 to-blue-600 text-white rounded-lg p-4 shadow-md"},at={class:"flex items-center justify-between"},lt={class:"text-2xl font-bold"},st={class:"bg-white rounded-lg shadow-md"},ot={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},nt={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},rt={class:"flex items-center gap-3"},dt={class:"text-base font-medium text-gray-800 flex items-center gap-2"},it={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},ct=["disabled"],ut=["disabled"],mt={class:"flex gap-2"},vt=["disabled"],pt=["disabled"],ft={class:"space-y-3"},gt={class:"sm:hidden"},xt={class:"grid grid-cols-2 gap-3 sm:hidden"},bt={class:"hidden sm:grid sm:grid-cols-3 gap-3"},ht={class:"text-sm leading-relaxed"},yt={class:"flex items-center gap-2"},wt={class:"text-sm font-medium"},_t={class:"text-sm font-bold text-green-600"},Ct={class:"text-sm text-center"},kt={class:"flex flex-wrap gap-1 sm:gap-2 justify-center items-center"},Vt=["onClick"],Dt=["onClick"],Et=["onClick"],Pt=["onClick"],St={key:0,class:"space-y-4"},Ft={class:"bg-white rounded-lg border p-4"},Lt={class:"flex items-center justify-between mb-4"},$t={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jt={class:"space-y-3"},At={class:"flex items-center gap-2"},Tt={class:"flex items-center gap-2"},Bt={class:"flex items-center gap-2"},It={class:"space-y-3"},Ht={class:"flex items-center gap-2"},Nt={class:"text-green-600 font-bold text-lg"},Rt={class:"bg-white rounded-lg border p-4"},Ut={class:"text-lg font-semibold text-gray-800 mb-4"},Wt={class:"flex items-center gap-2"},Mt={class:"font-medium"},Ot={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},zt={class:"font-medium"},qt={class:"font-bold text-green-600"},Gt={class:"flex justify-center gap-4 w-full mt-6"},Kt={key:0,class:"space-y-4"},Jt={class:"bg-gray-50 p-4 rounded-lg border"},Qt={class:"space-y-2 text-sm"},Xt={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Yt={class:"flex items-start gap-2"},Zt={class:"text-sm text-yellow-800"},ea={class:"flex justify-center gap-4 w-full mt-6"},ta=["disabled"],aa=["disabled"],da={__name:"Ventas",props:{ventas:{type:[Array,Object],default:()=>[]}},setup(ge){var le;R.defaults.withCredentials=!0;const f=Te(),H=ge,g=v(Array.isArray(H.ventas)?H.ventas:((le=H.ventas)==null?void 0:le.data)||[]),x=v(null);Fe(()=>H.ventas,s=>{g.value=Array.isArray(s)?s:(s==null?void 0:s.data)||[]},{deep:!0});const T=v(!1),_=v(!1),o=v({tipo:null,venta:null,titulo:"",mensaje:"",color:"",icono:null,textoBoton:"",importante:""}),k=v(!1),P=v(!1),C=v(!1),S=v(new Set),F=v(new Set),B=v(""),V=v(null),M=v({global:{value:null,matchMode:de.CONTAINS},estado:{value:null,matchMode:de.EQUALS}}),p=v({estado:null,fechaDesde:null,fechaHasta:null}),X=v([{name:"Todos",value:null},{name:"Pendiente",value:"pendiente"},{name:"Completada",value:"completada"},{name:"Cancelada",value:"cancelada"}]),O=v(10),xe=v([5,10,20,50]),z=K(()=>{let s=g.value;if(B.value){const t=B.value.toLowerCase();s=s.filter(l=>{var r,i,c;return((c=(i=(r=l.cliente)==null?void 0:r.user)==null?void 0:i.name)==null?void 0:c.toLowerCase().includes(t))||l.id.toString().includes(t)||l.estado.toLowerCase().includes(t)})}if(V.value&&(s=s.filter(t=>t.estado===V.value)),p.value.fechaDesde){const t=new Date(p.value.fechaDesde);s=s.filter(l=>new Date(l.fecha)>=t)}if(p.value.fechaHasta){const t=new Date(p.value.fechaHasta);s=s.filter(l=>new Date(l.fecha)<=t)}return s.sort((t,l)=>{const r={pendiente:1,completada:2,cancelada:3},i=r[t.estado.toLowerCase()]||4,c=r[l.estado.toLowerCase()]||4;if(i!==c)return i-c;const y=new Date(t.fecha);return new Date(l.fecha)-y})}),N=K(()=>{const s={completadas:0,pendientes:0,canceladas:0,totalVendido:0};return g.value.forEach(t=>{switch(t.estado){case"completada":s.completadas++,s.totalVendido+=parseFloat(t.total||0);break;case"pendiente":s.pendientes++;break;case"cancelada":s.canceladas++;break}}),s}),Y=v(typeof window<"u"?window.innerWidth:1024),be=K(()=>Y.value<640?{width:"95vw",maxWidth:"380px"}:Y.value<768?{width:"80vw"}:{width:"70vw",maxWidth:"900px"}),Z=()=>{M.value.estado.value=V.value},ee=async()=>{k.value=!0;try{await new Promise(s=>setTimeout(s,300)),V.value=null,B.value="",M.value.global.value=null,M.value.estado.value=null,p.value={estado:null,fechaDesde:null,fechaHasta:null},f.add({severity:"success",summary:"Filtros limpiados",life:2e3})}finally{k.value=!1}},D=()=>{},te=async()=>{C.value=!0,f.add({severity:"info",summary:"Cargando ventas...",life:2e3});try{await Ae.reload({only:["ventas"],preserveScroll:!0,preserveState:!0}),setTimeout(()=>{f.add({severity:"success",summary:"Ventas actualizadas",detail:`${g.value.length} registros cargados`,life:2e3})},300)}catch(s){console.error("Error al cargar las ventas:",s),f.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las ventas",life:3e3})}finally{setTimeout(()=>{C.value=!1},500)}},he=s=>{x.value=s,T.value=!0},ye=s=>{o.value={tipo:"procesar",venta:s,titulo:"쯇rocesar esta venta?",mensaje:"Esta acci칩n completar치 la venta y reducir치 el stock de los productos.",color:"green",icono:Q,textoBoton:"S칤, Procesar",importante:"Se reducir치 autom치ticamente el stock de todos los productos de esta venta."},_.value=!0},we=async()=>{var t,l;const s=o.value.venta;if(s){S.value.add(s.id);try{const r=await R.post(`/api/ventas/${s.id}/procesar`),i=g.value.findIndex(c=>c.id===s.id);i!==-1&&(g.value[i]={...g.value[i],estado:"completada"}),f.add({severity:"success",summary:"칄xito",detail:"Venta procesada correctamente",life:3e3}),_.value=!1,o.value={tipo:null,venta:null}}catch(r){f.add({severity:"error",summary:"Error",detail:((l=(t=r.response)==null?void 0:t.data)==null?void 0:l.message)||"Error al procesar la venta",life:3e3})}finally{S.value.delete(s.id)}}},_e=s=>{o.value={tipo:"cancelar",venta:s,titulo:"쮺ancelar esta venta?",mensaje:"Esta acci칩n cancelar치 la venta y restaurar치 el stock si estaba completada.",color:"orange",icono:I,textoBoton:"S칤, Cancelar",importante:"Si la venta estaba completada, se restaurar치 autom치ticamente el stock de todos los productos."},_.value=!0},Ce=async()=>{var t,l;const s=o.value.venta;if(s){F.value.add(s.id);try{const r=await R.post(`/api/ventas/${s.id}/cancelar`),i=g.value.findIndex(c=>c.id===s.id);i!==-1&&(g.value[i]={...g.value[i],estado:"cancelada"}),f.add({severity:"success",summary:"칄xito",detail:"Venta cancelada correctamente",life:3e3}),_.value=!1,o.value={tipo:null,venta:null}}catch(r){f.add({severity:"error",summary:"Error",detail:((l=(t=r.response)==null?void 0:t.data)==null?void 0:l.message)||"Error al cancelar la venta",life:3e3})}finally{F.value.delete(s.id)}}},ke=s=>{o.value={tipo:"eliminar",venta:s,titulo:"쮼liminar esta venta?",mensaje:"Esta acci칩n no se puede deshacer.",color:"red",icono:fe,textoBoton:"S칤, Eliminar",importante:s.estado==="completada"?"Se restaurar치 el stock de todos los productos de esta venta.":"Esta venta ser치 eliminada permanentemente del sistema."},_.value=!0},Ve=async()=>{var t,l;const s=o.value.venta;if(s){P.value=!0;try{const r=await R.delete(`/api/ventas/${s.id}/eliminar`),i=g.value.findIndex(c=>c.id===s.id);i!==-1&&g.value.splice(i,1),f.add({severity:"success",summary:"칄xito",detail:"Venta eliminada correctamente",life:3e3}),_.value=!1,o.value={tipo:null,venta:null}}catch(r){f.add({severity:"error",summary:"Error",detail:((l=(t=r.response)==null?void 0:t.data)==null?void 0:l.message)||"Error al eliminar la venta",life:3e3})}finally{P.value=!1}}},De=()=>{switch(o.value.tipo){case"procesar":we();break;case"cancelar":Ce();break;case"eliminar":Ve();break}},Ee=()=>{_.value=!1,o.value={tipo:null,venta:null}},Pe=s=>{s.originalEvent.target.closest("button")||(x.value=s.data,T.value=!0)},ae=s=>s?new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A",$=s=>s?parseFloat(s).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",q=s=>{switch(s){case"completada":return"bg-green-100 text-green-800";case"pendiente":return"bg-yellow-100 text-yellow-800";case"cancelada":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},G=s=>{switch(s){case"completada":return"Completada";case"pendiente":return"Pendiente";case"cancelada":return"Cancelada";default:return"Desconocido"}};return Le(()=>{f.add({severity:"info",summary:"Cargando ventas...",life:2e3}),setTimeout(()=>{f.add({severity:"success",summary:"Ventas cargadas",life:2e3})},1e3)}),(s,t)=>(L(),J(Se,null,{default:m(()=>[n(a($e),{title:"Ventas"}),n(a(Be),{class:"z-[9999]"}),e("div",Oe,[t[22]||(t[22]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Gesti칩n de Ventas"),e("p",{class:"text-gray-600"},"Control completo del sistema de ventas")],-1)),e("div",ze,[e("div",qe,[e("div",Ge,[e("div",null,[t[11]||(t[11]=e("div",{class:"text-green-100 text-sm"},"Ventas Completadas",-1)),e("div",Ke,d(N.value.completadas),1)]),n(a(u),{icon:a(Q),class:"text-3xl text-green-200"},null,8,["icon"])])]),e("div",Je,[e("div",Qe,[e("div",null,[t[12]||(t[12]=e("div",{class:"text-yellow-100 text-sm"},"Ventas Pendientes",-1)),e("div",Xe,d(N.value.pendientes),1)]),n(a(u),{icon:a(E),class:"text-3xl text-yellow-200"},null,8,["icon"])])]),e("div",Ye,[e("div",Ze,[e("div",null,[t[13]||(t[13]=e("div",{class:"text-red-100 text-sm"},"Ventas Canceladas",-1)),e("div",et,d(N.value.canceladas),1)]),n(a(u),{icon:a(I),class:"text-3xl text-red-200"},null,8,["icon"])])]),e("div",tt,[e("div",at,[e("div",null,[t[14]||(t[14]=e("div",{class:"text-blue-100 text-sm"},"Total Vendido",-1)),e("div",lt,"$"+d($(N.value.totalVendido)),1)]),n(a(u),{icon:a(me),class:"text-3xl text-blue-200"},null,8,["icon"])])])]),e("div",st,[t[21]||(t[21]=e("div",{class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},[e("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Lista de Ventas")],-1)),n(a(ie),{value:z.value,dataKey:"id",paginator:!0,rows:O.value,rowsPerPageOptions:xe.value,rowsPerPage:O.value,"onUpdate:rowsPerPage":t[7]||(t[7]=l=>O.value=l),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} ventas",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:Pe,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:m(()=>[e("div",ot,[e("div",nt,[e("div",rt,[e("h3",dt,[n(a(u),{icon:a(Re),class:"text-blue-600 text-sm"},null,8,["icon"]),t[15]||(t[15]=e("span",null,"Filtros",-1))]),e("div",it,d(z.value.length)+" resultado"+d(z.value.length!==1?"s":""),1),e("button",{class:"bg-blue-500 hover:bg-blue-600 border border-blue-500 px-2 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-1",onClick:te,disabled:C.value},[n(a(u),{icon:C.value?a(E):a(pe),class:b([{"animate-spin":C.value},"h-3 w-3"])},null,8,["icon","class"])],8,ct),e("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:ee,disabled:k.value},[k.value?(L(),J(a(u),{key:0,icon:a(E),class:"animate-spin h-3 w-3"},null,8,["icon"])):A("",!0),e("span",null,d(k.value?"Limpiando...":"Limpiar filtros"),1)],8,ut)]),e("div",mt,[e("button",{class:"bg-blue-500 hover:bg-blue-600 border border-blue-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:te,disabled:C.value},[n(a(u),{icon:C.value?a(E):a(pe),class:b([{"animate-spin":C.value},"h-3 w-3"])},null,8,["icon","class"]),e("span",null,d(C.value?"Recargando...":"Recargar"),1)],8,vt),e("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:ee,disabled:k.value},[k.value?(L(),J(a(u),{key:0,icon:a(E),class:"animate-spin h-3 w-3"},null,8,["icon"])):A("",!0),e("span",null,d(k.value?"Limpiando...":"Limpiar filtros"),1)],8,pt)])]),e("div",ft,[e("div",null,[n(a(Ie),{modelValue:B.value,"onUpdate:modelValue":t[0]||(t[0]=l=>B.value=l),placeholder:"游댌 Buscar ventas...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),e("div",gt,[n(a(ce),{modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=l=>V.value=l),options:X.value,optionLabel:"name",optionValue:"value",placeholder:"Estado",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onChange:Z,clearable:!0},null,8,["modelValue","options"])]),e("div",xt,[e("div",null,[n(a(W),{modelValue:p.value.fechaDesde,"onUpdate:modelValue":t[2]||(t[2]=l=>p.value.fechaDesde=l),placeholder:"Fecha Desde",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onDateSelect:D,onClear:D,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:p.value.fechaHasta},null,8,["modelValue","maxDate"])]),e("div",null,[n(a(W),{modelValue:p.value.fechaHasta,"onUpdate:modelValue":t[3]||(t[3]=l=>p.value.fechaHasta=l),placeholder:"Fecha Hasta",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onDateSelect:D,onClear:D,showIcon:!0,dateFormat:"dd/mm/yy",minDate:p.value.fechaDesde},null,8,["modelValue","minDate"])])]),e("div",bt,[e("div",null,[n(a(ce),{modelValue:V.value,"onUpdate:modelValue":t[4]||(t[4]=l=>V.value=l),options:X.value,optionLabel:"name",optionValue:"value",placeholder:"Estado",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onChange:Z,clearable:!0},null,8,["modelValue","options"])]),e("div",null,[n(a(W),{modelValue:p.value.fechaDesde,"onUpdate:modelValue":t[5]||(t[5]=l=>p.value.fechaDesde=l),placeholder:"Fecha desde",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onDateSelect:D,onClear:D,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:p.value.fechaHasta},null,8,["modelValue","maxDate"])]),e("div",null,[n(a(W),{modelValue:p.value.fechaHasta,"onUpdate:modelValue":t[6]||(t[6]=l=>p.value.fechaHasta=l),placeholder:"Fecha hasta",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onDateSelect:D,onClear:D,showIcon:!0,dateFormat:"dd/mm/yy",minDate:p.value.fechaDesde},null,8,["modelValue","minDate"])])])])])]),default:m(()=>[n(a(h),{field:"fecha",header:"Fecha",sortable:"",class:"w-24 hidden md:table-cell"},{body:m(l=>[e("div",ht,d(ae(l.data.fecha)),1)]),_:1}),n(a(h),{field:"cliente.user.name",header:"Cliente",sortable:"",class:"w-32 min-w-24"},{body:m(l=>{var r,i;return[e("div",yt,[n(a(u),{icon:a(ve),class:"text-gray-500 text-xs"},null,8,["icon"]),e("span",wt,d(((i=(r=l.data.cliente)==null?void 0:r.user)==null?void 0:i.name)||"N/A"),1)])]}),_:1}),n(a(h),{field:"total",header:"Total",class:"w-24"},{body:m(l=>[e("div",_t," $"+d($(l.data.total)),1)]),_:1}),n(a(h),{field:"estado",header:"Estado",class:"w-28 hidden sm:table-cell"},{body:m(l=>[e("span",{class:b("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+q(l.data.estado))},d(G(l.data.estado)),3)]),_:1}),n(a(h),{header:"Items",class:"w-16 hidden md:table-cell"},{body:m(l=>{var r;return[e("div",Ct,d(((r=l.data.detalle_ventas)==null?void 0:r.length)||0),1)]}),_:1}),n(a(h),{exportable:!1,class:"w-64 min-w-32"},{header:m(()=>t[16]||(t[16]=[e("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:m(l=>[e("div",kt,[e("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>he(l.data),title:"Ver detalles"},[n(a(u),{icon:a(He),class:"h-3 w-4 sm:h-4 sm:w-6 text-white"},null,8,["icon"]),t[17]||(t[17]=e("span",{class:"hidden lg:block text-white ml-1"},"Ver",-1))],8,Vt),l.data.estado==="pendiente"?(L(),U("button",{key:0,class:"flex bg-green-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>ye(l.data),title:"Procesar venta"},[n(a(u),{icon:a(Q),class:"h-3 w-4 sm:h-4 sm:w-6 text-white"},null,8,["icon"]),t[18]||(t[18]=e("span",{class:"hidden lg:block text-white ml-1"},"Procesar",-1))],8,Dt)):A("",!0),l.data.estado==="completada"?(L(),U("button",{key:1,class:"flex bg-orange-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>_e(l.data),title:"Cancelar venta"},[n(a(u),{icon:a(I),class:"h-3 w-4 sm:h-4 sm:w-6 text-white"},null,8,["icon"]),t[19]||(t[19]=e("span",{class:"hidden lg:block text-white ml-1"},"Cancelar",-1))],8,Et)):A("",!0),e("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>ke(l.data),title:"Eliminar venta"},[n(a(u),{icon:a(Ne),class:"h-3 w-4 sm:h-4 sm:w-6 text-white"},null,8,["icon"]),t[20]||(t[20]=e("span",{class:"hidden lg:block text-white ml-1"},"Eliminar",-1))],8,Pt)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"])])]),n(a(ue),{visible:T.value,"onUpdate:visible":t[9]||(t[9]=l=>T.value=l),style:je(be.value),header:"Detalles de la Venta",modal:!0,closable:!1,draggable:!1},{footer:m(()=>[e("div",Gt,[e("button",{class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:t[8]||(t[8]=l=>T.value=!1)},[n(a(u),{icon:a(I),class:"h-5"},null,8,["icon"]),t[28]||(t[28]=w(" Cerrar "))])])]),default:m(()=>{var l,r,i;return[x.value?(L(),U("div",St,[e("div",Ft,[e("div",Lt,[t[23]||(t[23]=e("h4",{class:"text-lg font-semibold text-gray-800"},"Informaci칩n General",-1)),e("span",{class:b("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium "+q(x.value.estado))},d(G(x.value.estado)),3)]),e("div",$t,[e("div",jt,[e("div",At,[n(a(u),{icon:a(Ue),class:"text-gray-500 text-sm"},null,8,["icon"]),t[24]||(t[24]=e("strong",null,"ID:",-1)),w(" #"+d(x.value.id),1)]),e("div",Tt,[n(a(u),{icon:a(We),class:"text-gray-500 text-sm"},null,8,["icon"]),t[25]||(t[25]=e("strong",null,"Fecha:",-1)),w(" "+d(ae(x.value.fecha)),1)]),e("div",Bt,[n(a(u),{icon:a(ve),class:"text-gray-500 text-sm"},null,8,["icon"]),t[26]||(t[26]=e("strong",null,"Cliente:",-1)),w(" "+d(((r=(l=x.value.cliente)==null?void 0:l.user)==null?void 0:r.name)||"N/A"),1)])]),e("div",It,[e("div",Ht,[n(a(u),{icon:a(me),class:"text-gray-500 text-sm"},null,8,["icon"]),t[27]||(t[27]=e("strong",null,"Total:",-1)),e("span",Nt," $"+d($(x.value.total)),1)])])])]),e("div",Rt,[e("h4",Ut," Productos Vendidos ("+d(((i=x.value.detalle_ventas)==null?void 0:i.length)||0)+") ",1),n(a(ie),{value:x.value.detalle_ventas,class:"text-sm",stripedRows:""},{default:m(()=>[n(a(h),{field:"producto.nombre",header:"Producto"},{body:m(({data:c})=>{var y;return[e("div",Wt,[n(a(u),{icon:a(Me),class:"text-blue-500 text-sm"},null,8,["icon"]),e("span",Mt,d((y=c.producto)==null?void 0:y.nombre),1)])]}),_:1}),n(a(h),{field:"producto.categoria.nombre",header:"Categor칤a"},{body:m(({data:c})=>{var y,j;return[e("span",Ot,d(((j=(y=c.producto)==null?void 0:y.categoria)==null?void 0:j.nombre)||"Sin categor칤a"),1)]}),_:1}),n(a(h),{field:"cantidad",header:"Cantidad",style:{width:"100px"}},{body:m(({data:c})=>[e("span",zt,d(c.cantidad),1)]),_:1}),n(a(h),{field:"precio_unitario",header:"Precio Unit.",style:{width:"120px"}},{body:m(({data:c})=>[e("span",null,"$"+d($(c.precio_unitario)),1)]),_:1}),n(a(h),{field:"subtotal",header:"Subtotal",style:{width:"120px"}},{body:m(({data:c})=>[e("span",qt," $"+d($(c.subtotal)),1)]),_:1})]),_:1},8,["value"])])])):A("",!0)]}),_:1},8,["visible","style"]),n(a(ue),{visible:_.value,"onUpdate:visible":t[10]||(t[10]=l=>_.value=l),style:{width:"450px"},header:o.value.titulo,modal:!0,closable:!1,draggable:!1},{footer:m(()=>{var l,r,i,c,y,j,se,oe,ne,re;return[e("div",ea,[e("button",{class:b(["text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",o.value.color==="green"?"bg-green-500 hover:bg-green-600":o.value.color==="orange"?"bg-orange-500 hover:bg-orange-600":"bg-red-500 hover:bg-red-600"]),onClick:De,disabled:o.value.tipo==="procesar"&&S.value.has((l=o.value.venta)==null?void 0:l.id)||o.value.tipo==="cancelar"&&F.value.has((r=o.value.venta)==null?void 0:r.id)||o.value.tipo==="eliminar"&&P.value},[n(a(u),{icon:o.value.tipo==="procesar"&&S.value.has((i=o.value.venta)==null?void 0:i.id)?a(E):o.value.tipo==="cancelar"&&F.value.has((c=o.value.venta)==null?void 0:c.id)?a(E):o.value.tipo==="eliminar"&&P.value?a(E):o.value.icono,class:b(["h-4",{"animate-spin":o.value.tipo==="procesar"&&S.value.has((y=o.value.venta)==null?void 0:y.id)||o.value.tipo==="cancelar"&&F.value.has((j=o.value.venta)==null?void 0:j.id)||o.value.tipo==="eliminar"&&P.value}])},null,8,["icon","class"]),w(" "+d(o.value.tipo==="procesar"&&S.value.has((se=o.value.venta)==null?void 0:se.id)?"Procesando...":o.value.tipo==="cancelar"&&F.value.has((oe=o.value.venta)==null?void 0:oe.id)?"Cancelando...":o.value.tipo==="eliminar"&&P.value?"Eliminando...":o.value.textoBoton),1)],10,ta),e("button",{class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Ee,disabled:o.value.tipo==="procesar"&&S.value.has((ne=o.value.venta)==null?void 0:ne.id)||o.value.tipo==="cancelar"&&F.value.has((re=o.value.venta)==null?void 0:re.id)||o.value.tipo==="eliminar"&&P.value},[n(a(u),{icon:a(I),class:"h-4"},null,8,["icon"]),t[35]||(t[35]=w(" Cerrar "))],8,aa)])]}),default:m(()=>{var l,r;return[o.value.venta?(L(),U("div",Kt,[e("div",{class:b(["flex items-center gap-3 p-4 rounded-lg border",o.value.color==="green"?"bg-green-50 border-green-200":o.value.color==="orange"?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200"])},[n(a(u),{icon:o.value.icono,class:b(["text-2xl",o.value.color==="green"?"text-green-500":o.value.color==="orange"?"text-orange-500":"text-red-500"])},null,8,["icon","class"]),e("div",null,[e("h4",{class:b(["text-lg font-semibold",o.value.color==="green"?"text-green-800":o.value.color==="orange"?"text-orange-800":"text-red-800"])},d(o.value.titulo),3),e("p",{class:b([o.value.color==="green"?"text-green-700":o.value.color==="orange"?"text-orange-700":"text-red-700"])},d(o.value.mensaje),3)])],2),e("div",Jt,[t[33]||(t[33]=e("h5",{class:"font-semibold text-gray-800 mb-2"},"Informaci칩n de la venta:",-1)),e("div",Qt,[e("div",null,[t[29]||(t[29]=e("strong",null,"ID:",-1)),w(" #"+d(o.value.venta.id),1)]),e("div",null,[t[30]||(t[30]=e("strong",null,"Cliente:",-1)),w(" "+d(((r=(l=o.value.venta.cliente)==null?void 0:l.user)==null?void 0:r.name)||"N/A"),1)]),e("div",null,[t[31]||(t[31]=e("strong",null,"Total:",-1)),w(" $"+d($(o.value.venta.total)),1)]),e("div",null,[t[32]||(t[32]=e("strong",null,"Estado:",-1)),e("span",{class:b("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-1 "+q(o.value.venta.estado))},d(G(o.value.venta.estado)),3)])])]),e("div",Xt,[e("div",Yt,[n(a(u),{icon:a(fe),class:"text-yellow-500 text-sm mt-0.5"},null,8,["icon"]),e("div",Zt,[t[34]||(t[34]=e("strong",null,"Importante:",-1)),w(" "+d(o.value.importante),1)])])])])):A("",!0)]}),_:1},8,["visible","header"])]),_:1}))}};export{da as default};
