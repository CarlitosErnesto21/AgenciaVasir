import{a3 as lt,r as u,E as R,w as Oe,n as Ae,o as st,a6 as ot,N as L,k as le,h as Ue,d as c,x as P,p as v,e as a,$ as d,a0 as nt,q as C,a2 as rt,y as S,t as p,j as x,v as ge,c as m,F as B,l as G,a7 as qe,A as se,D as ca,a9 as ma,a5 as va}from"./vendor-gbh1WW5n.js";import{A as it}from"./AuthenticatedLayout-Brf7D3Fu.js";import{z as dt,A as be,F as E,q as oe}from"./ui-BrU4k96Z.js";import{I as ut,c as ne,J as ct,k as Pe,z as mt,l as vt,m as pt,n as ft,r as gt,f as bt,o as Te,a as ht}from"./index-BWaQysKE.js";import yt from"./Modales-hLX-2_Qb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const xt={class:"container mx-auto px-4 py-6"},_t={class:"bg-white rounded-lg shadow-md"},wt={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center gap-4 p-4"},Ct={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},Dt={class:"block sm:hidden"},kt={class:"hidden sm:block"},Et={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},St={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},It={class:"flex items-center gap-3"},At={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},Pt=["disabled"],Tt=["disabled"],Ft={class:"space-y-3"},Nt={class:"relative"},Vt={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-5 gap-3"},Lt=["value"],Rt=["value"],Mt={class:"col-span-2 sm:col-span-1"},$t=["value"],Ot={class:"col-span-2 sm:col-span-1 md:col-span-1 lg:col-span-1 hidden sm:block"},Ut={class:"col-span-2 sm:col-span-1 md:col-span-1 lg:col-span-1 hidden sm:block"},qt={class:"flex w-80 sm:hidden"},zt={class:"col-span-2 sm:col-span-4 md:col-span-4 lg:col-span-4 px-1 mt-3"},Bt={class:"text-blue-600 text-xs font-medium flex items-center gap-1"},Gt=["title"],jt=["title"],Ht={class:"text-sm leading-relaxed"},Wt={class:"text-sm font-medium leading-relaxed"},Kt={class:"flex gap-2 justify-center items-center"},Zt=["onClick"],Qt=["onClick"],Jt=["onClick"],Yt={key:0,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4"},Xt={class:"flex"},el={class:"flex-shrink-0"},al={class:"space-y-4"},tl={class:"w-full flex flex-col"},ll={class:"flex items-center gap-4"},sl={key:0,class:"text-red-500 ml-28"},ol={key:1,class:"text-orange-500 ml-28"},nl={key:2,class:"text-red-500 ml-28"},rl={class:"w-full flex flex-col"},il={class:"flex items-start gap-4"},dl={class:"flex w-full flex-col"},ul={class:"flex gap-2 mb-3"},cl=["disabled"],ml=["disabled"],vl={class:"space-y-2 max-h-40 overflow-y-auto"},pl={class:"flex-1"},fl=["onClick","disabled"],gl={key:0,class:"text-gray-500 text-sm mt-2"},bl={class:"w-full flex flex-col"},hl={class:"flex items-start gap-4"},yl={class:"flex w-full flex-col"},xl={class:"flex gap-2 mb-3"},_l=["disabled"],wl=["disabled"],Cl={key:0,class:"space-y-2 max-h-40 overflow-y-auto"},Dl={class:"flex-1"},kl=["onClick","disabled"],El={key:1,class:"text-gray-500 text-sm mt-2"},Sl={class:"w-full"},Il={class:"flex items-start gap-4"},Al={key:0,class:"text-red-500 ml-28"},Pl={key:1,class:"text-orange-500 ml-28"},Tl={key:2,class:"text-red-500 ml-28"},Fl={key:3,class:"text-red-500 ml-28"},Nl={class:"w-full flex flex-col"},Vl={class:"flex items-center gap-3.5"},Ll={key:0,class:"text-red-500 ml-28"},Rl={class:"grid grid-cols-2 gap-4"},Ml={class:"w-full"},$l={for:"cupo_min",class:"flex items-center gap-1 mb-2"},Ol={key:0,class:"text-gray-500 text-xs"},Ul={key:0,class:"text-red-500 block text-xs mt-1"},ql={key:1,class:"text-red-500 block text-xs mt-1"},zl={class:"w-full"},Bl={for:"cupo_max",class:"flex items-center gap-1 mb-2"},Gl={key:0,class:"text-gray-500 text-xs"},jl={key:0,class:"text-red-500 block text-xs mt-1"},Hl={key:1,class:"text-red-500 block text-xs mt-1"},Wl={class:"flex gap-4"},Kl={class:"flex-1"},Zl={key:0,class:"text-red-500 block text-xs mt-1"},Ql={class:"flex-1"},Jl={key:0,class:"text-red-500 block text-xs mt-1"},Yl={class:"w-full flex flex-col"},Xl={class:"flex items-center gap-10 sm:gap-9"},es={class:"w-full relative"},as={key:0,class:"text-red-500 ml-28"},ts={class:"w-full flex flex-col"},ls={class:"flex items-center gap-5"},ss={key:0,class:"text-red-500 ml-28"},os={class:"w-full flex flex-col"},ns={class:"flex items-center gap-4"},rs={class:"flex-1"},is={class:"flex items-center gap-3 mb-2"},ds=["disabled"],us={class:"flex items-center gap-2"},cs={key:0,class:"text-red-500 ml-28"},ms={class:"grid grid-cols-3 ml-2 sm:ml-5 gap-y-2"},vs=["src"],ps=["onClick"],fs={class:"flex justify-center gap-4 w-full mt-6"},gs=["disabled"],bs={key:0},hs={key:1},ys=["disabled"],xs={key:0,class:"text-center py-8"},_s={key:1,class:"text-center py-8"},ws={key:2,class:"space-y-3"},Cs={class:"bg-orange-50 border border-orange-200 rounded-lg p-2 mb-3"},Ds={class:"flex items-center gap-2"},ks={class:"font-semibold text-orange-800 text-sm"},Es={class:"max-h-80 overflow-y-auto space-y-2"},Ss=["onClick"],Is={class:"flex justify-between items-start mb-2"},As={class:"font-semibold text-sm text-blue-600 leading-tight hover:text-blue-800 transition-colors"},Ps={class:"flex items-center gap-2 ml-2 flex-shrink-0"},Ts={class:"px-2 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full"},Fs={class:"space-y-1 text-xs text-gray-600 mb-2"},Ns={class:"flex items-center gap-2"},Vs={key:0,class:"px-2 py-0.5 bg-green-100 text-green-800 text-xs font-medium rounded-full"},Ls={key:1,class:"px-2 py-0.5 bg-red-100 text-red-800 text-xs font-medium rounded-full"},Rs={class:"bg-gray-50 rounded p-2"},Ms={class:"space-y-1"},$s={class:"flex justify-between items-start"},Os={class:"font-medium"},Us={class:"text-gray-500 ml-2"},qs={class:"text-gray-400 text-xs"},zs={class:"flex justify-center gap-4 w-full mt-6"},he="/api/tours",ze="/storage/tours/",Qs={__name:"Tours",setup(Bs){const f=dt();lt();const F=u([]),T=u([]),j=u(""),H=u(""),ye=u([]),l=u({id:null,nombre:"",categoria:null,incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,transporte_id:null,imagenes:[]}),D=u([]),re=u([]),ie=u([]),Be=u(null),M=u(!1),de=u(!1),$=u(!1),ue=u(!1),_=u(!1),W=u(!1),O=u(null),K=u(!1),Fe=u(!1),Z=u(!1),U=u(!1),q=u(!1),Y=u(!1),xe=u(!0),ce=u(!1),_e=u([]),Ne=u(!1),k=u({global:{value:null,matchMode:be.CONTAINS},categoria:{value:null,matchMode:be.EQUALS},"transporte.nombre":{value:null,matchMode:be.EQUALS},estado:{value:null,matchMode:be.EQUALS},fecha_salida:{value:null,matchMode:be.DATE_IS}}),X=u(""),Q=u(""),ee=u(""),I=u(null),A=u(null),Ve=u(10),pa=u([5,10,20,50]),me=u("Guardar"),h=u(null),b=u(!1),N=u([]),Ge=u([{label:"Nacional",value:"NACIONAL"},{label:"Internacional",value:"INTERNACIONAL"}]),je=u([{label:"Disponible",value:"DISPONIBLE"},{label:"Completo",value:"COMPLETO"},{label:"En Curso",value:"EN_CURSO"},{label:"Finalizado",value:"FINALIZADO"},{label:"Reprogramada",value:"REPROGRAMADA"}]),we=u(!1),Le=u(!1),z=u(null),Re=u([]),Me=u(0),He=u(null),$e=R(()=>{let t=ye.value;if(k.value.global.value){const e=k.value.global.value.toLowerCase();t=t.filter(o=>o.nombre.toLowerCase().includes(e)||o.incluye&&o.incluye.toLowerCase().includes(e)||o.no_incluye&&o.no_incluye.toLowerCase().includes(e)||o.punto_salida.toLowerCase().includes(e))}return k.value.categoria.value&&(t=t.filter(e=>e.categoria===k.value.categoria.value)),k.value["transporte.nombre"].value&&(t=t.filter(e=>e["transporte.nombre"]===k.value["transporte.nombre"].value)),k.value.estado.value&&(t=t.filter(e=>e.estado===k.value.estado.value)),(I.value||A.value)&&(t=t.filter(e=>{if(!e.fecha_salida)return!1;const o=new Date(e.fecha_salida);let n=!0;if(I.value){const r=new Date(I.value);n=n&&o>=r}if(A.value){const r=new Date(A.value);r.setHours(23,59,59,999),n=n&&o<=r}return n})),t}),We=R(()=>D.value.length<5),fa=R(()=>Z.value?"Cargando...":U.value?"Abriendo...":We.value?"Seleccionar":"Límite alcanzado"),ae=R(()=>{if(!l.value.cupo_min)return"";const t=parseInt(l.value.cupo_min)||0,e=parseInt(l.value.cupo_max)||0;if(t<=0)return"El cupo mínimo debe ser al menos 1.";const o=N.value.find(r=>r.id===l.value.transporte_id),n=o?o.capacidad:null;return n&&t>n?`El cupo mínimo no puede ser mayor que la capacidad del transporte (${n}).`:l.value.cupo_max&&e>0&&t>=e?"El cupo mínimo debe ser menor que el cupo máximo.":""}),te=R(()=>{if(!l.value.cupo_max)return"";const t=parseInt(l.value.cupo_min)||0,e=parseInt(l.value.cupo_max)||0;if(e<=0)return"El cupo máximo debe ser al menos 1.";const o=N.value.find(r=>r.id===l.value.transporte_id),n=o?o.capacidad:null;return n&&e>n?`El cupo máximo no puede ser mayor que la capacidad del transporte (${n}).`:l.value.cupo_min&&t>0&&e<=t?"El cupo máximo debe ser mayor que el cupo mínimo.":""}),J=R(()=>{const t=N.value.find(e=>e.id===l.value.transporte_id);return t?t.capacidad:30});Oe([l,h,F,T,D,ie],()=>{O.value&&M.value&&Ae(()=>{const t={...l.value,fecha_regreso:h.value,incluye_lista:[...F.value],no_incluye_lista:[...T.value],imagenes_actuales:[...D.value]},e=JSON.stringify(t)!==JSON.stringify({...O.value,imagenes_actuales:O.value.imagenes_originales})||ie.value.length>0,o=!O.value.id,n=l.value.nombre||l.value.punto_salida||l.value.fecha_salida||h.value||l.value.precio||l.value.categoria||l.value.transporte_id||F.value.length>0||T.value.length>0||D.value.length>0;W.value=e||o&&n})},{deep:!0,flush:"post"}),Oe(()=>l.value.transporte_id,(t,e)=>{if(t&&t!==e&&M.value){const o=N.value.find(n=>n.id===t);if(o){const n=o.capacidad;l.value.cupo_min&&l.value.cupo_min>n&&(l.value.cupo_min=n),l.value.cupo_max&&l.value.cupo_max>n&&(l.value.cupo_max=n)}}});function Ce(){l.value={id:null,nombre:"",categoria:null,incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,transporte_id:null,imagenes:[]},D.value=[],re.value=[],ie.value=[],h.value=null,_.value=!1,F.value=[],T.value=[],j.value="",H.value=""}const Ke=()=>{j.value.trim()&&(F.value.push(j.value.trim()),j.value="")},ga=t=>{F.value.splice(t,1)},Ze=()=>{H.value.trim()&&(T.value.push(H.value.trim()),H.value="")},ba=t=>{T.value.splice(t,1)},Qe=t=>t?t.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],Je=t=>t.join("|"),ve=()=>{Ae(()=>{setTimeout(()=>{document.querySelectorAll(".p-select").forEach(e=>{const o=e.querySelector(".p-select-label, .p-placeholder");o&&(o.style.overflow="hidden",o.style.textOverflow="ellipsis",o.style.whiteSpace="nowrap",o.style.maxWidth="calc(100% - 2.5rem)",o.style.display="block")})},100)})};st(()=>{ya(),xa(),ve(),typeof window<"u"&&window.addEventListener("resize",Ye),ha()});const ha=()=>{const e=new URLSearchParams(window.location.search).get("editTour");e&&setTimeout(()=>{const o=ye.value.find(n=>n.id==e);if(o){aa(o);const n=window.location.pathname;window.history.replaceState({},"",n)}},1e3)},Ye=()=>{pe.value=window.innerWidth};ot(()=>{typeof window<"u"&&window.removeEventListener("resize",Ye)});const Xe=async()=>{xe.value=!0;try{const t=await L.get(he);ye.value=t.data.map(e=>{var o,n,r;return{...e,imagenes:(e.imagenes||[]).map(i=>typeof i=="string"?i:i.nombre),transporte_nombre:((o=e.transporte)==null?void 0:o.nombre)||"",transporte_capacidad:((n=e.transporte)==null?void 0:n.capacidad)||"","transporte.nombre":(r=e.transporte)==null?void 0:r.nombre}}).sort((e,o)=>{const n={EN_CURSO:1,COMPLETO:2,REPROGRAMADA:3,DISPONIBLE:4,FINALIZADO:5,CANCELADA:6},r=n[e.estado]||99,i=n[o.estado]||99;if(r!==i)return r-i;const w=new Date(e.fecha_salida),y=new Date(o.fecha_salida);return w-y})}catch{f.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los tours.",life:4e3})}finally{xe.value=!1}},ya=async()=>{xe.value=!0,f.add({severity:"info",summary:"Cargando tours...",life:2e3});try{const t=await L.get(he);ye.value=t.data.map(e=>{var o,n,r;return{...e,imagenes:(e.imagenes||[]).map(i=>typeof i=="string"?i:i.nombre),transporte_nombre:((o=e.transporte)==null?void 0:o.nombre)||"",transporte_capacidad:((n=e.transporte)==null?void 0:n.capacidad)||"","transporte.nombre":(r=e.transporte)==null?void 0:r.nombre}}).sort((e,o)=>{const n={EN_CURSO:1,COMPLETO:2,REPROGRAMADA:3,DISPONIBLE:4,FINALIZADO:5,CANCELADA:6},r=n[e.estado]||99,i=n[o.estado]||99;if(r!==i)return r-i;const w=new Date(e.fecha_salida),y=new Date(o.fecha_salida);return w-y}),f.add({severity:"success",summary:"Tours cargados",life:2e3})}catch{f.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los tours.",life:4e3})}finally{xe.value=!1}},xa=async()=>{try{const t=await L.get("/api/transportes");N.value=t.data||[]}catch{N.value=[],f.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los transportes.",life:4e3})}},_a=async()=>{Ne.value=!0;try{const t=await L.get("/api/tours-reservas-pendientes"),e={COMPLETO:1,REPROGRAMADA:2,DISPONIBLE:3};_e.value=t.data.sort((o,n)=>{const r=e[o.estado]||99,i=e[n.estado]||99;if(r!==i)return r-i;const w=new Date(o.fecha_salida_formatted),y=new Date(n.fecha_salida_formatted);return w-y})}catch(t){console.error("Error al cargar tours con reservas pendientes:",t),f.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los tours con reservas pendientes.",life:4e3})}finally{Ne.value=!1}},wa=async()=>{ce.value=!0,await _a()},Ca=t=>{ce.value=!1,va.visit(`/catalogos/reservas?tour=${t}`)},Da=()=>{k.value.categoria.value=X.value===""?null:X.value,ve()},ka=()=>{if(Q.value&&Q.value!==""){const t=N.value.find(e=>e.id===Q.value);k.value["transporte.nombre"].value=t?t.nombre:null}else k.value["transporte.nombre"].value=null;ve()},Ea=()=>{k.value.estado.value=ee.value===""?null:ee.value,ve()},De=()=>{if(I.value&&A.value){const t=new Date(I.value),e=new Date(A.value);t>e&&(A.value=null,f.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'hasta' se limpió porque era anterior a la fecha 'desde'.",life:5e3}))}},ke=()=>{if(I.value&&A.value){const t=new Date(I.value);new Date(A.value)<t&&(I.value=null,f.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'desde' se limpió porque era posterior a la fecha 'hasta'.",life:5e3}))}};Oe([X,Q,ee],()=>{ve()},{deep:!0});const ea=async()=>{q.value=!0;try{await new Promise(t=>setTimeout(t,300)),X.value="",Q.value="",ee.value="",I.value=null,A.value=null,k.value.global.value=null,k.value.categoria.value=null,k.value["transporte.nombre"].value=null,k.value.estado.value=null,k.value.fecha_salida.value=null,f.add({severity:"success",summary:"Filtros limpiados",life:2e3})}finally{q.value=!1}},Sa=()=>{Y.value=!0},Ia=()=>{Ce(),me.value="Guardar",_.value=!1,b.value=!1,M.value=!0,Ae(()=>{O.value={...l.value,fecha_regreso:h.value,incluye_lista:[...F.value],no_incluye_lista:[...T.value],imagenes_originales:[...D.value]},W.value=!1})},aa=async t=>{var e;if(t.estado==="COMPLETO"){f.add({severity:"warn",summary:"No se puede editar",detail:`No puedes editar el tour "${t.nombre}" porque ya está completo.`,life:5e3});return}try{const n=(await L.get(`/api/tours/${t.id}/reservas`)).data.reservas||[];if(n.length===0)b.value=!1;else{const r=["CANCELADA","PENDIENTE","REPROGRAMADA","CONFIRMADA"],i=["EN_CURSO","FINALIZADA"],w=n.some(s=>i.includes(s.estado)),y=n.some(s=>r.includes(s.estado));if(w){f.add({severity:"warn",summary:"No se puede editar",detail:`No puedes editar el tour "${t.nombre}" porque tiene reservas en curso o finalizadas.`,life:5e3});return}else y&&(b.value=!0,f.add({severity:"info",summary:"Edición limitada",detail:"El tour tiene reservas especiales. Solo puedes modificar los cupos.",life:5e3}))}Ce(),_.value=!1,l.value={...t,transporte_id:((e=t.transporte)==null?void 0:e.id)||t.transporte_id||null},t.fecha_salida&&(typeof t.fecha_salida=="string"?l.value.fecha_salida=new Date(t.fecha_salida):l.value.fecha_salida=t.fecha_salida),t.fecha_regreso&&(typeof t.fecha_regreso=="string"?h.value=new Date(t.fecha_regreso):h.value=t.fecha_regreso),D.value=(t.imagenes||[]).map(r=>typeof r=="string"?r:r.nombre),F.value=Qe(t.incluye),T.value=Qe(t.no_incluye),W.value=!1,me.value="Actualizar",M.value=!0,Ae(()=>{O.value={...l.value,fecha_regreso:h.value,incluye_lista:[...F.value],no_incluye_lista:[...T.value],imagenes_originales:[...D.value]},W.value=!1})}catch(o){console.error("Error verificando reservas:",o),b.value=!1,f.add({severity:"error",summary:"Error",detail:"Error al verificar las reservas del tour",life:3e3})}},Aa=async()=>{if(!l.value.fecha_salida||!h.value)return!0;try{const t=r=>{if(!r)return null;let i;return r instanceof Date?i=r:typeof r=="string"&&(r.includes("T")&&r.includes("Z")?i=new Date(r):i=new Date(r)),i.getFullYear()+"-"+String(i.getMonth()+1).padStart(2,"0")+"-"+String(i.getDate()).padStart(2,"0")+" "+String(i.getHours()).padStart(2,"0")+":"+String(i.getMinutes()).padStart(2,"0")+":"+String(i.getSeconds()).padStart(2,"0")},e=t(l.value.fecha_salida),o=t(h.value),n=await L.post("/api/tours/validar-fechas",{fecha_salida:e,fecha_regreso:o,tour_id:l.value.id});if(!n.data.success&&n.data.tiene_conflictos){const r=n.data.conflictos;let i=`${n.data.message}`;return r&&r.length>0?(i+=`:

`,i+=`Tours activos programados para esta fecha:
`,r.forEach((w,y)=>{i+=`${y+1}. ${w.nombre}
`,i+=`   Fechas: ${w.fecha_salida} al ${w.fecha_regreso}

`}),i+=`Nota: Solo se permiten 3 tours activos por fecha de salida (no se cuentan tours cancelados o finalizados).
`,i+="Por favor selecciona una fecha de salida diferente."):i+=`.

Por favor verifica la información del tour.`,f.add({severity:"warn",summary:"Límite diario alcanzado",detail:i,life:1e4}),!1}return!0}catch(t){return console.error("Error al validar fechas:",t),f.add({severity:"error",summary:"Error de validación",detail:"No se pudieron validar las fechas. Inténtalo nuevamente.",life:4e3}),!1}},Pa=async()=>{if(_.value=!0,!h.value){f.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos.",life:4e3});return}if(!l.value.nombre||l.value.nombre.length<10||l.value.nombre.length>200){f.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos y cumplan los requisitos.",life:4e3});return}if(!l.value.punto_salida||l.value.punto_salida.length<5||l.value.punto_salida.length>200){f.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos y cumplan los requisitos.",life:4e3});return}if(ae.value){f.add({severity:"warn",summary:"Error en cupo mínimo",detail:ae.value,life:4e3});return}if(te.value){f.add({severity:"warn",summary:"Error en cupo máximo",detail:te.value,life:4e3});return}if(l.value.cupo_min&&l.value.cupo_max&&l.value.cupo_min>=l.value.cupo_max){f.add({severity:"warn",summary:"Verificar datos",detail:"Por favor revisa los valores ingresados y corrige cualquier inconsistencia.",life:4e3});return}if(!Se()){f.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y asegúrate de que sean correctas.",life:4e3});return}if(!Ie()){f.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y asegúrate de que sean correctas.",life:4e3});return}if(!await Aa())return;if(!l.value.fecha_salida||!l.value.precio||!l.value.categoria||!l.value.transporte_id||!l.value.cupo_min||!l.value.cupo_max||D.value.length===0){f.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos.",life:4e3});return}if(D.value.length>5){f.add({severity:"warn",summary:"Demasiadas imágenes",detail:"No puedes subir más de 5 imágenes por tour.",life:4e3});return}const e=2*1024*1024;if(re.value.filter(n=>n.size>e).length>0){f.add({severity:"warn",summary:"Verificar archivos",detail:"Por favor revisa el tamaño de las imágenes seleccionadas.",life:4e3});return}K.value=!0;try{const n=new FormData;if(n.append("nombre",l.value.nombre||""),F.value.length>0?n.append("incluye",Je(F.value)):n.append("incluye",""),n.append("punto_salida",l.value.punto_salida||""),l.value.fecha_salida instanceof Date){const i=l.value.fecha_salida,w=i.getFullYear(),y=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0"),g=String(i.getHours()).padStart(2,"0"),V=String(i.getMinutes()).padStart(2,"0"),fe=String(i.getSeconds()).padStart(2,"0");n.append("fecha_salida",`${w}-${y}-${s} ${g}:${V}:${fe}`)}else l.value.fecha_salida&&n.append("fecha_salida",l.value.fecha_salida);if(h.value instanceof Date){const i=h.value,w=i.getFullYear(),y=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0"),g=String(i.getHours()).padStart(2,"0"),V=String(i.getMinutes()).padStart(2,"0"),fe=String(i.getSeconds()).padStart(2,"0");n.append("fecha_regreso",`${w}-${y}-${s} ${g}:${V}:${fe}`)}else h.value&&n.append("fecha_regreso",h.value);n.append("precio",l.value.precio||""),n.append("categoria",l.value.categoria||""),n.append("transporte_id",l.value.transporte_id||""),T.value.length>0?n.append("no_incluye",Je(T.value)):n.append("no_incluye",""),l.value.cupo_min&&n.append("cupo_min",l.value.cupo_min),l.value.cupo_max&&n.append("cupo_max",l.value.cupo_max),re.value.forEach(i=>n.append("imagenes[]",i)),ie.value.forEach(i=>{const w=i.includes("/")?i.split("/").pop():i;n.append("removed_images[]",w)});let r;l.value.id?(n.append("_method","PUT"),r=await L.post(`${he}/${l.value.id}`,n,{headers:{"Content-Type":"multipart/form-data"}}),f.add({severity:"success",summary:"¡Éxito!",detail:"El tour ha sido actualizado correctamente.",life:5e3})):(r=await L.post(he,n,{headers:{"Content-Type":"multipart/form-data"}}),f.add({severity:"success",summary:"¡Éxito!",detail:"El tour ha sido creado correctamente.",life:5e3})),await Xe(),M.value=!1,W.value=!1,O.value=null,Ce()}catch{f.add({severity:"warn",summary:"Error de validación",detail:"Por favor revisa los campos e intenta nuevamente.",life:6e3})}finally{K.value=!1}},Ee=u(null),Ta=async t=>{l.value={...t};try{const e=await L.get(`/api/tours/${t.id}/informacion-eliminacion`);e.data.success?Ee.value=e.data:Ee.value=null}catch(e){console.error("Error obteniendo información de eliminación:",e),Ee.value=null}de.value=!0},Fa=async()=>{Fe.value=!0;try{await L.delete(`${he}/${l.value.id}`),await Xe(),de.value=!1,f.add({severity:"success",summary:"¡Eliminado!",detail:"El tour ha sido eliminado correctamente.",life:5e3})}catch{f.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el tour. Inténtalo de nuevo.",life:5e3})}finally{Fe.value=!1}},Na=()=>{W.value?ue.value=!0:ta()},ta=()=>{M.value=!1,ue.value=!1,W.value=!1,O.value=null,Ce()},Va=()=>{ue.value=!1},La=async()=>{U.value=!0,await new Promise(t=>setTimeout(t,300)),He.value.click(),setTimeout(()=>{Z.value||(U.value=!1)},1e3)},Ra=async t=>{const e=t.target?t.target.files:t.files,o=2*1024*1024,n=5;if(U.value=!1,!e||e.length===0)return;const r=D.value.length,i=e.length;if(r+i>n){const y=n-r;f.add({severity:"warn",summary:"Límite de imágenes excedido",detail:`Solo puedes subir un máximo de ${n} imágenes por tour. Actualmente tienes ${r} imagen${r!==1?"es":""}, puedes agregar máximo ${y} más.`,life:6e3});return}Z.value=!0;try{const y=[];let s=0;for(const g of e)if(g instanceof File){if(g.size>o){f.add({severity:"warn",summary:"Archivo muy grande",detail:`El archivo "${g.name}" excede el tamaño máximo de 2MB.`,life:5e3});continue}if(!g.type.startsWith("image/")){f.add({severity:"warn",summary:"Formato no válido",detail:`El archivo "${g.name}" no es una imagen válida.`,life:4e3});continue}re.value.push(g),s++;const V=new Promise(fe=>{const ua=new FileReader;ua.onload=tt=>{D.value.push(tt.target.result),fe()},ua.readAsDataURL(g)});y.push(V)}await Promise.all(y),s>0&&f.add({severity:"success",summary:"Imágenes cargadas",detail:`${s} imagen${s>1?"es":""} cargada${s>1?"s":""} correctamente. Total: ${D.value.length}/${n}`,life:4e3})}catch{f.add({severity:"error",summary:"Error al cargar imágenes",detail:"Hubo un problema al procesar las imágenes. Inténtalo de nuevo.",life:4e3})}finally{Z.value=!1,U.value=!1,t.target&&(t.target.value="")}},Ma=t=>{const e=D.value[t];typeof e=="string"&&e.startsWith("data:image")?(D.value.splice(t,1),re.value.splice(t,1)):(ie.value.push(e),D.value.splice(t,1))},$a=t=>{if(z.value&&z.value.imagenes&&z.value.imagenes.length>0){Re.value=z.value.imagenes.map(o=>{const n=typeof o=="string"?o:o.nombre;return ze+n});const e=Math.max(0,Math.min(t,Re.value.length-1));Me.value=e,setTimeout(()=>{Le.value=!0},50)}else f.add({severity:"warn",summary:"Sin imágenes",detail:"No hay imágenes disponibles para mostrar.",life:5e3})},la=()=>{l.value.nombre&&(l.value.nombre=l.value.nombre.toUpperCase(),l.value.nombre=l.value.nombre.replace(/[^A-ZÁÉÍÓÚÑ0-9\s]/g,""),l.value.nombre=l.value.nombre.replace(/\s+/g," "),l.value.nombre.length>200&&(l.value.nombre=l.value.nombre.substring(0,200)),l.value.nombre=l.value.nombre.trim())},Oa=t=>{/[a-zA-ZáéíóúñÁÉÍÓÚÑ0-9\s]/.test(t.key)||t.preventDefault()},Ua=t=>{t.preventDefault();const e=(t.clipboardData||window.clipboardData).getData("text");if(e){let o=e.toUpperCase();o=o.replace(/[^A-ZÁÉÍÓÚÑ0-9\s]/g,""),o=o.replace(/\s+/g," "),o=o.trim(),o.length>200&&(o=o.substring(0,200)),l.value.nombre=o,la()}},qa=t=>{t.preventDefault();const e=(t.clipboardData||window.clipboardData).getData("text");if(e){let o=e.toUpperCase();o=o.replace(/\s+/g," "),o=o.trim(),o.length>200&&(o=o.substring(0,200)),l.value.punto_salida=o,sa()}},sa=()=>{l.value.punto_salida&&(l.value.punto_salida=l.value.punto_salida.toUpperCase(),l.value.punto_salida=l.value.punto_salida.replace(/\s+/g," "),l.value.punto_salida.length>200&&(l.value.punto_salida=l.value.punto_salida.substring(0,200)),l.value.punto_salida=l.value.punto_salida.trim())},oa=()=>{const t=N.value.find(r=>r.id===l.value.transporte_id),e=t?t.capacidad:null,o=parseInt(l.value.cupo_min)||0,n=parseInt(l.value.cupo_max)||0;return l.value.cupo_min&&o<1||l.value.cupo_max&&n<1||e&&(l.value.cupo_min&&o>e||l.value.cupo_max&&n>e)?!1:l.value.cupo_min&&!l.value.cupo_max||l.value.cupo_max&&!l.value.cupo_min?!0:!(l.value.cupo_min&&l.value.cupo_max&&o>=n)},Se=()=>{if(!l.value.fecha_salida)return!0;const t=new Date,e=new Date(l.value.fecha_salida),o=new Date(t.getTime()+60*60*1e3);return!(e<o||h.value&&(new Date(h.value)-e)/(1e3*60*60)<1)},Ie=()=>{if(!h.value)return!0;const t=new Date(h.value);if(l.value.fecha_salida){const e=new Date(l.value.fecha_salida);if((t-e)/(1e3*60*60)<1)return!1}return!0},na=()=>{const t=new Date;return t.setHours(t.getHours()+1),t},za=()=>{if(!l.value.fecha_salida)return na();const t=new Date(l.value.fecha_salida);return t.setHours(t.getHours()+1),t},Ba=()=>{if(!h.value)return null;const t=new Date(h.value);return t.setHours(t.getHours()-1),t},pe=u(typeof window<"u"?window.innerWidth:1024),ra=R(()=>pe.value<640?{width:"95vw",maxWidth:"380px"}:pe.value<768?{width:"400px"}:{width:"450px"}),Ga=R(()=>pe.value<640?{width:"95vw",maxWidth:"400px"}:pe.value<768?{width:"500px"}:{width:"600px"}),ja=t=>{z.value=t,$.value=!0},Ha=t=>{f.add({severity:"info",summary:"Duplicar Tour",detail:`Funcionalidad de duplicar tour "${t.nombre}" en desarrollo.`,life:5e3}),$.value=!1},Wa=t=>{$.value=!1},Ka=t=>{f.add({severity:"info",summary:"Generar Reporte",detail:`Funcionalidad de generar reporte del tour "${t.nombre}" en desarrollo.`,life:5e3}),$.value=!1},Za=t=>{f.add({severity:"info",summary:"Archivar Tour",detail:`Funcionalidad de archivar tour "${t.nombre}" en desarrollo.`,life:5e3}),$.value=!1},Qa=t=>{va.visit(`/catalogos/reservas?tour=${t.id}`)},Ja=t=>{$.value=!1,z.value=t,we.value=!0},Ya=t=>{t.originalEvent.target.closest("button")||(z.value=t.data,we.value=!0)},ia=t=>{const e=t.target.value,o=t.key;if([8,9,27,13,46,35,36,37,38,39,40].includes(t.keyCode)||t.ctrlKey&&[65,67,86,88].includes(t.keyCode))return;if(!/[0-9]/.test(o)){t.preventDefault();return}const n=e+o,r=parseInt(n),i=J.value;if(n==="0"||e===""&&o==="0"){t.preventDefault();return}if(n.length>3||r>i||r<1){t.preventDefault();return}},da=t=>{t.preventDefault();const o=(t.clipboardData||window.clipboardData).getData("text").replace(/[^0-9]/g,"");if(o){let n=parseInt(o);const r=J.value;n<1?n=1:n>r&&(n=r),t.target.id.includes("cupo_min")?l.value.cupo_min=n:t.target.id.includes("cupo_max")&&(l.value.cupo_max=n)}},Xa=R(()=>l.cupo_max?Math.max(1,l.cupo_max-1):1),et=t=>{const e=t.target.value,o=t.key;if([8,9,27,13,46,35,36,37,38,39,40].includes(t.keyCode)||t.ctrlKey&&[65,67,86,88].includes(t.keyCode))return;if(!/[0-9.]/.test(o)){t.preventDefault();return}if(o==="."&&e.includes(".")){t.preventDefault();return}if(o!=="."){const i=e.split(".");if(i[0].length>=4&&!e.includes(".")){t.preventDefault();return}if(i.length>1&&i[1].length>=2){t.preventDefault();return}}const n=e+o;if(parseFloat(n)>9999.99){t.preventDefault();return}},at=t=>{t.preventDefault();let o=(t.clipboardData||window.clipboardData).getData("text").replace(/[^\d.]/g,"");if(!o||o===".")return;if((o.match(/\./g)||[]).length>1){const y=o.indexOf(".");o=o.substring(0,y+1)+o.substring(y+1).replace(/\./g,"")}const r=parseFloat(o);if(isNaN(r))return;const w=Math.min(r,9999.99).toFixed(2);l.precio=w,t.target.value=w};return(t,e)=>{const o=le("Toast"),n=le("InputText"),r=le("Column"),i=le("DataTable"),w=le("Select"),y=le("Dialog");return c(),Ue(it,null,{default:P(()=>[v(d(nt),{title:"Tours"}),v(o,{class:"z-[9999]"}),a("div",xt,[a("div",_t,[a("div",wt,[e[34]||(e[34]=a("div",{class:"text-center sm:text-left"},[a("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Catálogo de Tours"),a("p",{class:"text-gray-600"},"Gestión completa de paquetes turísticos"),a("div",{class:"mt-3 space-y-2"},[a("div",{class:"flex items-start gap-2 px-3 py-2 bg-blue-50/70 border border-blue-200/50 rounded-lg text-xs text-blue-700"},[a("i",{class:"fas fa-info-circle mt-0.5 text-blue-500 flex-shrink-0"}),a("div",null,[a("span",{class:"font-semibold"},"Ordenamiento:"),C(" Tours por estado (En Curso → Completo → Reprogramada → Disponible → Finalizado) y fecha próxima. ")])]),a("div",{class:"flex items-start gap-2 px-3 py-2 bg-green-50/70 border border-green-200/50 rounded-lg text-xs text-green-700"},[a("i",{class:"fas fa-calendar-check mt-0.5 text-green-500 flex-shrink-0"}),a("div",null,[a("span",{class:"font-semibold"},"Reservas:"),C(' Usa botón "Más" (⋮) → "Ver reservas" para gestionar reservas individuales. ')])]),a("div",{class:"flex items-start gap-2 px-3 py-2 bg-orange-50/70 border border-orange-200/50 rounded-lg text-xs text-orange-700"},[a("i",{class:"fas fa-clock mt-0.5 text-orange-500 flex-shrink-0"}),a("div",null,[a("span",{class:"font-semibold"},"Pendientes:"),C(' Botón "Pendientes" muestra tours con reservas por confirmar. ')])])])],-1)),a("div",Ct,[a("button",{onClick:wa,class:"bg-orange-500 border border-orange-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 flex items-center gap-2"},[v(d(E),{icon:d(ut),class:"h-4 w-4"},null,8,["icon"]),e[31]||(e[31]=a("span",{class:"hidden sm:block"},"Pendientes",-1)),e[32]||(e[32]=a("span",{class:"block sm:hidden"},"Pendientes",-1))]),v(d(rt),{href:t.route("transportes"),onClick:Sa,class:S([{"opacity-50 cursor-not-allowed":Y.value},"bg-blue-500 border border-blue-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 flex items-center gap-2"])},{default:P(()=>[v(d(E),{icon:Y.value?d(ne):d(ct),class:S({"animate-spin":Y.value,"h-4":!0})},null,8,["icon","class"]),a("span",Dt,p(Y.value?"Cargando...":"Transportes"),1),a("span",kt,p(Y.value?"Cargando...":"Transportes"),1)]),_:1},8,["href","class"]),a("button",{class:"bg-red-500 flex border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:Ia},[v(d(E),{icon:d(Pe),class:"h-4 w-4 mr-1 text-white"},null,8,["icon"]),e[33]||(e[33]=a("span",null,"Agregar",-1))])])]),v(i,{value:$e.value,selection:Be.value,"onUpdate:selection":e[8]||(e[8]=s=>Be.value=s),dataKey:"id",paginator:!0,rows:Ve.value,rowsPerPageOptions:pa.value,rowsPerPage:Ve.value,"onUpdate:rowsPerPage":e[9]||(e[9]=s=>Ve.value=s),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} tours",class:"overflow-x-auto max-w-full px-auto",onRowClick:Ya,responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:P(()=>[a("div",Et,[a("div",St,[a("div",It,[e[35]||(e[35]=a("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[a("i",{class:"pi pi-filter text-blue-600 text-sm"}),a("span",null,"Filtros")],-1)),a("div",At,p($e.value.length)+" resultado"+p($e.value.length!==1?"s":""),1),a("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:ea,disabled:q.value},[q.value?(c(),Ue(d(E),{key:0,icon:d(ne),class:"animate-spin h-3 w-3"},null,8,["icon"])):x("",!0),a("span",null,p(q.value?"Limp...":"Limpiar"),1)],8,Pt)]),a("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:ea,disabled:q.value},[q.value?(c(),Ue(d(E),{key:0,icon:d(ne),class:"animate-spin h-3 w-3"},null,8,["icon"])):x("",!0),a("span",null,p(q.value?"Limpiando...":"Limpiar filtros"),1)],8,Tt)]),a("div",Ft,[a("div",Nt,[v(d(E),{icon:d(ft),class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"},null,8,["icon"]),v(n,{modelValue:k.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=s=>k.value.global.value=s),placeholder:"Buscar tours...",class:"w-full h-9 text-sm rounded-md pl-10",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),a("div",Vt,[a("div",null,[ge(a("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>X.value=s),onChange:Da,class:"w-full h-9 text-sm border border-blue-300 rounded-md px-3 py-1 bg-white text-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 truncate"},[e[36]||(e[36]=a("option",{value:"",disabled:"",selected:"",hidden:""},"Categoría",-1)),(c(!0),m(B,null,G(Ge.value,s=>(c(),m("option",{key:s.value,value:s.value,class:"truncate text-gray-900 text-lg"},p(s.label),9,Lt))),128))],544),[[qe,X.value]])]),a("div",null,[ge(a("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>Q.value=s),onChange:ka,class:"w-full h-9 text-sm border border-blue-300 rounded-md px-3 py-1 bg-white text-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 truncate"},[e[37]||(e[37]=a("option",{value:"",disabled:"",selected:"",hidden:""},"Transporte",-1)),(c(!0),m(B,null,G(N.value,s=>(c(),m("option",{key:s.id,value:s.id,class:"truncate text-gray-900 text-lg"},p(s.nombre),9,Rt))),128))],544),[[qe,Q.value]])]),a("div",Mt,[ge(a("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>ee.value=s),onChange:Ea,class:"w-full h-9 text-sm border border-blue-300 rounded-md px-3 py-1 bg-white text-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 truncate"},[e[38]||(e[38]=a("option",{value:"",disabled:"",selected:"",hidden:""},"Estado",-1)),(c(!0),m(B,null,G(je.value,s=>(c(),m("option",{key:s.value,value:s.value,class:"truncate text-gray-900 text-lg"},p(s.label),9,$t))),128))],544),[[qe,ee.value]])]),a("div",Ot,[v(d(oe),{modelValue:I.value,"onUpdate:modelValue":e[4]||(e[4]=s=>I.value=s),placeholder:"Fecha desde",class:"w-full h-9 text-sm rounded-md border border-blue-300",onDateSelect:De,onClear:De,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:A.value},null,8,["modelValue","maxDate"])]),a("div",Ut,[v(d(oe),{modelValue:A.value,"onUpdate:modelValue":e[5]||(e[5]=s=>A.value=s),placeholder:"Fecha hasta",class:"w-full h-9 text-sm rounded-md border border-blue-300",onDateSelect:ke,onClear:ke,showIcon:!0,dateFormat:"dd/mm/yy",minDate:I.value},null,8,["modelValue","minDate"])]),a("div",qt,[v(d(oe),{modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=s=>I.value=s),placeholder:"Fecha desde",class:"h-9 text-sm rounded-md",onDateSelect:De,onClear:De,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:A.value},null,8,["modelValue","maxDate"]),v(d(oe),{modelValue:A.value,"onUpdate:modelValue":e[7]||(e[7]=s=>A.value=s),placeholder:"Fecha hasta",class:"h-9 text-sm rounded-md",onDateSelect:ke,onClear:ke,showIcon:!0,dateFormat:"dd/mm/yy",minDate:I.value},null,8,["modelValue","minDate"])]),a("div",zt,[a("p",Bt,[v(d(E),{icon:d(gt),class:"h-3 w-3 text-yellow-500"},null,8,["icon"]),e[39]||(e[39]=C(" Haz clic en cualquier fila para ver los detalles. "))])])])])])]),default:P(()=>[v(r,{field:"nombre",header:"Nombre",sortable:"",class:"w-36 min-w-24"},{body:P(s=>[a("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"85px","text-overflow":"ellipsis","white-space":"nowrap"},title:s.data.nombre},p(s.data.nombre),9,Gt)]),_:1}),v(r,{field:"punto_salida",header:"Punto salida",class:"w-32 min-w-32 hidden md:table-cell"},{body:P(s=>[a("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"128px","text-overflow":"ellipsis","white-space":"nowrap"},title:s.data.punto_salida},p(s.data.punto_salida),9,jt)]),_:1}),v(r,{field:"fecha_salida",header:"Fecha salida",class:"w-36 min-w-36 hidden md:table-cell"},{body:P(s=>[a("div",Ht,p(s.data.fecha_salida?new Date(s.data.fecha_salida).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):""),1)]),_:1}),v(r,{field:"precio",header:"Precio",class:"w-24 min-w-18"},{body:P(s=>[a("div",Wt,p(isNaN(Number(s.data.precio))?"":`$${Number(s.data.precio).toFixed(2)}`),1)]),_:1}),v(r,{field:"estado",header:"Estado",class:"w-32 min-w-24 hidden lg:table-cell"},{body:P(s=>{var g;return[a("span",{class:S([{"bg-green-100 text-green-800":s.data.estado==="DISPONIBLE","bg-red-100 text-red-800":s.data.estado==="COMPLETO"||s.data.estado==="CANCELADA","bg-blue-100 text-blue-800":s.data.estado==="EN_CURSO","bg-gray-100 text-gray-800":s.data.estado==="FINALIZADO","bg-purple-100 text-purple-800":s.data.estado==="REPROGRAMADA"},"px-2 py-1 rounded-full text-xs font-medium"])},p(((g=je.value.find(V=>V.value===s.data.estado))==null?void 0:g.label)||s.data.estado),3)]}),_:1}),v(r,{exportable:!1,class:"w-52 min-w-36"},{header:P(()=>e[40]||(e[40]=[a("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:P(s=>[a("div",Kt,[a("button",{class:"flex bg-green-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:g=>ja(s.data),title:"Más acciones"},[v(d(E),{icon:d(mt),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[41]||(e[41]=a("span",{class:"hidden md:block text-white"},"Más",-1))],8,Zt),a("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:g=>aa(s.data)},[v(d(E),{icon:d(vt),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[42]||(e[42]=a("span",{class:"hidden md:block text-white"},"Editar",-1))],8,Qt),a("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:g=>Ta(s.data)},[v(d(E),{icon:d(pt),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[43]||(e[43]=a("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,Jt)])]),_:1})]),_:1},8,["value","selection","rows","rowsPerPageOptions","rowsPerPage"]),v(y,{visible:M.value,"onUpdate:visible":e[21]||(e[21]=s=>M.value=s),header:me.value+" Tour",modal:!0,style:se(ra.value),closable:!1,draggable:!1},{footer:P(()=>[a("div",fs,[a("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Pa,disabled:K.value||!!ae.value||!!te.value},[v(d(E),{icon:K.value?d(ne):d(ht),class:S(["h-5 text-white",{"animate-spin":K.value}])},null,8,["icon","class"]),K.value?(c(),m("span",hs,p(me.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(c(),m("span",bs,p(me.value),1))],8,gs),a("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Na,disabled:K.value},[v(d(E),{icon:d(Te),class:"h-5"},null,8,["icon"]),e[63]||(e[63]=C("Cancelar "))],8,ys)])]),default:P(()=>[b.value?(c(),m("div",Yt,[a("div",Xt,[a("div",el,[v(d(E),{icon:d(bt),class:"h-5 w-5 text-yellow-400"},null,8,["icon"])]),e[44]||(e[44]=a("div",{class:"ml-3"},[a("p",{class:"text-sm text-yellow-700"},[a("strong",null,"Edición restringida:"),C(" Este tour tiene reservas en estados especiales (Cancelada, Pendiente o Reprogramada). Solo puedes modificar el cupo mínimo y máximo. Los demás campos están deshabilitados para mantener la integridad de los datos. ")])],-1))])])):x("",!0),a("div",al,[a("div",tl,[a("div",ll,[e[45]||(e[45]=a("label",{for:"nombre",class:"flex items-center gap-1"},[C("Tour: "),a("span",{class:"text-red-500 font-bold"},"*")],-1)),v(n,{modelValue:l.value.nombre,"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.nombre=s),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:200,disabled:b.value,class:S([{"p-invalid":_.value&&(!l.value.nombre||l.value.nombre.length<10||l.value.nombre.length>200),"opacity-50 bg-gray-100 cursor-not-allowed":b.value},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"TOUR AL CERRO EL PITAL, ETC",onInput:la,onKeypress:Oa,onPaste:Ua},null,8,["modelValue","disabled","class"])]),l.value.nombre&&l.value.nombre.length<10?(c(),m("small",sl," El nombre debe tener al menos 10 caracteres. Actual: "+p(l.value.nombre.length)+"/10 ",1)):x("",!0),l.value.nombre&&l.value.nombre.length>=180&&l.value.nombre.length<=200?(c(),m("small",ol," Caracteres restantes: "+p(200-l.value.nombre.length)+". ",1)):x("",!0),_.value&&!l.value.nombre?(c(),m("small",nl," El nombre es obligatorio. ")):x("",!0)]),a("div",rl,[a("div",il,[e[46]||(e[46]=a("label",{for:"incluye",class:"w-12 flex items-center gap-1 mt-2"}," Incluye: ",-1)),a("div",dl,[a("div",ul,[ge(a("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>j.value=s),type:"text",placeholder:"Agregar nuevo elemento...",disabled:b.value,class:S([{"opacity-50 bg-gray-100 cursor-not-allowed":b.value},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),onKeyup:ca(Ke,["enter"])},null,42,cl),[[ma,j.value]]),a("button",{type:"button",onClick:Ke,disabled:!j.value.trim()||b.value,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[v(d(E),{icon:d(Pe),class:"h-5"},null,8,["icon"])],8,ml)]),a("div",vl,[(c(!0),m(B,null,G(F.value,(s,g)=>(c(),m("div",{key:g,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[a("span",pl,p(s),1),a("button",{type:"button",onClick:V=>ga(g),disabled:b.value,class:"text-red-500 hover:text-red-700 p-1 disabled:text-gray-400 disabled:cursor-not-allowed"},[v(d(E),{icon:d(Te),class:"h-5"},null,8,["icon"])],8,fl)]))),128))]),F.value.length===0?(c(),m("div",gl," Sin elementos agregados. ")):x("",!0)])])]),a("div",bl,[a("div",hl,[e[47]||(e[47]=a("label",{for:"no_incluye",class:"w-12 flex items-center gap-1 mt-2"}," No incluye: ",-1)),a("div",yl,[a("div",xl,[ge(a("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>H.value=s),type:"text",placeholder:"Agregar nuevo elemento...",disabled:b.value,class:S([{"opacity-50 bg-gray-100 cursor-not-allowed":b.value},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),onKeyup:ca(Ze,["enter"])},null,42,_l),[[ma,H.value]]),a("button",{type:"button",onClick:Ze,disabled:!H.value.trim()||b.value,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[v(d(E),{icon:d(Pe),class:"h-5"},null,8,["icon"])],8,wl)]),T.value.length>0?(c(),m("div",Cl,[(c(!0),m(B,null,G(T.value,(s,g)=>(c(),m("div",{key:g,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[a("span",Dl,p(s),1),a("button",{type:"button",onClick:V=>ba(g),disabled:b.value,class:"text-red-500 hover:text-red-700 p-1 disabled:text-gray-400 disabled:cursor-not-allowed"},[v(d(E),{icon:d(Te),class:"h-5"},null,8,["icon"])],8,kl)]))),128))])):x("",!0),T.value.length===0?(c(),m("div",El," Sin elementos agregados. ")):x("",!0)])])]),a("div",Sl,[a("div",Il,[e[48]||(e[48]=a("label",{for:"punto_salida",class:"flex w-12 items-center"},[C(" Punto salida: "),a("span",{class:"text-red-500 font-bold"}," * ")],-1)),v(n,{modelValue:l.value.punto_salida,"onUpdate:modelValue":e[13]||(e[13]=s=>l.value.punto_salida=s),modelModifiers:{trim:!0},id:"punto_salida",name:"punto_salida",maxlength:200,disabled:b.value,class:S([{"p-invalid":_.value&&(!l.value.punto_salida||l.value.punto_salida.length<5),"opacity-50 bg-gray-100 cursor-not-allowed":b.value},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"ATRIO DE CATEDRAL DE CHALATENANGO, ETC",onInput:sa,onPaste:qa},null,8,["modelValue","disabled","class"])]),l.value.punto_salida&&l.value.punto_salida.length<5?(c(),m("small",Al,"Debe tener al menos 5 caracteres. Actual: "+p(l.value.punto_salida.length)+"/5",1)):x("",!0),l.value.punto_salida&&l.value.punto_salida.length>=180&&l.value.punto_salida.length<=200?(c(),m("small",Pl,"Caracteres restantes: "+p(200-l.value.punto_salida.length),1)):x("",!0),_.value&&!l.value.punto_salida?(c(),m("small",Tl,"El punto de salida es obligatorio.")):x("",!0),_.value&&l.value.punto_salida&&l.value.punto_salida.length<5?(c(),m("small",Fl,"El punto de salida debe tener al menos 5 caracteres.")):x("",!0)]),a("div",Nl,[a("div",Vl,[e[49]||(e[49]=a("label",{for:"transporte_id",class:"w-24 flex items-center gap-1"},[C("Transporte:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),v(w,{modelValue:l.value.transporte_id,"onUpdate:modelValue":e[14]||(e[14]=s=>l.value.transporte_id=s),options:N.value,optionLabel:"nombre",optionValue:"id",id:"transporte_id",name:"transporte_id",disabled:b.value,class:S(["w-full rounded-md border-2 border-gray-400 hover:border-gray-500",{"p-invalid":_.value&&!l.value.transporte_id}]),placeholder:"Seleccionar",style:se(b.value?"opacity: 0.5; background-color: #f3f4f6; cursor: not-allowed; pointer-events: none;":"")},null,8,["modelValue","options","disabled","class","style"])]),_.value&&!l.value.transporte_id?(c(),m("small",Ll,"El tipo de transporte es obligatorio.")):x("",!0)]),a("div",Rl,[a("div",Ml,[a("label",$l,[e[50]||(e[50]=C(" Cupo mínimo: ")),e[51]||(e[51]=a("span",{class:"text-red-500 font-bold"},"*",-1)),l.value.transporte_id?(c(),m("small",Ol," (Mín: "+p(Xa.value)+") ",1)):x("",!0)]),v(n,{modelValue:l.value.cupo_min,"onUpdate:modelValue":e[15]||(e[15]=s=>l.value.cupo_min=s),id:"cupo_min",name:"cupo_min",type:"number",inputmode:"numeric",min:"1",max:J.value,class:S(["w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":_.value&&!l.value.cupo_min||ae.value}]),placeholder:`1-${J.value}`,onKeydown:ia,onPaste:da,onInput:oa},null,8,["modelValue","max","class","placeholder"]),_.value&&!l.value.cupo_min?(c(),m("small",Ul,"El cupo mínimo es obligatorio.")):x("",!0),ae.value?(c(),m("small",ql,p(ae.value),1)):x("",!0)]),a("div",zl,[a("label",Bl,[e[52]||(e[52]=C(" Cupo máximo: ")),e[53]||(e[53]=a("span",{class:"text-red-500 font-bold"},"*",-1)),l.value.transporte_id?(c(),m("small",Gl,"(Máx: "+p(J.value)+")",1)):x("",!0)]),v(n,{modelValue:l.value.cupo_max,"onUpdate:modelValue":e[16]||(e[16]=s=>l.value.cupo_max=s),id:"cupo_max",name:"cupo_max",type:"number",inputmode:"numeric",min:"1",max:J.value,class:S(["w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":_.value&&!l.value.cupo_max||te.value}]),placeholder:`1-${J.value}`,onKeydown:ia,onPaste:da,onInput:oa},null,8,["modelValue","max","class","placeholder"]),_.value&&!l.value.cupo_max?(c(),m("small",jl,"El cupo máximo es obligatorio.")):x("",!0),te.value?(c(),m("small",Hl,p(te.value),1)):x("",!0)])]),a("div",Wl,[a("div",Kl,[e[54]||(e[54]=a("label",{for:"fecha_salida",class:"flex items-center gap-1 mb-2"},[C("Fecha y hora de salida:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),v(d(oe),{modelValue:l.value.fecha_salida,"onUpdate:modelValue":e[17]||(e[17]=s=>l.value.fecha_salida=s),id:"fecha_salida",name:"fecha_salida",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:na(),maxDate:Ba(),disabled:b.value,class:S([{"p-invalid":_.value&&!l.value.fecha_salida||l.value.fecha_salida&&!Se()},"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),style:se(b.value?"opacity: 0.5; background-color: #f3f4f6; cursor: not-allowed; pointer-events: none;":""),manualInput:!1,onDateSelect:Se,onInput:Se},null,8,["modelValue","minDate","maxDate","disabled","class","style"]),_.value&&!l.value.fecha_salida?(c(),m("small",Zl,"Fecha y hora de salida requerida.")):x("",!0)]),a("div",Ql,[e[55]||(e[55]=a("label",{for:"horaRegresoCalendar",class:"flex items-center gap-1 mb-2"},[C("Fecha y hora regreso:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),v(d(oe),{modelValue:h.value,"onUpdate:modelValue":e[18]||(e[18]=s=>h.value=s),id:"horaRegresoCalendar",name:"horaRegresoCalendar",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:za(),manualInput:!1,disabled:b.value,class:S([{"p-invalid":_.value&&!h.value||h.value&&!Ie()},"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),style:se(b.value?"opacity: 0.5; background-color: #f3f4f6; cursor: not-allowed; pointer-events: none;":""),onDateSelect:Ie,onInput:Ie},null,8,["modelValue","minDate","disabled","class","style"]),_.value&&!h.value?(c(),m("small",Jl,"Fecha y hora de regreso requerida.")):x("",!0)])]),a("div",Yl,[a("div",Xl,[e[57]||(e[57]=a("label",{for:"precio",class:"w-24 flex items-center gap-1"},[C("Precio:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",es,[e[56]||(e[56]=a("span",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"},"$",-1)),v(n,{modelValue:l.value.precio,"onUpdate:modelValue":e[19]||(e[19]=s=>l.value.precio=s),id:"precio",name:"precio",type:"text",inputmode:"decimal",disabled:b.value,class:S(["w-full pl-8 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":_.value&&(!l.value.precio||l.value.precio<.01||l.value.precio>9999.99),"opacity-50 bg-gray-100 cursor-not-allowed":b.value}]),placeholder:"0.00",onKeydown:et,onPaste:at},null,8,["modelValue","disabled","class"])])]),_.value&&(l.value.precio==null||l.value.precio<.01||l.value.precio>9999.99)?(c(),m("small",as,"El precio es obligatorio, debe ser mayor o igual a 0.01 y menor o igual a 9999.99.")):x("",!0)]),a("div",ts,[a("div",ls,[e[58]||(e[58]=a("label",{for:"categoria",class:"w-24 flex items-center gap-1"},[C("Categoría:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),v(w,{modelValue:l.value.categoria,"onUpdate:modelValue":e[20]||(e[20]=s=>l.value.categoria=s),options:Ge.value,optionLabel:"label",optionValue:"value",id:"categoria",name:"categoria",disabled:b.value,class:S(["w-full rounded-md border-2 border-gray-400 hover:border-gray-500",{"p-invalid":_.value&&!l.value.categoria}]),placeholder:"Seleccionar",style:se(b.value?"opacity: 0.5; background-color: #f3f4f6; cursor: not-allowed; pointer-events: none;":"")},null,8,["modelValue","options","disabled","class","style"])]),_.value&&!l.value.categoria?(c(),m("small",ss,"La categoría es obligatoria.")):x("",!0)]),a("div",os,[a("div",ns,[e[61]||(e[61]=a("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},[C("Imágenes:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",rs,[a("div",is,[a("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:Ra,class:"hidden",ref_key:"fileInput",ref:He},null,544),a("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 outline-none focus:outline-none active:outline-none disabled:opacity-50 disabled:cursor-not-allowed",onClick:La,disabled:Z.value||U.value||!We.value},[v(d(E),{icon:Z.value?d(ne):U.value?d(ne):d(Pe),class:S({"animate-spin":Z.value||U.value})},null,8,["icon","class"]),C(" "+p(fa.value),1)],8,ds),a("div",us,[a("span",{class:S(["text-sm font-medium",D.value.length>=5?"text-red-600":"text-gray-600"])},p(D.value.length)+"/5 ",3),e[59]||(e[59]=a("span",{class:"text-xs text-gray-500"},"imágenes",-1))])]),e[60]||(e[60]=a("div",{class:"text-xs text-gray-500 mb-2"}," Máximo 5 imágenes por tour • Formatos: JPG, PNG, GIF • Tamaño máximo: 2MB por imagen ",-1))])]),_.value&&D.value.length===0?(c(),m("small",cs,"Las imágenes son obligatorias (al menos una).")):x("",!0)]),a("div",ms,[(c(!0),m(B,null,G(D.value,(s,g)=>(c(),m("div",{key:g,class:"relative w-24 sm:w-28 h-24 sm:h-28"},[a("img",{src:s.startsWith("data:image")?s:ze+s,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,vs),a("button",{onClick:V=>Ma(g),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow",style:{transform:"translate(50%, -50%)"}},e[62]||(e[62]=[a("i",{class:"pi pi-times text-xs"},null,-1)]),8,ps)]))),128))])])]),_:1},8,["visible","header","style"]),v(yt,{visible:$.value,"onUpdate:visible":e[22]||(e[22]=s=>$.value=s),"details-visible":we.value,"onUpdate:detailsVisible":e[23]||(e[23]=s=>we.value=s),"carousel-visible":Le.value,"onUpdate:carouselVisible":e[24]||(e[24]=s=>Le.value=s),"delete-visible":de.value,"onUpdate:deleteVisible":e[25]||(e[25]=s=>de.value=s),"unsaved-changes-visible":ue.value,"onUpdate:unsavedChangesVisible":e[26]||(e[26]=s=>ue.value=s),"carousel-index":Me.value,"onUpdate:carouselIndex":e[27]||(e[27]=s=>Me.value=s),tour:z.value||l.value,"dialog-style":ra.value,"selected-images":Re.value,"image-path":ze,"is-deleting":Fe.value,"tour-delete-info":Ee.value,onDuplicate:Ha,onChangeStatus:Wa,onGenerateReport:Ka,onArchive:Za,onDeleteTour:Fa,onCancelDelete:e[28]||(e[28]=()=>de.value=!1),onCloseWithoutSaving:ta,onContinueEditing:Va,onViewDetails:Ja,onViewReservations:Qa,onOpenImageModal:$a},null,8,["visible","details-visible","carousel-visible","delete-visible","unsaved-changes-visible","carousel-index","tour","dialog-style","selected-images","is-deleting","tour-delete-info"])])]),v(y,{visible:ce.value,"onUpdate:visible":e[30]||(e[30]=s=>ce.value=s),header:"Tours con Reservas Pendientes",modal:!0,style:se(Ga.value),closable:!1,draggable:!1},{footer:P(()=>[a("div",zs,[a("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[29]||(e[29]=s=>ce.value=!1)},[v(d(E),{icon:d(Te),class:"h-5"},null,8,["icon"]),e[74]||(e[74]=C(" Cerrar "))])])]),default:P(()=>[Ne.value?(c(),m("div",xs,e[64]||(e[64]=[a("i",{class:"fas fa-spinner animate-spin text-2xl text-blue-500 mb-2"},null,-1),a("p",{class:"text-gray-600"},"Cargando tours con reservas pendientes...",-1)]))):_e.value.length===0?(c(),m("div",_s,e[65]||(e[65]=[a("i",{class:"fas fa-check-circle text-4xl text-green-500 mb-4"},null,-1),a("h3",{class:"text-lg font-semibold text-gray-800 mb-2"},"¡Excelente!",-1),a("p",{class:"text-gray-600"},"No hay tours con reservas pendientes en este momento.",-1)]))):(c(),m("div",ws,[a("div",Cs,[a("div",Ds,[e[66]||(e[66]=a("i",{class:"fas fa-exclamation-triangle text-orange-500 text-sm"},null,-1)),a("span",ks,p(_e.value.length)+" tour(s) pendiente(s)",1)])]),e[73]||(e[73]=a("div",{class:"p-2 bg-blue-50 border border-blue-200 rounded-md text-xs text-blue-700 mb-3"},[a("i",{class:"fas fa-info-circle mr-1"}),a("strong",null,"Navegación:"),C(" Haz clic en cualquier tour para ir directamente a sus reservas pendientes. ")],-1)),a("div",Es,[(c(!0),m(B,null,G(_e.value,s=>(c(),m("div",{key:s.id,class:"border border-gray-200 rounded-lg p-3 hover:shadow-sm transition-shadow cursor-pointer hover:bg-gray-50",onClick:g=>Ca(s.id)},[a("div",Is,[a("h4",As,p(s.nombre),1),a("div",Ps,[a("span",Ts,p(s.reservas_pendientes_count),1),e[67]||(e[67]=a("i",{class:"fas fa-external-link-alt text-blue-500 text-xs"},null,-1))])]),a("div",Fs,[a("div",null,[e[68]||(e[68]=a("strong",null,"Fecha:",-1)),C(" "+p(s.fecha_salida_formatted),1)]),a("div",null,[e[69]||(e[69]=a("strong",null,"Estado:",-1)),C(" "+p(s.estado),1)]),a("div",null,[e[70]||(e[70]=a("strong",null,"Precio:",-1)),C(" $"+p(s.precio),1)]),a("div",Ns,[e[71]||(e[71]=a("strong",null,"Cupo mínimo:",-1)),s.cupo_minimo_alcanzado?(c(),m("span",Vs," ✓ Alcanzado ("+p(s.cupos_reservados)+"/"+p(s.cupo_min)+") ",1)):(c(),m("span",Ls," ✗ Pendiente ("+p(s.cupos_reservados)+"/"+p(s.cupo_min)+") ",1))])]),a("div",Rs,[e[72]||(e[72]=a("h5",{class:"font-medium text-gray-800 text-xs mb-1"},"Reservas:",-1)),a("div",Ms,[(c(!0),m(B,null,G(s.reservas_pendientes,g=>(c(),m("div",{key:g.id,class:"text-xs"},[a("div",$s,[a("span",Os,p(g.cliente_nombre),1),a("span",Us,p(g.cupos_reservados)+" cupo(s)",1)]),a("div",qs,p(g.fecha_reserva),1)]))),128))])])],8,Ss))),128))])]))]),_:1},8,["visible","style"])]),_:1})}}};export{Qs as default};
