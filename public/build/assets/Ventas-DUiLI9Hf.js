import{A as Ve}from"./AuthenticatedLayout-F65G6cJn.js";import{N as K,r as v,w as Ee,E as J,o as Fe,h as Q,d as j,x as u,p as n,e,$ as t,a0 as Se,t as r,y as b,c as X,j as B,A as de,q as g,a3 as Pe}from"./vendor-CLNWHdEK.js";import{A as Le,F as ie,a as Ae,D as c,e as ce,f as h,h as je,o as ue,q as U,g as me}from"./ui-DPmvhuIJ.js";import{e as $e,g as N,v as Te,F as ve,d as Ie,j as Be,f as L,G as pe,H as Ne,I as He,J as Re,K as Ue,h as fe}from"./index-Bl_KdgJY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const We={class:"container mx-auto px-4 py-6"},Me={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},Oe={class:"bg-gradient-to-r from-green-400 to-green-600 text-white rounded-lg p-4 shadow-md"},ze={class:"flex items-center justify-between"},Ge={class:"text-2xl font-bold"},qe={class:"bg-gradient-to-r from-red-400 to-red-600 text-white rounded-lg p-4 shadow-md"},Ke={class:"flex items-center justify-between"},Je={class:"text-2xl font-bold"},Qe={class:"bg-gradient-to-r from-blue-400 to-blue-600 text-white rounded-lg p-4 shadow-md"},Xe={class:"flex items-center justify-between"},Ye={class:"text-2xl font-bold"},Ze={class:"bg-white rounded-lg shadow-md"},ea={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},aa={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},ta={class:"flex items-center gap-3"},la={class:"text-base font-medium text-gray-800 flex items-center gap-2"},sa={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},oa=["disabled"],na=["disabled"],ra={class:"flex gap-2"},da=["disabled"],ia=["disabled"],ca={class:"space-y-3"},ua={class:"sm:hidden"},ma={class:"grid grid-cols-2 gap-3 sm:hidden"},va={class:"hidden sm:grid sm:grid-cols-3 gap-3"},pa={class:"text-sm leading-relaxed"},fa={class:"flex items-center gap-2"},ga={class:"text-sm font-medium"},xa={class:"text-sm font-bold text-green-600"},ba={class:"text-sm text-center"},ha={class:"flex flex-wrap gap-1 sm:gap-2 justify-center items-center"},ya=["onClick"],wa=["onClick"],_a={key:0,class:"space-y-4"},Ca={class:"bg-white rounded-lg border p-4"},Da={class:"flex items-center justify-between mb-4"},ka={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Va={class:"space-y-3"},Ea={class:"flex items-center gap-2"},Fa={class:"flex items-center gap-2"},Sa={class:"flex items-center gap-2"},Pa={class:"flex items-center gap-2"},La={class:"bg-white rounded-lg border p-4"},Aa={class:"text-lg font-semibold text-gray-800 mb-4"},ja={class:"flex items-center gap-2"},$a={class:"font-medium"},Ta={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Ia={class:"font-medium"},Ba={class:"font-bold text-green-600"},Na={class:"flex justify-center gap-4 w-full mt-6"},Ha={key:0,class:"space-y-4"},Ra={class:"bg-gray-50 p-4 rounded-lg border"},Ua={class:"space-y-2 text-sm"},Wa={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Ma={class:"flex items-start gap-2"},Oa={class:"text-sm text-yellow-800"},za={class:"flex justify-center gap-4 w-full mt-6"},Ga=["disabled"],qa=["disabled"],Za={__name:"Ventas",props:{ventas:{type:[Array,Object],default:()=>[]}},setup(ge){var oe;K.defaults.withCredentials=!0;const x=Le(),H=ge,w=v(Array.isArray(H.ventas)?H.ventas:((oe=H.ventas)==null?void 0:oe.data)||[]),y=v(null);Ee(()=>H.ventas,o=>{w.value=Array.isArray(o)?o:(o==null?void 0:o.data)||[]},{deep:!0});const R=v(!1),C=v(!1),s=v({tipo:null,venta:null,titulo:"",mensaje:"",color:"",icono:null,textoBoton:"",importante:""}),D=v(!1),F=v(!1),_=v(!1),A=v(new Set),S=v(new Set),$=v(""),k=v(null),W=v({global:{value:null,matchMode:ie.CONTAINS},estado:{value:null,matchMode:ie.EQUALS}}),p=v({estado:null,fechaDesde:null,fechaHasta:null}),Y=v([{name:"Todos",value:null},{name:"Completada",value:"completada"},{name:"Cancelada",value:"cancelada"}]),M=v(10),xe=v([5,10,20,50]),O=J(()=>{let o=w.value;if($.value){const a=$.value.toLowerCase();o=o.filter(l=>{var d,i,m;return((m=(i=(d=l.cliente)==null?void 0:d.user)==null?void 0:i.name)==null?void 0:m.toLowerCase().includes(a))||l.id.toString().includes(a)||l.estado.toLowerCase().includes(a)})}if(k.value&&(o=o.filter(a=>a.estado===k.value)),p.value.fechaDesde){const a=new Date(p.value.fechaDesde);o=o.filter(l=>new Date(l.fecha)>=a)}if(p.value.fechaHasta){const a=new Date(p.value.fechaHasta);o=o.filter(l=>new Date(l.fecha)<=a)}return o.sort((a,l)=>{const d={completada:1,cancelada:2},i=d[a.estado.toLowerCase()]||4,m=d[l.estado.toLowerCase()]||4;if(i!==m)return i-m;const P=new Date(a.fecha);return new Date(l.fecha)-P})}),z=J(()=>{const o={completadas:0,canceladas:0,totalVendido:0};return w.value.forEach(a=>{switch(a.estado){case"completada":o.completadas++,o.totalVendido+=parseFloat(a.total||0);break;case"cancelada":o.canceladas++;break}}),o}),Z=v(typeof window<"u"?window.innerWidth:1024),ee=J(()=>Z.value<640?{width:"95vw",maxWidth:"380px"}:Z.value<768?{width:"80vw"}:{width:"70vw",maxWidth:"900px"}),ae=()=>{W.value.estado.value=k.value},te=async()=>{D.value=!0;try{await new Promise(o=>setTimeout(o,300)),k.value=null,$.value="",W.value.global.value=null,W.value.estado.value=null,p.value={estado:null,fechaDesde:null,fechaHasta:null},x.add({severity:"success",summary:"Filtros limpiados",life:2e3})}finally{D.value=!1}},V=()=>{},le=async()=>{_.value=!0,x.add({severity:"info",summary:"Cargando ventas...",life:2e3});try{await Pe.reload({only:["ventas"],preserveScroll:!0,preserveState:!0}),setTimeout(()=>{x.add({severity:"success",summary:"Ventas actualizadas",detail:`${w.value.length} registros cargados`,life:2e3})},300)}catch(o){console.error("Error al cargar las ventas:",o),x.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las ventas",life:3e3})}finally{setTimeout(()=>{_.value=!1},500)}},be=async()=>{const o=s.value.venta;if(o)try{console.warn("procesarVenta() - Funci칩n deshabilitada: las ventas se crean como completadas"),x.add({severity:"info",summary:"Informaci칩n",detail:"Las ventas se procesan autom치ticamente al crear el pago",life:3e3}),C.value=!1,s.value={tipo:null,venta:null}}finally{A.value.delete(o.id)}},he=o=>{s.value={tipo:"cancelar",venta:o,titulo:"쮺ancelar esta venta?",mensaje:"Esta acci칩n cancelar치 la venta y restaurar치 el stock si estaba completada.",color:"orange",icono:N,textoBoton:"S칤, Cancelar",importante:"Si la venta estaba completada, se restaurar치 autom치ticamente el stock de todos los productos."},C.value=!0},ye=async()=>{var a,l;const o=s.value.venta;if(o){S.value.add(o.id);try{const d=await K.post(`/api/ventas/${o.id}/cancelar`),i=w.value.findIndex(m=>m.id===o.id);i!==-1&&(w.value[i]={...w.value[i],estado:"cancelada"}),x.add({severity:"success",summary:"칄xito",detail:"Venta cancelada correctamente",life:3e3}),C.value=!1,s.value={tipo:null,venta:null}}catch(d){x.add({severity:"error",summary:"Error",detail:((l=(a=d.response)==null?void 0:a.data)==null?void 0:l.message)||"Error al cancelar la venta",life:3e3})}finally{S.value.delete(o.id)}}},we=o=>{s.value={tipo:"eliminar",venta:o,titulo:"쮼liminar esta venta?",mensaje:"Esta acci칩n no se puede deshacer.",color:"red",icono:fe,textoBoton:"S칤, Eliminar",importante:o.estado==="completada"?"Se restaurar치 el stock de todos los productos de esta venta.":"Esta venta ser치 eliminada permanentemente del sistema."},C.value=!0},_e=async()=>{var a,l;const o=s.value.venta;if(o){F.value=!0;try{const d=await K.delete(`/api/ventas/${o.id}/eliminar`),i=w.value.findIndex(m=>m.id===o.id);i!==-1&&w.value.splice(i,1),x.add({severity:"success",summary:"칄xito",detail:"Venta eliminada correctamente",life:3e3}),C.value=!1,s.value={tipo:null,venta:null}}catch(d){x.add({severity:"error",summary:"Error",detail:((l=(a=d.response)==null?void 0:a.data)==null?void 0:l.message)||"Error al eliminar la venta",life:3e3})}finally{F.value=!1}}},Ce=()=>{switch(s.value.tipo){case"procesar":be();break;case"cancelar":ye();break;case"eliminar":_e();break}},De=()=>{C.value=!1,s.value={tipo:null,venta:null}},ke=o=>{o.originalEvent.target.closest("button")||(y.value=o.data,R.value=!0)},se=o=>o?new Date(o).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A",T=o=>o?parseFloat(o).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",G=o=>{switch(o){case"completada":return"bg-green-100 text-green-800";case"cancelada":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},q=o=>{switch(o){case"completada":return"Completada";case"cancelada":return"Cancelada";default:return"Desconocido"}};return Fe(()=>{x.add({severity:"info",summary:"Cargando ventas...",life:2e3}),setTimeout(()=>{x.add({severity:"success",summary:"Ventas cargadas",life:2e3})},1e3)}),(o,a)=>(j(),Q(Ve,null,{default:u(()=>[n(t(Se),{title:"Ventas"}),n(t(Ae),{class:"z-[9999]"}),e("div",We,[a[19]||(a[19]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Gesti칩n de Ventas"),e("p",{class:"text-gray-600"},"Control completo del sistema de ventas")],-1)),e("div",Me,[e("div",Oe,[e("div",ze,[e("div",null,[a[11]||(a[11]=e("div",{class:"text-green-100 text-sm"},"Ventas Completadas",-1)),e("div",Ge,r(z.value.completadas),1)]),n(t(c),{icon:t($e),class:"text-3xl text-green-200"},null,8,["icon"])])]),e("div",qe,[e("div",Ke,[e("div",null,[a[12]||(a[12]=e("div",{class:"text-red-100 text-sm"},"Ventas Canceladas",-1)),e("div",Je,r(z.value.canceladas),1)]),n(t(c),{icon:t(N),class:"text-3xl text-red-200"},null,8,["icon"])])]),e("div",Qe,[e("div",Xe,[e("div",null,[a[13]||(a[13]=e("div",{class:"text-blue-100 text-sm"},"Total Vendido",-1)),e("div",Ye,"$"+r(T(z.value.totalVendido)),1)]),n(t(c),{icon:t(Te),class:"text-3xl text-blue-200"},null,8,["icon"])])])]),e("div",Ze,[a[18]||(a[18]=e("div",{class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},[e("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Lista de Ventas")],-1)),n(t(ce),{value:O.value,dataKey:"id",paginator:!0,rows:M.value,rowsPerPageOptions:xe.value,rowsPerPage:M.value,"onUpdate:rowsPerPage":a[7]||(a[7]=l=>M.value=l),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} ventas",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:ke,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:u(()=>[e("div",ea,[e("div",aa,[e("div",ta,[e("h3",la,[n(t(c),{icon:t(Be),class:"text-blue-600 text-sm"},null,8,["icon"]),a[14]||(a[14]=e("span",null,"Filtros",-1))]),e("div",sa,r(O.value.length)+" resultado"+r(O.value.length!==1?"s":""),1),e("button",{class:"bg-blue-500 hover:bg-blue-600 border border-blue-500 px-2 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-1",onClick:le,disabled:_.value},[n(t(c),{icon:_.value?t(L):t(pe),class:b([{"animate-spin":_.value},"h-3 w-3"])},null,8,["icon","class"])],8,oa),e("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:te,disabled:D.value},[D.value?(j(),Q(t(c),{key:0,icon:t(L),class:"animate-spin h-3 w-3"},null,8,["icon"])):B("",!0),e("span",null,r(D.value?"Limpiando...":"Limpiar filtros"),1)],8,na)]),e("div",ra,[e("button",{class:"bg-blue-500 hover:bg-blue-600 border border-blue-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:le,disabled:_.value},[n(t(c),{icon:_.value?t(L):t(pe),class:b([{"animate-spin":_.value},"h-3 w-3"])},null,8,["icon","class"]),e("span",null,r(_.value?"Recargando...":"Recargar"),1)],8,da),e("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:te,disabled:D.value},[D.value?(j(),Q(t(c),{key:0,icon:t(L),class:"animate-spin h-3 w-3"},null,8,["icon"])):B("",!0),e("span",null,r(D.value?"Limpiando...":"Limpiar filtros"),1)],8,ia)])]),e("div",ca,[e("div",null,[n(t(je),{modelValue:$.value,"onUpdate:modelValue":a[0]||(a[0]=l=>$.value=l),placeholder:"游댌 Buscar ventas...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),e("div",ua,[n(t(ue),{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=l=>k.value=l),options:Y.value,optionLabel:"name",optionValue:"value",placeholder:"Estado",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onChange:ae,clearable:!0},null,8,["modelValue","options"])]),e("div",ma,[e("div",null,[n(t(U),{modelValue:p.value.fechaDesde,"onUpdate:modelValue":a[2]||(a[2]=l=>p.value.fechaDesde=l),placeholder:"Fecha Desde",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onDateSelect:V,onClear:V,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:p.value.fechaHasta},null,8,["modelValue","maxDate"])]),e("div",null,[n(t(U),{modelValue:p.value.fechaHasta,"onUpdate:modelValue":a[3]||(a[3]=l=>p.value.fechaHasta=l),placeholder:"Fecha Hasta",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onDateSelect:V,onClear:V,showIcon:!0,dateFormat:"dd/mm/yy",minDate:p.value.fechaDesde},null,8,["modelValue","minDate"])])]),e("div",va,[e("div",null,[n(t(ue),{modelValue:k.value,"onUpdate:modelValue":a[4]||(a[4]=l=>k.value=l),options:Y.value,optionLabel:"name",optionValue:"value",placeholder:"Estado",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onChange:ae,clearable:!0},null,8,["modelValue","options"])]),e("div",null,[n(t(U),{modelValue:p.value.fechaDesde,"onUpdate:modelValue":a[5]||(a[5]=l=>p.value.fechaDesde=l),placeholder:"Fecha desde",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onDateSelect:V,onClear:V,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:p.value.fechaHasta},null,8,["modelValue","maxDate"])]),e("div",null,[n(t(U),{modelValue:p.value.fechaHasta,"onUpdate:modelValue":a[6]||(a[6]=l=>p.value.fechaHasta=l),placeholder:"Fecha hasta",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onDateSelect:V,onClear:V,showIcon:!0,dateFormat:"dd/mm/yy",minDate:p.value.fechaDesde},null,8,["modelValue","minDate"])])])])])]),default:u(()=>[n(t(h),{field:"fecha",header:"Fecha",sortable:"",class:"w-24 hidden md:table-cell"},{body:u(l=>[e("div",pa,r(se(l.data.fecha)),1)]),_:1}),n(t(h),{field:"cliente.user.name",header:"Cliente",sortable:"",class:"w-32 min-w-24"},{body:u(l=>{var d,i;return[e("div",fa,[n(t(c),{icon:t(ve),class:"text-gray-500 text-xs"},null,8,["icon"]),e("span",ga,r(((i=(d=l.data.cliente)==null?void 0:d.user)==null?void 0:i.name)||"N/A"),1)])]}),_:1}),n(t(h),{field:"total",header:"Total",class:"w-24"},{body:u(l=>[e("div",xa," $"+r(T(l.data.total)),1)]),_:1}),n(t(h),{field:"estado",header:"Estado",class:"w-28 hidden sm:table-cell"},{body:u(l=>[e("span",{class:b("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+G(l.data.estado))},r(q(l.data.estado)),3)]),_:1}),n(t(h),{header:"Items",class:"w-16 hidden md:table-cell"},{body:u(l=>{var d;return[e("div",ba,r(((d=l.data.detalle_ventas)==null?void 0:d.length)||0),1)]}),_:1}),n(t(h),{exportable:!1,class:"w-64 min-w-32"},{header:u(()=>a[15]||(a[15]=[e("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:u(l=>[e("div",ha,[l.data.estado==="completada"?(j(),X("button",{key:0,class:"flex bg-orange-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:d=>he(l.data),title:"Cancelar venta"},[n(t(c),{icon:t(N),class:"h-3 w-4 sm:h-4 sm:w-6 text-white"},null,8,["icon"]),a[16]||(a[16]=e("span",{class:"hidden lg:block text-white ml-1"},"Cancelar",-1))],8,ya)):B("",!0),e("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:d=>we(l.data),title:"Eliminar venta"},[n(t(c),{icon:t(Ie),class:"h-3 w-4 sm:h-4 sm:w-6 text-white"},null,8,["icon"]),a[17]||(a[17]=e("span",{class:"hidden lg:block text-white ml-1"},"Eliminar",-1))],8,wa)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"])])]),n(t(me),{visible:R.value,"onUpdate:visible":a[9]||(a[9]=l=>R.value=l),style:de(ee.value),header:"Detalles de la Venta",modal:!0,closable:!1,draggable:!1},{footer:u(()=>[e("div",Na,[e("button",{class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:a[8]||(a[8]=l=>R.value=!1)},[n(t(c),{icon:t(N),class:"h-5"},null,8,["icon"]),a[25]||(a[25]=g(" Cerrar "))])])]),default:u(()=>{var l,d,i,m,P;return[y.value?(j(),X("div",_a,[e("div",Ca,[e("div",Da,[a[20]||(a[20]=e("h4",{class:"text-lg font-semibold text-gray-800"},"Informaci칩n General",-1)),e("span",{class:b("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium "+G(y.value.estado))},r(q(y.value.estado)),3)]),e("div",ka,[e("div",Va,[e("div",Ea,[n(t(c),{icon:t(Ne),class:"text-gray-500 text-sm"},null,8,["icon"]),a[21]||(a[21]=e("strong",null,"ID:",-1)),g(" #"+r(y.value.id),1)]),e("div",Fa,[n(t(c),{icon:t(He),class:"text-gray-500 text-sm"},null,8,["icon"]),a[22]||(a[22]=e("strong",null,"Fecha:",-1)),g(" "+r(se(y.value.fecha)),1)]),e("div",Sa,[n(t(c),{icon:t(ve),class:"text-gray-500 text-sm"},null,8,["icon"]),a[23]||(a[23]=e("strong",null,"Cliente:",-1)),g(" "+r(((d=(l=y.value.cliente)==null?void 0:l.user)==null?void 0:d.name)||"N/A"),1)]),e("div",Pa,[n(t(c),{icon:t(Re),class:"text-gray-500 text-sm"},null,8,["icon"]),a[24]||(a[24]=e("strong",null,"Email:",-1)),g(" "+r(((m=(i=y.value.cliente)==null?void 0:i.user)==null?void 0:m.email)||"N/A"),1)])])])]),e("div",La,[e("h4",Aa," Productos Vendidos ("+r(((P=y.value.detalle_ventas)==null?void 0:P.length)||0)+") ",1),n(t(ce),{value:y.value.detalle_ventas,class:"text-sm",stripedRows:""},{default:u(()=>[n(t(h),{field:"producto.nombre",header:"Producto"},{body:u(({data:f})=>{var E;return[e("div",ja,[n(t(c),{icon:t(Ue),class:"text-blue-500 text-sm"},null,8,["icon"]),e("span",$a,r((E=f.producto)==null?void 0:E.nombre),1)])]}),_:1}),n(t(h),{field:"producto.categoria.nombre",header:"Categor칤a"},{body:u(({data:f})=>{var E,I;return[e("span",Ta,r(((I=(E=f.producto)==null?void 0:E.categoria)==null?void 0:I.nombre)||"Sin categor칤a"),1)]}),_:1}),n(t(h),{field:"cantidad",header:"Cantidad",style:{width:"100px"}},{body:u(({data:f})=>[e("span",Ia,r(f.cantidad),1)]),_:1}),n(t(h),{field:"precio_unitario",header:"Precio Unit.",style:{width:"120px"}},{body:u(({data:f})=>[e("span",null,"$"+r(T(f.precio_unitario)),1)]),_:1}),n(t(h),{field:"subtotal",header:"Subtotal",style:{width:"120px","font-size":"17px"}},{body:u(({data:f})=>[e("span",Ba," $"+r(T(f.subtotal)),1)]),_:1})]),_:1},8,["value"])])])):B("",!0)]}),_:1},8,["visible","style"]),n(t(me),{visible:C.value,"onUpdate:visible":a[10]||(a[10]=l=>C.value=l),style:de(ee.value),header:s.value.titulo,modal:!0,closable:!1,draggable:!1},{footer:u(()=>{var l,d,i,m,P,f,E,I,ne,re;return[e("div",za,[e("button",{class:b(["text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",s.value.color==="green"?"bg-green-500 hover:bg-green-600":s.value.color==="orange"?"bg-orange-500 hover:bg-orange-600":"bg-red-500 hover:bg-red-600"]),onClick:Ce,disabled:s.value.tipo==="procesar"&&A.value.has((l=s.value.venta)==null?void 0:l.id)||s.value.tipo==="cancelar"&&S.value.has((d=s.value.venta)==null?void 0:d.id)||s.value.tipo==="eliminar"&&F.value},[n(t(c),{icon:s.value.tipo==="procesar"&&A.value.has((i=s.value.venta)==null?void 0:i.id)?t(L):s.value.tipo==="cancelar"&&S.value.has((m=s.value.venta)==null?void 0:m.id)?t(L):s.value.tipo==="eliminar"&&F.value?t(L):s.value.icono,class:b(["h-4",{"animate-spin":s.value.tipo==="procesar"&&A.value.has((P=s.value.venta)==null?void 0:P.id)||s.value.tipo==="cancelar"&&S.value.has((f=s.value.venta)==null?void 0:f.id)||s.value.tipo==="eliminar"&&F.value}])},null,8,["icon","class"]),g(" "+r(s.value.tipo==="procesar"&&A.value.has((E=s.value.venta)==null?void 0:E.id)?"Procesando...":s.value.tipo==="cancelar"&&S.value.has((I=s.value.venta)==null?void 0:I.id)?"Cancelando...":s.value.tipo==="eliminar"&&F.value?"Eliminando...":s.value.textoBoton),1)],10,Ga),e("button",{class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:De,disabled:s.value.tipo==="procesar"&&A.value.has((ne=s.value.venta)==null?void 0:ne.id)||s.value.tipo==="cancelar"&&S.value.has((re=s.value.venta)==null?void 0:re.id)||s.value.tipo==="eliminar"&&F.value},[n(t(c),{icon:t(N),class:"h-4"},null,8,["icon"]),a[33]||(a[33]=g(" Cerrar "))],8,qa)])]}),default:u(()=>{var l,d,i,m;return[s.value.venta?(j(),X("div",Ha,[e("div",{class:b(["flex items-center gap-3 p-4 rounded-lg border",s.value.color==="green"?"bg-green-50 border-green-200":s.value.color==="orange"?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200"])},[n(t(c),{icon:s.value.icono,class:b(["text-2xl",s.value.color==="green"?"text-green-500":s.value.color==="orange"?"text-orange-500":"text-red-500"])},null,8,["icon","class"]),e("div",null,[e("h4",{class:b(["text-lg font-semibold",s.value.color==="green"?"text-green-800":s.value.color==="orange"?"text-orange-800":"text-red-800"])},r(s.value.titulo),3),e("p",{class:b([s.value.color==="green"?"text-green-700":s.value.color==="orange"?"text-orange-700":"text-red-700"])},r(s.value.mensaje),3)])],2),e("div",Ra,[a[31]||(a[31]=e("h5",{class:"font-semibold text-gray-800 mb-2"},"Informaci칩n de la venta:",-1)),e("div",Ua,[e("div",null,[a[26]||(a[26]=e("strong",null,"ID:",-1)),g(" #"+r(s.value.venta.id),1)]),e("div",null,[a[27]||(a[27]=e("strong",null,"Cliente:",-1)),g(" "+r(((d=(l=s.value.venta.cliente)==null?void 0:l.user)==null?void 0:d.name)||"N/A"),1)]),e("div",null,[a[28]||(a[28]=e("strong",null,"Email:",-1)),g(" "+r(((m=(i=s.value.venta.cliente)==null?void 0:i.user)==null?void 0:m.email)||"N/A"),1)]),e("div",null,[a[29]||(a[29]=e("strong",null,"Total:",-1)),g(" $"+r(T(s.value.venta.total)),1)]),e("div",null,[a[30]||(a[30]=e("strong",null,"Estado:",-1)),e("span",{class:b("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-1 "+G(s.value.venta.estado))},r(q(s.value.venta.estado)),3)])])]),e("div",Wa,[e("div",Ma,[n(t(c),{icon:t(fe),class:"text-yellow-500 text-sm mt-0.5"},null,8,["icon"]),e("div",Oa,[a[32]||(a[32]=e("strong",null,"Importante:",-1)),g(" "+r(s.value.importante),1)])])])])):B("",!0)]}),_:1},8,["visible","style","header"])]),_:1}))}};export{Za as default};
