import{F as u}from"./ui-BrU4k96Z.js";import{J as Q,o as y,au as Y,s as _,i as j,c as N,m as ee,l as se,a as ae}from"./index-BL4yA-eF.js";import{E as L,r as te,w as le,k as P,c,d as m,p as o,x as f,e as s,q as b,$ as a,t as g,F as w,l as z,A as x,y as h,j as F}from"./vendor-gbh1WW5n.js";const oe={key:0,class:"space-y-6"},ie={class:"bg-gray-50 p-4 rounded-lg"},ne={class:"text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2"},de={class:"flex flex-col gap-2"},re={class:"ml-2 text-gray-900"},ue={class:"ml-2 text-gray-900"},ce={class:"ml-2 text-gray-900 break-words"},me={class:"ml-2 text-gray-900"},be={class:"ml-2 text-gray-900"},ge={key:1,class:"text-center text-gray-500 py-8"},pe={class:"flex justify-center w-full mt-6"},fe={class:"space-y-3"},ve={class:"flex items-center gap-4 mb-4"},xe={class:"text-gray-600"},ye={class:"flex justify-center gap-4 w-full"},we=["disabled"],he=["disabled"],Ce={class:"flex items-center gap-4 mb-4"},ke={class:"flex justify-center gap-4 w-full"},Ve={class:"space-y-4"},De={class:"text-sm text-gray-600 mb-4"},Ee={class:"w-full flex flex-col"},Le={class:"flex items-center gap-4"},Be={key:0,class:"ml-36 mt-1"},Ue={class:"w-full flex flex-col"},Ae={class:"flex items-center gap-4"},Se={key:0,class:"text-red-500 ml-36 mt-1"},je={class:"flex justify-center gap-4 w-full mt-6"},Ne=["disabled"],Pe={key:0},ze={key:1},Fe=["disabled"],Oe={__name:"Modales",props:{visible:Boolean,deleteVisible:Boolean,unsavedChangesVisible:Boolean,passwordVisible:Boolean,empleado:Object,usuario:Object,detailsVisible:Boolean,dialogStyle:Object,isDeleting:Boolean,isLoading:Boolean,submitted:Boolean},emits:["update:visible","update:delete-visible","update:unsaved-changes-visible","update:password-visible","update:details-visible","change-password","send-credentials","view-details","delete-empleado","cancel-delete","close-without-saving","continue-editing","update-password"],setup(t,{emit:M}){const i=t,n=M,C=L({get:()=>i.detailsVisible,set:l=>n("update:details-visible",l)}),d=te({password:"",password_confirmation:""}),k=L(()=>{const l=[],e=d.value.password||"";return e.length>0&&e.length<8&&l.push("La contraseña debe tener al menos 8 caracteres."),e.length>0&&!/[A-Z]/.test(e)&&l.push("La contraseña debe incluir al menos una letra mayúscula."),e.length>0&&!/[0-9]/.test(e)&&l.push("La contraseña debe incluir al menos un número."),e.length>0&&/[\s.]/.test(e)&&l.push("La contraseña no puede contener espacios ni puntos."),l}),V=L(()=>d.value.password_confirmation.length>0&&d.value.password!==d.value.password_confirmation?"Las contraseñas no coinciden.":""),D=()=>{d.value={password:"",password_confirmation:""}},T=()=>{n("change-password",i.empleado)};le(()=>i.passwordVisible,l=>{l&&D()});const q=()=>{n("view-details",i.empleado)},O=()=>{n("delete-empleado")},$=()=>{n("cancel-delete")},I=()=>{n("close-without-saving")},R=()=>{n("continue-editing")},J=()=>{!d.value.password||d.value.password!==d.value.password_confirmation||n("update-password",d.value)},K=l=>{l||D(),n("update:password-visible",l)},W=l=>{n("update:visible",l)},X=l=>{n("update:delete-visible",l)},Z=l=>{n("update:unsaved-changes-visible",l)},G=l=>{n("update:password-visible",l),D()};return(l,e)=>{const v=P("Dialog"),B=P("Password");return m(),c(w,null,[o(v,{visible:C.value,"onUpdate:visible":e[1]||(e[1]=r=>C.value=r),header:"Detalles del Empleado",modal:!0,style:x(t.dialogStyle),closable:!1,draggable:!1},{footer:f(()=>[s("div",pe,[s("button",{class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[0]||(e[0]=r=>C.value=!1)},[o(a(u),{icon:a(y),class:"h-5"},null,8,["icon"]),e[11]||(e[11]=b(" Cerrar "))])])]),default:f(()=>{var r,p,U,A,S;return[i.usuario||i.empleado?(m(),c("div",oe,[s("div",ie,[s("h3",ne,[o(a(u),{icon:a(Q),class:"h-5 w-5 text-blue-600"},null,8,["icon"]),e[5]||(e[5]=b(" Usuario "))]),s("div",de,[s("div",null,[e[6]||(e[6]=s("span",{class:"font-medium text-gray-700"},"Nombre:",-1)),s("span",re,g(((r=i.usuario)==null?void 0:r.name)??"-"),1)]),s("div",null,[e[7]||(e[7]=s("span",{class:"font-medium text-gray-700"},"Email:",-1)),s("span",ue,g(((p=i.usuario)==null?void 0:p.email)??"-"),1)]),s("div",null,[e[8]||(e[8]=s("span",{class:"font-medium text-gray-700"},"Rol:",-1)),s("span",ce,[Array.isArray((U=i.usuario)==null?void 0:U.roles)&&i.usuario.roles.length?(m(!0),c(w,{key:0},z(i.usuario.roles,(E,H)=>(m(),c("span",{key:E.id||H,class:"inline-block bg-blue-100 text-blue-800 rounded px-2 py-0.5 text-xs font-semibold mr-1 mb-1"},g(E.name||E),1))),128)):(m(),c(w,{key:1},[b(" - ")],64))])]),s("div",null,[e[9]||(e[9]=s("span",{class:"font-medium text-gray-700"},"Cargo:",-1)),s("span",me,g(((A=i.empleado)==null?void 0:A.cargo)??"-"),1)]),s("div",null,[e[10]||(e[10]=s("span",{class:"font-medium text-gray-700"},"Teléfono:",-1)),s("span",be,g(((S=i.empleado)==null?void 0:S.telefono)??"-"),1)])])])])):(m(),c("div",ge,"No hay datos para mostrar."))]}),_:1},8,["visible","style"]),o(v,{visible:t.visible,"onUpdate:visible":W,header:"Más Acciones",modal:!0,style:x(t.dialogStyle),closable:!0,draggable:!1},{default:f(()=>[s("div",fe,[s("button",{onClick:T,class:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-blue-50 rounded-lg transition-colors duration-200 border border-gray-200 hover:border-blue-300"},[o(a(u),{icon:a(Y),class:"h-5 w-5 text-blue-600"},null,8,["icon"]),e[12]||(e[12]=s("div",null,[s("div",{class:"font-medium text-gray-900"},"Cambiar Contraseña"),s("div",{class:"text-sm text-gray-500"},"Actualizar la contraseña de acceso")],-1))]),s("button",{onClick:q,class:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-purple-50 rounded-lg transition-colors duration-200 border border-gray-200 hover:border-purple-300"},[o(a(u),{icon:a(_),class:"h-5 w-5 text-purple-600"},null,8,["icon"]),e[13]||(e[13]=s("div",null,[s("div",{class:"font-medium text-gray-900"},"Ver Detalles"),s("div",{class:"text-sm text-gray-500"},"Información completa del empleado")],-1))])])]),_:1},8,["visible","style"]),o(v,{visible:t.deleteVisible,"onUpdate:visible":X,header:"Confirmar Eliminación",modal:!0,style:x(t.dialogStyle),closable:!1,draggable:!1},{footer:f(()=>[s("div",ye,[s("button",{class:"bg-red-500 hover:bg-red-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:O,disabled:t.isDeleting},[o(a(u),{icon:t.isDeleting?a(N):a(ee),class:h(["h-4 w-4",{"animate-spin":t.isDeleting}])},null,8,["icon","class"]),s("span",null,g(t.isDeleting?"Eliminando...":"Eliminar"),1)],8,we),s("button",{type:"button",class:"bg-gray-500 hover:bg-gray-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:$,disabled:t.isDeleting},[o(a(u),{icon:a(y),class:"h-4 w-4"},null,8,["icon"]),e[18]||(e[18]=b(" Cancelar "))],8,he)])]),default:f(()=>{var r;return[s("div",ve,[o(a(u),{icon:a(j),class:"h-12 w-12 text-red-500"},null,8,["icon"]),s("div",null,[e[16]||(e[16]=s("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"¿Eliminar empleado?",-1)),s("p",xe,[e[14]||(e[14]=b(" ¿Estás seguro de que deseas eliminar al empleado ")),s("strong",null,'"'+g((r=t.empleado)==null?void 0:r.nombre)+'"',1),e[15]||(e[15]=b("? "))]),e[17]||(e[17]=s("p",{class:"text-sm text-red-600 mt-2"}," Esta acción no se puede deshacer y eliminará tanto el empleado como su usuario asociado. ",-1))])])]}),_:1},8,["visible","style"]),o(v,{visible:t.unsavedChangesVisible,"onUpdate:visible":Z,header:"Cambios sin guardar",modal:!0,style:x(t.dialogStyle),closable:!1,draggable:!1},{footer:f(()=>[s("div",ke,[s("button",{class:"bg-red-500 hover:bg-red-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:I},[o(a(u),{icon:a(y),class:"h-4 w-4"},null,8,["icon"]),e[20]||(e[20]=b(" Descartar cambios "))]),s("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:R},[o(a(u),{icon:a(se),class:"h-4 w-4"},null,8,["icon"]),e[21]||(e[21]=b(" Continuar editando "))])])]),default:f(()=>[s("div",Ce,[o(a(u),{icon:a(j),class:"h-12 w-12 text-yellow-500"},null,8,["icon"]),e[19]||(e[19]=s("div",null,[s("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"¿Descartar cambios?"),s("p",{class:"text-gray-600"}," Tienes cambios sin guardar. ¿Estás seguro de que deseas cerrar sin guardar? ")],-1))])]),_:1},8,["visible","style"]),o(v,{visible:t.passwordVisible,"onUpdate:visible":K,header:"Cambiar Contraseña",modal:!0,style:x(t.dialogStyle),closable:!1,draggable:!1},{footer:f(()=>[s("div",je,[s("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:J,disabled:t.isLoading},[o(a(u),{icon:t.isLoading?a(N):a(ae),class:h(["h-5 text-white",{"animate-spin":t.isLoading}])},null,8,["icon","class"]),t.isLoading?(m(),c("span",ze,"Actualizando...")):(m(),c("span",Pe,"Actualizar"))],8,Ne),s("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[4]||(e[4]=r=>G(!1)),disabled:t.isLoading},[o(a(u),{icon:a(y),class:"h-5"},null,8,["icon"]),e[25]||(e[25]=b(" Cancelar "))],8,Fe)])]),default:f(()=>{var r;return[s("div",Ve,[s("div",De,[e[22]||(e[22]=b(" Actualizar la contraseña para: ")),s("strong",null,g((r=t.empleado)==null?void 0:r.nombre),1)]),s("div",Ee,[s("div",Le,[e[23]||(e[23]=s("label",{for:"new_password",class:"w-32 flex items-center gap-1"},[b(" Nueva contraseña: "),s("span",{class:"text-red-500 font-bold"},"*")],-1)),o(B,{modelValue:d.value.password,"onUpdate:modelValue":e[2]||(e[2]=p=>d.value.password=p),id:"new_password",name:"new_password",class:h([{"p-invalid":i.submitted&&k.value.length>0},"flex-1"]),placeholder:"Nueva contraseña",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),k.value.length>0?(m(),c("div",Be,[(m(!0),c(w,null,z(k.value,p=>(m(),c("small",{key:p,class:"block text-red-500 text-xs"},g(p),1))),128))])):F("",!0)]),s("div",Ue,[s("div",Ae,[e[24]||(e[24]=s("label",{for:"confirm_password",class:"w-32 flex items-center gap-1"},[b(" Confirmar: "),s("span",{class:"text-red-500 font-bold"},"*")],-1)),o(B,{modelValue:d.value.password_confirmation,"onUpdate:modelValue":e[3]||(e[3]=p=>d.value.password_confirmation=p),id:"confirm_password",name:"confirm_password",class:h([{"p-invalid":i.submitted&&V.value},"flex-1"]),placeholder:"Repetir nueva contraseña",toggleMask:"",feedback:!1,inputClass:"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"},null,8,["modelValue","class"])]),V.value?(m(),c("small",Se,g(V.value),1)):F("",!0)])])]}),_:1},8,["visible","style"])],64)}}};export{Oe as default};
