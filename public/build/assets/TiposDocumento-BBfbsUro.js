import{p as W,q as P,r as u,i as h,s as R,c as H,o as f,w as J,a as l,b as e,f as b,h as k,u as a,z as K,A as O,W as Q,e as X,t as r,j as E,C as D,F as Y,y as Z,d as ee,B as _}from"./app-DP8tsAem.js";import{_ as te}from"./AuthenticatedLayout-BvfF3yw2.js";import{F as x,f as se,i as A,h as oe,x as $}from"./index-ClJ1gEnJ.js";import"./logo-DN1bLr27.js";const ae={class:"py-12"},ie={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},re={class:"p-6 bg-white border-b border-gray-200"},ne={class:"flex justify-between items-center"},de={class:"flex items-center space-x-4"},ce={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},ue={class:"bg-white overflow-hidden shadow sm:rounded-lg"},pe={class:"p-5"},me={class:"flex items-center"},xe={class:"flex-shrink-0"},ve={class:"ml-5 w-0 flex-1"},fe={class:"text-lg font-medium text-gray-900"},ge={class:"bg-white overflow-hidden shadow sm:rounded-lg"},ye={class:"p-5"},he={class:"flex items-center"},be={class:"flex-shrink-0"},_e={class:"ml-5 w-0 flex-1"},we={class:"text-lg font-medium text-gray-900"},Te={class:"bg-white overflow-hidden shadow sm:rounded-lg"},Ce={class:"p-5"},ke={class:"flex items-center"},Ee={class:"flex-shrink-0"},De={class:"ml-5 w-0 flex-1"},Ae={class:"text-lg font-medium text-gray-900"},$e={class:"bg-white shadow overflow-hidden sm:rounded-lg"},Ne={class:"px-4 py-5 sm:p-6"},Fe={class:"mb-4"},Le={class:"overflow-x-auto"},Me={class:"min-w-full divide-y divide-gray-200"},je={class:"bg-white divide-y divide-gray-200"},Be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ve={class:"px-6 py-4 whitespace-nowrap"},ze={class:"flex items-center"},Ie={class:"text-sm font-medium text-gray-900"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Se={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},qe={class:"flex space-x-2"},Ge=["onClick"],We=["onClick"],Pe={key:0,class:"text-center py-8"},Re={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},He={class:"bg-white rounded-lg p-6 w-96 max-w-full mx-4"},Je={class:"text-lg font-semibold mb-4"},Ke={class:"flex justify-end space-x-3 pt-4"},Oe=["disabled"],et={__name:"TiposDocumento",props:{tiposDocumentos:Array},setup(N){const F=N,n=W(),L=P(),g=u(""),p=u(!1),w=u(!1),v=u(null),d=u(!1),i=u(F.tiposDocumentos||[]),m=u({nombre:""}),C=h(()=>i.value.filter(o=>!g.value||o.nombre.toLowerCase().includes(g.value.toLowerCase()))),M=h(()=>i.value.length),j=h(()=>i.value.filter(o=>o.clientes_count>0).length),B=h(()=>i.value.filter(o=>(o.clientes_count||0)===0).length),V=async()=>{try{const o=await _.get("/api/tipos-documento");o.data.success&&(i.value=o.data.tipos)}catch{n.add({severity:"error",summary:"Error",detail:"Error al cargar los tipos de documento",life:3e3})}},z=async()=>{var o,t;d.value=!0;try{const s=await _.post("/api/tipos-documento",m.value);s.data.success&&(i.value.push(s.data.tipo_documento),T(),n.add({severity:"success",summary:"Éxito",detail:"Tipo de documento creado exitosamente",life:3e3}))}catch(s){n.add({severity:"error",summary:"Error",detail:((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.message)||"Error al crear el tipo de documento",life:3e3})}finally{d.value=!1}},I=o=>{v.value=o,m.value={nombre:o.nombre},w.value=!0},U=async()=>{var o,t;if(v.value){d.value=!0;try{const s=await _.put(`/api/tipos-documento/${v.value.id}`,m.value);if(s.data.success){const c=i.value.findIndex(y=>y.id===v.value.id);c!==-1&&(i.value[c]=s.data.tipo_documento),T(),n.add({severity:"success",summary:"Éxito",detail:"Tipo de documento actualizado exitosamente",life:3e3})}}catch(s){n.add({severity:"error",summary:"Error",detail:((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.message)||"Error al actualizar el tipo de documento",life:3e3})}finally{d.value=!1}}},S=async o=>{L.require({message:"¿Está seguro de eliminar este tipo de documento? Esta acción no se puede deshacer.",header:"Confirmación de Eliminación",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",acceptLabel:"Aceptar",rejectLabel:"Cancelar",accept:async()=>{var t,s;try{if((await _.delete(`/api/tipos-documento/${o.id}`)).data.success){const y=i.value.findIndex(G=>G.id===o.id);y!==-1&&i.value.splice(y,1),n.add({severity:"success",summary:"Éxito",detail:"Tipo de documento eliminado exitosamente",life:3e3})}}catch(c){n.add({severity:"error",summary:"Error",detail:((s=(t=c.response)==null?void 0:t.data)==null?void 0:s.message)||"Error al eliminar el tipo de documento",life:3e3})}}})},T=()=>{p.value=!1,w.value=!1,v.value=null,d.value=!1,m.value={nombre:""}},q=o=>new Date(o).toLocaleDateString("es-ES");return R(()=>{i.value.length===0&&V()}),(o,t)=>(f(),H(te,null,{default:J(()=>[l(a(K)),l(a(O)),e("div",ae,[e("div",ie,[e("div",le,[e("div",re,[e("div",ne,[e("div",de,[e("button",{onClick:t[0]||(t[0]=s=>a(Q).visit(o.route("clientes"))),class:"flex items-center text-gray-600 hover:text-red-600 transition-colors duration-200 p-2 rounded-lg hover:bg-gray-100",title:"Regresar a Clientes"},[l(a(x),{icon:a(se),class:"h-5 w-5"},null,8,["icon"])]),t[5]||(t[5]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Tipos de Documento"),e("p",{class:"mt-1 text-sm text-gray-500"}," Gestiona los tipos de documentos disponibles para los clientes ")],-1))]),e("button",{onClick:t[1]||(t[1]=s=>p.value=!0),class:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2"},t[6]||(t[6]=[e("i",{class:"pi pi-plus"},null,-1),X(" Agregar Tipo ")]))])])]),e("div",ce,[e("div",ue,[e("div",pe,[e("div",me,[e("div",xe,[l(a(x),{icon:a(A),class:"h-6 w-6 text-blue-600"},null,8,["icon"])]),e("div",ve,[e("dl",null,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total de Tipos",-1)),e("dd",fe,r(M.value),1)])])])])]),e("div",ge,[e("div",ye,[e("div",he,[e("div",be,[l(a(x),{icon:a(oe),class:"h-6 w-6 text-green-600"},null,8,["icon"])]),e("div",_e,[e("dl",null,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"En Uso",-1)),e("dd",we,r(j.value),1)])])])])]),e("div",Te,[e("div",Ce,[e("div",ke,[e("div",Ee,[l(a(x),{icon:a($),class:"h-6 w-6 text-yellow-600"},null,8,["icon"])]),e("div",De,[e("dl",null,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Disponibles",-1)),e("dd",Ae,r(B.value),1)])])])])])]),e("div",$e,[e("div",Ne,[e("div",Fe,[E(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),type:"text",placeholder:"Buscar tipos de documento...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"},null,512),[[D,g.value]])]),e("div",Le,[e("table",Me,[t[12]||(t[12]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ID "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha de Creación "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ")])],-1)),e("tbody",je,[(f(!0),b(Y,null,Z(C.value,s=>(f(),b("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Be,r(s.id),1),e("td",Ve,[e("div",ze,[l(a(x),{icon:a(A),class:"h-5 w-5 text-gray-400 mr-2"},null,8,["icon"]),e("div",Ie,r(s.nombre),1)])]),e("td",Ue,r(q(s.created_at)),1),e("td",Se,[e("div",qe,[e("button",{onClick:c=>I(s),class:"text-blue-600 hover:text-blue-900 p-1",title:"Editar"},t[10]||(t[10]=[e("i",{class:"pi pi-pencil"},null,-1)]),8,Ge),e("button",{onClick:c=>S(s),class:"text-red-600 hover:text-red-900 p-1",title:"Eliminar"},t[11]||(t[11]=[e("i",{class:"pi pi-trash"},null,-1)]),8,We)])])]))),128))])])]),C.value.length===0?(f(),b("div",Pe,[l(a(x),{icon:a($),class:"h-12 w-12 text-gray-400 mx-auto mb-4"},null,8,["icon"]),t[13]||(t[13]=e("p",{class:"text-gray-500"},"No se encontraron tipos de documento",-1))])):k("",!0)])])])]),p.value||w.value?(f(),b("div",Re,[e("div",He,[e("h3",Je,r(p.value?"Crear Nuevo Tipo de Documento":"Editar Tipo de Documento"),1),e("form",{onSubmit:t[4]||(t[4]=ee(s=>p.value?z():U(),["prevent"])),class:"space-y-4"},[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre del Tipo",-1)),E(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>m.value.nombre=s),type:"text",required:"",maxlength:"20",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Ej: Cédula, Pasaporte, etc."},null,512),[[D,m.value.nombre]]),t[15]||(t[15]=e("small",{class:"text-gray-500"},"Máximo 20 caracteres",-1))]),e("div",Ke,[e("button",{type:"button",onClick:T,class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancelar "),e("button",{type:"submit",disabled:d.value,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 transition-colors duration-200"},r(d.value?"Guardando...":p.value?"Crear Tipo":"Actualizar Tipo"),9,Oe)])],32)])])):k("",!0)]),_:1}))}};export{et as default};
