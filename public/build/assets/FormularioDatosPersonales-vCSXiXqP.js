import{z as U}from"./vue-tel-input-IX4mLt5J.js";import{r as x,E as T,o as A,w as C,k as f,c as b,d as g,e as t,j as V,p as i,y as v,$ as F,q as I,t as w}from"./vendor-CLNWHdEK.js";const j={key:0,class:"mb-3 sm:mb-4 p-2 sm:p-3 bg-blue-50 border border-blue-200 rounded-lg"},q={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 lg:gap-4"},L={class:"sm:col-span-2"},B={class:"mr-1"},R={__name:"FormularioDatosPersonales",props:{formulario:{type:Object,required:!0},tieneClienteExistente:{type:Boolean,default:!1},user:{type:Object,default:null}},emits:["update:formulario","mostrar-toast"],setup(r,{expose:E,emit:D}){const u=r,n=D,d=x([]),p=x(!1),s=x({isValid:!1,country:null,formattedNumber:"",mensaje:""}),l=T({get(){return u.formulario},set(o){n("update:formulario",o)}}),N=async()=>{try{p.value=!0;const o=await fetch("/api/tipo-documentos",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(o.ok){const e=await o.json();d.value=e.tipos||e}else console.error("Error al cargar tipos de documentos:",o.status),d.value=[{id:1,nombre:"DUI"},{id:2,nombre:"C√âDULA"},{id:3,nombre:"PASAPORTE"}]}catch(o){console.error("Error al cargar tipos de documentos:",o),d.value=[{id:1,nombre:"DUI"},{id:2,nombre:"C√âDULA"},{id:3,nombre:"PASAPORTE"}]}finally{p.value=!1}},k=o=>{try{o&&typeof o=="object"&&(s.value.isValid=o.valid===!0,s.value.country={name:o.country,code:o.countryCode},s.value.formattedNumber=o.formatted||"",l.value.telefono&&o.valid===!1?s.value.mensaje="N√∫mero de tel√©fono inv√°lido para "+o.country:o.valid===!0?s.value.mensaje="N√∫mero v√°lido para "+o.country:s.value.mensaje="")}catch{s.value.mensaje="Error en validaci√≥n"}};E({tiposDocumentos:d,validateForm:()=>!l.value.tipo_documento&&!l.value.tipo_documento_id?(n("mostrar-toast",{severity:"error",summary:"Campo requerido",detail:"Por favor, seleccione un tipo de documento.",life:4e3}),!1):l.value.numero_identificacion?l.value.fecha_nacimiento?l.value.direccion?l.value.genero?l.value.telefono?l.value.telefono&&s.value.isValid===!1&&s.value.mensaje!=="N√∫mero v√°lido (guardado previamente)"?(n("mostrar-toast",{severity:"error",summary:"Tel√©fono inv√°lido",detail:"Por favor, ingrese un n√∫mero de tel√©fono v√°lido.",life:4e3}),!1):!0:(n("mostrar-toast",{severity:"error",summary:"Campo requerido",detail:"Por favor, ingrese su n√∫mero de tel√©fono.",life:4e3}),!1):(n("mostrar-toast",{severity:"error",summary:"Campo requerido",detail:"Por favor, seleccione su g√©nero.",life:4e3}),!1):(n("mostrar-toast",{severity:"error",summary:"Campo requerido",detail:"Por favor, ingrese su direcci√≥n.",life:4e3}),!1):(n("mostrar-toast",{severity:"error",summary:"Campo requerido",detail:"Por favor, seleccione su fecha de nacimiento.",life:4e3}),!1):(n("mostrar-toast",{severity:"error",summary:"Campo requerido",detail:"Por favor, ingrese su n√∫mero de identificaci√≥n.",life:4e3}),!1)});const y=o=>{if(o&&o.id){const e={...l.value,tipo_documento:o,tipo_documento_id:o.id};n("update:formulario",e)}};return A(()=>{N()}),C([d,()=>u.formulario.tipo_documento_id],([o,e])=>{if(o.length>0&&e&&!u.formulario.tipo_documento){const m=o.find(c=>c.id===e);m&&y(m)}},{immediate:!0,flush:"post"}),C(()=>u.formulario.telefono,(o,e)=>{o&&o!==e&&u.tieneClienteExistente&&(s.value={isValid:!0,country:{name:"V√°lido",code:""},formattedNumber:o,mensaje:"N√∫mero v√°lido (guardado previamente)"})},{immediate:!0}),(o,e)=>{const m=f("InputText"),c=f("Select"),P=f("DatePicker"),S=f("Textarea");return g(),b("div",null,[e[16]||(e[16]=t("h4",{class:"font-semibold text-gray-800 mb-2 sm:mb-3 flex items-center text-sm sm:text-base"},[t("span",{class:"text-base sm:text-lg mr-1 sm:mr-2"},"üë§"),t("span",{class:"hidden sm:inline"},"Datos personales"),t("span",{class:"sm:hidden"},"Datos")],-1)),r.tieneClienteExistente?(g(),b("div",j,e[7]||(e[7]=[t("p",{class:"text-xs sm:text-sm text-blue-700 flex items-center"},[t("span",{class:"mr-1 sm:mr-2"},"‚ÑπÔ∏è"),t("span",{class:"hidden sm:inline"},"Sus datos personales se han cargado autom√°ticamente desde su perfil. Solo puede modificar la cantidad de cupos para esta reserva."),t("span",{class:"sm:hidden"},"Datos cargados desde su perfil. Solo puede modificar cupos.")],-1)]))):V("",!0),t("form",q,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-xs sm:text-sm font-semibold mb-1 sm:mb-2 text-gray-700"},"Correo electr√≥nico",-1)),i(m,{modelValue:l.value.correo,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.correo=a),type:"email",disabled:!!r.user,placeholder:"ejemplo@email.com",class:"w-full",pt:{root:{class:["w-full border border-gray-300 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm transition-colors","focus:ring-2 focus:ring-red-500 focus:border-red-500",{"bg-gray-100 cursor-not-allowed":!!r.user}]}}},null,8,["modelValue","disabled","pt"])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-xs sm:text-sm font-semibold mb-1 sm:mb-2 text-gray-700"},"Nombre Completo",-1)),i(m,{modelValue:l.value.nombres,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.nombres=a),disabled:!!r.user,placeholder:"Nombres y apellidos",class:"w-full",pt:{root:{class:["w-full border border-gray-300 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm transition-colors","focus:ring-2 focus:ring-red-500 focus:border-red-500",{"bg-gray-100 cursor-not-allowed":!!r.user}]}}},null,8,["modelValue","disabled","pt"])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-xs sm:text-sm font-semibold mb-1 sm:mb-2 text-gray-700"},"Tipo documento",-1)),i(c,{"model-value":l.value.tipo_documento,"onUpdate:modelValue":y,options:d.value,optionLabel:"nombre",loading:p.value,disabled:r.tieneClienteExistente,placeholder:"Seleccionar tipo de documento",class:v(["w-full border border-gray-300 rounded-lg",{"bg-gray-100 cursor-not-allowed":r.tieneClienteExistente}]),pt:{input:{class:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors"},trigger:{class:"text-gray-400"},panel:{class:"border border-gray-300 rounded-lg shadow-lg"},item:{class:"px-3 py-2 text-xs sm:text-sm hover:bg-red-50 transition-colors"}}},null,8,["model-value","options","loading","disabled","class"])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-xs sm:text-sm font-semibold mb-1 sm:mb-2 text-gray-700"},"N√∫mero de identificaci√≥n",-1)),i(m,{modelValue:l.value.numero_identificacion,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.numero_identificacion=a),disabled:r.tieneClienteExistente,placeholder:"N√∫mero de documento",class:"w-full",pt:{root:{class:["w-full border border-gray-300 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm transition-colors","focus:ring-2 focus:ring-red-500 focus:border-red-500",{"bg-gray-100 cursor-not-allowed":r.tieneClienteExistente}]}}},null,8,["modelValue","disabled","pt"])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-xs sm:text-sm font-semibold mb-1 sm:mb-2 text-gray-700"},"Fecha de nacimiento",-1)),i(P,{modelValue:l.value.fecha_nacimiento,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.fecha_nacimiento=a),dateFormat:"dd/mm/yy",class:"w-full",inputClass:r.tieneClienteExistente?"w-full border border-gray-300 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm bg-gray-100 cursor-not-allowed":"w-full border border-gray-300 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors",placeholder:"dd/mm/aaaa",maxDate:new Date,disabled:r.tieneClienteExistente,showIcon:""},null,8,["modelValue","inputClass","maxDate","disabled"])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-xs sm:text-sm font-semibold mb-1 sm:mb-2 text-gray-700"},"G√©nero",-1)),i(c,{modelValue:l.value.genero,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.genero=a),options:[{label:"Masculino",value:"MASCULINO"},{label:"Femenino",value:"FEMENINO"}],optionLabel:"label",optionValue:"value",disabled:r.tieneClienteExistente,placeholder:"Seleccionar g√©nero",class:"w-full",pt:{root:{class:["w-full border border-gray-300 rounded-lg",{"bg-gray-100 cursor-not-allowed":r.tieneClienteExistente}]},input:{class:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors"},trigger:{class:"text-gray-400"},panel:{class:"border border-gray-300 rounded-lg shadow-lg"},item:{class:"px-3 py-2 text-xs sm:text-sm hover:bg-red-50 transition-colors"}}},null,8,["modelValue","disabled","pt"])]),t("div",L,[e[14]||(e[14]=t("label",{class:"block text-xs sm:text-sm font-semibold mb-1 sm:mb-2 text-gray-700"},"Direcci√≥n de residencia",-1)),i(S,{modelValue:l.value.direccion,"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.direccion=a),disabled:r.tieneClienteExistente,rows:"2",placeholder:"Direcci√≥n completa de residencia",class:"w-full",pt:{root:{class:["w-full border border-gray-300 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm transition-colors","focus:ring-2 focus:ring-red-500 focus:border-red-500",{"bg-gray-100 cursor-not-allowed":r.tieneClienteExistente}]}}},null,8,["modelValue","disabled","pt"])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-xs sm:text-sm font-semibold mb-1 sm:mb-2 text-gray-700"},"Tel√©fono",-1)),i(F(U),{modelValue:l.value.telefono,"onUpdate:modelValue":e[6]||(e[6]=a=>l.value.telefono=a),defaultCountry:"SV",preferredCountries:["SV","GT","HN","CR","NI","PA","BZ"],validCharactersOnly:!0,disabled:r.tieneClienteExistente,dropdownOptions:{showDialCodeInSelection:!0,showFlags:!0,showSearchBox:!0,showDialCodeInList:!0},inputOptions:{placeholder:"N√∫mero de tel√©fono"},mode:"international",class:v(["w-full border border-gray-300 rounded-lg",{"bg-gray-100 cursor-not-allowed":r.tieneClienteExistente}]),onValidate:k},null,8,["modelValue","disabled","class"]),s.value.mensaje?(g(),b("p",{key:0,class:v(["text-xs mt-1 flex items-center",s.value.isValid?"text-green-600":"text-red-600"])},[t("span",B,w(s.value.isValid?"‚úì":"‚ö†Ô∏è"),1),I(" "+w(s.value.mensaje),1)],2)):V("",!0)])])])}}};export{R as default};
