import{r,E as Se,o as da,a5 as ua,N as R,w as T,n as fe,c as u,d as c,p as n,$ as i,a0 as ca,x as f,e as a,t as x,F as M,l as Z,q as y,A as ge,j as $,v as be,D as he,a6 as ye,y as xe}from"./vendor-BntMrX60.js";import{A as va}from"./AuthenticatedLayout-DH0Pa8es.js";import{z as ma,F as ie,a as pa,A as p,e as fa,f as j,h as qe,D as we,g as oe,p as Le,m as ga,o as ba}from"./ui-BJqxeYA1.js";import{a as ee,b as Ae,j as ha,c as ya,i as xa,d as z,k as Ee,e as $e,g as je,h as wa}from"./index-Dk7fAEKz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const _a={class:"py-4 sm:py-6 px-4 sm:px-7 mt-6 sm:mt-10 mx-auto bg-red-50 shadow-md rounded-lg h-screen-full"},Ca={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center mb-4 gap-4"},ka={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},Da={class:"flex items-center justify-between mb-3"},Pa={class:"flex items-center gap-3"},Ia={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},Va={class:"space-y-3"},Fa={class:"grid grid-cols-3 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-5 gap-3"},Sa={class:"text-sm font-medium leading-relaxed"},qa={class:"text-sm leading-relaxed whitespace-normal ps-3 mb-0"},La={class:"text-sm leading-relaxed"},Aa={class:"text-sm leading-relaxed"},Ea={class:"text-sm leading-relaxed"},$a={class:"text-sm font-medium leading-relaxed"},ja={class:"flex gap-1 justify-center items-center w-64"},Ua=["onClick"],Na=["onClick"],Ra=["onClick"],Ta={class:"space-y-4"},Ma={class:"w-full flex flex-col"},za={class:"flex items-center gap-4"},Oa={key:0,class:"text-red-500 ml-28"},Ha={class:"w-full flex flex-col"},Ba={class:"flex items-start gap-4"},Wa={class:"flex-1"},Ka={class:"flex gap-2 mb-3"},Ga=["disabled"],Ja={class:"space-y-2 max-h-40 overflow-y-auto"},Qa={class:"flex-1"},Xa=["onClick"],Ya={key:0,class:"text-gray-500 text-sm mt-2"},Za={class:"w-full flex flex-col"},el={class:"flex items-start gap-4"},al={class:"flex-1"},ll={class:"flex gap-2 mb-3"},sl=["disabled"],tl={class:"space-y-2 max-h-40 overflow-y-auto"},il={class:"flex-1"},ol=["onClick"],nl={key:0,class:"text-gray-500 text-sm mt-2"},rl={class:"w-full flex flex-col"},dl={class:"flex items-start gap-4"},ul={class:"flex-1"},cl={class:"flex gap-2 mb-3"},vl=["disabled"],ml={class:"space-y-2 max-h-40 overflow-y-auto"},pl={class:"flex-1"},fl=["onClick"],gl={key:0,class:"text-gray-500 text-sm mt-2"},bl={class:"flex gap-4"},hl={class:"w-full flex flex-col"},yl={class:"flex items-center gap-4"},xl={key:0,class:"text-red-500 ml-28"},wl={class:"flex gap-4"},_l={class:"flex-1"},Cl={class:"flex-1"},kl={class:"w-full flex flex-col"},Dl={class:"flex items-center gap-4"},Pl={key:0,class:"text-red-500 ml-28"},Il={class:"w-full flex flex-col"},Vl={class:"flex items-center gap-4"},Fl={class:"flex-1"},Sl={key:0,class:"text-red-500 ml-28"},ql={class:"flex gap-4 flex-wrap mt-4 ml-28"},Ll=["src"],Al=["onClick"],El={class:"flex justify-center gap-4 w-full"},$l=["disabled"],jl=["disabled"],Ul={key:0},Nl={key:1},Rl={class:"flex items-center gap-3"},Tl={class:"flex flex-col"},Ml={class:"flex justify-center gap-4 w-full"},zl=["disabled"],Ol=["disabled"],Hl={key:0},Bl={key:1},Wl={class:"flex items-center gap-3"},Kl={class:"flex justify-center gap-3 w-full"},Gl={key:0,class:"flex flex-col items-center justify-center"},Jl={class:"flex justify-center items-center w-full h-96"},Ql=["src"],Xl={key:1,class:"text-center text-gray-500 py-8"},Yl={class:"flex justify-center w-full"},ne="/api/paquetes",is={__name:"GestionPaquetes",setup(Zl){const P=r([]),I=r(""),_e=()=>{I.value.trim()&&(P.value.push(I.value.trim()),I.value="")},Ue=s=>{P.value.splice(s,1)},V=r([]),F=r(""),Ce=()=>{F.value.trim()&&(V.value.push(F.value.trim()),F.value="")},Ne=s=>{V.value.splice(s,1)},d=ma(),S=r(!1),q=r(!1),re=r(typeof window<"u"?window.innerWidth:1024),de=Se(()=>re.value<640?{width:"95vw",maxWidth:"380px"}:re.value<768?{width:"500px"}:{width:"600px"}),ke=()=>{typeof window<"u"&&(re.value=window.innerWidth)},De=r([]),t=r({id:null,nombre:"",incluye:"",condiciones:"",recordatorio:"",precio:null,pais_id:null,provincia_id:null,fecha_salida:null,fecha_regreso:null,imagenes:[]}),w=r([]),L=r(""),h=r([]),O=r([]),H=r([]),A=r(!1),B=r(!1),W=r(!1),U=r(!1),N=r(!1),E=r(null),b=r({global:{value:null,matchMode:ie.CONTAINS},pais_id:{value:null,matchMode:ie.EQUALS},provincia_id:{value:null,matchMode:ie.EQUALS},fecha_salida:{value:null,matchMode:ie.DATE_IS}}),K=r(null),G=r(null),_=r(null),C=r(null),ue=r(10),Re=r([5,10,20,50]),ae=r("Guardar"),J=r([]),k=r([]),le=r(!1),Q=r([]),Pe=r(0),Te=r(null),ce=Se(()=>{let s=De.value.slice().sort((e,l)=>{const o=new Date(e.created_at||e.fecha_salida||0);return new Date(l.created_at||l.fecha_salida||0)-o});if(b.value.global.value){const e=b.value.global.value.toLowerCase();s=s.filter(l=>{var o,g,m,Y;return((o=l.nombre)==null?void 0:o.toLowerCase().includes(e))||((g=l.incluye)==null?void 0:g.toLowerCase().includes(e))||((m=l.condiciones)==null?void 0:m.toLowerCase().includes(e))||((Y=l.recordatorio)==null?void 0:Y.toLowerCase().includes(e))})}return b.value.pais_id.value&&(s=s.filter(e=>e.pais_id==b.value.pais_id.value)),b.value.provincia_id.value&&(s=s.filter(e=>e.provincia_id==b.value.provincia_id.value)),(_.value||C.value)&&(s=s.filter(e=>{if(!e.fecha_salida)return!1;const l=new Date(e.fecha_salida);let o=!0;if(_.value){const g=new Date(_.value);o=o&&l>=g}if(C.value){const g=new Date(C.value);g.setHours(23,59,59,999),o=o&&l<=g}return o})),s}),Ie=()=>{const s=new Date;return s.setHours(s.getHours()+1),s},Me=()=>{if(!t.value.fecha_salida)return Ie();const s=new Date(t.value.fecha_salida);return s.setHours(s.getHours()+1),s},ze=()=>{if(!t.value.fecha_regreso)return null;const s=new Date(t.value.fecha_regreso);return s.setHours(s.getHours()-1),s},Oe=()=>{if(!t.value.fecha_salida)return!0;const s=new Date,e=new Date(t.value.fecha_salida),l=new Date(s.getTime()+60*60*1e3);return!(e<l||t.value.fecha_regreso&&(new Date(t.value.fecha_regreso)-e)/(1e3*60*60)<1)},He=()=>{if(!t.value.fecha_regreso)return!0;const s=new Date(t.value.fecha_regreso);if(t.value.fecha_salida){const e=new Date(t.value.fecha_salida);if((s-e)/(1e3*60*60)<1)return!1}return!0},Be=()=>{if(_.value&&C.value){const s=new Date(_.value),e=new Date(C.value);s>e&&(C.value=null,d.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'hasta' se limpió porque era anterior a la fecha 'desde'.",life:3e3}))}},We=()=>{if(_.value&&C.value){const s=new Date(_.value);new Date(C.value)<s&&(_.value=null,d.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'desde' se limpió porque era posterior a la fecha 'hasta'.",life:3e3}))}};da(async()=>{K.value=null,G.value=null,_.value=null,C.value=null,b.value.global.value=null,b.value.pais_id.value=null,b.value.provincia_id.value=null,b.value.fecha_salida.value=null,await ve(),await Ke(),typeof window<"u"&&window.addEventListener("resize",ke)}),ua(()=>{typeof window<"u"&&window.removeEventListener("resize",ke)});const ve=async()=>{const{data:s}=await R.get(ne),e=Array.isArray(s)?s:s.data||s.paquetes||[];De.value=e.map(l=>({...l,pais:l.pais||(l.pais_id?J.value.find(o=>o.id===l.pais_id):null),provincia:l.provincia||(l.provincia_id?k.value.find(o=>o.id===l.provincia_id):null),imagenes:(l.imagenes||[]).map(o=>typeof o=="string"?o:o.nombre)}))},Ke=async()=>{const{data:s}=await R.get("/api/paises");J.value=s},X=async s=>{const{data:e}=await R.get(`/api/provincias?pais_id=${s}`);k.value=e};T(()=>t.value.pais_id,s=>{s?(k.value=[],t.value.provincia_id=null,X(s)):(k.value=[],t.value.provincia_id=null)});function me(){t.value={id:null,nombre:"",incluye:"",condiciones:"",recordatorio:"",precio:null,pais_id:null,provincia_id:null,fecha_salida:null,fecha_regreso:null,imagenes:[]},h.value=[],O.value=[],H.value=[],w.value=[],L.value="",P.value=[],I.value="",V.value=[],F.value="",U.value=!1}function Ge(){me(),ae.value="Guardar",t.value.pais_id?X(t.value.pais_id):J.value.length>0?(t.value.pais_id=J.value[0].id,X(t.value.pais_id)):k.value=[],A.value=!0,fe(()=>{E.value={...t.value,incluye_lista:[...w.value],imagenes_originales:[...h.value]},N.value=!1})}function Je(s){me(),t.value={...s},w.value=se(s.incluye),P.value=se(s.condiciones),V.value=se(s.recordatorio),h.value=(s.imagenes||[]).map(e=>typeof e=="string"?e:e.nombre),ae.value="Actualizar",s.pais_id?X(s.pais_id).then(()=>{t.value.provincia_id=s.provincia_id}):k.value=[],A.value=!0,fe(()=>{E.value={...t.value,incluye_lista:[...w.value],imagenes_originales:[...h.value]},N.value=!1})}const Qe=()=>{N.value?W.value=!0:Ve()},Ve=()=>{A.value=!1,W.value=!1,N.value=!1,E.value=null,me()},Xe=()=>{W.value=!1},Fe=()=>{L.value.trim()&&(w.value.push(L.value.trim()),L.value="")},Ye=s=>{w.value.splice(s,1)},se=s=>s?s.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],pe=s=>s.join("|"),Ze=s=>{const e=s.target?s.target.files:s.files,l=2*1024*1024;for(const o of e)if(o instanceof File){if(o.size>l){d.add({severity:"warn",summary:"Archivo no válido",detail:"Máximo 2MB por imagen.",life:5e3});continue}if(!o.type.startsWith("image/")){d.add({severity:"warn",summary:"Formato no válido",detail:"Solo imágenes válidas.",life:4e3});continue}O.value.push(o);const g=new FileReader;g.onload=m=>h.value.push(m.target.result),g.readAsDataURL(o)}},ea=s=>{const e=h.value[s];typeof e=="string"&&e.startsWith("data:image")?(h.value.splice(s,1),O.value.splice(s,1)):(H.value.push(e),h.value.splice(s,1))};function aa(s){Q.value=(s||[]).map(e=>"/storage/"+(typeof e=="string"?e:e.nombre)),le.value=!0}const la=async()=>{if(U.value=!0,!t.value.nombre||t.value.nombre.length<6||t.value.nombre.length>100){d.add({severity:"warn",summary:"Campos requeridos",detail:"El nombre debe tener entre 6 y 100 caracteres.",life:4e3});return}if(!t.value.fecha_salida||!t.value.fecha_regreso){d.add({severity:"warn",summary:"Campos requeridos",detail:"Debes ingresar las fechas de salida y regreso.",life:4e3});return}if(!Oe()||!He()){d.add({severity:"warn",summary:"Verifica las fechas",detail:"La fecha de salida debe ser futura y la de regreso posterior a la salida (mínimo 1 hora).",life:4e3});return}if(!t.value.precio||t.value.precio<=0||t.value.precio>999999.99){d.add({severity:"warn",summary:"Precio inválido",detail:"El precio debe ser mayor a 0 y menor o igual a 9999.99.",life:4e3});return}const s=w.value.filter(v=>v.trim()!=="");if(s.length===0){d.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos un elemento en Incluye.",life:4e3});return}const e=P.value.filter(v=>v.trim()!=="");if(e.length===0){d.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos una condición válida.",life:4e3});return}const l=V.value.filter(v=>v.trim()!=="");if(l.length===0){d.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos un recordatorio válido.",life:4e3});return}if(h.value.length===0){d.add({severity:"warn",summary:"Imágenes requeridas",detail:"Debes subir al menos una imagen.",life:4e3});return}const o=2*1024*1024;if(O.value.filter(v=>v.size>o).length>0){d.add({severity:"warn",summary:"Imágenes muy grandes",detail:"Máximo 2MB por imagen.",life:4e3});return}let m=new FormData;m.append("nombre",t.value.nombre||""),m.append("incluye",pe(s)),m.append("condiciones",pe(e)),m.append("recordatorio",pe(l)),m.append("precio",t.value.precio||"");let Y=k.value.find(v=>v.id===t.value.provincia_id),oa=Y?Y.pais_id:"";m.append("pais_id",oa),m.append("provincia_id",t.value.provincia_id||""),t.value.fecha_salida instanceof Date?m.append("fecha_salida",t.value.fecha_salida.toISOString().slice(0,19).replace("T"," ")):t.value.fecha_salida&&m.append("fecha_salida",t.value.fecha_salida),t.value.fecha_regreso instanceof Date?m.append("fecha_regreso",t.value.fecha_regreso.toISOString().slice(0,19).replace("T"," ")):t.value.fecha_regreso&&m.append("fecha_regreso",t.value.fecha_regreso),O.value.forEach(v=>m.append("imagenes[]",v)),H.value.forEach(v=>{const D=v.includes("/")?v.split("/").pop():v;m.append("removed_images[]",D)}),S.value=!0;try{t.value.id?(m.append("_method","PUT"),await R.post(`${ne}/${t.value.id}`,m),d.add({severity:"success",summary:"Actualizado",detail:"Paquete actualizado",life:4e3})):(await R.post(ne,m),d.add({severity:"success",summary:"Creado",detail:"Paquete creado",life:4e3})),A.value=!1,N.value=!1,await ve()}catch(v){if(v.response&&v.response.status===422&&v.response.data){const D=v.response.data.errors||v.response.data;console.error("Validation errors:",D),typeof D=="object"?Object.keys(D).forEach(na=>{const te=D[na];Array.isArray(te)?te.forEach(ra=>d.add({severity:"warn",summary:"Validación",detail:ra,life:6e3})):typeof te=="string"&&d.add({severity:"warn",summary:"Validación",detail:te,life:6e3})}):typeof D=="string"&&d.add({severity:"warn",summary:"Validación",detail:D,life:6e3})}else console.error(v),d.add({severity:"error",summary:"Error",detail:"Revisa los campos e intenta nuevamente.",life:5e3})}finally{S.value=!1}},sa=s=>{t.value={...s},B.value=!0},ta=async()=>{q.value=!0;try{await R.delete(`${ne}/${t.value.id}`),await ve(),B.value=!1,d.add({severity:"success",summary:"Eliminado",detail:"Paquete eliminado",life:4e3})}catch(s){if(s.response&&s.response.status===422&&s.response.data){const e=s.response.data.errors||s.response.data;console.error("Delete validation errors:",e),typeof e=="object"?Object.keys(e).forEach(l=>{const o=e[l];Array.isArray(o)?o.forEach(g=>d.add({severity:"warn",summary:"Validación",detail:g,life:6e3})):typeof o=="string"&&d.add({severity:"warn",summary:"Validación",detail:o,life:6e3})}):typeof e=="string"&&d.add({severity:"warn",summary:"Validación",detail:e,life:6e3})}else console.error(s),d.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el paquete.",life:5e3})}finally{q.value=!1}},ia=()=>{K.value=null,G.value=null,_.value=null,C.value=null,b.value.global.value=null,b.value.pais_id.value=null,b.value.provincia_id.value=null,b.value.fecha_salida.value=null,d.add({severity:"info",summary:"Filtros limpiados",detail:"Se han removido todos los filtros aplicados.",life:3e3})};return T(()=>K.value,s=>{b.value.pais_id.value=s,s?X(s):k.value=[]}),T(()=>G.value,s=>{b.value.provincia_id.value=s}),T(()=>_.value,Be),T(()=>C.value,We),T([t,w,h,H],()=>{E.value&&A.value&&fe(()=>{const s={...t.value,incluye_lista:[...w.value],imagenes_actuales:[...h.value]},e=JSON.stringify(s)!==JSON.stringify({...E.value,imagenes_actuales:E.value.imagenes_originales})||H.value.length>0,l=!E.value.id,o=t.value.nombre||t.value.destino||t.value.fecha_salida||t.value.fecha_regreso||t.value.precio||t.value.pais_id||t.value.provincia_id||w.value.length>0||h.value.length>0;N.value=e||l&&o})},{deep:!0,flush:"post"}),(s,e)=>(c(),u(M,null,[n(i(ca),{title:"Paquetes"}),n(va,null,{default:f(()=>[n(i(pa),{class:"z-[9999]"}),a("div",_a,[a("div",Ca,[e[23]||(e[23]=a("h3",{class:"text-lg sm:text-2xl text-blue-600 font-bold"},"Catálogo de Paquetes",-1)),a("button",{class:"bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:Ge},[n(i(p),{icon:i(ee),class:"h-4 w-4 text-white"},null,8,["icon"]),e[22]||(e[22]=a("span",null," Agregar paquete",-1))])]),n(i(fa),{value:ce.value,dataKey:"id",paginator:!0,rows:ue.value,rowsPerPageOptions:Re.value,rowsPerPage:ue.value,"onUpdate:rowsPerPage":e[3]||(e[3]=l=>ue.value=l),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} paquetes",class:"overflow-x-auto max-w-full",style:{display:"block","max-width":"84vw"},responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:f(()=>[a("div",ka,[a("div",Da,[a("div",Pa,[e[24]||(e[24]=a("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[a("i",{class:"pi pi-filter text-blue-600 text-sm"}),a("span",null,"Filtros")],-1)),a("div",Ia,x(ce.value.length)+" resultado"+x(ce.value.length!==1?"s":""),1)]),a("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md",onClick:ia},[n(i(p),{icon:i(xa),class:"h-4 w-4 text-white"},null,8,["icon"]),e[25]||(e[25]=a("span",null," Limpiar filtros",-1))])]),a("div",Va,[a("div",null,[n(i(qe),{modelValue:b.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=l=>b.value.global.value=l),placeholder:"🔍 Buscar paquetes...",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),a("div",Fa,[a("div",null,[n(i(we),{modelValue:K.value,"onUpdate:modelValue":e[1]||(e[1]=l=>K.value=l),options:J.value,optionLabel:"nombre",optionValue:"id",placeholder:"País",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},clearable:!0},null,8,["modelValue","options"])]),a("div",null,[n(i(we),{modelValue:G.value,"onUpdate:modelValue":e[2]||(e[2]=l=>G.value=l),options:k.value,optionLabel:"nombre",optionValue:"id",placeholder:"Provincia",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},clearable:!0},null,8,["modelValue","options"])])])])])]),default:f(()=>[n(i(j),{field:"nombre",header:"Nombre",sortable:"",class:"w-44 min-w-44"},{body:f(l=>[a("div",Sa,x(l.data.nombre),1)]),_:1}),n(i(j),{field:"incluye",header:"Incluye",class:"w-40 min-w-40"},{body:f(l=>[a("ul",qa,[(c(!0),u(M,null,Z(se(l.data.incluye),o=>(c(),u("li",{key:o},x(o),1))),128))])]),_:1}),n(i(j),{field:"pais.nombre",header:"País",class:"w-32 min-w-32"},{body:f(l=>{var o;return[a("div",La,x((o=l.data.pais)==null?void 0:o.nombre),1)]}),_:1}),n(i(j),{field:"provincia.nombre",header:"Provincia",class:"w-32 min-w-32"},{body:f(l=>{var o;return[a("div",Aa,x((o=l.data.provincia)==null?void 0:o.nombre),1)]}),_:1}),n(i(j),{field:"fecha_salida",header:"Fecha salida",class:"w-36 min-w-36"},{body:f(l=>[a("div",Ea,x(l.data.fecha_salida),1)]),_:1}),n(i(j),{field:"precio",header:"Precio",class:"w-24 min-w-24"},{body:f(l=>[a("div",$a,x(isNaN(Number(l.data.precio))?"":`$${Number(l.data.precio).toFixed(2)}`),1)]),_:1}),n(i(j),{exportable:!1,class:"w-56 min-w-56"},{header:f(()=>e[26]||(e[26]=[a("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:f(l=>[a("div",ja,[a("button",{class:"bg-orange-200/30 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:o=>Je(l.data)},[n(i(p),{icon:i(Ae),class:"h-4 w-4 text-orange-600"},null,8,["icon"]),e[27]||(e[27]=y("  Editar "))],8,Ua),a("button",{class:"bg-blue-200/50 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:o=>aa(l.data.imagenes)},[n(i(p),{icon:i(ha),class:"h-4 w-4 text-blue-600"},null,8,["icon"]),e[28]||(e[28]=y("  Imgs "))],8,Na),a("button",{class:"bg-red-200/30 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:o=>sa(l.data)},[n(i(p),{icon:i(ya),class:"h-4 w-4 text-red-600"},null,8,["icon"]),e[29]||(e[29]=y("  Eliminar "))],8,Ra)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"]),n(i(oe),{visible:A.value,"onUpdate:visible":e[15]||(e[15]=l=>A.value=l),header:ae.value+" Paquete",modal:!0,style:ge(de.value),closable:!1},{footer:f(()=>[a("div",El,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Qe,disabled:S.value},[n(i(p),{icon:i(z),class:"h-5 text-green-600"},null,8,["icon"]),e[41]||(e[41]=y("Cancelar "))],8,$l),a("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:la,disabled:S.value},[n(i(p),{icon:S.value?i(Ee):i($e),class:xe(["h-5 text-white",{"animate-spin":S.value}])},null,8,["icon","class"]),S.value?(c(),u("span",Nl,"Procesando...")):(c(),u("span",Ul,x(ae.value),1))],8,jl)])]),default:f(()=>[a("div",Ta,[a("div",Ma,[a("div",za,[e[30]||(e[30]=a("label",{for:"nombre",class:"w-24 flex items-center gap-1"},[y("Nombre: "),a("span",{class:"text-red-500 font-bold"},"*")],-1)),n(i(qe),{modelValue:t.value.nombre,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.nombre=l),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:100,class:"flex-1"},null,8,["modelValue"])]),t.value.nombre&&t.value.nombre.length<6?(c(),u("small",Oa," El nombre debe tener al menos 6 caracteres. ")):$("",!0)]),a("div",Ha,[a("div",Ba,[e[31]||(e[31]=a("label",{class:"w-24 flex items-center gap-1 mt-2"},"Incluye:",-1)),a("div",Wa,[a("div",Ka,[be(a("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>L.value=l),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:he(Fe,["enter"])},null,544),[[ye,L.value]]),a("button",{type:"button",onClick:Fe,disabled:!L.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[n(i(p),{icon:i(ee),class:"h-5"},null,8,["icon"])],8,Ga)]),a("div",Ja,[(c(!0),u(M,null,Z(w.value,(l,o)=>(c(),u("div",{key:o,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[a("span",Qa,x(l),1),a("button",{type:"button",onClick:g=>Ye(o),class:"text-red-500 hover:text-red-700 p-1"},[n(i(p),{icon:i(z),class:"h-5"},null,8,["icon"])],8,Xa)]))),128))]),w.value.length===0?(c(),u("div",Ya,"Sin elementos agregados.")):$("",!0)])])]),a("div",Za,[a("div",el,[e[32]||(e[32]=a("label",{class:"w-24 flex items-center gap-1 mt-2"},[y("Condiciones:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",al,[a("div",ll,[be(a("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>I.value=l),type:"text",placeholder:"Agregar condición...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:he(_e,["enter"])},null,544),[[ye,I.value]]),a("button",{type:"button",onClick:_e,disabled:!I.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[n(i(p),{icon:i(ee),class:"h-5"},null,8,["icon"])],8,sl)]),a("div",tl,[(c(!0),u(M,null,Z(P.value,(l,o)=>(c(),u("div",{key:o,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[a("span",il,x(l),1),a("button",{type:"button",onClick:g=>Ue(o),class:"text-red-500 hover:text-red-700 p-1"},[n(i(p),{icon:i(z),class:"h-5"},null,8,["icon"])],8,ol)]))),128))]),P.value.length===0?(c(),u("div",nl,"Sin condiciones agregadas.")):$("",!0)])])]),a("div",rl,[a("div",dl,[e[33]||(e[33]=a("label",{class:"w-24 flex items-center gap-1 mt-2"},[y("Recordatorio:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",ul,[a("div",cl,[be(a("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>F.value=l),type:"text",placeholder:"Agregar recordatorio...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:he(Ce,["enter"])},null,544),[[ye,F.value]]),a("button",{type:"button",onClick:Ce,disabled:!F.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[n(i(p),{icon:i(ee),class:"h-5"},null,8,["icon"])],8,vl)]),a("div",ml,[(c(!0),u(M,null,Z(V.value,(l,o)=>(c(),u("div",{key:o,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[a("span",pl,x(l),1),a("button",{type:"button",onClick:g=>Ne(o),class:"text-red-500 hover:text-red-700 p-1"},[n(i(p),{icon:i(z),class:"h-5"},null,8,["icon"])],8,fl)]))),128))]),V.value.length===0?(c(),u("div",gl,"Sin recordatorios agregados.")):$("",!0)])])]),a("div",bl,[a("div",hl,[a("div",yl,[e[34]||(e[34]=a("label",{for:"provincia",class:"w-24"},[y("Provincia:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),n(i(we),{modelValue:t.value.provincia_id,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.provincia_id=l),options:k.value,optionLabel:"nombre",optionValue:"id",id:"provincia",filter:!0,filterPlaceholder:"Buscar provincia...",showClear:!0,class:xe([{"p-invalid":U.value&&!t.value.provincia_id},"flex-1"]),placeholder:"Selecciona una provincia",onInput:e[9]||(e[9]=l=>s.onInputDropdown&&s.onInputDropdown("provincia",l)),onFilter:e[10]||(e[10]=l=>s.onFilterDropdown&&s.onFilterDropdown("provincia",l))},null,8,["modelValue","options","class"])]),U.value&&!t.value.provincia_id?(c(),u("small",xl,"La provincia es obligatoria.")):$("",!0)])]),a("div",wl,[a("div",_l,[e[35]||(e[35]=a("label",{class:"flex items-center gap-1 mb-2"},[y("Fecha salida:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),n(i(Le),{modelValue:t.value.fecha_salida,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.fecha_salida=l),class:"w-full",minDate:Ie(),maxDate:ze(),dateFormat:"yy-mm-dd",showIcon:"",iconDisplay:"input",placeholder:"Selecciona fecha de salida"},null,8,["modelValue","minDate","maxDate"])]),a("div",Cl,[e[36]||(e[36]=a("label",{class:"flex items-center gap-1 mb-2"},[y("Fecha regreso:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),n(i(Le),{modelValue:t.value.fecha_regreso,"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.fecha_regreso=l),class:"w-full",minDate:Me(),dateFormat:"yy-mm-dd",showIcon:"",iconDisplay:"input",placeholder:"Selecciona fecha de regreso"},null,8,["modelValue","minDate"])])]),a("div",kl,[a("div",Dl,[e[37]||(e[37]=a("label",{class:"w-24 flex items-center gap-1"},[y("Precio:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),n(i(ga),{modelValue:t.value.precio,"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.precio=l),mode:"currency",currency:"USD",locale:"en-US",min:.01,max:999999.99,maxFractionDigits:2,minFractionDigits:2,class:"flex-1",placeholder:"$0.00"},null,8,["modelValue"])]),U.value&&(t.value.precio==null||t.value.precio<=0||t.value.precio>999999.99)?(c(),u("small",Pl,"El precio es obligatorio, debe ser mayor a 0 y menor o igual a 99999999.99.")):$("",!0)]),a("div",Il,[a("div",Vl,[e[39]||(e[39]=a("label",{class:"w-24 flex items-center gap-1"},[y("Imágenes:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",Fl,[a("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:Ze,class:"hidden",ref_key:"fileInput",ref:Te},null,544),a("button",{type:"button",class:"bg-white hover:bg-red-50 text-red-500 hover:text-red-600 border border-red-500 hover:border-red-600 px-6 py-2 rounded-md flex items-center gap-2",onClick:e[14]||(e[14]=l=>s.$refs.fileInput.click())},[n(i(p),{icon:i(ee),class:"h-4"},null,8,["icon"]),e[38]||(e[38]=a("span",null,"Subir imágenes",-1))])])]),U.value&&h.value.length===0?(c(),u("small",Sl,"Las imágenes son obligatorias (al menos una).")):$("",!0)]),a("div",ql,[(c(!0),u(M,null,Z(h.value,(l,o)=>(c(),u("div",{key:o,class:"relative w-32 h-32"},[a("img",{src:l.startsWith("data:image")?l:"/storage/"+l,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,Ll),a("button",{onClick:g=>ea(o),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow",style:{transform:"translate(50%, -50%)"}},e[40]||(e[40]=[a("i",{class:"pi pi-times text-xs"},null,-1)]),8,Al)]))),128))])])]),_:1},8,["visible","header","style"]),n(i(oe),{visible:B.value,"onUpdate:visible":e[17]||(e[17]=l=>B.value=l),header:"Eliminar paquete",modal:!0,style:ge(de.value),closable:!1},{footer:f(()=>[a("div",Ml,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[16]||(e[16]=l=>B.value=!1),disabled:q.value},[n(i(p),{icon:i(z),class:"h-5"},null,8,["icon"]),e[45]||(e[45]=a("span",null,"No",-1))],8,zl),a("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:ta,disabled:q.value},[n(i(p),{icon:q.value?i(Ee):i($e),class:xe(["h-5",{"animate-spin":q.value}])},null,8,["icon","class"]),q.value?(c(),u("span",Bl,"Eliminando...")):(c(),u("span",Hl,"Sí"))],8,Ol)])]),default:f(()=>[a("div",Rl,[n(i(p),{icon:i(je),class:"h-8 w-8 text-red-500"},null,8,["icon"]),a("div",Tl,[a("span",null,[e[42]||(e[42]=y("¿Estás seguro de eliminar el paquete: ")),a("b",null,x(t.value.nombre),1),e[43]||(e[43]=y("?"))]),e[44]||(e[44]=a("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acción es irreversible.",-1))])])]),_:1},8,["visible","style"]),n(i(oe),{visible:W.value,"onUpdate:visible":e[18]||(e[18]=l=>W.value=l),header:"Cambios sin guardar",modal:!0,style:ge(de.value),closable:!1},{footer:f(()=>[a("div",Kl,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Xe},[n(i(p),{icon:i(Ae),class:"h-4"},null,8,["icon"]),e[47]||(e[47]=a("span",null,"Continuar",-1))]),a("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Ve},[n(i(p),{icon:i(wa),class:"h-4"},null,8,["icon"]),e[48]||(e[48]=a("span",null,"Salir sin guardar",-1))])])]),default:f(()=>[a("div",Wl,[n(i(p),{icon:i(je),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e[46]||(e[46]=a("div",{class:"flex flex-col"},[a("span",null,"¡Tienes información sin guardar!"),a("span",{class:"text-red-600 text-sm font-medium mt-1"},"¿Deseas salir sin guardar?")],-1))])]),_:1},8,["visible","style"]),n(i(oe),{visible:le.value,"onUpdate:visible":e[21]||(e[21]=l=>le.value=l),header:"Imágenes del paquete",modal:!0,closable:!1,style:{width:"700px"}},{footer:f(()=>[a("div",Yl,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[20]||(e[20]=l=>le.value=!1)},[n(i(p),{icon:i(z),class:"h-5"},null,8,["icon"]),e[49]||(e[49]=a("span",null,"Cerrar",-1))])])]),default:f(()=>[Q.value.length?(c(),u("div",Gl,[n(i(ba),{value:Q.value,numVisible:1,numScroll:1,circular:!0,page:Pe.value,"onUpdate:page":e[19]||(e[19]=l=>Pe.value=l),class:"w-full",showIndicators:Q.value.length>1,showNavigators:Q.value.length>1,style:{"max-width":"610px"}},{item:f(l=>[a("div",Jl,[a("img",{src:l.data,alt:"Imagen paquete",class:"w-auto h-full max-h-96 object-contain rounded shadow"},null,8,Ql)])]),_:1},8,["value","page","showIndicators","showNavigators"])])):(c(),u("div",Xl,"No hay imágenes para este paquete."))]),_:1},8,["visible"])])]),_:1})],64))}};export{is as default};
