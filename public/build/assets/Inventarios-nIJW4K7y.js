import{r as d,E as se,w as pe,o as fe,k as w,h as $,d as v,x as u,p as i,e as t,$ as n,a0 as ge,t as a,q as p,y as z,j as k,v as ae,c as f,F as W,l as q,a7 as le,A as ie,a1 as xe,N as V}from"./vendor-CqKcGHPa.js";import{A as be}from"./AuthenticatedLayout-Chsf1Jli.js";import{z as ye,F as g}from"./ui-DrLUz167.js";import{o as he,p as _e,j as ne,q as we,l as ke,b as H,r as re,n as Ae}from"./index-XGUaz6Tt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ce={class:"container mx-auto px-4 py-6"},De={class:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-8"},Se={class:"flex items-center justify-between text-white p-2 sm:p-4"},Pe={class:"text-xl sm:text-3xl font-bold"},Te={class:"flex items-center justify-between text-white p-2 sm:p-4"},Fe={class:"text-xl sm:text-3xl font-bold"},je={class:"flex items-center justify-between text-white p-2 sm:p-4"},Ee={class:"text-xl sm:text-3xl font-bold"},Le={class:"flex items-center justify-between text-white p-2 sm:p-4"},Ve={class:"text-sm sm:text-3xl font-bold"},Me={class:"bg-white rounded-lg shadow-md"},Re={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},Ie={class:"text-blue-600 text-sm text-center sm:text-start mt-1"},Ne={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},Ue={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},Be={class:"flex items-center gap-3"},$e={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},ze=["disabled"],We=["disabled"],qe={class:"space-y-3"},He={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-3"},Oe={class:"col-span-1"},Je=["value"],Ge={class:"col-span-1"},Ke=["value"],Qe={class:"col-span-1 hidden md:block"},Xe={class:"col-span-1 hidden md:block"},Ye={class:"col-span-2 flex gap-3 md:hidden"},Ze={class:"text-sm font-medium leading-relaxed"},et=["title"],tt={class:"block text-xs text-gray-500"},ot=["title"],st={class:"text-sm leading-relaxed"},at={key:0,class:"space-y-4"},lt={class:"grid grid-cols-2 gap-4"},it={class:"col-span-2"},nt={key:0,class:"text-sm text-gray-600 mt-1"},rt={key:0},dt={key:0},ut={class:"mt-1 p-3 bg-gray-50 rounded-lg"},ct={key:1,class:"p-3 bg-blue-50 rounded-lg"},mt={class:"flex justify-center gap-4 w-full mt-6"},vt={key:0,class:"text-center py-8"},pt={key:1,class:"text-center py-8"},ft={key:2,class:"space-y-4"},gt={class:"max-h-96 overflow-y-auto"},xt={class:"flex-1"},bt={class:"font-semibold text-gray-800"},yt={class:"text-sm text-gray-500"},ht={class:"flex gap-4 text-xs text-gray-600 mt-1"},_t={key:0},wt={class:"ml-4"},kt={class:"border-t pt-4"},At={class:"text-sm text-gray-600 mb-3"},Ct={class:"flex justify-center gap-4 w-full mt-6"},Et={__name:"Inventarios",setup(Dt){const D=ye(),M=d([]),h=d([]),b=d({}),O=d(!1);d(!1);const E=d(""),_=d(!1);d(!1),d(!1);const L=d(!1),r=d(null),T=d(!1),S=d([]),F=d(""),P=d(""),R=d(!1),l=d({producto_id:"",tipo_movimiento:"",fecha_desde:null,fecha_hasta:null});d({});const de=[{label:"Entrada",value:"ENTRADA"},{label:"Salida",value:"SALIDA"},{label:"Ajuste",value:"AJUSTE"}],J=d(typeof window<"u"?window.innerWidth:1024),I=se(()=>{let s=M.value;if(l.value.producto_id&&l.value.producto_id!==""&&(s=s.filter(e=>e.producto_id==l.value.producto_id)),l.value.tipo_movimiento&&l.value.tipo_movimiento!==""&&(s=s.filter(e=>e.tipo_movimiento===l.value.tipo_movimiento)),l.value.fecha_desde&&(s=s.filter(e=>{const c=new Date(e.fecha_movimiento),m=new Date(l.value.fecha_desde);return c>=m})),l.value.fecha_hasta&&(s=s.filter(e=>{const c=new Date(e.fecha_movimiento),m=new Date(l.value.fecha_hasta);return c<=m})),E.value){const e=E.value.toLowerCase();s=s.filter(c=>{var m,A,C,y,j;return((A=(m=c.producto)==null?void 0:m.nombre)==null?void 0:A.toLowerCase().includes(e))||((C=c.motivo)==null?void 0:C.toLowerCase().includes(e))||((j=(y=c.user)==null?void 0:y.name)==null?void 0:j.toLowerCase().includes(e))})}return s}),G=se(()=>J.value<640?{width:"95vw",maxWidth:"380px"}:J.value<768?{width:"400px"}:{width:"450px"}),N=async()=>{try{const s={};l.value.producto_id&&l.value.producto_id!==""&&(s.producto_id=l.value.producto_id),l.value.tipo_movimiento&&l.value.tipo_movimiento!==""&&(s.tipo_movimiento=l.value.tipo_movimiento),l.value.fecha_desde&&(s.fecha_desde=l.value.fecha_desde),l.value.fecha_hasta&&(s.fecha_hasta=l.value.fecha_hasta);const[e,c,m]=await Promise.all([V.get("/api/inventario",{params:s}),V.get("/api/productos"),V.get("/api/inventario/resumen")]);M.value=e.data.data||e.data||[];const A=c.data.data||c.data||[];h.value=Array.isArray(A)?A:[],h.value.length>0&&!Array.isArray(h.value)&&(console.warn("Los productos no tienen el formato esperado:",h.value),h.value=[]),b.value=m.data||{}}catch(s){console.error("Error al cargar datos:",s),M.value=[],h.value=[],b.value={},D.add({severity:"error",summary:"Error",detail:"Error al cargar los datos del inventario",life:4e3})}},ue=async()=>{O.value=!0,D.add({severity:"info",summary:"Cargando inventario...",life:2e3});try{await N(),D.add({severity:"success",summary:"Inventario cargado",life:2e3})}finally{O.value=!1}},K=async()=>{_.value=!0;try{await new Promise(s=>setTimeout(s,300)),l.value={producto_id:"",tipo_movimiento:"",fecha_desde:null,fecha_hasta:null},D.add({severity:"success",summary:"Filtros limpiados",life:2e3}),await N()}finally{_.value=!1}},U=async s=>{let e=0,c="";switch(s){case"disponibles":e=b.value.productos_disponibles||0,c="/api/admin/productos/disponibles",F.value="Productos Disponibles";break;case"agotados":e=b.value.productos_agotados||0,c="/api/inventario/agotados",F.value="Productos Agotados";break;case"stock_bajo":e=b.value.productos_stock_bajo||0,c="/api/inventario/stock-bajo",F.value="Productos con Stock Bajo";break}if(e===0){D.add({severity:"info",summary:"Sin registros",detail:`No hay productos en estado: ${F.value.toLowerCase()}`,life:3e3});return}P.value=s,R.value=!0;try{const m=await V.get(c);S.value=m.data.data||m.data||[],T.value=!0}catch{D.add({severity:"error",summary:"Error",detail:"Error al cargar los productos",life:4e3})}finally{R.value=!1}},ce=s=>{s.originalEvent.target.closest("button")||(r.value=s.data,L.value=!0)},Q=s=>{const e=new Date(s);return window.innerWidth<640?e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):e.toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},X=s=>new Intl.NumberFormat("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s||0),B=s=>{const e={venta:"Venta",ajuste_aumento:"Ajuste (Aumento)",ajuste_reduccion:"Ajuste (Reducci칩n)",entrada_manual:"Entrada Manual",cancelacion_venta:"Cancelaci칩n de Venta",eliminacion_venta:"Eliminaci칩n de Venta","":"Sin especificar",null:"Sin especificar",undefined:"Sin especificar"};return!e[s]&&s?s.charAt(0).toUpperCase()+s.slice(1).replace(/_/g," "):e[s]||"Sin especificar"},Y=s=>s.tipo_movimiento||"Sin definir",me=s=>{const e=s.tipo_movimiento;return e==="ENTRADA"?"success":e==="SALIDA"?"danger":e==="AJUSTE"?"warning":"secondary"};return pe(l,()=>{N()},{deep:!0}),fe(()=>{ue()}),(s,e)=>{const c=w("Toast"),m=w("Card"),A=w("InputText"),C=w("DatePicker"),y=w("Column"),j=w("Tag"),ve=w("DataTable"),Z=w("Dialog");return v(),$(be,null,{default:u(()=>[i(n(ge),{title:"Inventarios"}),i(c,{class:"z-[9999]"}),t("div",Ce,[e[30]||(e[30]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Inventarios"),t("p",{class:"text-gray-600"},"Monitoreo y an치lisis del estado del inventario")],-1)),t("div",De,[i(m,{class:"bg-gradient-to-r from-green-500 to-green-600 cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:e[0]||(e[0]=o=>U("disponibles"))},{content:u(()=>[t("div",Se,[t("div",null,[e[17]||(e[17]=t("p",{class:"text-xs sm:text-sm opacity-90"},"Productos Disponibles",-1)),t("p",Pe,a(b.value.productos_disponibles||0),1),e[18]||(e[18]=t("p",{class:"text-xs opacity-75 mt-1"},"游녡 Clic para ver detalles",-1))]),i(n(g),{icon:n(he),class:"text-2xl sm:text-4xl opacity-75"},null,8,["icon"])])]),_:1}),i(m,{class:"bg-gradient-to-r from-red-500 to-red-600 cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:e[1]||(e[1]=o=>U("agotados"))},{content:u(()=>[t("div",Te,[t("div",null,[e[19]||(e[19]=t("p",{class:"text-xs sm:text-sm opacity-90"},"Productos Agotados",-1)),t("p",Fe,a(b.value.productos_agotados||0),1),e[20]||(e[20]=t("p",{class:"text-xs opacity-75 mt-1"},"游녡 Clic para ver detalles",-1))]),i(n(g),{icon:n(_e),class:"text-2xl sm:text-4xl opacity-75"},null,8,["icon"])])]),_:1}),i(m,{class:"bg-gradient-to-r from-yellow-500 to-yellow-600 cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:e[2]||(e[2]=o=>U("stock_bajo"))},{content:u(()=>[t("div",je,[t("div",null,[e[21]||(e[21]=t("p",{class:"text-xs sm:text-sm opacity-90"},"Stock Bajo",-1)),t("p",Ee,a(b.value.productos_stock_bajo||0),1),e[22]||(e[22]=t("p",{class:"text-xs opacity-75 mt-1"},"游녡 Clic para ver detalles",-1))]),i(n(g),{icon:n(ne),class:"text-2xl sm:text-4xl opacity-75"},null,8,["icon"])])]),_:1}),i(m,{class:"bg-gradient-to-r from-blue-500 to-blue-600"},{content:u(()=>[t("div",Le,[t("div",null,[e[23]||(e[23]=t("p",{class:"text-xs sm:text-sm opacity-90"},"Valor Total",-1)),t("p",Ve,"$"+a(X(b.value.valor_total_inventario)),1)]),i(n(g),{icon:n(we),class:"text-2xl sm:text-4xl opacity-75"},null,8,["icon"])])]),_:1})]),t("div",Me,[t("div",Re,[t("div",null,[e[25]||(e[25]=t("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Historial de Movimientos",-1)),e[26]||(e[26]=t("p",{class:"text-gray-500 text-sm text-center sm:text-start mt-1"},[p(" 游늵 Vista de solo lectura - Para gestionar stock, ve a "),t("span",{class:"text-blue-600 font-medium"},"Productos > M치s Acciones > Actualizar Stock")],-1)),t("p",Ie,[i(n(g),{icon:n(ke),class:"h-4 w-4 text-yellow-500"},null,8,["icon"]),e[24]||(e[24]=p(" Haz clic en cualquier fila para ver los detalles. "))])])]),i(ve,{value:I.value,dataKey:"id",paginator:!0,rows:10,rowsPerPageOptions:[10,25,50],globalFilterFields:["producto.nombre","motivo","user.name"],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} movimientos",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:ce,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:u(()=>[t("div",Ne,[t("div",Ue,[t("div",Be,[e[27]||(e[27]=t("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[t("i",{class:"pi pi-filter text-blue-600 text-sm"}),t("span",null,"Filtros")],-1)),t("div",$e,a(I.value.length)+" resultado"+a(I.value.length!==1?"s":""),1),t("button",{onClick:K,disabled:_.value,class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2"},[_.value?(v(),$(n(g),{key:0,icon:n(H),class:"animate-spin h-3 w-3"},null,8,["icon"])):k("",!0),t("span",null,a(_.value?"Limpiando...":"Limpiar filtros"),1)],8,ze)]),t("button",{onClick:K,disabled:_.value,class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2"},[_.value?(v(),$(n(g),{key:0,icon:n(H),class:"animate-spin h-3 w-3"},null,8,["icon"])):k("",!0),t("span",null,a(_.value?"Limpiando...":"Limpiar filtros"),1)],8,We)]),t("div",qe,[t("div",null,[i(A,{modelValue:E.value,"onUpdate:modelValue":e[3]||(e[3]=o=>E.value=o),placeholder:"游댌 Buscar movimientos...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),t("div",He,[t("div",Oe,[ae(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.producto_id=o),onChange:e[5]||(e[5]=(...o)=>s.aplicarFiltros&&s.aplicarFiltros(...o)),class:"w-full h-9 text-sm border border-blue-300 rounded-md px-3 py-1 bg-white text-gray-700 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 truncate"},[e[28]||(e[28]=t("option",{value:"",disabled:"",selected:"",hidden:""},"Producto",-1)),(v(!0),f(W,null,q(Array.isArray(h.value)?h.value:[],o=>(v(),f("option",{key:o.id,value:o.id,class:"truncate"},a(o.nombre),9,Je))),128))],544),[[le,l.value.producto_id]])]),t("div",Ge,[ae(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.tipo_movimiento=o),onChange:e[7]||(e[7]=(...o)=>s.aplicarFiltros&&s.aplicarFiltros(...o)),class:"w-full h-9 text-sm border border-blue-300 rounded-md px-3 py-1 bg-white text-gray-700 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 truncate"},[e[29]||(e[29]=t("option",{value:"",disabled:"",selected:"",hidden:""},"Tipo",-1)),(v(),f(W,null,q(de,o=>t("option",{key:o.value,value:o.value,class:"truncate"},a(o.label),9,Ke)),64))],544),[[le,l.value.tipo_movimiento]])]),t("div",Qe,[i(C,{modelValue:l.value.fecha_desde,"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.fecha_desde=o),placeholder:"Fecha desde",dateFormat:"yy-mm-dd",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},showIcon:""},null,8,["modelValue"])]),t("div",Xe,[i(C,{modelValue:l.value.fecha_hasta,"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.fecha_hasta=o),placeholder:"Fecha hasta",dateFormat:"yy-mm-dd",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},showIcon:""},null,8,["modelValue"])]),t("div",Ye,[i(C,{modelValue:l.value.fecha_desde,"onUpdate:modelValue":e[10]||(e[10]=o=>l.value.fecha_desde=o),placeholder:"Fecha desde",dateFormat:"dd/mm/yy",class:"flex-1 h-9 text-sm rounded-md border border-blue-300",showIcon:""},null,8,["modelValue"]),i(C,{modelValue:l.value.fecha_hasta,"onUpdate:modelValue":e[11]||(e[11]=o=>l.value.fecha_hasta=o),placeholder:"Fecha hasta",dateFormat:"dd/mm/yy",class:"flex-1 h-9 text-sm rounded-md border border-blue-300",showIcon:""},null,8,["modelValue"])])])])])]),default:u(()=>[i(y,{field:"fecha_movimiento",header:"Fecha",sortable:"",class:"w-32"},{body:u(({data:o})=>[t("div",Ze,a(Q(o.fecha_movimiento)),1)]),_:1}),i(y,{field:"producto.nombre",header:"Producto",sortable:"",class:"w-40"},{body:u(({data:o})=>{var x,ee,te,oe;return[t("div",null,[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"150px","text-overflow":"ellipsis","white-space":"nowrap"},title:(x=o.producto)==null?void 0:x.nombre},a((ee=o.producto)==null?void 0:ee.nombre),9,et),t("span",tt,a((oe=(te=o.producto)==null?void 0:te.categoria)==null?void 0:oe.nombre),1)])]}),_:1}),i(y,{field:"tipo_movimiento",header:"Tipo",sortable:"",class:"w-24 hidden sm:table-cell"},{body:u(({data:o})=>[i(j,{value:o.tipo_movimiento,severity:o.tipo_movimiento==="ENTRADA"?"success":o.tipo_movimiento==="SALIDA"?"danger":"warning",class:"text-xs"},null,8,["value","severity"])]),_:1}),i(y,{field:"cantidad",header:"Cantidad",sortable:"",class:"w-20 hidden sm:table-cell"},{body:u(({data:o})=>[t("span",{class:z([o.tipo_movimiento==="ENTRADA"?"text-green-600":o.tipo_movimiento==="SALIDA"?"text-red-600":"text-orange-600","text-sm font-medium"])},a(o.tipo_movimiento==="ENTRADA"?"+":o.tipo_movimiento==="SALIDA"?"-":"췀")+a(o.cantidad),3)]),_:1}),i(y,{field:"motivo",header:"Motivo",sortable:"",class:"w-32 hidden md:table-cell"},{body:u(({data:o})=>[t("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"120px","text-overflow":"ellipsis","white-space":"nowrap"},title:B(o.motivo)},a(B(o.motivo)),9,ot)]),_:1}),i(y,{field:"user.name",header:"Usuario",sortable:"",class:"w-28 hidden lg:table-cell"},{body:u(({data:o})=>{var x;return[t("div",st,a(((x=o.user)==null?void 0:x.name)||"Sistema"),1)]}),_:1})]),_:1},8,["value"])])]),i(Z,{visible:L.value,"onUpdate:visible":e[13]||(e[13]=o=>L.value=o),modal:"",header:"Detalle del Movimiento",style:ie(G.value),closable:!1,draggable:!1},{footer:u(()=>[t("div",mt,[t("button",{type:"button",onClick:e[12]||(e[12]=o=>L.value=!1),class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},[i(n(g),{icon:n(re),class:"h-5"},null,8,["icon"]),e[40]||(e[40]=p("Cerrar "))])])]),default:u(()=>{var o,x;return[r.value?(v(),f("div",at,[t("div",lt,[t("div",null,[e[31]||(e[31]=t("strong",null,"Fecha:",-1)),p(" "+a(Q(r.value.fecha_movimiento)),1)]),t("div",null,[e[32]||(e[32]=t("strong",null,"Tipo:",-1)),i(j,{value:Y(r.value),severity:me(r.value)},{default:u(()=>[p(a(Y(r.value)),1)]),_:1},8,["value","severity"])]),t("div",null,[e[33]||(e[33]=t("strong",null,"Producto:",-1)),p(" "+a((o=r.value.producto)==null?void 0:o.nombre),1)]),t("div",null,[e[34]||(e[34]=t("strong",null,"Cantidad:",-1)),t("span",{class:z(r.value.tipo_movimiento==="ENTRADA"?"text-green-600":"text-red-600")},a(r.value.tipo_movimiento==="ENTRADA"?"+":"-")+a(r.value.cantidad),3)]),t("div",it,[e[37]||(e[37]=t("strong",null,"Usuario:",-1)),p(" "+a(((x=r.value.user)==null?void 0:x.name)||"Sistema")+" ",1),r.value.user?(v(),f("div",nt,[t("div",null,[e[35]||(e[35]=t("strong",null,"Email:",-1)),p(" "+a(r.value.user.email),1)]),r.value.user.roles&&r.value.user.roles.length>0?(v(),f("div",rt,[e[36]||(e[36]=t("strong",null,"Rol:",-1)),p(" "+a(r.value.user.roles[0].name),1)])):k("",!0)])):k("",!0)]),t("div",null,[e[38]||(e[38]=t("strong",null,"Motivo:",-1)),p(" "+a(B(r.value.motivo)),1)])]),r.value.observacion?(v(),f("div",dt,[e[39]||(e[39]=t("strong",null,"Observaciones:",-1)),t("p",ut,a(r.value.observacion),1)])):k("",!0),r.value.venta_id?(v(),f("div",ct,[t("strong",null,"Relacionado con venta #"+a(r.value.venta_id),1)])):k("",!0)])):k("",!0)]}),_:1},8,["visible","style"]),i(Z,{visible:T.value,"onUpdate:visible":e[16]||(e[16]=o=>T.value=o),modal:"",header:F.value,style:ie(G.value),closable:!1,draggable:!1},{footer:u(()=>[t("div",Ct,[i(n(xe),{href:"/productos",onClick:e[14]||(e[14]=o=>T.value=!1),class:"bg-green-500 hover:bg-green-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},{default:u(()=>[i(n(g),{icon:n(Ae),class:"h-5"},null,8,["icon"]),e[46]||(e[46]=p(" Gestionar Productos "))]),_:1,__:[46]}),t("button",{type:"button",onClick:e[15]||(e[15]=o=>T.value=!1),class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},[i(n(g),{icon:n(re),class:"h-5"},null,8,["icon"]),e[47]||(e[47]=p("Cerrar "))])])]),default:u(()=>[R.value?(v(),f("div",vt,[i(n(g),{icon:n(H),class:"animate-spin h-8 w-8 text-blue-600 mb-3"},null,8,["icon"]),e[41]||(e[41]=t("p",{class:"text-gray-600"},"Cargando productos...",-1))])):S.value.length===0?(v(),f("div",pt,[i(n(g),{icon:n(ne),class:"h-12 w-12 text-gray-400 mb-3"},null,8,["icon"]),e[42]||(e[42]=t("p",{class:"text-gray-600"},"No se encontraron productos en este estado.",-1))])):(v(),f("div",ft,[t("div",gt,[(v(!0),f(W,null,q(S.value,o=>{var x;return v(),f("div",{key:o.id,class:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50"},[t("div",xt,[t("h4",bt,a(o.nombre),1),t("p",yt,a(((x=o.categoria)==null?void 0:x.nombre)||"Sin categor칤a"),1),t("div",ht,[t("span",null,[e[43]||(e[43]=p("Stock: ")),t("strong",null,a(o.stock_actual||0),1)]),t("span",null,[e[44]||(e[44]=p("M칤nimo: ")),t("strong",null,a(o.stock_minimo||1),1)]),o.precio?(v(),f("span",_t,[e[45]||(e[45]=p("Precio: ")),t("strong",null,"$"+a(X(o.precio)),1)])):k("",!0)])]),t("div",wt,[t("span",{class:z(["px-2 py-1 rounded-full text-xs font-medium",{"bg-green-100 text-green-800":P.value==="disponibles","bg-red-100 text-red-800":P.value==="agotados","bg-yellow-100 text-yellow-800":P.value==="stock_bajo"}])},a(P.value==="disponibles"?"Disponible":P.value==="agotados"?"Agotado":"Stock Bajo"),3)])])}),128))]),t("div",kt,[t("p",At,[t("strong",null,a(S.value.length),1),p(" producto"+a(S.value.length!==1?"s":"")+" encontrado"+a(S.value.length!==1?"s":""),1)])])]))]),_:1},8,["visible","header","style"])]),_:1})}}};export{Et as default};
