import{r as i,E as Ge,w as Pa,n as ke,o as Aa,a5 as La,N as le,k as G,c as m,d,p as r,$ as n,a0 as Na,x as _,e as t,a1 as Ua,y as D,t as x,h as He,j as g,A as Ve,q as E,v as Ke,D as We,a6 as Qe,F as fe,l as Ie}from"./vendor-MWUC2OHw.js";import{A as Oa}from"./AuthenticatedLayout-NCt8z6zL.js";import{z as Ra,F as te,A as b,p as H}from"./ui-C5wTtX7s.js";import{k as z,v as Ma,a as ge,w as $a,b as Je,c as qa,d as be,e as Xe,g as Ye,h as ja}from"./index-DNF_ZrrQ.js";import za from"./Modales-BFxAlJc3.js";import Ba from"./CambiarEstado-DK33L76j.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ga={class:"px-auto md:px-2 mt-6"},Ha={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4"},Ka={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end mr-0 sm:mr-4"},Wa={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},Qa={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},Ja={class:"flex items-center gap-3"},Xa={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},Ya=["disabled"],Za=["disabled"],el={class:"space-y-3"},al={class:"grid grid-cols-3 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-5 gap-3"},ll={class:"col-span-2 sm:col-span-1 md:col-span-1 lg:col-span-1 hidden sm:block"},tl={class:"col-span-2 sm:col-span-1 md:col-span-1 lg:col-span-1 hidden sm:block"},ol={class:"flex w-80 sm:hidden"},sl=["title"],nl=["title"],rl={class:"text-sm leading-relaxed"},il={class:"text-sm font-medium leading-relaxed"},ul={class:"flex gap-2 justify-center items-center"},dl=["onClick"],cl=["onClick"],ml=["onClick"],vl={class:"space-y-4"},pl={class:"w-full flex flex-col"},fl={class:"flex items-center gap-4"},gl={key:0,class:"text-red-500 ml-28"},bl={key:1,class:"text-orange-500 ml-28"},hl={key:2,class:"text-red-500 ml-28"},yl={class:"w-full flex flex-col"},xl={class:"flex items-start gap-4"},_l={class:"flex w-full flex-col"},wl={class:"flex gap-2 mb-3"},Cl=["disabled"],Dl={class:"space-y-2 max-h-40 overflow-y-auto"},kl={class:"flex-1"},Vl=["onClick"],Il={key:0,class:"text-gray-500 text-sm mt-2"},Tl={class:"w-full flex flex-col"},El={class:"flex items-start gap-4"},Fl={class:"flex w-full flex-col"},Sl={class:"flex gap-2 mb-3"},Pl=["disabled"],Al={key:0,class:"space-y-2 max-h-40 overflow-y-auto"},Ll={class:"flex-1"},Nl=["onClick"],Ul={key:1,class:"text-gray-500 text-sm mt-2"},Ol={class:"w-full"},Rl={class:"flex items-start gap-4"},Ml={key:0,class:"text-red-500 ml-28"},$l={key:1,class:"text-orange-500 ml-28"},ql={key:2,class:"text-red-500 ml-28"},jl={key:3,class:"text-red-500 ml-28"},zl={class:"grid grid-cols-2 gap-4"},Bl={class:"w-full"},Gl={key:0,class:"text-red-500 block text-xs mt-1"},Hl={class:"w-full"},Kl={key:0,class:"text-red-500 block text-xs mt-1"},Wl={class:"flex gap-4"},Ql={class:"flex-1"},Jl={key:0,class:"text-red-500 block text-xs mt-1"},Xl={class:"flex-1"},Yl={key:0,class:"text-red-500 block text-xs mt-1"},Zl={class:"w-full flex flex-col"},et={class:"flex items-center gap-10 sm:gap-9"},at={class:"w-full relative"},lt={key:0,class:"text-red-500 ml-28"},tt={class:"w-full flex flex-col"},ot={class:"flex items-center gap-5"},st={key:0,class:"text-red-500 ml-28"},nt={class:"w-full flex flex-col"},rt={class:"flex items-center gap-3.5"},it={key:0,class:"text-red-500 ml-28"},ut={class:"w-full flex flex-col"},dt={class:"flex items-center gap-4"},ct={class:"flex-1"},mt=["disabled"],vt={key:0},pt={key:1},ft={key:2},gt={key:0,class:"text-red-500 ml-28"},bt={class:"grid grid-cols-2 ml-8 sm:ml-16"},ht=["src"],yt=["onClick"],xt={class:"flex justify-center gap-4 w-full mt-6"},_t=["disabled"],wt={key:0},Ct={key:1},Dt=["disabled"],kt={class:"flex items-center gap-3"},Vt={class:"flex flex-col"},It={class:"flex justify-center gap-4 w-full"},Tt=["disabled"],Et={key:0},Ft={key:1},St=["disabled"],Pt={class:"flex items-center gap-3"},At={class:"flex justify-center gap-3 w-full"},he="/api/tours",Te="/storage/tours/",jt={__name:"Tours",setup(Lt){const v=Ra(),T=i([]),k=i([]),U=i(""),O=i(""),oe=i([]),a=i({id:null,nombre:"",categoria:null,incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,transporte_id:null,imagenes:[]}),V=i([]),K=i([]),W=i([]),Ee=i(null),R=i(!1),Q=i(!1),P=i(!1),J=i(!1),f=i(!1),M=i(!1),A=i(null),$=i(!1),q=i(!1),j=i(!1),L=i(!1),N=i(!1),X=i(!1),h=i({global:{value:null,matchMode:te.CONTAINS},categoria:{value:null,matchMode:te.EQUALS},"transporte.nombre":{value:null,matchMode:te.EQUALS},estado:{value:null,matchMode:te.EQUALS},fecha_salida:{value:null,matchMode:te.DATE_IS}}),se=i(null),Y=i(null),ne=i(null),w=i(null),C=i(null),ye=i(10),Ze=i([5,10,20,50]),Z=i("Guardar"),p=i(null),ee=i([]),Fe=i([{label:"Nacional",value:"NACIONAL"},{label:"Internacional",value:"INTERNACIONAL"}]),Se=i([{label:"Disponible",value:"DISPONIBLE"},{label:"Agotado",value:"AGOTADO"},{label:"En Curso",value:"EN_CURSO"},{label:"Completado",value:"COMPLETADO"},{label:"Cancelado",value:"CANCELADO"},{label:"Suspendido",value:"SUSPENDIDO"},{label:"Reprogramado",value:"REPROGRAMADO"}]),re=i(!1),xe=i(!1),ie=i(!1),F=i(null),Pe=i([]),_e=i(0),Ae=i(null),we=Ge(()=>{let l=oe.value;if(h.value.global.value){const e=h.value.global.value.toLowerCase();l=l.filter(s=>s.nombre.toLowerCase().includes(e)||s.incluye&&s.incluye.toLowerCase().includes(e)||s.no_incluye&&s.no_incluye.toLowerCase().includes(e)||s.punto_salida.toLowerCase().includes(e))}return h.value.categoria.value&&(l=l.filter(e=>e.categoria===h.value.categoria.value)),h.value["transporte.nombre"].value&&(l=l.filter(e=>e["transporte.nombre"]===h.value["transporte.nombre"].value)),h.value.estado.value&&(l=l.filter(e=>e.estado===h.value.estado.value)),(w.value||C.value)&&(l=l.filter(e=>{if(!e.fecha_salida)return!1;const s=new Date(e.fecha_salida);let u=!0;if(w.value){const c=new Date(w.value);u=u&&s>=c}if(C.value){const c=new Date(C.value);c.setHours(23,59,59,999),u=u&&s<=c}return u})),l});Pa([a,p,T,k,V,W],()=>{A.value&&R.value&&ke(()=>{const l={...a.value,fecha_regreso:p.value,incluye_lista:[...T.value],no_incluye_lista:[...k.value],imagenes_actuales:[...V.value]},e=JSON.stringify(l)!==JSON.stringify({...A.value,imagenes_actuales:A.value.imagenes_originales})||W.value.length>0,s=!A.value.id,u=a.value.nombre||a.value.punto_salida||a.value.fecha_salida||p.value||a.value.precio||a.value.categoria||a.value.transporte_id||T.value.length>0||k.value.length>0||V.value.length>0;M.value=e||s&&u})},{deep:!0,flush:"post"});function ue(){a.value={id:null,nombre:"",categoria:null,incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,transporte_id:null,imagenes:[]},V.value=[],K.value=[],W.value=[],p.value=null,f.value=!1,T.value=[],k.value=[],U.value="",O.value=""}const Le=()=>{U.value.trim()&&(T.value.push(U.value.trim()),U.value="")},ea=l=>{T.value.splice(l,1)},Ne=()=>{O.value.trim()&&(k.value.push(O.value.trim()),O.value="")},aa=l=>{k.value.splice(l,1)},Ue=l=>l?l.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],Oe=l=>l.join("|");Aa(()=>{Ce(),la(),typeof window<"u"&&window.addEventListener("resize",Re)});const Re=()=>{De.value=window.innerWidth};La(()=>{typeof window<"u"&&window.removeEventListener("resize",Re)});const Ce=async()=>{try{const l=await le.get(he);oe.value=l.data.map(e=>{var s,u,c;return{...e,imagenes:(e.imagenes||[]).map(y=>typeof y=="string"?y:y.nombre),transporte_nombre:((s=e.transporte)==null?void 0:s.nombre)||"",transporte_capacidad:((u=e.transporte)==null?void 0:u.capacidad)||"","transporte.nombre":(c=e.transporte)==null?void 0:c.nombre}}).sort((e,s)=>{const u=new Date(e.created_at);return new Date(s.created_at)-u})}catch{v.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los tours.",life:4e3})}},la=async()=>{try{const l=await le.get("/api/transportes");ee.value=l.data||[]}catch{ee.value=[],v.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los transportes.",life:4e3})}},ta=()=>{h.value.categoria.value=se.value},oa=()=>{if(Y.value){const l=ee.value.find(e=>e.id===Y.value);h.value["transporte.nombre"].value=l?l.nombre:null}else h.value["transporte.nombre"].value=null},sa=()=>{h.value.estado.value=ne.value},de=()=>{if(w.value&&C.value){const l=new Date(w.value),e=new Date(C.value);l>e&&(C.value=null,v.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'hasta' se limpió porque era anterior a la fecha 'desde'.",life:3e3}))}},ce=()=>{if(w.value&&C.value){const l=new Date(w.value);new Date(C.value)<l&&(w.value=null,v.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'desde' se limpió porque era posterior a la fecha 'hasta'.",life:3e3}))}},Me=async()=>{N.value=!0;try{await new Promise(l=>setTimeout(l,300)),se.value=null,Y.value=null,ne.value=null,w.value=null,C.value=null,h.value.global.value=null,h.value.categoria.value=null,h.value["transporte.nombre"].value=null,h.value.estado.value=null,h.value.fecha_salida.value=null,v.add({severity:"success",summary:"Filtros limpiados",detail:"Los filtros han sido restablecidos correctamente.",life:3e3})}finally{N.value=!1}},na=()=>{X.value=!0},ra=()=>{ue(),Z.value="Guardar",f.value=!1,R.value=!0,ke(()=>{A.value={...a.value,fecha_regreso:p.value,incluye_lista:[...T.value],no_incluye_lista:[...k.value],imagenes_originales:[...V.value]},M.value=!1})},ia=l=>{var e;ue(),f.value=!1,a.value={...l,transporte_id:((e=l.transporte)==null?void 0:e.id)||l.transporte_id||null},l.fecha_salida&&(typeof l.fecha_salida=="string"?a.value.fecha_salida=new Date(l.fecha_salida):a.value.fecha_salida=l.fecha_salida),l.fecha_regreso&&(typeof l.fecha_regreso=="string"?p.value=new Date(l.fecha_regreso):p.value=l.fecha_regreso),V.value=(l.imagenes||[]).map(s=>typeof s=="string"?s:s.nombre),T.value=Ue(l.incluye),k.value=Ue(l.no_incluye),M.value=!1,Z.value="Actualizar",R.value=!0,ke(()=>{A.value={...a.value,fecha_regreso:p.value,incluye_lista:[...T.value],no_incluye_lista:[...k.value],imagenes_originales:[...V.value]},M.value=!1})},ua=async()=>{if(f.value=!0,!p.value){v.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos.",life:4e3});return}if(!a.value.nombre||a.value.nombre.length<10||a.value.nombre.length>200){v.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos y cumplan los requisitos.",life:4e3});return}if(!a.value.punto_salida||a.value.punto_salida.length<5||a.value.punto_salida.length>200){v.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos y cumplan los requisitos.",life:4e3});return}if(a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max){v.add({severity:"warn",summary:"Verificar datos",detail:"Por favor revisa los valores ingresados y corrige cualquier inconsistencia.",life:4e3});return}if(!me()){v.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y asegúrate de que sean correctas.",life:4e3});return}if(!ve()){v.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y asegúrate de que sean correctas.",life:4e3});return}if(!a.value.fecha_salida||!a.value.precio||!a.value.categoria||!a.value.transporte_id||V.value.length===0){v.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos.",life:4e3});return}const l=2*1024*1024;if(K.value.filter(s=>s.size>l).length>0){v.add({severity:"warn",summary:"Verificar archivos",detail:"Por favor revisa el tamaño de las imágenes seleccionadas.",life:4e3});return}$.value=!0;try{const s=new FormData;s.append("nombre",a.value.nombre||""),T.value.length>0?s.append("incluye",Oe(T.value)):s.append("incluye",""),s.append("punto_salida",a.value.punto_salida||""),a.value.fecha_salida instanceof Date?s.append("fecha_salida",a.value.fecha_salida.toISOString().slice(0,19).replace("T"," ")):a.value.fecha_salida&&s.append("fecha_salida",a.value.fecha_salida),p.value instanceof Date?s.append("fecha_regreso",p.value.toISOString().slice(0,19).replace("T"," ")):p.value&&s.append("fecha_regreso",p.value),s.append("precio",a.value.precio||""),s.append("categoria",a.value.categoria||""),s.append("transporte_id",a.value.transporte_id||""),k.value.length>0?s.append("no_incluye",Oe(k.value)):s.append("no_incluye",""),a.value.cupo_min&&s.append("cupo_min",a.value.cupo_min),a.value.cupo_max&&s.append("cupo_max",a.value.cupo_max),K.value.forEach(c=>s.append("imagenes[]",c)),W.value.forEach(c=>{const y=c.includes("/")?c.split("/").pop():c;s.append("removed_images[]",y)});let u;a.value.id?(s.append("_method","PUT"),u=await le.post(`${he}/${a.value.id}`,s,{headers:{"Content-Type":"multipart/form-data"}}),v.add({severity:"success",summary:"¡Éxito!",detail:"El tour ha sido actualizado correctamente.",life:5e3})):(u=await le.post(he,s,{headers:{"Content-Type":"multipart/form-data"}}),v.add({severity:"success",summary:"¡Éxito!",detail:"El tour ha sido creado correctamente.",life:5e3})),await Ce(),R.value=!1,M.value=!1,A.value=null,ue()}catch{v.add({severity:"warn",summary:"Error de validación",detail:"Por favor revisa los campos e intenta nuevamente.",life:6e3})}finally{$.value=!1}},da=l=>{a.value={...l},Q.value=!0},ca=async()=>{q.value=!0;try{await le.delete(`${he}/${a.value.id}`),await Ce(),Q.value=!1,v.add({severity:"success",summary:"¡Eliminado!",detail:"El tour ha sido eliminado correctamente.",life:5e3})}catch{v.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el tour. Inténtalo de nuevo.",life:5e3})}finally{q.value=!1}},ma=()=>{M.value?J.value=!0:$e()},$e=()=>{R.value=!1,J.value=!1,M.value=!1,A.value=null,ue()},va=()=>{J.value=!1},pa=async()=>{L.value=!0,await new Promise(l=>setTimeout(l,300)),Ae.value.click(),setTimeout(()=>{j.value||(L.value=!1)},1e3)},fa=async l=>{const e=l.target?l.target.files:l.files,s=2*1024*1024;if(L.value=!1,!(!e||e.length===0)){j.value=!0;try{const u=[];for(const c of e)if(c instanceof File){if(c.size>s){v.add({severity:"warn",summary:"Archivo no válido",detail:"Por favor selecciona archivos que cumplan con los requisitos de tamaño (máximo 2MB).",life:5e3});continue}if(!c.type.startsWith("image/")){v.add({severity:"warn",summary:"Formato no válido",detail:"Por favor selecciona únicamente archivos de imagen válidos.",life:4e3});continue}K.value.push(c);const y=new Promise(B=>{const S=new FileReader;S.onload=o=>{V.value.push(o.target.result),B()},S.readAsDataURL(c)});u.push(y)}await Promise.all(u),u.length>0&&v.add({severity:"success",summary:"Imágenes cargadas",detail:`${u.length} imagen${u.length>1?"es":""} cargada${u.length>1?"s":""} correctamente.`,life:3e3})}catch{v.add({severity:"error",summary:"Error al cargar imágenes",detail:"Hubo un problema al procesar las imágenes. Inténtalo de nuevo.",life:4e3})}finally{j.value=!1,L.value=!1,l.target&&(l.target.value="")}}},ga=l=>{const e=V.value[l];typeof e=="string"&&e.startsWith("data:image")?(V.value.splice(l,1),K.value.splice(l,1)):(W.value.push(e),V.value.splice(l,1))},ba=l=>{F.value&&F.value.imagenes&&F.value.imagenes.length>0?(Pe.value=F.value.imagenes.map(e=>{const s=typeof e=="string"?e:e.nombre;return Te+s}),_e.value=l,xe.value=!0):v.add({severity:"warn",summary:"Sin imágenes",detail:"No hay imágenes disponibles para mostrar.",life:3e3})},ha=()=>{a.value.nombre&&a.value.nombre.length>200&&(a.value.nombre=a.value.nombre.substring(0,200))},ya=()=>{a.value.punto_salida&&a.value.punto_salida.length>200&&(a.value.punto_salida=a.value.punto_salida.substring(0,200))},qe=()=>a.value.cupo_min&&!a.value.cupo_max||a.value.cupo_max&&!a.value.cupo_min?!0:!(a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max),me=()=>{if(!a.value.fecha_salida)return!0;const l=new Date,e=new Date(a.value.fecha_salida),s=new Date(l.getTime()+60*60*1e3);return!(e<s||p.value&&(new Date(p.value)-e)/(1e3*60*60)<1)},ve=()=>{if(!p.value)return!0;const l=new Date(p.value);if(a.value.fecha_salida){const e=new Date(a.value.fecha_salida);if((l-e)/(1e3*60*60)<1)return!1}return!0},je=()=>{const l=new Date;return l.setHours(l.getHours()+1),l},xa=()=>{if(!a.value.fecha_salida)return je();const l=new Date(a.value.fecha_salida);return l.setHours(l.getHours()+1),l},_a=()=>{if(!p.value)return null;const l=new Date(p.value);return l.setHours(l.getHours()-1),l},De=i(typeof window<"u"?window.innerWidth:1024),ae=Ge(()=>De.value<640?{width:"95vw",maxWidth:"380px"}:De.value<768?{width:"400px"}:{width:"450px"}),wa=l=>{F.value=l,P.value=!0},Ca=l=>{v.add({severity:"info",summary:"Duplicar Tour",detail:`Funcionalidad de duplicar tour "${l.nombre}" en desarrollo.`,life:3e3}),P.value=!1},Da=l=>{P.value=!1,F.value=l,ie.value=!0},ka=l=>{v.add({severity:"info",summary:"Generar Reporte",detail:`Funcionalidad de generar reporte del tour "${l.nombre}" en desarrollo.`,life:3e3}),P.value=!1},Va=l=>{v.add({severity:"info",summary:"Archivar Tour",detail:`Funcionalidad de archivar tour "${l.nombre}" en desarrollo.`,life:3e3}),P.value=!1},Ia=l=>{P.value=!1,F.value=l,re.value=!0},Ta=l=>{l.originalEvent.target.closest("button")||(F.value=l.data,re.value=!0)},Ea=async l=>{const e=oe.value.findIndex(s=>s.id===l.id);e!==-1&&(oe.value[e]=l),ie.value=!1},ze=l=>{const e=l.target.value,s=l.key;if([8,9,27,13,46,35,36,37,38,39,40].includes(l.keyCode)||l.ctrlKey&&[65,67,86,88].includes(l.keyCode))return;if(!/[0-9]/.test(s)){l.preventDefault();return}const u=e+s,c=parseInt(u);if(u.length>3||c>500){l.preventDefault();return}},Be=l=>{l.preventDefault();const s=(l.clipboardData||window.clipboardData).getData("text").replace(/[^0-9]/g,"");if(s){let u=parseInt(s);u>500&&(u=500),l.target.value=u.toString(),l.target.dispatchEvent(new Event("input",{bubbles:!0}))}},Fa=l=>{const e=l.target.value,s=l.key;if([8,9,27,13,46,35,36,37,38,39,40].includes(l.keyCode)||l.ctrlKey&&[65,67,86,88].includes(l.keyCode))return;if(!/[0-9.]/.test(s)){l.preventDefault();return}if(s==="."&&e.includes(".")){l.preventDefault();return}if(s!=="."){const y=e.split(".");if(y[0].length>=3&&!e.includes(".")){l.preventDefault();return}if(y.length>1&&y[1].length>=2){l.preventDefault();return}}const u=e+s;if(parseFloat(u)>999.99){l.preventDefault();return}},Sa=l=>{l.preventDefault();let s=(l.clipboardData||window.clipboardData).getData("text").replace(/[^\d.]/g,"");if(!s||s===".")return;if((s.match(/\./g)||[]).length>1){const S=s.indexOf(".");s=s.substring(0,S+1)+s.substring(S+1).replace(/\./g,"")}const c=parseFloat(s);if(isNaN(c))return;const B=Math.min(c,999.99).toFixed(2);a.precio=B,l.target.value=B};return(l,e)=>{const s=G("Toast"),u=G("InputText"),c=G("Select"),y=G("Column"),B=G("DataTable"),S=G("Dialog");return d(),m(fe,null,[r(n(Na),{title:"Tours"}),r(Oa,null,{default:_(()=>[r(s,{class:"z-[9999]"}),t("div",Ga,[t("div",Ha,[e[31]||(e[31]=t("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start ml-0 sm:ml-4"},"Catálogo de Tours",-1)),t("div",Ka,[r(n(Ua),{href:l.route("transportes"),onClick:na,class:D([{"opacity-50 cursor-not-allowed":X.value},"bg-blue-500 border border-blue-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 flex items-center gap-2"])},{default:_(()=>[r(n(b),{icon:X.value?n(z):n(Ma),class:D({"animate-spin":X.value,"h-4":!0})},null,8,["icon","class"]),t("span",null,x(X.value?"Cargando...":"Control Transportes"),1)]),_:1},8,["href","class"]),t("button",{class:"bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:ra},[r(n(b),{icon:n(ge),class:"h-4 w-4 mr-1 text-white"},null,8,["icon"]),e[30]||(e[30]=t("span",null," Agregar Tour",-1))])])]),r(B,{value:we.value,selection:Ee.value,"onUpdate:selection":e[8]||(e[8]=o=>Ee.value=o),dataKey:"id",paginator:!0,rows:ye.value,rowsPerPageOptions:Ze.value,rowsPerPage:ye.value,"onUpdate:rowsPerPage":e[9]||(e[9]=o=>ye.value=o),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} tours",class:"overflow-x-auto max-w-full px-auto",onRowClick:Ta,responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:_(()=>[t("div",Wa,[t("div",Qa,[t("div",Ja,[e[32]||(e[32]=t("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[t("i",{class:"pi pi-filter text-blue-600 text-sm"}),t("span",null,"Filtros")],-1)),t("div",Xa,x(we.value.length)+" resultado"+x(we.value.length!==1?"s":""),1),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Me,disabled:N.value},[N.value?(d(),He(n(b),{key:0,icon:n(z),class:"animate-spin h-3 w-3"},null,8,["icon"])):g("",!0),t("span",null,x(N.value?"Limpiando...":"Limpiar filtros"),1)],8,Ya)]),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Me,disabled:N.value},[N.value?(d(),He(n(b),{key:0,icon:n(z),class:"animate-spin h-3 w-3"},null,8,["icon"])):g("",!0),t("span",null,x(N.value?"Limpiando...":"Limpiar filtros"),1)],8,Za)]),t("div",el,[t("div",null,[r(u,{modelValue:h.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=o=>h.value.global.value=o),placeholder:"🔍 Buscar tours...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),t("div",al,[t("div",null,[r(c,{modelValue:se.value,"onUpdate:modelValue":e[1]||(e[1]=o=>se.value=o),options:Fe.value,optionLabel:"label",optionValue:"value",placeholder:"Categoría",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onChange:ta,clearable:!0},null,8,["modelValue","options"])]),t("div",null,[r(c,{modelValue:Y.value,"onUpdate:modelValue":e[2]||(e[2]=o=>Y.value=o),options:ee.value,optionLabel:"nombre",optionValue:"id",placeholder:"Transporte",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onChange:oa,clearable:!0},null,8,["modelValue","options"])]),t("div",null,[r(c,{modelValue:ne.value,"onUpdate:modelValue":e[3]||(e[3]=o=>ne.value=o),options:Se.value,optionLabel:"label",optionValue:"value",placeholder:"Estado",class:"w-full h-9 text-sm border",style:{"background-color":"white","border-color":"#93c5fd"},onChange:sa,clearable:!0},null,8,["modelValue","options"])]),t("div",ll,[r(n(H),{modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=o=>w.value=o),placeholder:"Fecha desde",class:"w-full h-9 text-sm rounded-md border border-blue-300",onDateSelect:de,onClear:de,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:C.value},null,8,["modelValue","maxDate"])]),t("div",tl,[r(n(H),{modelValue:C.value,"onUpdate:modelValue":e[5]||(e[5]=o=>C.value=o),placeholder:"Fecha hasta",class:"w-full h-9 text-sm rounded-md border border-blue-300",onDateSelect:ce,onClear:ce,showIcon:!0,dateFormat:"dd/mm/yy",minDate:w.value},null,8,["modelValue","minDate"])]),t("div",ol,[r(n(H),{modelValue:w.value,"onUpdate:modelValue":e[6]||(e[6]=o=>w.value=o),placeholder:"Fecha desde",class:"h-9 text-sm rounded-md",onDateSelect:de,onClear:de,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:C.value},null,8,["modelValue","maxDate"]),r(n(H),{modelValue:C.value,"onUpdate:modelValue":e[7]||(e[7]=o=>C.value=o),placeholder:"Fecha hasta",class:"h-9 text-sm rounded-md",onDateSelect:ce,onClear:ce,showIcon:!0,dateFormat:"dd/mm/yy",minDate:w.value},null,8,["modelValue","minDate"])])])])])]),default:_(()=>[r(y,{field:"nombre",header:"Nombre",sortable:"",class:"w-36 min-w-24"},{body:_(o=>[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"85px","text-overflow":"ellipsis","white-space":"nowrap"},title:o.data.nombre},x(o.data.nombre),9,sl)]),_:1}),r(y,{field:"punto_salida",header:"Punto salida",class:"w-32 min-w-32 hidden md:table-cell"},{body:_(o=>[t("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"128px","text-overflow":"ellipsis","white-space":"nowrap"},title:o.data.punto_salida},x(o.data.punto_salida),9,nl)]),_:1}),r(y,{field:"fecha_salida",header:"Fecha salida",class:"w-36 min-w-36 hidden md:table-cell"},{body:_(o=>[t("div",rl,x(o.data.fecha_salida?new Date(o.data.fecha_salida).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):""),1)]),_:1}),r(y,{field:"precio",header:"Precio",class:"w-24 min-w-18"},{body:_(o=>[t("div",il,x(isNaN(Number(o.data.precio))?"":`$${Number(o.data.precio).toFixed(2)}`),1)]),_:1}),r(y,{field:"estado",header:"Estado",class:"w-32 min-w-24 hidden lg:table-cell"},{body:_(o=>{var I;return[t("span",{class:D([{"bg-green-100 text-green-800":o.data.estado==="DISPONIBLE","bg-red-100 text-red-800":o.data.estado==="AGOTADO"||o.data.estado==="CANCELADO","bg-blue-100 text-blue-800":o.data.estado==="EN_CURSO","bg-gray-100 text-gray-800":o.data.estado==="COMPLETADO","bg-orange-100 text-orange-800":o.data.estado==="SUSPENDIDO","bg-purple-100 text-purple-800":o.data.estado==="REPROGRAMADO"},"px-2 py-1 rounded-full text-xs font-medium"])},x(((I=Se.value.find(pe=>pe.value===o.data.estado))==null?void 0:I.label)||o.data.estado),3)]}),_:1}),r(y,{exportable:!1,class:"w-52 min-w-36"},{header:_(()=>e[33]||(e[33]=[t("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:_(o=>[t("div",ul,[t("button",{class:"flex bg-green-500 border p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:I=>wa(o.data),title:"Más acciones"},[r(n(b),{icon:n($a),class:"h-4 w-7 text-white"},null,8,["icon"]),e[34]||(e[34]=t("span",{class:"hidden md:block text-white"},"Más",-1))],8,dl),t("button",{class:"flex bg-blue-500 border p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:I=>ia(o.data)},[r(n(b),{icon:n(Je),class:"h-4 w-7 text-white"},null,8,["icon"]),e[35]||(e[35]=t("span",{class:"hidden md:block text-white"},"Editar",-1))],8,cl),t("button",{class:"flex bg-red-500 border p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:I=>da(o.data)},[r(n(b),{icon:n(qa),class:"h-4 w-7 text-white"},null,8,["icon"]),e[36]||(e[36]=t("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,ml)])]),_:1})]),_:1},8,["value","selection","rows","rowsPerPageOptions","rowsPerPage"]),r(S,{visible:R.value,"onUpdate:visible":e[21]||(e[21]=o=>R.value=o),header:Z.value+" Tour",modal:!0,style:Ve(ae.value),closable:!1,draggable:!1},{footer:_(()=>[t("div",xt,[t("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:ua,disabled:$.value},[r(n(b),{icon:$.value?n(z):n(Xe),class:D(["h-5 text-white",{"animate-spin":$.value}])},null,8,["icon","class"]),$.value?(d(),m("span",Ct,x(Z.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(d(),m("span",wt,x(Z.value),1))],8,_t),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:ma,disabled:$.value},[r(n(b),{icon:n(be),class:"h-5"},null,8,["icon"]),e[51]||(e[51]=E("Cancelar "))],8,Dt)])]),default:_(()=>[t("div",vl,[t("div",pl,[t("div",fl,[e[37]||(e[37]=t("label",{for:"nombre",class:"flex items-center gap-1"},[E("Tour: "),t("span",{class:"text-red-500 font-bold"},"*")],-1)),r(u,{modelValue:a.value.nombre,"onUpdate:modelValue":e[10]||(e[10]=o=>a.value.nombre=o),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:200,class:D([{"p-invalid":f.value&&(!a.value.nombre||a.value.nombre.length<10||a.value.nombre.length>200)},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"Tour al Cerro El Pital, etc",onInput:ha},null,8,["modelValue","class"])]),a.value.nombre&&a.value.nombre.length<10?(d(),m("small",gl," El nombre debe tener al menos 10 caracteres. Actual: "+x(a.value.nombre.length)+"/10 ",1)):g("",!0),a.value.nombre&&a.value.nombre.length>=180&&a.value.nombre.length<=200?(d(),m("small",bl," Caracteres restantes: "+x(200-a.value.nombre.length)+". ",1)):g("",!0),f.value&&!a.value.nombre?(d(),m("small",hl," El nombre es obligatorio. ")):g("",!0)]),t("div",yl,[t("div",xl,[e[38]||(e[38]=t("label",{for:"incluye",class:"w-12 flex items-center gap-1 mt-2"}," Incluye: ",-1)),t("div",_l,[t("div",wl,[Ke(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>U.value=o),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",onKeyup:We(Le,["enter"])},null,544),[[Qe,U.value]]),t("button",{type:"button",onClick:Le,disabled:!U.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[r(n(b),{icon:n(ge),class:"h-5"},null,8,["icon"])],8,Cl)]),t("div",Dl,[(d(!0),m(fe,null,Ie(T.value,(o,I)=>(d(),m("div",{key:I,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[t("span",kl,x(o),1),t("button",{type:"button",onClick:pe=>ea(I),class:"text-red-500 hover:text-red-700 p-1"},[r(n(b),{icon:n(be),class:"h-5"},null,8,["icon"])],8,Vl)]))),128))]),T.value.length===0?(d(),m("div",Il," Sin elementos agregados. ")):g("",!0)])])]),t("div",Tl,[t("div",El,[e[39]||(e[39]=t("label",{for:"no_incluye",class:"w-12 flex items-center gap-1 mt-2"}," No incluye: ",-1)),t("div",Fl,[t("div",Sl,[Ke(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>O.value=o),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",onKeyup:We(Ne,["enter"])},null,544),[[Qe,O.value]]),t("button",{type:"button",onClick:Ne,disabled:!O.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[r(n(b),{icon:n(ge),class:"h-5"},null,8,["icon"])],8,Pl)]),k.value.length>0?(d(),m("div",Al,[(d(!0),m(fe,null,Ie(k.value,(o,I)=>(d(),m("div",{key:I,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[t("span",Ll,x(o),1),t("button",{type:"button",onClick:pe=>aa(I),class:"text-red-500 hover:text-red-700 p-1"},[r(n(b),{icon:n(be),class:"h-5"},null,8,["icon"])],8,Nl)]))),128))])):g("",!0),k.value.length===0?(d(),m("div",Ul," Sin elementos agregados. ")):g("",!0)])])]),t("div",Ol,[t("div",Rl,[e[40]||(e[40]=t("label",{for:"punto_salida",class:"flex w-12 items-center"},[E(" Punto salida: "),t("span",{class:"text-red-500 font-bold"}," * ")],-1)),r(u,{modelValue:a.value.punto_salida,"onUpdate:modelValue":e[13]||(e[13]=o=>a.value.punto_salida=o),modelModifiers:{trim:!0},id:"punto_salida",name:"punto_salida",maxlength:200,class:D([{"p-invalid":f.value&&(!a.value.punto_salida||a.value.punto_salida.length<5)},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"Atrio de Chalatenango, etc",onInput:ya},null,8,["modelValue","class"])]),a.value.punto_salida&&a.value.punto_salida.length<5?(d(),m("small",Ml,"Debe tener al menos 5 caracteres. Actual: "+x(a.value.punto_salida.length)+"/5",1)):g("",!0),a.value.punto_salida&&a.value.punto_salida.length>=180&&a.value.punto_salida.length<=200?(d(),m("small",$l,"Caracteres restantes: "+x(200-a.value.punto_salida.length),1)):g("",!0),f.value&&!a.value.punto_salida?(d(),m("small",ql,"El punto de salida es obligatorio.")):g("",!0),f.value&&a.value.punto_salida&&a.value.punto_salida.length<5?(d(),m("small",jl,"El punto de salida debe tener al menos 5 caracteres.")):g("",!0)]),t("div",zl,[t("div",Bl,[e[41]||(e[41]=t("label",{for:"cupo_min",class:"block mb-2"},"Cupo mínimo:",-1)),r(u,{modelValue:a.value.cupo_min,"onUpdate:modelValue":e[14]||(e[14]=o=>a.value.cupo_min=o),id:"cupo_min",name:"cupo_min",type:"number",inputmode:"numeric",min:"1",max:"500",class:D(["w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max}]),placeholder:"1-500",onKeydown:ze,onPaste:Be,onInput:qe},null,8,["modelValue","class"]),a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max?(d(),m("small",Gl,"Debe ser menor al máximo")):g("",!0)]),t("div",Hl,[e[42]||(e[42]=t("label",{for:"cupo_max",class:"block mb-2"},"Cupo máximo:",-1)),r(u,{modelValue:a.value.cupo_max,"onUpdate:modelValue":e[15]||(e[15]=o=>a.value.cupo_max=o),id:"cupo_max",name:"cupo_max",type:"number",inputmode:"numeric",min:"1",max:"500",class:D(["w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_max<=a.value.cupo_min}]),placeholder:"1-500",onKeydown:ze,onPaste:Be,onInput:qe},null,8,["modelValue","class"]),a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_max<=a.value.cupo_min?(d(),m("small",Kl,"Debe ser mayor al mínimo")):g("",!0)])]),t("div",Wl,[t("div",Ql,[e[43]||(e[43]=t("label",{for:"fecha_salida",class:"flex items-center gap-1 mb-2"},[E("Fecha y hora de salida:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),r(n(H),{modelValue:a.value.fecha_salida,"onUpdate:modelValue":e[16]||(e[16]=o=>a.value.fecha_salida=o),id:"fecha_salida",name:"fecha_salida",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:je(),maxDate:_a(),class:D([{"p-invalid":f.value&&!a.value.fecha_salida||a.value.fecha_salida&&!me()},"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),manualInput:!1,onDateSelect:me,onInput:me},null,8,["modelValue","minDate","maxDate","class"]),f.value&&!a.value.fecha_salida?(d(),m("small",Jl,"Fecha y hora de salida requerida.")):g("",!0)]),t("div",Xl,[e[44]||(e[44]=t("label",{for:"horaRegresoCalendar",class:"flex items-center gap-1 mb-2"},[E("Fecha y hora regreso:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),r(n(H),{modelValue:p.value,"onUpdate:modelValue":e[17]||(e[17]=o=>p.value=o),id:"horaRegresoCalendar",name:"horaRegresoCalendar",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:xa(),manualInput:!1,class:D([{"p-invalid":f.value&&!p.value||p.value&&!ve()},"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),onDateSelect:ve,onInput:ve},null,8,["modelValue","minDate","class"]),f.value&&!p.value?(d(),m("small",Yl,"Fecha y hora de regreso requerida.")):g("",!0)])]),t("div",Zl,[t("div",et,[e[46]||(e[46]=t("label",{for:"precio",class:"w-24 flex items-center gap-1"},[E("Precio:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),t("div",at,[e[45]||(e[45]=t("span",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"},"$",-1)),r(u,{modelValue:a.value.precio,"onUpdate:modelValue":e[18]||(e[18]=o=>a.value.precio=o),id:"precio",name:"precio",type:"text",inputmode:"decimal",class:D(["w-full pl-8 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":f.value&&(!a.value.precio||a.value.precio<=0||a.value.precio>999.99)}]),placeholder:"0.00",onKeydown:Fa,onPaste:Sa},null,8,["modelValue","class"])])]),f.value&&(a.value.precio==null||a.value.precio<=0||a.value.precio>999.99)?(d(),m("small",lt,"El precio es obligatorio, debe ser mayor a 0 y menor o igual a 999.99.")):g("",!0)]),t("div",tt,[t("div",ot,[e[47]||(e[47]=t("label",{for:"categoria",class:"w-24 flex items-center gap-1"},[E("Categoría:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),r(c,{modelValue:a.value.categoria,"onUpdate:modelValue":e[19]||(e[19]=o=>a.value.categoria=o),options:Fe.value,optionLabel:"label",optionValue:"value",id:"categoria",name:"categoria",class:D(["w-full rounded-md border-2 border-gray-400 hover:border-gray-500",{"p-invalid":f.value&&!a.value.categoria}]),placeholder:"Seleccionar"},null,8,["modelValue","options","class"])]),f.value&&!a.value.categoria?(d(),m("small",st,"La categoría es obligatoria.")):g("",!0)]),t("div",nt,[t("div",rt,[e[48]||(e[48]=t("label",{for:"transporte_id",class:"w-24 flex items-center gap-1"},[E("Transporte:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),r(c,{modelValue:a.value.transporte_id,"onUpdate:modelValue":e[20]||(e[20]=o=>a.value.transporte_id=o),options:ee.value,optionLabel:"nombre",optionValue:"id",id:"transporte_id",name:"transporte_id",class:D(["w-full rounded-md border-2 border-gray-400 hover:border-gray-500",{"p-invalid":f.value&&!a.value.transporte_id}]),placeholder:"Seleccionar"},null,8,["modelValue","options","class"])]),f.value&&!a.value.transporte_id?(d(),m("small",it,"El tipo de transporte es obligatorio.")):g("",!0)]),t("div",ut,[t("div",dt,[e[49]||(e[49]=t("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},[E("Imágenes:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),t("div",ct,[t("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:fa,class:"hidden",ref_key:"fileInput",ref:Ae},null,544),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 outline-none focus:outline-none active:outline-none disabled:opacity-50 disabled:cursor-not-allowed",onClick:pa,disabled:j.value||L.value},[r(n(b),{icon:j.value?n(z):L.value?n(z):n(ge),class:D(["h-4",{"animate-spin":j.value||L.value}])},null,8,["icon","class"]),L.value?(d(),m("span",vt,"Abriendo galería...")):j.value?(d(),m("span",pt,"Cargando imágenes...")):(d(),m("span",ft,"Subir imágenes"))],8,mt)])]),f.value&&V.value.length===0?(d(),m("small",gt,"Las imágenes son obligatorias (al menos una).")):g("",!0)]),t("div",bt,[(d(!0),m(fe,null,Ie(V.value,(o,I)=>(d(),m("div",{key:I,class:"relative w-32 h-32"},[t("img",{src:o.startsWith("data:image")?o:Te+o,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,ht),t("button",{onClick:pe=>ga(I),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow",style:{transform:"translate(50%, -50%)"}},e[50]||(e[50]=[t("i",{class:"pi pi-times text-xs"},null,-1)]),8,yt)]))),128))])])]),_:1},8,["visible","header","style"]),r(S,{visible:Q.value,"onUpdate:visible":e[23]||(e[23]=o=>Q.value=o),header:"Eliminar tour",modal:!0,style:Ve(ae.value),closable:!1,draggable:!1},{footer:_(()=>[t("div",It,[t("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:ca,disabled:q.value},[r(n(b),{icon:q.value?n(z):n(Xe),class:D(["h-5",{"animate-spin":q.value}])},null,8,["icon","class"]),q.value?(d(),m("span",Ft,"Eliminando...")):(d(),m("span",Et,"Eliminar"))],8,Tt),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[22]||(e[22]=o=>Q.value=!1),disabled:q.value},[r(n(b),{icon:n(be),class:"h-5"},null,8,["icon"]),e[55]||(e[55]=t("span",null,"Cancelar",-1))],8,St)])]),default:_(()=>[t("div",kt,[r(n(b),{icon:n(Ye),class:"h-8 w-8 text-red-500"},null,8,["icon"]),t("div",Vt,[t("span",null,[e[52]||(e[52]=E("¿Estás seguro de eliminar el tour: ")),t("b",null,x(a.value.nombre),1),e[53]||(e[53]=E("?"))]),e[54]||(e[54]=t("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acción es irreversible.",-1))])])]),_:1},8,["visible","style"]),r(za,{visible:P.value,"onUpdate:visible":e[24]||(e[24]=o=>P.value=o),"details-visible":re.value,"onUpdate:detailsVisible":e[25]||(e[25]=o=>re.value=o),"carousel-visible":xe.value,"onUpdate:carouselVisible":e[26]||(e[26]=o=>xe.value=o),"carousel-index":_e.value,"onUpdate:carouselIndex":e[27]||(e[27]=o=>_e.value=o),tour:F.value||a.value,"dialog-style":ae.value,"selected-images":Pe.value,"image-path":Te,onDuplicate:Ca,onChangeStatus:Da,onGenerateReport:ka,onArchive:Va,onViewDetails:Ia,onOpenImageModal:ba},null,8,["visible","details-visible","carousel-visible","carousel-index","tour","dialog-style","selected-images"]),r(Ba,{visible:ie.value,"onUpdate:visible":e[28]||(e[28]=o=>ie.value=o),tour:F.value,"dialog-style":ae.value,onEstadoActualizado:Ea},null,8,["visible","tour","dialog-style"]),r(S,{visible:J.value,"onUpdate:visible":e[29]||(e[29]=o=>J.value=o),header:"Cambios sin guardar",modal:!0,style:Ve(ae.value),closable:!1,draggable:!1},{footer:_(()=>[t("div",At,[t("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:$e},[r(n(b),{icon:n(ja),class:"h-4"},null,8,["icon"]),e[57]||(e[57]=t("span",null,"Salir sin guardar",-1))]),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:va},[r(n(b),{icon:n(Je),class:"h-4"},null,8,["icon"]),e[58]||(e[58]=t("span",null,"Continuar",-1))])])]),default:_(()=>[t("div",Pt,[r(n(b),{icon:n(Ye),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e[56]||(e[56]=t("div",{class:"flex flex-col"},[t("span",null,"¡Tienes información sin guardar!"),t("span",{class:"text-red-600 text-sm font-medium mt-1"},"¿Deseas salir sin guardar?")],-1))])]),_:1},8,["visible","style"])])]),_:1})],64)}}};export{jt as default};
