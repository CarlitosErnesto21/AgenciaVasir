import{r as b,p as pe,i as x,l as ve,q as be,f as P,o as u,a as n,u as s,g as he,w as f,b as l,z as ge,j as M,e as h,G as W,a2 as _,K as T,D as oe,X as K,h as R,F as D,c as y,Y as S,Z as c,t as g,n as X,$ as Z,A as xe}from"./app-DP8tsAem.js";import{_ as ye}from"./AuthenticatedLayout-BvfF3yw2.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DN1bLr27.js";import"./index-ClJ1gEnJ.js";const we={class:"py-6 px-2 sm:px-4 md:px-6 mt-10 mx-auto bg-red-50 shadow-md rounded-lg max-w-full"},Pe={class:"bg-white p-4 rounded shadow mb-4 border border-blue-300"},Te={class:"flex flex-col md:flex-row md:items-start md:gap-12"},Re={class:"flex flex-col mb-4 md:mb-0 md:w-1/3"},ke={class:"flex flex-row gap-6"},ze={class:"inline-flex items-center",for:"radio-tours"},Ue={class:"inline-flex items-center",for:"radio-hoteles"},_e={class:"inline-flex items-center",for:"radio-aerolineas"},Ve={class:"flex-1 flex flex-col md:w-2/3"},Fe={class:"flex flex-col md:flex-row md:items-end gap-2"},Me={class:"flex flex-col md:flex-row md:items-center w-full gap-2"},He={class:"flex flex-col w-full md:w-1/2"},Ne={class:"flex flex-col w-full md:w-1/2"},$e={class:"flex items-end md:ml-4 mt-2 md:mt-0"},qe={class:"flex flex-col md:flex-row items-center gap-4 mt-10 mb-2"},Le={class:"overflow-x-auto"},Ee={class:"text-lg font-semibold mb-2"},De={key:0},Se={key:1},Ie={key:2},Ae={key:3},Be={key:1,class:"text-gray-500 text-center",style:{height:"240px",display:"flex","align-items":"center","justify-content":"center"}},je={key:1,class:"text-gray-500 text-center",style:{height:"240px",display:"flex","align-items":"center","justify-content":"center"}},Ge={class:"flex flex-col md:flex-row gap-2 mb-3"},Oe={class:"overflow-y-auto",style:{"max-height":"350px"}},Ye={key:1,class:"text-gray-500 text-center py-4"},Je={key:0},We={class:"mb-4"},Ke={id:"cliente-reprogramar"},Xe={class:"mb-4"},Ze={class:"flex justify-end gap-2 mt-4"},Qe={class:"flex flex-col md:flex-row gap-3 mb-3"},ea={class:"w-full md:w-1/2 flex flex-col"},aa={class:"flex flex-col md:flex-row gap-2 w-full md:w-1/2"},oa={class:"w-full"},ta={class:"flex flex-col md:flex-row gap-2 items-center"},la={class:"flex md:block w-full md:w-auto"},sa={class:"flex flex-wrap gap-4 mb-3 items-center"},ia={class:"overflow-y-auto",style:{"max-height":"350px"}},ra={key:1,class:"text-gray-500 text-center py-4"},na={__name:"ReservaTours",setup(da){const p=b(null),v=b(null),m=b("tours"),H=b(""),I=b(!1),Q=b([]),te=pe(),N=b(""),$=b(""),A=x(()=>{let o=Q.value||[];return N.value&&(o=o.filter(e=>e.cliente.toLowerCase().includes(N.value.toLowerCase()))),$.value&&(o=o.filter(e=>e.fecha.includes($.value))),o}),C=b([{id:1,tipo:"tours",nombreTour:"Ruta Maya",cliente:"Julio Deras",fecha:"2025-05-02",estado:"Pendiente","Precio Unitario":120,Cupos:2},{id:2,tipo:"tours",nombreTour:"Ruta Maya",cliente:"Vanesa Cruz",fecha:"2025-05-07",estado:"Confirmado","Precio Unitario":80,Cupos:1},{id:3,tipo:"tours",nombreTour:"Ruta Maya",cliente:"Luis Flores",fecha:"2025-05-10",estado:"Pendiente","Precio Unitario":90,Cupos:3},{id:4,tipo:"tours",nombreTour:"Playa El Tunco",cliente:"Ana Pérez",fecha:"2025-05-03",estado:"Pendiente","Precio Unitario":200,Cupos:2},{id:5,tipo:"tours",nombreTour:"Playa El Tunco",cliente:"Carlos López",fecha:"2025-05-08",estado:"Pendiente","Precio Unitario":150,Cupos:1},{id:6,tipo:"tours",nombreTour:"Cascada de Don Juan",cliente:"María González",fecha:"2025-05-04",estado:"Pendiente","Precio Unitario":300,Cupos:4},{id:13,tipo:"tours",nombreTour:"Ruta de las Flores",cliente:"Andrea Molina",fecha:"2025-05-12",estado:"Pendiente","Precio Unitario":180,Cupos:2},{id:14,tipo:"tours",nombreTour:"Ruta de las Flores",cliente:"Roberto Salazar",fecha:"2025-05-13",estado:"Pendiente","Precio Unitario":185,Cupos:1},{id:15,tipo:"tours",nombreTour:"Suchitoto Colonial",cliente:"Patricia Ramos",fecha:"2025-05-14",estado:"Pendiente","Precio Unitario":210,Cupos:2},{id:16,tipo:"tours",nombreTour:"Suchitoto Colonial",cliente:"Miguel Torres",fecha:"2025-05-15",estado:"Pendiente","Precio Unitario":220,Cupos:1},{id:17,tipo:"tours",nombreTour:"Volcán de Izalco",cliente:"Sofía Herrera",fecha:"2025-05-16",estado:"Pendiente","Precio Unitario":250,Cupos:3},{id:18,tipo:"tours",nombreTour:"Volcán de Izalco",cliente:"Gabriela Díaz",fecha:"2025-05-17",estado:"Pendiente","Precio Unitario":260,Cupos:2},{id:7,tipo:"hoteles",nombreTipo:"Hotel Real",cliente:"Pedro Martínez",fecha:"2025-05-09",estado:"Pendiente","Precio Unitario":250,Cupos:1},{id:8,tipo:"hoteles",nombreTipo:"Hotel Real",cliente:"Lucía Ramírez",fecha:"2025-05-12",estado:"Pendiente","Precio Unitario":180,Cupos:2},{id:9,tipo:"hoteles",nombreTipo:"Hotel Plaza",cliente:"Ana López",fecha:"2025-05-13",estado:"Pendiente","Precio Unitario":210,Cupos:1},{id:19,tipo:"hoteles",nombreTipo:"Hotel Plaza",cliente:"Jorge Castillo",fecha:"2025-05-14",estado:"Pendiente","Precio Unitario":215,Cupos:2},{id:20,tipo:"hoteles",nombreTipo:"Hotel Boutique",cliente:"Carmen Figueroa",fecha:"2025-05-15",estado:"Pendiente","Precio Unitario":300,Cupos:1},{id:21,tipo:"hoteles",nombreTipo:"Hotel Boutique",cliente:"Ricardo Méndez",fecha:"2025-05-16",estado:"Pendiente","Precio Unitario":320,Cupos:2},{id:22,tipo:"hoteles",nombreTipo:"Hotel San Benito",cliente:"Estela Morales",fecha:"2025-05-17",estado:"Pendiente","Precio Unitario":180,Cupos:1},{id:10,tipo:"aerolineas",nombreTipo:"AeroExpress",cliente:"Sofía Herrera",fecha:"2025-05-11",estado:"Pendiente","Precio Unitario":400,Cupos:1},{id:11,tipo:"aerolineas",nombreTipo:"AeroExpress",cliente:"Carlos Méndez",fecha:"2025-05-14",estado:"Pendiente","Precio Unitario":350,Cupos:2},{id:12,tipo:"aerolineas",nombreTipo:"VuelaYa",cliente:"Luis Pérez",fecha:"2025-05-15",estado:"Pendiente","Precio Unitario":420,Cupos:1},{id:23,tipo:"aerolineas",nombreTipo:"VuelaYa",cliente:"Marina López",fecha:"2025-05-16",estado:"Pendiente","Precio Unitario":430,Cupos:2},{id:24,tipo:"aerolineas",nombreTipo:"SkyTravel",cliente:"Oscar Rivera",fecha:"2025-05-17",estado:"Pendiente","Precio Unitario":390,Cupos:1},{id:25,tipo:"aerolineas",nombreTipo:"SkyTravel",cliente:"Daniela Cruz",fecha:"2025-05-18",estado:"Pendiente","Precio Unitario":410,Cupos:2},{id:26,tipo:"aerolineas",nombreTipo:"FlyNow",cliente:"Felipe Gómez",fecha:"2025-05-19",estado:"Pendiente","Precio Unitario":370,Cupos:1},{id:27,tipo:"aerolineas",nombreTipo:"FlyNow",cliente:"Paola Martínez",fecha:"2025-05-20",estado:"Pendiente","Precio Unitario":395,Cupos:2}]),le=x(()=>{if(m.value!=="tours")return[];let o=C.value.filter(t=>t.tipo==="tours"&&t.estado==="Pendiente");if(p.value){const t=r(p.value);o=o.filter(i=>r(i.fecha)>=t)}if(v.value){const t=r(v.value);o=o.filter(i=>r(i.fecha)<=t)}const e=[],a={};return o.forEach(t=>{a[t.nombreTour]||(a[t.nombreTour]={nombre:t.nombreTour,cantidad:0},e.push(a[t.nombreTour])),a[t.nombreTour].cantidad++}),e}),se=x(()=>{if(m.value==="tours")return[];let o=C.value.filter(t=>t.tipo===m.value&&t.estado==="Pendiente");if(p.value){const t=r(p.value);o=o.filter(i=>r(i.fecha)>=t)}if(v.value){const t=r(v.value);o=o.filter(i=>r(i.fecha)<=t)}const e=[],a={};return o.forEach(t=>{const i=t.nombreTipo;a[i]||(a[i]={nombre:i,cantidad:0},e.push(a[i])),a[i].cantidad++}),e});function ie(o,e){let a=[];if(o==="tours"?a=C.value.filter(t=>t.tipo==="tours"&&t.estado==="Pendiente"&&t.nombreTour===e):a=C.value.filter(t=>t.tipo===o&&t.estado==="Pendiente"&&t.nombreTipo===e),p.value){const t=r(p.value);a=a.filter(i=>r(i.fecha)>=t)}if(v.value){const t=r(v.value);a=a.filter(i=>r(i.fecha)<=t)}Q.value=a,I.value=!0}function re(o){o.estado="Confirmado"}function B(o,e){o.estado="Rechazada"}const ne=x(()=>{let o=C.value.filter(e=>e.estado==="Confirmado"&&e.tipo===m.value);if(p.value){const e=r(p.value);o=o.filter(a=>r(a.fecha)>=e)}if(v.value){const e=r(v.value);o=o.filter(a=>r(a.fecha)<=e)}return o}),de=x(()=>{let o=C.value.filter(e=>e.estado==="Rechazada"&&e.tipo===m.value);if(p.value){const e=r(p.value);o=o.filter(a=>r(a.fecha)>=e)}if(v.value){const e=r(v.value);o=o.filter(a=>r(a.fecha)<=e)}return o});x(()=>{let o=C.value.filter(e=>e.estado==="Pendiente"&&e.tipo===m.value);if(p.value){const e=r(p.value);o=o.filter(a=>r(a.fecha)>=e)}if(v.value){const e=r(v.value);o=o.filter(a=>r(a.fecha)<=e)}return o}),x(()=>{let o=C.value.filter(e=>e.estado==="Reprogramada"&&e.tipo===m.value);if(p.value){const e=r(p.value);o=o.filter(a=>r(a.fecha)>=e)}if(v.value){const e=r(v.value);o=o.filter(a=>r(a.fecha)<=e)}return o});function r(o){if(!o)return null;if(o instanceof Date)return new Date(o.getFullYear(),o.getMonth(),o.getDate());if(typeof o=="string"){const e=o.split("-");if(e.length===3)return new Date(Number(e[0]),Number(e[1])-1,Number(e[2]));const a=o.split("/");if(a.length===3)return new Date(Number(a[2]),Number(a[1])-1,Number(a[0]))}return new Date(o)}x(()=>{let o=le.value;return o=o.map(e=>{const a=C.value.filter(t=>t.tipo==="tours"&&t.estado==="Pendiente"&&t.nombreTour===e.nombre).map(t=>r(t.fecha));return{...e,fechaReciente:a.length?Math.max(...a.map(t=>t.getTime())):0}}).sort((e,a)=>a.fechaReciente-e.fechaReciente),o}),x(()=>{let o=se.value;return o=o.map(e=>{const a=C.value.filter(t=>t.tipo===m.value&&t.estado==="Pendiente"&&t.nombreTipo===e.nombre).map(t=>r(t.fecha));return{...e,fechaReciente:a.length?Math.max(...a.map(t=>t.getTime())):0}}).sort((e,a)=>a.fechaReciente-e.fechaReciente),o}),x(()=>ne.value.slice().sort((o,e)=>r(e.fecha)-r(o.fecha))),x(()=>de.value.slice().sort((o,e)=>r(e.fecha)-r(o.fecha)));const ue=()=>{p.value=null,v.value=null},d=b("pendientes");ve(m,()=>{d.value="pendientes"});const z=b(""),j=x(()=>{let o=C.value.filter(i=>i.tipo==="tours");if(d.value==="confirmadas"?o=o.filter(i=>i.estado==="Confirmado"):d.value==="rechazadas"?o=o.filter(i=>i.estado==="Rechazada"):d.value==="pendientes"?o=o.filter(i=>i.estado==="Pendiente"):d.value==="reprogramadas"&&(o=o.filter(i=>i.estado==="Reprogramada")),p.value){const i=r(p.value);o=o.filter(w=>r(w.fecha)>=i)}if(v.value){const i=r(v.value);o=o.filter(w=>r(w.fecha)<=i)}const e=[],a={};if(o.forEach(i=>{a[i.nombreTour]||(a[i.nombreTour]={nombre:i.nombreTour,cantidad:0},e.push(a[i.nombreTour])),a[i.nombreTour].cantidad++}),!z.value)return e;const t=z.value.toLowerCase();return e.filter(i=>i.nombre.toLowerCase().includes(t))}),G=x(()=>{let o=C.value.filter(i=>i.tipo===m.value);if(d.value==="confirmadas"?o=o.filter(i=>i.estado==="Confirmado"):d.value==="rechazadas"?o=o.filter(i=>i.estado==="Rechazada"):d.value==="pendientes"?o=o.filter(i=>i.estado==="Pendiente"):d.value==="reprogramadas"&&(o=o.filter(i=>i.estado==="Reprogramada")),p.value){const i=r(p.value);o=o.filter(w=>r(w.fecha)>=i)}if(v.value){const i=r(v.value);o=o.filter(w=>r(w.fecha)<=i)}const e=[],a={};if(o.forEach(i=>{const w=i.nombreTipo;a[w]||(a[w]={nombre:w,cantidad:0},e.push(a[w])),a[w].cantidad++}),!z.value)return e;const t=z.value.toLowerCase();return e.filter(i=>i.nombre.toLowerCase().includes(t))}),O=x(()=>{let o=C.value.filter(e=>e.tipo===m.value);if(d.value==="confirmadas"?o=o.filter(e=>e.estado==="Confirmado"):d.value==="rechazadas"?o=o.filter(e=>e.estado==="Rechazada"):d.value==="pendientes"?o=o.filter(e=>e.estado==="Pendiente"):d.value==="reprogramadas"?o=o.filter(e=>e.estado==="Reprogramada"):o=[],o=o.filter(e=>!E.value.includes(e.id)&&e.estado!=="Finalizada"),p.value){const e=r(p.value);o=o.filter(a=>r(a.fecha)>=e)}if(v.value){const e=r(v.value);o=o.filter(a=>r(a.fecha)<=e)}if(z.value){const e=z.value.toLowerCase();o=o.filter(a=>{const t=m.value==="tours"?a.nombreTour:a.nombreTipo;return t&&t.toLowerCase().includes(e)||a.cliente&&a.cliente.toLowerCase().includes(e)})}return o.slice().sort((e,a)=>r(a.fecha)-r(e.fecha))}),q=b(!1),U=b(null),k=b(null);function ce(o){if(U.value=o,typeof o.fecha=="string"){const e=o.fecha.split("-");e.length===3?k.value=new Date(Number(e[0]),Number(e[1])-1,Number(e[2])):k.value=null}else o.fecha instanceof Date?k.value=o.fecha:k.value=null;q.value=!0}function ee(){q.value=!1,U.value=null,k.value=null}function fe(){if(U.value&&k.value){const o=k.value,e=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),t=String(o.getDate()).padStart(2,"0");U.value.fecha=`${e}-${a}-${t}`,U.value.estado="Reprogramada",ee()}}const Y=b(!1),L=b(""),V=b(null),F=b(null),E=b([]),J=x(()=>C.value.filter(o=>E.value.includes(o.id)||o.estado==="Finalizada").filter(o=>{if(H.value&&o.tipo!==H.value)return!1;if(L.value){const e=L.value.toLowerCase(),a=o.tipo==="tours"?o.nombreTour:o.nombreTipo;if(!(a&&a.toLowerCase().includes(e))&&!(o.cliente&&o.cliente.toLowerCase().includes(e))&&!(o.tipo&&o.tipo.toLowerCase().includes(e)))return!1}if(V.value){const e=r(V.value);if(r(o.fecha)<e)return!1}if(F.value){const e=r(F.value);if(r(o.fecha)>e)return!1}return!0}).sort((o,e)=>r(e.fecha)-r(o.fecha))),me=be();function ae(o){me.require({message:"Esta acción es irreversible.",header:"¿Estás seguro de completar esta reserva?",icon:"pi pi-question-circle",acceptLabel:"Completar",rejectLabel:"Cancelar",acceptClass:"p-button-success",rejectClass:"p-button-danger",accept:()=>{E.value.includes(o.id)||E.value.push(o.id),o.estado="Finalizada",setTimeout(()=>{te.add({severity:"success",summary:"Completada",detail:"La reserva ha sido movida al historial.",life:2e3})},100)}})}return(o,e)=>(u(),P(D,null,[n(s(he),{title:"Reservas de Tours"}),n(ye,null,{default:f(()=>[n(s(ge)),l("div",we,[e[36]||(e[36]=l("div",{class:"flex justify-between items-center mb-4"},[l("h3",{class:"text-xl font-bold text-center w-full"},"Gestión de Reserva")],-1)),l("div",Pe,[l("div",Te,[l("div",Re,[e[22]||(e[22]=l("span",{class:"font-semibold text-base text-gray-700 mb-2"},"Filtrar por tipo de reserva",-1)),l("div",ke,[l("label",ze,[M(l("input",{id:"radio-tours",type:"radio","onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),value:"tours",name:"tipo-reserva",class:"mr-2"},null,512),[[W,m.value]]),e[19]||(e[19]=h(" Tours "))]),l("label",Ue,[M(l("input",{id:"radio-hoteles",type:"radio","onUpdate:modelValue":e[1]||(e[1]=a=>m.value=a),value:"hoteles",name:"tipo-reserva",class:"mr-2"},null,512),[[W,m.value]]),e[20]||(e[20]=h(" Hoteles "))]),l("label",_e,[M(l("input",{id:"radio-aerolineas",type:"radio","onUpdate:modelValue":e[2]||(e[2]=a=>m.value=a),value:"aerolineas",name:"tipo-reserva",class:"mr-2"},null,512),[[W,m.value]]),e[21]||(e[21]=h(" Aerolíneas "))])])]),l("div",Ve,[e[25]||(e[25]=l("span",{class:"font-semibold text-base text-gray-700 mb-1"},"Filtrar por rango de fechas",-1)),l("div",Fe,[l("div",Me,[l("div",He,[e[23]||(e[23]=l("label",{for:"filtro-desde",class:"block font-semibold mb-1"},"Desde:",-1)),n(s(_),{inputId:"filtro-desde",id:"filtro-desde",name:"filtro-desde",modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=a=>p.value=a),dateFormat:"dd/mm/yy",class:"w-full",showIcon:""},null,8,["modelValue"])]),l("div",Ne,[e[24]||(e[24]=l("label",{for:"filtro-hasta",class:"block font-semibold mb-1"},"Hasta:",-1)),n(s(_),{inputId:"filtro-hasta",id:"filtro-hasta",name:"filtro-hasta",modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),dateFormat:"dd/mm/yy",class:"w-full",showIcon:""},null,8,["modelValue"])]),l("div",$e,[n(s(T),{label:"Limpiar fechas",icon:"pi pi-times",class:"p-button-sm p-button-info",onClick:ue})])])])])])]),l("div",qe,[e[27]||(e[27]=l("label",{for:"tipo-estado",class:"font-semibold mb-0"},"Ver reservas:",-1)),M(l("select",{id:"tipo-estado",name:"tipo-estado","onUpdate:modelValue":e[5]||(e[5]=a=>d.value=a),class:"p-2 rounded border border-gray-300 appearance-none w-36",style:{"background-position":"right 0.1rem center","background-repeat":"no-repeat","background-size":"1.5em 1.5em"}},e[26]||(e[26]=[l("option",{value:"pendientes"},"Pendientes",-1),l("option",{value:"confirmadas"},"Confirmadas",-1),l("option",{value:"rechazadas"},"Rechazadas",-1),l("option",{value:"reprogramadas"},"Reprogramadas",-1)]),512),[[oe,d.value]]),e[28]||(e[28]=l("label",{for:"busqueda-nombre-general",class:"sr-only"},"Buscar por nombre",-1)),n(s(K),{id:"busqueda-nombre-general",name:"busqueda-nombre-general",modelValue:z.value,"onUpdate:modelValue":e[6]||(e[6]=a=>z.value=a),placeholder:"Buscar por nombre...",class:"w-64"},null,8,["modelValue"]),n(s(T),{label:"Historial de Reservas",class:"p-button-info ml-2",onClick:e[7]||(e[7]=a=>Y.value=!0)})]),l("div",Le,[["pendientes","confirmadas","rechazadas","reprogramadas"].includes(d.value)?(u(),P(D,{key:0},[l("h4",Ee,[e[29]||(e[29]=h(" Reservas ")),d.value==="pendientes"?(u(),P("span",De,"pendientes por confirmar")):d.value==="confirmadas"?(u(),P("span",Se,"confirmadas")):d.value==="rechazadas"?(u(),P("span",Ie,"rechazadas")):d.value==="reprogramadas"?(u(),P("span",Ae,"reprogramadas")):R("",!0)]),d.value==="pendientes"?(u(),P(D,{key:0},[(m.value==="tours"?j.value.length:G.value.length)?(u(),y(s(S),{key:0,value:m.value==="tours"?j.value:G.value,class:"mb-4 min-w-[400px] w-full",rows:5,paginator:(m.value==="tours"?j.value.length:G.value.length)>5,rowsPerPageOptions:[5,10],scrollable:"",scrollHeight:"240px"},{default:f(()=>[m.value==="tours"?(u(),y(s(c),{key:0,field:"nombre",header:"Nombre del Tour"})):(u(),y(s(c),{key:1,field:"nombre",header:m.value==="hoteles"?"Nombre del Hotel":"Nombre de la Aerolínea"},null,8,["header"])),n(s(c),{header:"Cantidad de Reservas"},{body:f(a=>[h(g(a.data.cantidad),1)]),_:1}),n(s(c),{header:"Acciones"},{body:f(a=>[n(s(T),{label:"Ver reservas",icon:"pi pi-eye",class:"p-button-sm p-button-info",onClick:()=>ie(m.value,a.data.nombre)},null,8,["onClick"])]),_:1})]),_:1},8,["value","paginator"])):(u(),P("div",Be," No hay reservas en este rango. "))],64)):(u(),P(D,{key:1},[O.value.length?(u(),y(s(S),{key:0,value:O.value,class:"mb-4 min-w-[400px] w-full",rows:5,paginator:O.value.length>5,rowsPerPageOptions:[5,10],scrollable:"",scrollHeight:"240px"},{default:f(()=>[n(s(c),{field:"tipo",header:"Tipo"}),n(s(c),{header:"Nombre"},{body:f(a=>[h(g(a.data.nombreTour||a.data.nombreTipo||"-"),1)]),_:1}),n(s(c),{field:"cliente",header:"Cliente"}),n(s(c),{field:"fecha",header:"Fecha"}),n(s(c),{field:"Cupos",header:"Cupos"},{body:f(a=>[h(g(a.data.Cupos),1)]),_:1}),n(s(c),{field:"Precio Unitario",header:"Precio Unitario"},{body:f(a=>[h(" $"+g(a.data["Precio Unitario"]),1)]),_:1}),n(s(c),{field:"Monto",header:"Monto"},{body:f(a=>[h(" $"+g((a.data.Cupos*a.data["Precio Unitario"]).toFixed(2)),1)]),_:1}),d.value!=="rechazadas"&&d.value!=="confirmadas"&&d.value!=="reprogramadas"?(u(),y(s(c),{key:0,field:"estado",header:"Estado"},{body:f(a=>[l("span",{class:X(["ml-2 px-2 py-1 rounded text-xs",a.data.estado==="Pendiente"?"bg-yellow-200 text-yellow-800":a.data.estado==="Confirmado"?"bg-green-200 text-green-800":a.data.estado==="Rechazada"?"bg-red-200 text-red-800":a.data.estado==="Reprogramada"?"bg-blue-200 text-black":""])},g(a.data.estado),3)]),_:1})):R("",!0),d.value!=="rechazadas"?(u(),y(s(c),{key:1,header:"Acciones"},{body:f(a=>[d.value==="confirmadas"?(u(),y(s(T),{key:0,label:"Rechazar",icon:"pi pi-times",class:"p-button-xs p-button-danger mr-2",onClick:t=>B(a.data,"Rechazada")},null,8,["onClick"])):R("",!0),d.value==="confirmadas"?(u(),y(s(T),{key:1,label:"Reprogramar",icon:"pi pi-refresh",class:"p-button-xs p-button-help mr-2",onClick:t=>ce(a.data)},null,8,["onClick"])):R("",!0),d.value==="confirmadas"?(u(),y(s(T),{key:2,label:"Finalizar",icon:"pi pi-check-circle",class:"p-button-xs p-button-success",onClick:t=>ae(a.data)},null,8,["onClick"])):R("",!0),d.value==="reprogramadas"?(u(),y(s(T),{key:3,label:"Rechazar",icon:"pi pi-times",class:"p-button-xs p-button-danger mr-2",onClick:t=>B(a.data,"Rechazada")},null,8,["onClick"])):R("",!0),d.value==="reprogramadas"?(u(),y(s(T),{key:4,label:"Finalizar",icon:"pi pi-check-circle",class:"p-button-xs p-button-success",onClick:t=>ae(a.data)},null,8,["onClick"])):R("",!0)]),_:1})):R("",!0)]),_:1},8,["value","paginator"])):(u(),P("div",je," No hay reservas en este rango. "))],64))],64)):R("",!0)]),n(s(Z),{visible:I.value,"onUpdate:visible":e[10]||(e[10]=a=>I.value=a),modal:"",header:"Reservas",style:{width:"98vw",maxWidth:"1100px"},draggable:!1,position:"center"},{default:f(()=>[l("div",null,[l("div",Ge,[n(s(K),{id:"busqueda-modal-cliente",name:"busqueda-modal-cliente",modelValue:N.value,"onUpdate:modelValue":e[8]||(e[8]=a=>N.value=a),placeholder:"Buscar por cliente",class:"w-full md:w-1/2"},null,8,["modelValue"]),n(s(_),{id:"busqueda-modal-fecha",name:"busqueda-modal-fecha",modelValue:$.value,"onUpdate:modelValue":e[9]||(e[9]=a=>$.value=a),placeholder:"Buscar por fecha",dateFormat:"dd/mm/yy",class:"w-full md:w-1/2",showIcon:""},null,8,["modelValue"])]),l("div",Oe,[A.value.length?(u(),y(s(S),{key:0,value:A.value,class:"min-w-[350px] w-full",rows:5,paginator:A.value.length>5,rowsPerPageOptions:[5,10],scrollable:"",scrollHeight:"320px"},{default:f(()=>[n(s(c),{field:"cliente",header:"Cliente"}),n(s(c),{field:"fecha",header:"Fecha"}),n(s(c),{field:"Precio Unitario",header:"Precio Unitario"},{body:f(a=>[h(" $"+g(a.data["Precio Unitario"]),1)]),_:1}),n(s(c),{field:"Cupos",header:"Cupos"},{body:f(a=>[h(g(a.data.Cupos),1)]),_:1}),n(s(c),{field:"Monto",header:"Monto"},{body:f(a=>[h(" $"+g((a.data.Cupos*a.data["Precio Unitario"]).toFixed(2)),1)]),_:1}),n(s(c),{field:"estado",header:"Estado"},{body:f(a=>[l("span",{class:X(["ml-2 px-2 py-1 rounded text-xs",a.data.estado==="Pendiente"?"bg-yellow-200 text-yellow-800":a.data.estado==="Confirmado"?"bg-green-200 text-green-800":a.data.estado==="Rechazada"?"bg-red-200 text-red-800":""])},g(a.data.estado),3)]),_:1}),n(s(c),{header:"Acción"},{body:f(a=>[a.data.estado==="Pendiente"?(u(),y(s(T),{key:0,label:"Confirmar",icon:"pi pi-check",class:"p-button-xs p-button-success ml-2",onClick:t=>re(a.data)},null,8,["onClick"])):R("",!0),a.data.estado==="Pendiente"?(u(),y(s(T),{key:1,label:"Rechazar",icon:"pi pi-times",class:"p-button-xs p-button-danger ml-2",onClick:t=>B(a.data,"Rechazada")},null,8,["onClick"])):R("",!0)]),_:1})]),_:1},8,["value","paginator"])):(u(),P("div",Ye,"No hay reservas para este elemento."))])])]),_:1},8,["visible"]),n(s(Z),{visible:q.value,"onUpdate:visible":e[12]||(e[12]=a=>q.value=a),modal:"",header:"Reprogramar reserva",style:{width:"350px"},draggable:!1,position:"center"},{default:f(()=>[U.value?(u(),P("div",Je,[l("div",We,[e[30]||(e[30]=l("label",{class:"block font-semibold mb-1",for:"cliente-reprogramar"},"Cliente:",-1)),l("span",Ke,g(U.value.cliente),1)]),l("div",Xe,[e[31]||(e[31]=l("label",{class:"block font-semibold mb-1",for:"nueva-fecha"},"Nueva fecha:",-1)),n(s(_),{id:"nueva-fecha",inputId:"nueva-fecha",modelValue:k.value,"onUpdate:modelValue":e[11]||(e[11]=a=>k.value=a),dateFormat:"dd/mm/yy",class:"w-full",showIcon:""},null,8,["modelValue"])])])):R("",!0),l("div",Ze,[n(s(T),{label:"Cerrar",icon:"pi pi-times",class:"p-button-danger",onClick:ee}),n(s(T),{label:"Guardar",icon:"pi pi-save",class:"p-button-warn",onClick:fe,disabled:!k.value},null,8,["disabled"])])]),_:1},8,["visible"]),n(s(Z),{visible:Y.value,"onUpdate:visible":e[18]||(e[18]=a=>Y.value=a),modal:"",header:"Historial de Reservas",style:{width:"98vw",maxWidth:"1100px"},draggable:!1,position:"center"},{default:f(()=>[l("div",null,[l("div",Qe,[l("div",ea,[e[32]||(e[32]=l("span",{class:"block font-semibold mb-1"},"Buscar:",-1)),n(s(K),{id:"busqueda-historial-nombre",name:"busqueda-historial-nombre",modelValue:L.value,"onUpdate:modelValue":e[13]||(e[13]=a=>L.value=a),placeholder:"Buscar por nombre o tipo...",class:"w-full mt-2 md:mt-3"},null,8,["modelValue"])]),l("div",aa,[l("div",oa,[e[33]||(e[33]=l("label",{class:"block font-semibold mb-2 text-center"},"Filtrar por fechas:",-1)),l("div",ta,[n(s(_),{id:"busqueda-historial-desde",inputId:"busqueda-historial-desde",modelValue:V.value,"onUpdate:modelValue":e[14]||(e[14]=a=>V.value=a),placeholder:"Desde",dateFormat:"dd/mm/yy",class:"w-full",showIcon:""},null,8,["modelValue"]),n(s(_),{id:"busqueda-historial-hasta",inputId:"busqueda-historial-hasta",modelValue:F.value,"onUpdate:modelValue":e[15]||(e[15]=a=>F.value=a),placeholder:"Hasta",dateFormat:"dd/mm/yy",class:"w-full",showIcon:""},null,8,["modelValue"]),l("div",la,[n(s(T),{label:"Limpiar fechas",icon:"pi pi-times",class:"p-button-sm p-button-info w-full md:w-auto mt-2 md:mt-0",onClick:e[16]||(e[16]=()=>{V.value=null,F.value=null})})])])])])]),l("div",sa,[e[35]||(e[35]=l("label",{class:"font-semibold"},"Tipo de reserva:",-1)),M(l("select",{"onUpdate:modelValue":e[17]||(e[17]=a=>H.value=a),class:"p-2 rounded border border-gray-300 w-40"},e[34]||(e[34]=[l("option",{value:""},"Todos",-1),l("option",{value:"tours"},"Tours",-1),l("option",{value:"hoteles"},"Hoteles",-1),l("option",{value:"aerolineas"},"Aerolíneas",-1)]),512),[[oe,H.value]])]),l("div",ia,[J.value.length?(u(),y(s(S),{key:0,value:J.value,class:"min-w-[350px] w-full",rows:5,paginator:J.value.length>5,rowsPerPageOptions:[5,10],scrollable:"",scrollHeight:"320px"},{default:f(()=>[n(s(c),{field:"tipo",header:"Tipo"}),n(s(c),{header:"Nombre"},{body:f(a=>[h(g(a.data.nombreTour||a.data.nombreTipo||"-"),1)]),_:1}),n(s(c),{field:"cliente",header:"Cliente"}),n(s(c),{field:"fecha",header:"Fecha"}),n(s(c),{field:"Cupos",header:"Cupos"},{body:f(a=>[h(g(a.data.Cupos),1)]),_:1}),n(s(c),{field:"Precio Unitario",header:"Precio Unitario"},{body:f(a=>[h(" $"+g(a.data["Precio Unitario"]),1)]),_:1}),n(s(c),{field:"Monto",header:"Monto"},{body:f(a=>[h(" $"+g((a.data.Cupos*a.data["Precio Unitario"]).toFixed(2)),1)]),_:1}),n(s(c),{field:"estado",header:"Estado"},{body:f(a=>[l("span",{class:X(["ml-2 px-2 py-1 rounded text-xs",a.data.estado==="Pendiente"?"bg-yellow-200 text-yellow-800":a.data.estado==="Confirmado"?"bg-green-200 text-green-800":a.data.estado==="Rechazada"?"bg-red-200 text-red-800":a.data.estado==="Reprogramada"?"bg-blue-200 text-black":""])},g(a.data.estado),3)]),_:1})]),_:1},8,["value","paginator"])):(u(),P("div",ra,"No hay reservas en el historial."))])])]),_:1},8,["visible"]),n(s(xe),{draggable:!1,position:"center"})])]),_:1})],64))}},va=Ce(na,[["__scopeId","data-v-39fef412"]]);export{va as default};
