import{E as f,r as se,w as M,c as u,d as c,p as n,x as b,e,q as v,t as p,$ as s,a1 as le,A as x,j as C,y as S,F as k,l as U}from"./vendor-DbRibEpp.js";import{A as d,g as y}from"./ui-CrZM8ROW.js";import{l as N,b as oe,c as O,e as T,d as ae,n as ie,g as w,h as $,f as ne,i as de}from"./index-DWkcdlMl.js";import re from"./ActualizarStock-B9l-6Ei0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"space-y-4"},ce={class:"text-center mb-4"},ge={class:"text-lg font-semibold text-gray-800"},be={class:"text-blue-600"},pe={class:"grid grid-cols-1 gap-3"},me={class:"flex justify-center w-full"},fe={key:0,class:"space-y-4"},ve={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},xe={class:"bg-gray-50 p-3 rounded-lg"},ye={class:"text-sm text-gray-900 mt-1"},he={class:"bg-gray-50 p-3 rounded-lg"},ke={class:"text-sm text-gray-900 mt-1"},we={class:"bg-gray-50 p-3 rounded-lg"},Ce={class:"text-sm text-gray-900 mt-1 font-semibold"},Se={class:"bg-gray-50 p-3 rounded-lg"},Ie={class:"mt-1"},Ve={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},De={class:"bg-gray-50 p-3 rounded-lg"},je={class:"text-sm text-gray-900 mt-1 font-semibold"},Pe={class:"bg-gray-50 p-3 rounded-lg"},Ee={class:"text-sm text-gray-900 mt-1"},Ae={class:"bg-gray-50 p-3 rounded-lg"},Be={class:"text-sm text-gray-900 mt-2 leading-relaxed"},Me={key:0,class:"bg-gray-50 p-3 rounded-lg"},Ue={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},Ne=["onClick"],Oe=["src","alt"],Te={class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-50 rounded-lg"},$e={key:1,class:"bg-gray-50 p-3 rounded-lg text-center"},ze={class:"flex justify-center w-full mt-6"},Re={key:0,class:"flex flex-col items-center justify-center"},Fe={class:"mb-4 text-sm text-gray-600 text-center"},Ge={class:"relative w-full",style:{"max-width":"610px"}},Le={class:"flex justify-center items-center w-full h-96 bg-gray-50 rounded-lg"},We=["src"],qe={key:1,class:"flex justify-center mt-4 space-x-2"},He=["onClick"],Je={key:1,class:"text-center text-gray-500 py-8"},Ke={class:"flex justify-center w-full mt-6"},Xe={class:"flex items-center gap-3"},Qe={class:"flex flex-col"},Ye={class:"flex justify-center gap-4 w-full"},Ze=["disabled"],_e={key:0},et={key:1},tt=["disabled"],st={class:"flex items-center gap-3"},lt={class:"flex justify-center gap-3 w-full"},ut=Object.assign({name:"ProductoModals"},{__name:"Modales",props:{visible:{type:Boolean,default:!1},detailsVisible:{type:Boolean,default:!1},carouselVisible:{type:Boolean,default:!1},deleteVisible:{type:Boolean,default:!1},unsavedChangesVisible:{type:Boolean,default:!1},updateStockVisible:{type:Boolean,default:!1},producto:{type:Object,default:()=>({})},dialogStyle:{type:Object,default:()=>({})},selectedImages:{type:Array,default:()=>[]},carouselIndex:{type:Number,default:0},imagePath:{type:String,default:"/storage/productos/"},isDeleting:{type:Boolean,default:!1}},emits:["update:visible","duplicate","updateStock","generateReport","archive","viewDetails","update:detailsVisible","openImageModal","update:carouselVisible","update:carouselIndex","update:deleteVisible","deleteProduct","cancelDelete","update:unsavedChangesVisible","closeWithoutSaving","continueEditing","update:updateStockVisible","stockUpdated"],setup(o,{emit:z}){const i=o,a=z,I=f({get:()=>i.visible,set:l=>a("update:visible",l)}),V=f({get:()=>i.detailsVisible,set:l=>a("update:detailsVisible",l)}),D=f({get:()=>i.carouselVisible,set:l=>a("update:carouselVisible",l)}),j=f({get:()=>i.deleteVisible,set:l=>a("update:deleteVisible",l)}),P=f({get:()=>i.unsavedChangesVisible,set:l=>a("update:unsavedChangesVisible",l)}),E=f({get:()=>i.updateStockVisible,set:l=>a("update:updateStockVisible",l)}),g=se(0);M(()=>i.carouselIndex,l=>{g.value=l},{immediate:!0}),M(g,l=>{a("update:carouselIndex",l)});const A=l=>l.stock_actual<=0?{label:"Agotado",value:"AGOTADO",class:"bg-red-100 text-red-800"}:l.stock_actual<=l.stock_minimo?{label:"Stock Bajo",value:"STOCK_BAJO",class:"bg-yellow-100 text-yellow-800"}:{label:"Disponible",value:"DISPONIBLE",class:"bg-green-100 text-green-800"},R=()=>{a("update:visible",!1),a("duplicate",i.producto)},F=()=>{a("update:visible",!1),a("updateStock",i.producto)},G=()=>{a("update:visible",!1),a("generateReport",i.producto)},L=()=>{a("update:visible",!1),a("archive",i.producto)},W=()=>{a("update:visible",!1),a("viewDetails",i.producto)},B=()=>{a("update:visible",!1)},q=l=>{a("openImageModal",l)},H=()=>{a("update:detailsVisible",!1)},J=()=>{a("update:carouselVisible",!1)},K=()=>{if(i.selectedImages.length>1){const l=g.value===0?i.selectedImages.length-1:g.value-1;g.value=l}},X=()=>{if(i.selectedImages.length>1){const l=g.value===i.selectedImages.length-1?0:g.value+1;g.value=l}},Q=l=>{l>=0&&l<i.selectedImages.length&&(g.value=l)},Y=()=>{a("deleteProduct",i.producto)},Z=()=>{a("cancelDelete"),a("update:deleteVisible",!1)},_=()=>{a("closeWithoutSaving")},ee=()=>{a("continueEditing")},te=l=>{a("stockUpdated",l)};return(l,t)=>(c(),u(k,null,[n(s(y),{visible:I.value,"onUpdate:visible":t[0]||(t[0]=r=>I.value=r),header:"M√°s Acciones",modal:!0,style:x(o.dialogStyle),closable:!1,draggable:!1},{footer:b(()=>[e("div",me,[e("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:B},[n(s(d),{icon:s(w),class:"h-5"},null,8,["icon"]),t[15]||(t[15]=v(" Cerrar "))])])]),default:b(()=>[e("div",ue,[e("div",ce,[e("h4",ge,[t[6]||(t[6]=v(" Producto: ")),e("span",be,p(o.producto.nombre||"Producto"),1)]),t[7]||(t[7]=e("p",{class:"text-sm text-gray-600 mt-1"},"Selecciona una acci√≥n a realizar",-1))]),e("div",pe,[e("button",{class:"w-full bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:W},[n(s(d),{icon:s(N),class:"h-5 w-5"},null,8,["icon"]),t[8]||(t[8]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Ver Detalles"),e("div",{class:"text-xs opacity-90"},"Informaci√≥n completa del producto")],-1))]),e("button",{class:"w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:R},[n(s(d),{icon:s(oe),class:"h-5 w-5"},null,8,["icon"]),t[9]||(t[9]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Duplicar Producto"),e("div",{class:"text-xs opacity-90"},"Crear una copia de este producto")],-1))]),e("button",{class:"w-full bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:F},[n(s(d),{icon:s(O),class:"h-5 w-5"},null,8,["icon"]),t[10]||(t[10]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Actualizar Stock"),e("div",{class:"text-xs opacity-90"},"Modificar inventario del producto")],-1))]),e("button",{class:"w-full bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:G},[n(s(d),{icon:s(T),class:"h-5 w-5"},null,8,["icon"]),t[11]||(t[11]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Generar Reporte"),e("div",{class:"text-xs opacity-90"},"Reporte de ventas y movimientos")],-1))]),e("button",{class:"w-full bg-gray-500 hover:bg-gray-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:L},[n(s(d),{icon:s(ae),class:"h-5 w-5"},null,8,["icon"]),t[12]||(t[12]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Archivar Producto"),e("div",{class:"text-xs opacity-90"},"Mover a productos archivados")],-1))]),n(s(le),{href:l.route("inventario"),class:"w-full bg-purple-500 hover:bg-purple-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:B},{default:b(()=>[n(s(d),{icon:s(ie),class:"h-5 w-5"},null,8,["icon"]),t[13]||(t[13]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Ver Inventarios"),e("div",{class:"text-xs opacity-90"},"Historial y movimientos de inventario")],-1))]),_:1,__:[13]},8,["href"])]),t[14]||(t[14]=e("div",{class:"mt-6 pt-4 border-t border-gray-200 text-center"},[e("p",{class:"text-xs text-gray-500"}," üí° Selecciona una acci√≥n para continuar. ")],-1))])]),_:1},8,["visible","style"]),n(s(y),{visible:V.value,"onUpdate:visible":t[1]||(t[1]=r=>V.value=r),header:"Detalles del Producto",modal:!0,closable:!1,style:x(o.dialogStyle),draggable:!1},{footer:b(()=>[e("div",ze,[e("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:H},[n(s(d),{icon:s(w),class:"h-5"},null,8,["icon"]),t[25]||(t[25]=v(" Cerrar "))])])]),default:b(()=>{var r;return[o.producto?(c(),u("div",fe,[e("div",ve,[e("div",xe,[t[16]||(t[16]=e("label",{class:"text-sm font-semibold text-gray-700"},"Nombre:",-1)),e("p",ye,p(o.producto.nombre||"Sin nombre"),1)]),e("div",he,[t[17]||(t[17]=e("label",{class:"text-sm font-semibold text-gray-700"},"Categor√≠a:",-1)),e("p",ke,p(((r=o.producto.categoria)==null?void 0:r.nombre)||"Sin categor√≠a"),1)]),e("div",we,[t[18]||(t[18]=e("label",{class:"text-sm font-semibold text-gray-700"},"Precio:",-1)),e("p",Ce,p(o.producto.precio?`$${Number(o.producto.precio).toFixed(2)}`:"No definido"),1)]),e("div",Se,[t[19]||(t[19]=e("label",{class:"text-sm font-semibold text-gray-700"},"Estado:",-1)),e("div",Ie,[e("span",{class:S("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+A(o.producto).class)},p(A(o.producto).label),3)])])]),e("div",Ve,[e("div",De,[t[20]||(t[20]=e("label",{class:"text-sm font-semibold text-gray-700"},"Stock Actual:",-1)),e("p",je,p(o.producto.stock_actual||0)+" unidades",1)]),e("div",Pe,[t[21]||(t[21]=e("label",{class:"text-sm font-semibold text-gray-700"},"Stock M√≠nimo:",-1)),e("p",Ee,p(o.producto.stock_minimo||1)+" unidades",1)])]),e("div",Ae,[t[22]||(t[22]=e("label",{class:"text-sm font-semibold text-gray-700"},"Descripci√≥n:",-1)),e("p",Be,p(o.producto.descripcion||"Sin descripci√≥n disponible"),1)]),o.producto.imagenes&&o.producto.imagenes.length>0?(c(),u("div",Me,[t[23]||(t[23]=e("label",{class:"text-sm font-semibold text-gray-700 mb-3 block"},"Im√°genes del Producto:",-1)),e("div",Ue,[(c(!0),u(k,null,U(o.producto.imagenes,(m,h)=>(c(),u("div",{key:h,class:"relative cursor-pointer group",onClick:ot=>q(h)},[e("img",{src:o.imagePath+(typeof m=="string"?m:m.nombre),alt:`Imagen ${h+1} del producto`,class:"w-full h-20 object-cover rounded-lg border group-hover:opacity-75 transition-opacity"},null,8,Oe),e("div",Te,[n(s(d),{icon:s(N),class:"h-6 w-6 text-white"},null,8,["icon"])])],8,Ne))),128))])])):(c(),u("div",$e,t[24]||(t[24]=[e("p",{class:"text-gray-500"},"No hay im√°genes disponibles para este producto.",-1)])))])):C("",!0)]}),_:1},8,["visible","style"]),n(s(y),{visible:D.value,"onUpdate:visible":t[2]||(t[2]=r=>D.value=r),header:"Galer√≠a de Im√°genes",modal:!0,closable:!1,style:x(o.dialogStyle),draggable:!1},{footer:b(()=>[e("div",Ke,[e("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:J},[n(s(d),{icon:s(w),class:"h-5"},null,8,["icon"]),t[28]||(t[28]=v(" Cerrar "))])])]),default:b(()=>[i.selectedImages.length?(c(),u("div",Re,[e("div",Fe," Imagen "+p(g.value+1)+" de "+p(i.selectedImages.length),1),e("div",Ge,[e("div",Le,[e("img",{src:i.selectedImages[g.value],alt:"Imagen del producto",class:"w-auto h-full max-h-96 object-contain rounded shadow"},null,8,We)]),i.selectedImages.length>1?(c(),u(k,{key:0},[e("button",{onClick:K,class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-75 text-white p-2 rounded-full transition-all"},t[26]||(t[26]=[e("i",{class:"pi pi-chevron-left"},null,-1)])),e("button",{onClick:X,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-75 text-white p-2 rounded-full transition-all"},t[27]||(t[27]=[e("i",{class:"pi pi-chevron-right"},null,-1)]))],64)):C("",!0),i.selectedImages.length>1?(c(),u("div",qe,[(c(!0),u(k,null,U(i.selectedImages,(r,m)=>(c(),u("button",{key:m,onClick:h=>Q(m),class:S(["w-3 h-3 rounded-full transition-all",m===g.value?"bg-blue-500":"bg-gray-300 hover:bg-gray-400"])},null,10,He))),128))])):C("",!0)])])):(c(),u("div",Je,"No hay im√°genes para este producto."))]),_:1},8,["visible","style"]),n(s(y),{visible:j.value,"onUpdate:visible":t[3]||(t[3]=r=>j.value=r),header:"Eliminar producto",modal:!0,style:x(o.dialogStyle),closable:!1,draggable:!1},{footer:b(()=>[e("div",Ye,[e("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Y,disabled:o.isDeleting},[n(s(d),{icon:o.isDeleting?s(ne):s(T),class:S(["h-5",{"animate-spin":o.isDeleting}])},null,8,["icon","class"]),o.isDeleting?(c(),u("span",et,"Eliminando...")):(c(),u("span",_e,"Eliminar"))],8,Ze),e("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Z,disabled:o.isDeleting},[n(s(d),{icon:s(w),class:"h-5"},null,8,["icon"]),t[32]||(t[32]=e("span",null,"Cancelar",-1))],8,tt)])]),default:b(()=>[e("div",Xe,[n(s(d),{icon:s($),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e("div",Qe,[e("span",null,[t[29]||(t[29]=v("¬øEst√°s seguro de eliminar el producto: ")),e("b",null,p(o.producto.nombre),1),t[30]||(t[30]=v("?"))]),t[31]||(t[31]=e("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acci√≥n es irreversible.",-1))])])]),_:1},8,["visible","style"]),n(s(y),{visible:P.value,"onUpdate:visible":t[4]||(t[4]=r=>P.value=r),header:"Cambios sin guardar",modal:!0,style:x(o.dialogStyle),closable:!1,draggable:!1},{footer:b(()=>[e("div",lt,[e("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:_},[n(s(d),{icon:s(de),class:"h-4"},null,8,["icon"]),t[34]||(t[34]=e("span",null,"Salir sin guardar",-1))]),e("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:ee},[n(s(d),{icon:s(O),class:"h-4"},null,8,["icon"]),t[35]||(t[35]=e("span",null,"Continuar",-1))])])]),default:b(()=>[e("div",st,[n(s(d),{icon:s($),class:"h-8 w-8 text-red-500"},null,8,["icon"]),t[33]||(t[33]=e("div",{class:"flex flex-col"},[e("span",null,"¬°Tienes informaci√≥n sin guardar!"),e("span",{class:"text-red-600 text-sm font-medium mt-1"},"¬øDeseas salir sin guardar?")],-1))])]),_:1},8,["visible","style"]),n(re,{visible:E.value,"onUpdate:visible":t[5]||(t[5]=r=>E.value=r),producto:o.producto,"dialog-style":o.dialogStyle,onStockUpdated:te},null,8,["visible","producto","dialog-style"])],64))}});export{ut as default};
