import{N as B,r as m,E as H,w as lt,o as ot,a8 as nt,k as rt,h as ye,d as u,x as b,p as d,e as t,$ as o,a0 as it,t as g,j as x,A as ne,v as Q,c,q as L,y as D,a9 as X,D as Ae,F as z,l as M,n as re}from"./vendor-CqKcGHPa.js";import{A as ut}from"./AuthenticatedLayout-CW8ONkd0.js";import{z as dt,F as ct,A as v,e as mt,f as ie,h as pt,a as vt}from"./ui-CVJOYm3g.js";import{b as ue,c as Le,d as gt,k as ft,t as bt,f as G,g as S,e as xe,h as Se,i as yt,u as xt}from"./index-KhYYztup.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ht={class:"container mx-auto px-4 py-6"},wt={class:"bg-white rounded-lg shadow-md"},_t={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},kt={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},Ct={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},Pt={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},Et={class:"flex items-center gap-3"},It={class:"text-base font-medium text-gray-800 flex items-center gap-2"},Nt={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},Dt=["disabled"],qt=["disabled"],At={class:"space-y-3"},Lt={class:"py-12 text-center"},St=["title"],Vt=["title"],Tt={class:"text-sm font-medium leading-relaxed"},Ft={class:"flex gap-2 justify-center items-center"},Ut=["onClick"],$t=["onClick"],jt={class:"space-y-6"},Kt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Rt={class:"space-y-2"},Ot={key:0,class:"text-sm text-red-600"},Bt={class:"space-y-2"},zt={key:0,class:"text-sm text-red-600"},Mt={class:"space-y-2"},Gt={key:0,class:"text-sm text-red-600"},Wt={key:1,class:"text-sm text-orange-500"},Jt={key:2,class:"text-sm text-red-600 font-semibold"},Zt={class:"space-y-6"},Ht={class:"space-y-2"},Qt={class:"flex gap-2 mb-3"},Xt=["disabled"],Yt={class:"space-y-2 max-h-40 overflow-y-auto"},es={class:"flex-1"},ts=["onClick"],ss={key:0,class:"text-gray-500 text-sm"},as={class:"space-y-2"},ls={class:"flex gap-2 mb-3"},os=["disabled"],ns={key:0,class:"space-y-2 max-h-40 overflow-y-auto"},rs={class:"flex-1"},is=["onClick"],us={key:1,class:"text-gray-500 text-sm"},ds={class:"w-full flex flex-col"},cs={class:"flex items-center gap-4"},ms={class:"flex-1"},ps={class:"flex items-center gap-3 mb-2"},vs=["disabled"],gs={class:"flex items-center gap-2"},fs={class:"flex justify-center ml-2 sm:ml-5"},bs=["src"],ys=["onClick"],xs={class:"flex justify-center gap-4 w-full mt-6"},hs=["disabled"],ws={key:0},_s={key:1},ks=["disabled"],Cs={class:"flex items-center gap-3"},Ps={class:"flex flex-col"},Es={class:"flex justify-center gap-4 w-full"},Is=["disabled"],Ns={key:0},Ds={key:1},qs=["disabled"],As={class:"flex items-center gap-3"},Ls={class:"flex justify-center gap-3 w-full"},Ss={key:0,class:"flex flex-col items-center justify-center"},Vs={class:"mb-4 text-sm text-gray-600 text-center"},Ts={class:"relative mb-4"},Fs=["src","alt"],Us={key:0,class:"mb-4 flex gap-2"},$s=["onClick"],js={key:1,class:"flex gap-4"},Ks={key:1,class:"text-center text-gray-500 py-8"},Rs={class:"flex justify-center w-full mt-6"},Os={key:0,class:"space-y-6"},Bs={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},zs={class:"text-lg font-semibold text-gray-900 mb-4"},Ms={class:"space-y-3"},Gs={class:"ml-2 text-lg font-bold text-green-600"},Ws={key:0},Js={class:"mt-1 text-sm text-gray-600"},Zs={key:0,class:"flex justify-center"},Hs={class:"relative"},Qs=["src","alt"],Xs={key:1,class:"flex items-center justify-center bg-gray-100 rounded-lg h-48"},Ys={class:"text-center text-gray-500"},ea={key:0,class:"space-y-2"},ta={class:"bg-green-50 p-4 rounded-lg"},sa={class:"space-y-1"},aa={key:1,class:"space-y-2"},la={class:"bg-red-50 p-4 rounded-lg"},oa={class:"space-y-1"},na={class:"flex justify-center w-full mt-6"},Y="/api/paquetes-visas",Ve="/storage/paquetesvisas/",va={__name:"PaquetesVisas",setup(ra){B.defaults.withCredentials=!0;const y=dt(),de=m([]),l=m({id:null,nombre:"",descripcion:"",precio:null,incluye:"",no_incluye:""}),w=m([]),V=m([]),N=m([]),T=m([]),q=m(!1),W=m(!1),ee=m(!1),J=m(!1),E=m(!1),F=m(!1),I=m(null),ce=m(!1),h=m(null),k=m([]),_=m([]),U=m(""),$=m(""),j=m(!1),A=m(!1),K=m(!1),te=m(!1),C=m(!1),he=m(!0),Z=m({global:{value:null,matchMode:ct.CONTAINS}}),me=m(10),Te=m([5,10,20,50]),se=m("Guardar"),P=m(0),we=m(null),pe=H(()=>{let s=de.value;if(Z.value.global.value){const e=Z.value.global.value.toLowerCase();s=s.filter(n=>n.nombre.toLowerCase().includes(e)||n.descripcion&&n.descripcion.toLowerCase().includes(e)||n.precio.toString().includes(e))}return s}),ve=H(()=>w.value.length<1),Fe=H(()=>K.value?"Cargando...":te.value?"Abriendo...":ve.value?"Seleccionar":"L√≠mite alcanzado"),ae=H(()=>{const s=l.value.nombre&&l.value.nombre.trim().length>=3,e=l.value.precio&&parseFloat(l.value.precio)>0;return s&&e});lt([l,w,T,k,_],()=>{if(q.value)if(I.value){const s={nombre:l.value.nombre,descripcion:l.value.descripcion,precio:l.value.precio,incluye_lista:[...k.value],no_incluye_lista:[..._.value]},e=w.value.map(f=>f.name||f.nombre),n=I.value.imagenes?I.value.imagenes.map(f=>f.nombre):[],a=R(I.value.incluye||""),r=R(I.value.no_incluye||""),i=JSON.stringify(s)!==JSON.stringify({nombre:I.value.nombre,descripcion:I.value.descripcion,precio:I.value.precio,incluye_lista:a,no_incluye_lista:r}),p=JSON.stringify(e.sort())!==JSON.stringify(n.sort())||T.value.length>0;F.value=i||p}else{const s=l.value.nombre&&l.value.nombre.trim().length>0,e=l.value.descripcion&&l.value.descripcion.trim().length>0,n=l.value.precio&&parseFloat(l.value.precio)>0,a=k.value.length>0,r=_.value.length>0,i=w.value.length>0;F.value=s||e||n||a||r||i}},{deep:!0,flush:"post"});function le(){l.value={id:null,nombre:"",descripcion:"",precio:null,incluye:"",no_incluye:""},w.value=[],V.value=[],T.value=[],E.value=!1,k.value=[],_.value=[],U.value="",$.value=""}const _e=()=>{U.value.trim()&&(k.value.push(U.value.trim()),U.value="")},Ue=s=>{k.value.splice(s,1)},ke=()=>{$.value.trim()&&(_.value.push($.value.trim()),$.value="")},$e=s=>{_.value.splice(s,1)},R=s=>s?s.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],Ce=s=>s.join("|"),Pe=()=>{ge.value=window.innerWidth};ot(()=>{je(),window.addEventListener("resize",Pe)}),nt(()=>{window.removeEventListener("resize",Pe)});const Ee=async()=>{try{const s=await B.get(Y);s.data.success&&(de.value=s.data.data)}catch(s){console.error("Error fetching paquetes:",s)}},je=async()=>{var s;he.value=!0,y.add({severity:"info",summary:"Cargando paquetes...",life:2e3});try{const e=await B.get(Y);e.data.success?(de.value=e.data.data.sort((n,a)=>{const r=new Date(n.created_at);return new Date(a.created_at)-r}),y.add({severity:"success",summary:"Paquetes cargados",life:2e3})):y.add({severity:"warn",summary:"Advertencia",detail:"No se pudieron cargar los paquetes correctamente.",life:4e3})}catch(e){console.error("Error al cargar paquetes:",e),((s=e.response)==null?void 0:s.status)===401?y.add({severity:"error",summary:"No autorizado",detail:"Tu sesi√≥n ha expirado. Por favor, inicia sesi√≥n nuevamente.",life:5e3}):y.add({severity:"error",summary:"Error de conexi√≥n",detail:"No se pudieron cargar los paquetes. Verifica tu conexi√≥n.",life:5e3})}finally{he.value=!1}},Ie=async()=>{A.value=!0;try{await new Promise(s=>setTimeout(s,300)),Z.value.global.value=null,y.add({severity:"success",summary:"Filtros limpiados",detail:"Se han restablecido todos los filtros.",life:3e3})}finally{A.value=!1}},Ke=()=>{le(),I.value=null,F.value=!1,se.value="Guardar",E.value=!1,q.value=!0,re(()=>{const s=document.querySelector('input[placeholder="INGRESE EL NOMBRE DEL PAQUETE"]');s&&s.focus()})},Re=s=>{l.value={...s},I.value=JSON.parse(JSON.stringify(s)),w.value=s.imagenes?s.imagenes.map(e=>({id:e.id,name:e.nombre,url:Ve+e.nombre,isExisting:!0})):[],k.value=R(s.incluye),_.value=R(s.no_incluye),V.value=[],T.value=[],F.value=!1,se.value="Actualizar",E.value=!1,q.value=!0},Oe=async()=>{var s,e,n,a;if(E.value=!0,C.value=!0,l.value.nombre=fe(l.value.nombre||""),!((s=l.value.nombre)!=null&&s.trim())){y.add({severity:"warn",summary:"Campo requerido",detail:"El nombre del paquete es obligatorio.",life:4e3}),C.value=!1;return}if(!/^[A-Z0-9\s]+$/.test(l.value.nombre.trim())){y.add({severity:"warn",summary:"Formato inv√°lido",detail:"El nombre solo puede contener letras, n√∫meros y espacios.",life:4e3}),C.value=!1;return}if(!l.value.precio||l.value.precio<=0){y.add({severity:"warn",summary:"Campo requerido",detail:"El precio debe ser mayor a 0.",life:4e3}),C.value=!1;return}try{const r=new FormData;r.append("nombre",l.value.nombre.trim()),(e=l.value.descripcion)!=null&&e.trim()&&r.append("descripcion",l.value.descripcion.trim()),r.append("precio",l.value.precio),k.value.length>0?r.append("incluye",Ce(k.value)):r.append("incluye",""),_.value.length>0?r.append("no_incluye",Ce(_.value)):r.append("no_incluye",""),V.value.length>0&&r.append("imagenes",V.value[0]),l.value.id&&T.value.length>0&&T.value.forEach(p=>{r.append("removed_images[]",p)});let i;l.value.id?(r.append("_method","PUT"),i=await B.post(`${Y}/${l.value.id}`,r,{headers:{"Content-Type":"multipart/form-data"}})):i=await B.post(Y,r,{headers:{"Content-Type":"multipart/form-data"}}),i.data.success&&(y.add({severity:"success",summary:"√âxito",detail:l.value.id?"Paquete actualizado correctamente":"Paquete creado correctamente",life:4e3}),q.value=!1,await Ee(),le(),F.value=!1)}catch(r){if(console.error("Error saving paquete:",r),((n=r.response)==null?void 0:n.status)===422){const i=r.response.data.errors||{},p=((a=Object.values(i)[0])==null?void 0:a[0])||"Error de validaci√≥n";y.add({severity:"error",summary:"Error de validaci√≥n",detail:p,life:5e3})}else y.add({severity:"error",summary:"Error",detail:"No se pudo guardar el paquete. Intenta nuevamente.",life:5e3})}finally{C.value=!1}},Be=s=>{l.value=s,W.value=!0},ze=async()=>{j.value=!0;try{(await B.delete(`${Y}/${l.value.id}`)).data.success&&(y.add({severity:"success",summary:"√âxito",detail:"Paquete eliminado correctamente",life:4e3}),W.value=!1,await Ee())}catch(s){console.error("Error deleting paquete:",s),y.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el paquete. Intenta nuevamente.",life:5e3})}finally{j.value=!1}},Me=()=>{F.value?J.value=!0:(q.value=!1,le())},Ge=()=>{q.value=!1,J.value=!1,F.value=!1,le()},We=()=>{J.value=!1},Je=s=>{s.originalEvent.target.closest("button")||(h.value=s.data,ee.value=!0)},ge=m(typeof window<"u"?window.innerWidth:1024),oe=H(()=>ge.value<640?{width:"95vw",maxWidth:"380px"}:ge.value<768?{width:"400px"}:{width:"450px"}),Ze=async()=>{var s;if(!ve.value){y.add({severity:"warn",summary:"L√≠mite alcanzado",detail:"Solo se permite 1 imagen por paquete.",life:3e3});return}K.value=!0,await new Promise(e=>setTimeout(e,200)),(s=we.value)==null||s.click(),K.value=!1},He=async s=>{const e=Array.from(s.target.files);if(e.length!==0){if(w.value.length+e.length>1){y.add({severity:"warn",summary:"L√≠mite excedido",detail:"Solo se permite 1 imagen por paquete.",life:4e3});return}for(const n of e){if(!n.type.startsWith("image/")){y.add({severity:"error",summary:"Archivo inv√°lido",detail:`${n.name} no es una imagen v√°lida.`,life:4e3});continue}if(n.size>2*1024*1024){y.add({severity:"error",summary:"Archivo muy grande",detail:`${n.name} excede los 2MB permitidos.`,life:4e3});continue}const a=new FileReader;a.onload=r=>{w.value.push({name:n.name,url:r.target.result,isExisting:!1})},a.readAsDataURL(n),V.value.push(n)}s.target.value=""}},Qe=s=>{const e=w.value[s];if(e.isExisting)T.value.push(e.name);else{const n=V.value.findIndex(a=>a.name===e.name);n!==-1&&V.value.splice(n,1)}w.value.splice(s,1)},Ne=()=>{if(!l.value.nombre||!l.value.nombre.trim())return!1;const s=l.value.nombre.trim();return s.length>=3&&/^[A-Z0-9\s]+$/.test(s)},De=()=>!l.value.descripcion||l.value.descripcion.trim().length>=10,Xe=s=>{const e=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","F5"],n=s.key>="0"&&s.key<="9",a=s.key===".",r=s.ctrlKey&&s.key==="a",i=s.ctrlKey&&s.key==="c",p=s.ctrlKey&&s.key==="v",f=s.ctrlKey&&s.key==="x",O=s.ctrlKey&&s.key==="z";if(e.includes(s.key)||n||r||i||p||f||O){if(a&&s.target.value.includes(".")){s.preventDefault();return}return}if(a){if(s.target.value.includes(".")){s.preventDefault();return}return}s.preventDefault()},Ye=s=>{s.preventDefault();const n=(s.clipboardData||window.clipboardData).getData("text").replace(/[^0-9.]/g,"");if((n.match(/\./g)||[]).length<=1){const r=s.target.value,i=s.target.selectionStart,p=s.target.selectionEnd,f=r.substring(0,i)+n+r.substring(p);!isNaN(f)&&f!==""&&(l.value.precio=parseFloat(f))}},fe=s=>s?s.replace(/[^A-Za-z0-9\s]/g,"").replace(/\s{2,}/g," ").toUpperCase().trim():"",et=s=>{let e=s.target.value;e=e.replace(/[^A-Za-z0-9\s]/g,"").toUpperCase();const n=e.replace(/\s{3,}/g," ");if(l.value.nombre=n,s.target.value!==n){const a=s.target.selectionStart;s.target.value=n,re(()=>{const r=Math.min(a,n.length);s.target.setSelectionRange(r,r)})}},tt=s=>{const e=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","F5"],n=/^[A-Za-z0-9]$/.test(s.key),a=s.key===" ",r=s.ctrlKey&&s.key==="a",i=s.ctrlKey&&s.key==="c",p=s.ctrlKey&&s.key==="v",f=s.ctrlKey&&s.key==="x",O=s.ctrlKey&&s.key==="z";if(a){const be=s.target.value,qe=s.target.selectionStart;if(be.charAt(qe-1)===" "||qe===0){s.preventDefault();return}}e.includes(s.key)||n||a||r||i||p||f||O||s.preventDefault()},st=s=>{s.preventDefault();const e=(s.clipboardData||window.clipboardData).getData("text"),n=fe(e),a=s.target.value,r=s.target.selectionStart,i=s.target.selectionEnd,p=a.substring(0,r)+n+a.substring(i),f=fe(p);f.length<=100&&(l.value.nombre=f,s.target.value=f,re(()=>{const O=Math.min(r+n.length,f.length);s.target.setSelectionRange(O,O)}))},at=s=>{const e=s.target.value,n=e.toUpperCase();if(e!==n){const a=s.target.selectionStart;l.value.descripcion=n,re(()=>{s.target.value=n,s.target.setSelectionRange(a,a)})}};return(s,e)=>{const n=rt("Dialog");return u(),ye(ut,null,{default:b(()=>[d(o(it),{title:"Paquetes de Visa"}),t("div",ht,[e[26]||(e[26]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Cat√°logo de Paquetes de Visa"),t("p",{class:"text-gray-600"},"Gesti√≥n completa de paquetes de visa disponibles")],-1)),t("div",wt,[t("div",_t,[e[19]||(e[19]=t("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Lista de Paquetes",-1)),t("div",kt,[t("button",{class:"bg-red-500 border flex border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:Ke},[d(o(v),{icon:o(ue),class:"h-4 w-4 mr-1 text-white"},null,8,["icon"]),e[17]||(e[17]=t("span",{class:"block sm:hidden"},"Agregar",-1)),e[18]||(e[18]=t("span",{class:"hidden sm:block"},"Agregar paquete",-1))])])])]),d(o(mt),{value:pe.value,dataKey:"id",paginator:!0,rows:me.value,rowsPerPageOptions:Te.value,rowsPerPage:me.value,"onUpdate:rowsPerPage":e[1]||(e[1]=a=>me.value=a),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} paquetes",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",onRowClick:Je,pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:b(()=>[t("div",Ct,[t("div",Pt,[t("div",Et,[t("h3",It,[d(o(v),{icon:o(bt),class:"text-blue-600 text-sm"},null,8,["icon"]),e[20]||(e[20]=t("span",null,"Filtros",-1))]),t("div",Nt,g(pe.value.length)+" resultado"+g(pe.value.length!==1?"s":""),1),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Ie,disabled:A.value},[A.value?(u(),ye(o(v),{key:0,icon:o(G),class:"animate-spin h-3 w-3"},null,8,["icon"])):x("",!0),t("span",null,g(A.value?"Limp...":"Limpiar"),1)],8,Dt)]),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Ie,disabled:A.value},[A.value?(u(),ye(o(v),{key:0,icon:o(G),class:"animate-spin h-3 w-3"},null,8,["icon"])):x("",!0),t("span",null,g(A.value?"Limpiando...":"Limpiar filtros"),1)],8,qt)]),t("div",At,[t("div",null,[d(o(pt),{modelValue:Z.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=a=>Z.value.global.value=a),placeholder:"üîç Buscar paquetes...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])])])])]),empty:b(()=>[t("div",Lt,[d(o(v),{icon:o(ft),class:"mb-4 h-12 w-12 text-gray-300"},null,8,["icon"]),e[21]||(e[21]=t("p",{class:"text-xl font-semibold text-gray-500"},"No hay paquetes",-1)),e[22]||(e[22]=t("p",{class:"text-gray-400"},"No se encontraron paquetes de visa",-1))])]),default:b(()=>[d(o(ie),{field:"nombre",header:"Nombre",sortable:"",class:"w-28"},{body:b(a=>[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"100px","text-overflow":"ellipsis","white-space":"nowrap"},title:a.data.nombre},g(a.data.nombre),9,St)]),_:1}),d(o(ie),{field:"descripcion",header:"Descripci√≥n",class:"w-28 hidden md:table-cell"},{body:b(a=>[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"100px","text-overflow":"ellipsis","white-space":"nowrap"},title:a.data.descripcion},g(a.data.descripcion||"Sin descripci√≥n"),9,Vt)]),_:1}),d(o(ie),{field:"precio",header:"Precio",sortable:"",class:"w-16 hidden md:table-cell"},{body:b(a=>[t("div",Tt,g(isNaN(Number(a.data.precio))?"":`$${Number(a.data.precio).toFixed(2)}`),1)]),_:1}),d(o(ie),{exportable:!1,class:"w-52 min-w-36"},{header:b(()=>e[23]||(e[23]=[t("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:b(a=>[t("div",Ft,[t("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>Re(a.data)},[d(o(v),{icon:o(Le),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[24]||(e[24]=t("span",{class:"hidden md:block text-white"},"Editar",-1))],8,Ut),t("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:r=>Be(a.data)},[d(o(v),{icon:o(gt),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[25]||(e[25]=t("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,$t)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"])]),d(n,{visible:q.value,"onUpdate:visible":e[7]||(e[7]=a=>q.value=a),header:l.value.id?"Editar Paquete":"Nuevo Paquete",modal:!0,style:ne(oe.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",xs,[t("button",{class:D(["border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",!ae.value||C.value?"bg-gray-400 text-white cursor-not-allowed":"bg-red-500 hover:bg-red-700 text-white"]),onClick:Oe,disabled:!ae.value||C.value},[d(o(v),{icon:C.value?o(G):o(xe),class:D(["h-5 text-white",{"animate-spin":C.value}])},null,8,["icon","class"]),C.value?(u(),c("span",_s,g(se.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(u(),c("span",ws,g(se.value),1))],10,hs),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Me,disabled:C.value},[d(o(v),{icon:o(S),class:"h-5"},null,8,["icon"]),e[35]||(e[35]=L("Cancelar "))],8,ks)])]),default:b(()=>{var a,r;return[t("div",jt,[t("div",Kt,[t("div",Rt,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700"},[L(" Nombre "),t("span",{class:"text-red-500"},"*")],-1)),Q(t("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>l.value.nombre=i),type:"text",placeholder:"INGRESE EL NOMBRE DEL PAQUETE",maxlength:"100",onInput:et,onKeydown:tt,onPaste:st,class:D(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1 uppercase",E.value&&!Ne()||!((a=l.value.nombre)!=null&&a.trim())&&!ae.value?"border-red-300 focus:border-red-500 focus:ring-red-500":(r=l.value.nombre)!=null&&r.trim()&&l.value.nombre.trim().length>=3?"border-green-300 focus:border-green-500 focus:ring-green-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[X,l.value.nombre]]),E.value&&!Ne()?(u(),c("div",Ot," El nombre es requerido (m√≠nimo 3 caracteres, solo letras, n√∫meros y espacios) ")):x("",!0)]),t("div",Bt,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700"},[L(" Precio "),t("span",{class:"text-red-500"},"*")],-1)),Q(t("input",{"onUpdate:modelValue":e[3]||(e[3]=i=>l.value.precio=i),type:"number",step:"0.01",min:"0",placeholder:"0.00",onKeydown:Xe,onPaste:Ye,class:D(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1",E.value&&(!l.value.precio||l.value.precio<=0)||!l.value.precio&&!ae.value?"border-red-300 focus:border-red-500 focus:ring-red-500":l.value.precio&&parseFloat(l.value.precio)>0?"border-green-300 focus:border-green-500 focus:ring-green-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[X,l.value.precio]]),E.value&&(!l.value.precio||l.value.precio<=0)?(u(),c("div",zt," El precio es requerido y debe ser mayor a 0 ")):x("",!0)])]),t("div",Mt,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700"},"Descripci√≥n",-1)),Q(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=i=>l.value.descripcion=i),rows:"3",placeholder:"DESCRIPCION DEL PAQUETE (OPCIONAL)",maxlength:"255",onInput:at,class:D(["w-full rounded-lg border px-3 py-2 transition-colors focus:outline-none focus:ring-1",E.value&&!De()?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"])},null,34),[[X,l.value.descripcion]]),E.value&&!De()?(u(),c("div",Gt," La descripci√≥n debe tener al menos 10 caracteres ")):x("",!0),l.value.descripcion&&l.value.descripcion.length>245?(u(),c("div",Wt," Caracteres restantes: "+g(255-l.value.descripcion.length),1)):x("",!0),l.value.descripcion&&l.value.descripcion.length>=255?(u(),c("div",Jt," No se permiten m√°s caracteres ")):x("",!0)]),t("div",Zt,[t("div",Ht,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700"},"Incluye",-1)),t("div",Qt,[Q(t("input",{"onUpdate:modelValue":e[5]||(e[5]=i=>U.value=i),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border border-gray-300 rounded-lg px-3 py-2 transition-colors focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyup:Ae(_e,["enter"])},null,544),[[X,U.value]]),t("button",{type:"button",onClick:_e,disabled:!U.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[d(o(v),{icon:o(ue),class:"h-4"},null,8,["icon"])],8,Xt)]),t("div",Yt,[(u(!0),c(z,null,M(k.value,(i,p)=>(u(),c("div",{key:p,class:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border"},[t("span",es,g(i),1),t("button",{type:"button",onClick:f=>Ue(p),class:"text-red-500 hover:text-red-700 p-1"},[d(o(v),{icon:o(S),class:"h-4"},null,8,["icon"])],8,ts)]))),128))]),k.value.length===0?(u(),c("div",ss," Sin elementos agregados. ")):x("",!0)]),t("div",as,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700"},"No Incluye",-1)),t("div",ls,[Q(t("input",{"onUpdate:modelValue":e[6]||(e[6]=i=>$.value=i),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border border-gray-300 rounded-lg px-3 py-2 transition-colors focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyup:Ae(ke,["enter"])},null,544),[[X,$.value]]),t("button",{type:"button",onClick:ke,disabled:!$.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[d(o(v),{icon:o(ue),class:"h-4"},null,8,["icon"])],8,os)]),_.value.length>0?(u(),c("div",ns,[(u(!0),c(z,null,M(_.value,(i,p)=>(u(),c("div",{key:p,class:"flex items-center justify-between bg-gray-50 p-2 rounded-lg border"},[t("span",rs,g(i),1),t("button",{type:"button",onClick:f=>$e(p),class:"text-red-500 hover:text-red-700 p-1"},[d(o(v),{icon:o(S),class:"h-4"},null,8,["icon"])],8,is)]))),128))])):x("",!0),_.value.length===0?(u(),c("div",us," Sin elementos agregados. ")):x("",!0)])]),t("div",ds,[t("div",cs,[e[34]||(e[34]=t("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},"Im√°genes:",-1)),t("div",ms,[t("div",ps,[t("input",{type:"file",id:"imagenes",name:"imagenes",accept:"image/*",onChange:He,class:"hidden",ref_key:"fileInput",ref:we},null,544),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 outline-none focus:outline-none active:outline-none disabled:opacity-50 disabled:cursor-not-allowed",onClick:Ze,disabled:K.value||te.value||!ve.value},[d(o(v),{icon:K.value?o(G):te.value?o(G):o(ue),class:D({"animate-spin":K.value||te.value})},null,8,["icon","class"]),L(" "+g(Fe.value),1)],8,vs),t("div",gs,[t("span",{class:D(["text-sm font-medium",w.value.length>=1?"text-red-600":"text-gray-600"])},g(w.value.length)+"/1 ",3),e[32]||(e[32]=t("span",{class:"text-xs text-gray-500"},"imagen",-1))])]),e[33]||(e[33]=t("div",{class:"text-xs text-gray-500 mb-2"}," M√°ximo 1 imagen por paquete ‚Ä¢ Formatos: JPG, PNG, GIF ‚Ä¢ Tama√±o m√°ximo: 2MB ",-1))])])]),t("div",fs,[(u(!0),c(z,null,M(w.value,(i,p)=>(u(),c("div",{key:p,class:"relative w-full max-w-sm"},[t("img",{src:i.url,alt:"Vista previa",class:"w-full h-48 object-cover rounded-lg border shadow"},null,8,bs),t("button",{onClick:f=>Qe(p),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow transition-colors",style:{transform:"translate(50%, -50%)"}},[d(o(v),{icon:o(S),class:"text-xs"},null,8,["icon"])],8,ys)]))),128))])])]}),_:1},8,["visible","header","style"]),d(n,{visible:W.value,"onUpdate:visible":e[9]||(e[9]=a=>W.value=a),header:"Eliminar paquete",modal:!0,style:ne(oe.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",Es,[t("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:ze,disabled:j.value},[d(o(v),{icon:j.value?o(G):o(xe),class:D(["h-5",{"animate-spin":j.value}])},null,8,["icon","class"]),j.value?(u(),c("span",Ds,"Eliminando...")):(u(),c("span",Ns,"Eliminar"))],8,Is),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[8]||(e[8]=a=>W.value=!1),disabled:j.value},[d(o(v),{icon:o(S),class:"h-5"},null,8,["icon"]),e[39]||(e[39]=t("span",null,"Cancelar",-1))],8,qs)])]),default:b(()=>[t("div",Cs,[d(o(v),{icon:o(Se),class:"h-8 w-8 text-red-500"},null,8,["icon"]),t("div",Ps,[t("span",null,[e[36]||(e[36]=L("¬øEst√°s seguro de eliminar el paquete: ")),t("b",null,g(l.value.nombre),1),e[37]||(e[37]=L("?"))]),e[38]||(e[38]=t("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acci√≥n es irreversible.",-1))])])]),_:1},8,["visible","style"]),d(n,{visible:J.value,"onUpdate:visible":e[10]||(e[10]=a=>J.value=a),header:"Cambios sin guardar",modal:!0,style:ne(oe.value),closable:!1,draggable:!1},{footer:b(()=>[t("div",Ls,[t("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Ge},[d(o(v),{icon:o(yt),class:"h-4"},null,8,["icon"]),e[41]||(e[41]=t("span",null,"Salir sin guardar",-1))]),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:We},[d(o(v),{icon:o(Le),class:"h-4"},null,8,["icon"]),e[42]||(e[42]=t("span",null,"Continuar",-1))])])]),default:b(()=>[t("div",As,[d(o(v),{icon:o(Se),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e[40]||(e[40]=t("div",{class:"flex flex-col"},[t("span",null,"¬°Tienes informaci√≥n sin guardar!"),t("span",{class:"text-red-600 text-sm font-medium mt-1"},"¬øDeseas salir sin guardar?")],-1))])]),_:1},8,["visible","style"]),d(n,{visible:ce.value,"onUpdate:visible":e[14]||(e[14]=a=>ce.value=a),header:"Galer√≠a de Im√°genes",modal:!0,closable:!1,style:ne(oe.value),draggable:!1},{footer:b(()=>[t("div",Rs,[t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[13]||(e[13]=a=>ce.value=!1)},[d(o(v),{icon:o(S),class:"h-5"},null,8,["icon"]),e[43]||(e[43]=L(" Cerrar "))])])]),default:b(()=>{var a,r;return[N.value.length?(u(),c("div",Ss,[t("div",Vs," Imagen "+g(P.value+1)+" de "+g(N.value.length),1),t("div",Ts,[t("img",{src:(a=N.value[P.value])==null?void 0:a.url,alt:(r=N.value[P.value])==null?void 0:r.nombre,class:"max-h-96 max-w-full rounded-lg object-contain"},null,8,Fs)]),N.value.length>1?(u(),c("div",Us,[(u(!0),c(z,null,M(N.value,(i,p)=>(u(),c("button",{key:p,onClick:f=>P.value=p,class:D(["h-3 w-3 rounded-full transition-all",p===P.value?"bg-blue-500":"bg-gray-300 hover:bg-gray-400"])},null,10,$s))),128))])):x("",!0),N.value.length>1?(u(),c("div",js,[t("button",{onClick:e[11]||(e[11]=i=>P.value=P.value===0?N.value.length-1:P.value-1),class:"bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-all duration-200 ease-in-out"}," Anterior "),t("button",{onClick:e[12]||(e[12]=i=>P.value=P.value===N.value.length-1?0:P.value+1),class:"bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-all duration-200 ease-in-out"}," Siguiente ")])):x("",!0)])):(u(),c("div",Ks,"No hay im√°genes para este paquete."))]}),_:1},8,["visible","style"]),d(n,{visible:ee.value,"onUpdate:visible":e[16]||(e[16]=a=>ee.value=a),header:"Detalles del Paquete",modal:!0,style:{width:"90vw",maxWidth:"800px"},closable:!1,draggable:!1},{footer:b(()=>[t("div",na,[t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[15]||(e[15]=a=>ee.value=!1)},[d(o(v),{icon:o(S),class:"h-5"},null,8,["icon"]),e[49]||(e[49]=L(" Cerrar "))])])]),default:b(()=>[h.value?(u(),c("div",Os,[t("div",Bs,[t("div",null,[t("h3",zs,g(h.value.nombre),1),t("div",Ms,[t("div",null,[e[44]||(e[44]=t("span",{class:"text-sm font-medium text-gray-700"},"Precio:",-1)),t("span",Gs,"$"+g(parseFloat(h.value.precio).toFixed(2)),1)]),h.value.descripcion?(u(),c("div",Ws,[e[45]||(e[45]=t("span",{class:"text-sm font-medium text-gray-700"},"Descripci√≥n:",-1)),t("p",Js,g(h.value.descripcion),1)])):x("",!0)])]),h.value.imagenes&&h.value.imagenes.length>0?(u(),c("div",Zs,[t("div",Hs,[t("img",{src:Ve+h.value.imagenes[0].nombre,alt:h.value.nombre,class:"w-full max-w-sm h-48 object-cover rounded-lg border shadow"},null,8,Qs)])])):(u(),c("div",Xs,[t("div",Ys,[d(o(v),{icon:o(xt),class:"h-12 w-12 mb-2"},null,8,["icon"]),e[46]||(e[46]=t("p",null,"Sin imagen",-1))])]))]),h.value.incluye?(u(),c("div",ea,[e[47]||(e[47]=t("h4",{class:"text-md font-semibold text-gray-900"},"‚úÖ Incluye:",-1)),t("div",ta,[t("ul",sa,[(u(!0),c(z,null,M(R(h.value.incluye),a=>(u(),c("li",{key:a,class:"flex items-start gap-2 text-sm text-gray-700"},[d(o(v),{icon:o(xe),class:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"},null,8,["icon"]),t("span",null,g(a),1)]))),128))])])])):x("",!0),h.value.no_incluye?(u(),c("div",aa,[e[48]||(e[48]=t("h4",{class:"text-md font-semibold text-gray-900"},"‚ùå No Incluye:",-1)),t("div",la,[t("ul",oa,[(u(!0),c(z,null,M(R(h.value.no_incluye),a=>(u(),c("li",{key:a,class:"flex items-start gap-2 text-sm text-gray-700"},[d(o(v),{icon:o(S),class:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"},null,8,["icon"]),t("span",null,g(a),1)]))),128))])])])):x("",!0)])):x("",!0)]),_:1},8,["visible"]),d(o(vt))]),_:1})}}};export{va as default};
