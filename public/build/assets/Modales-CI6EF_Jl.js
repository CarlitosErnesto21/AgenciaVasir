import{E as f,r as Z,w as A,c as r,d as u,p as n,x as b,e,q as y,t as m,$ as l,a1 as _,A as v,j as S,y as C,F as k,l as M}from"./vendor-B6SkOXHv.js";import{D as c,g as x}from"./ui-IQIjmUCy.js";import{l as N,c as O,n as ee,g as w,h as T,f as te,e as se,i as le}from"./index-CWeCUdu2.js";import oe from"./ActualizarStock-CD7ySZTF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"space-y-4"},ie={class:"text-center mb-4"},ne={class:"text-lg font-semibold text-gray-800"},de={class:"text-blue-600"},re={class:"grid grid-cols-1 gap-3"},ue={class:"flex justify-center w-full mt-6"},ce={key:0,class:"space-y-4"},ge={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},be={class:"bg-gray-50 p-3 rounded-lg"},me={class:"text-sm text-gray-900 mt-1"},pe={class:"bg-gray-50 p-3 rounded-lg"},fe={class:"text-sm text-gray-900 mt-1"},ye={class:"bg-gray-50 p-3 rounded-lg"},ve={class:"text-sm text-gray-900 mt-1 font-semibold"},xe={class:"bg-gray-50 p-3 rounded-lg"},he={class:"mt-1"},ke={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},we={class:"bg-gray-50 p-3 rounded-lg"},Se={class:"text-sm text-gray-900 mt-1 font-semibold"},Ce={class:"bg-gray-50 p-3 rounded-lg"},Ie={class:"text-sm text-gray-900 mt-1"},Ve={class:"bg-gray-50 p-3 rounded-lg"},De={class:"text-sm text-gray-900 mt-2 leading-relaxed"},je={key:0,class:"bg-gray-50 p-3 rounded-lg"},Ee={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},Be=["onClick"],Pe=["src","alt"],Ue={class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-50 rounded-lg"},Ae={key:1,class:"bg-gray-50 p-3 rounded-lg text-center"},Me={class:"flex justify-center w-full mt-6"},Ne={key:0,class:"flex flex-col items-center justify-center"},Oe={class:"mb-4 text-sm text-gray-600 text-center"},Te={class:"relative w-full",style:{"max-width":"610px"}},$e={class:"flex justify-center items-center w-full h-96 bg-gray-50 rounded-lg"},ze=["src"],Fe={key:1,class:"flex justify-center mt-4 space-x-2"},Le=["onClick"],We={key:1,class:"text-center text-gray-500 py-8"},Ge={class:"flex justify-center w-full mt-6"},qe={class:"flex items-center gap-3"},He={class:"flex flex-col"},Je={class:"flex justify-center gap-4 w-full"},Ke=["disabled"],Xe={key:0},Qe={key:1},Re=["disabled"],Ye={class:"flex items-center gap-3"},Ze={class:"flex justify-center gap-3 w-full"},at=Object.assign({name:"ProductoModals"},{__name:"Modales",props:{visible:{type:Boolean,default:!1},detailsVisible:{type:Boolean,default:!1},carouselVisible:{type:Boolean,default:!1},deleteVisible:{type:Boolean,default:!1},unsavedChangesVisible:{type:Boolean,default:!1},updateStockVisible:{type:Boolean,default:!1},producto:{type:Object,default:()=>({})},dialogStyle:{type:Object,default:()=>({})},selectedImages:{type:Array,default:()=>[]},carouselIndex:{type:Number,default:0},imagePath:{type:String,default:"/storage/productos/"},isDeleting:{type:Boolean,default:!1}},emits:["update:visible","updateStock","viewDetails","update:detailsVisible","openImageModal","update:carouselVisible","update:carouselIndex","update:deleteVisible","deleteProduct","cancelDelete","update:unsavedChangesVisible","closeWithoutSaving","continueEditing","update:updateStockVisible","stockUpdated"],setup(o,{emit:$}){const a=o,i=$,I=f({get:()=>a.visible,set:s=>i("update:visible",s)}),V=f({get:()=>a.detailsVisible,set:s=>i("update:detailsVisible",s)}),D=f({get:()=>a.carouselVisible,set:s=>i("update:carouselVisible",s)}),j=f({get:()=>a.deleteVisible,set:s=>i("update:deleteVisible",s)}),E=f({get:()=>a.unsavedChangesVisible,set:s=>i("update:unsavedChangesVisible",s)}),B=f({get:()=>a.updateStockVisible,set:s=>i("update:updateStockVisible",s)}),g=Z(0);A(()=>a.carouselIndex,s=>{g.value=s},{immediate:!0}),A(g,s=>{i("update:carouselIndex",s)});const P=s=>s.stock_actual<=0?{label:"Agotado",value:"AGOTADO",class:"bg-red-100 text-red-800"}:s.stock_actual<=s.stock_minimo?{label:"Stock Bajo",value:"STOCK_BAJO",class:"bg-yellow-100 text-yellow-800"}:{label:"Disponible",value:"DISPONIBLE",class:"bg-green-100 text-green-800"},z=()=>{i("update:visible",!1),i("updateStock",a.producto)},F=()=>{i("update:visible",!1),i("viewDetails",a.producto)},U=()=>{i("update:visible",!1)},L=s=>{i("openImageModal",s)},W=()=>{i("update:detailsVisible",!1)},G=()=>{i("update:carouselVisible",!1)},q=()=>{if(a.selectedImages.length>1){const s=g.value===0?a.selectedImages.length-1:g.value-1;g.value=s}},H=()=>{if(a.selectedImages.length>1){const s=g.value===a.selectedImages.length-1?0:g.value+1;g.value=s}},J=s=>{s>=0&&s<a.selectedImages.length&&(g.value=s)},K=()=>{i("deleteProduct",a.producto)},X=()=>{i("cancelDelete"),i("update:deleteVisible",!1)},Q=()=>{i("closeWithoutSaving")},R=()=>{i("continueEditing")},Y=s=>{i("stockUpdated",s)};return(s,t)=>(u(),r(k,null,[n(l(x),{visible:I.value,"onUpdate:visible":t[0]||(t[0]=d=>I.value=d),header:"M치s Acciones",modal:!0,style:v(o.dialogStyle),closable:!1,draggable:!1},{footer:b(()=>[e("div",ue,[e("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:U},[n(l(c),{icon:l(w),class:"h-5"},null,8,["icon"]),t[12]||(t[12]=y(" Cerrar "))])])]),default:b(()=>[e("div",ae,[e("div",ie,[e("h4",ne,[t[6]||(t[6]=y(" Producto: ")),e("span",de,m(o.producto.nombre||"Producto"),1)]),t[7]||(t[7]=e("p",{class:"text-sm text-gray-600 mt-1"},"Selecciona una acci칩n a realizar",-1))]),e("div",re,[e("button",{class:"w-full bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:F},[n(l(c),{icon:l(N),class:"h-5 w-5"},null,8,["icon"]),t[8]||(t[8]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Ver Detalles"),e("div",{class:"text-xs opacity-90"},"Informaci칩n completa del producto")],-1))]),e("button",{class:"w-full bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:z},[n(l(c),{icon:l(O),class:"h-5 w-5"},null,8,["icon"]),t[9]||(t[9]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Actualizar Stock"),e("div",{class:"text-xs opacity-90"},"Modificar inventario del producto")],-1))]),n(l(_),{href:s.route("inventario"),class:"w-full bg-purple-500 hover:bg-purple-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:U},{default:b(()=>[n(l(c),{icon:l(ee),class:"h-5 w-5"},null,8,["icon"]),t[10]||(t[10]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Ver Inventarios"),e("div",{class:"text-xs opacity-90"},"Historial y movimientos de inventario")],-1))]),_:1,__:[10]},8,["href"])]),t[11]||(t[11]=e("div",{class:"mt-6 pt-4 border-t border-gray-200 text-center"},[e("p",{class:"text-xs text-gray-500"}," 游눠 Selecciona una acci칩n para continuar. ")],-1))])]),_:1},8,["visible","style"]),n(l(x),{visible:V.value,"onUpdate:visible":t[1]||(t[1]=d=>V.value=d),header:"Detalles del Producto",modal:!0,closable:!1,style:v(o.dialogStyle),draggable:!1},{footer:b(()=>[e("div",Me,[e("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:W},[n(l(c),{icon:l(w),class:"h-5"},null,8,["icon"]),t[22]||(t[22]=y(" Cerrar "))])])]),default:b(()=>{var d;return[o.producto?(u(),r("div",ce,[e("div",ge,[e("div",be,[t[13]||(t[13]=e("label",{class:"text-sm font-semibold text-gray-700"},"Nombre:",-1)),e("p",me,m(o.producto.nombre||"Sin nombre"),1)]),e("div",pe,[t[14]||(t[14]=e("label",{class:"text-sm font-semibold text-gray-700"},"Categor칤a:",-1)),e("p",fe,m(((d=o.producto.categoria)==null?void 0:d.nombre)||"Sin categor칤a"),1)]),e("div",ye,[t[15]||(t[15]=e("label",{class:"text-sm font-semibold text-gray-700"},"Precio:",-1)),e("p",ve,m(o.producto.precio?`$${Number(o.producto.precio).toFixed(2)}`:"No definido"),1)]),e("div",xe,[t[16]||(t[16]=e("label",{class:"text-sm font-semibold text-gray-700"},"Estado:",-1)),e("div",he,[e("span",{class:C("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+P(o.producto).class)},m(P(o.producto).label),3)])])]),e("div",ke,[e("div",we,[t[17]||(t[17]=e("label",{class:"text-sm font-semibold text-gray-700"},"Stock Actual:",-1)),e("p",Se,m(o.producto.stock_actual||0)+" unidades",1)]),e("div",Ce,[t[18]||(t[18]=e("label",{class:"text-sm font-semibold text-gray-700"},"Stock M칤nimo:",-1)),e("p",Ie,m(o.producto.stock_minimo||1)+" unidades",1)])]),e("div",Ve,[t[19]||(t[19]=e("label",{class:"text-sm font-semibold text-gray-700"},"Descripci칩n:",-1)),e("p",De,m(o.producto.descripcion||"Sin descripci칩n disponible"),1)]),o.producto.imagenes&&o.producto.imagenes.length>0?(u(),r("div",je,[t[20]||(t[20]=e("label",{class:"text-sm font-semibold text-gray-700 mb-3 block"},"Im치genes del Producto:",-1)),e("div",Ee,[(u(!0),r(k,null,M(o.producto.imagenes,(p,h)=>(u(),r("div",{key:h,class:"relative cursor-pointer group",onClick:_e=>L(h)},[e("img",{src:o.imagePath+(typeof p=="string"?p:p.nombre),alt:`Imagen ${h+1} del producto`,class:"w-full h-20 object-cover rounded-lg border group-hover:opacity-75 transition-opacity"},null,8,Pe),e("div",Ue,[n(l(c),{icon:l(N),class:"h-6 w-6 text-white"},null,8,["icon"])])],8,Be))),128))])])):(u(),r("div",Ae,t[21]||(t[21]=[e("p",{class:"text-gray-500"},"No hay im치genes disponibles para este producto.",-1)])))])):S("",!0)]}),_:1},8,["visible","style"]),n(l(x),{visible:D.value,"onUpdate:visible":t[2]||(t[2]=d=>D.value=d),header:"Galer칤a de Im치genes",modal:!0,closable:!1,style:v(o.dialogStyle),draggable:!1},{footer:b(()=>[e("div",Ge,[e("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:G},[n(l(c),{icon:l(w),class:"h-5"},null,8,["icon"]),t[25]||(t[25]=y(" Cerrar "))])])]),default:b(()=>[a.selectedImages.length?(u(),r("div",Ne,[e("div",Oe," Imagen "+m(g.value+1)+" de "+m(a.selectedImages.length),1),e("div",Te,[e("div",$e,[e("img",{src:a.selectedImages[g.value],alt:"Imagen del producto",class:"w-auto h-full max-h-96 object-contain rounded shadow"},null,8,ze)]),a.selectedImages.length>1?(u(),r(k,{key:0},[e("button",{onClick:q,class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-75 text-white p-2 rounded-full transition-all"},t[23]||(t[23]=[e("i",{class:"pi pi-chevron-left"},null,-1)])),e("button",{onClick:H,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-75 text-white p-2 rounded-full transition-all"},t[24]||(t[24]=[e("i",{class:"pi pi-chevron-right"},null,-1)]))],64)):S("",!0),a.selectedImages.length>1?(u(),r("div",Fe,[(u(!0),r(k,null,M(a.selectedImages,(d,p)=>(u(),r("button",{key:p,onClick:h=>J(p),class:C(["w-3 h-3 rounded-full transition-all",p===g.value?"bg-blue-500":"bg-gray-300 hover:bg-gray-400"])},null,10,Le))),128))])):S("",!0)])])):(u(),r("div",We,"No hay im치genes para este producto."))]),_:1},8,["visible","style"]),n(l(x),{visible:j.value,"onUpdate:visible":t[3]||(t[3]=d=>j.value=d),header:"Eliminar producto",modal:!0,style:v(o.dialogStyle),closable:!1,draggable:!1},{footer:b(()=>[e("div",Je,[e("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:K,disabled:o.isDeleting},[n(l(c),{icon:o.isDeleting?l(te):l(se),class:C(["h-5",{"animate-spin":o.isDeleting}])},null,8,["icon","class"]),o.isDeleting?(u(),r("span",Qe,"Eliminando...")):(u(),r("span",Xe,"Eliminar"))],8,Ke),e("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:X,disabled:o.isDeleting},[n(l(c),{icon:l(w),class:"h-5"},null,8,["icon"]),t[29]||(t[29]=e("span",null,"Cancelar",-1))],8,Re)])]),default:b(()=>[e("div",qe,[n(l(c),{icon:l(T),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e("div",He,[e("span",null,[t[26]||(t[26]=y("쮼st치s seguro de eliminar el producto: ")),e("b",null,m(o.producto.nombre),1),t[27]||(t[27]=y("?"))]),t[28]||(t[28]=e("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acci칩n es irreversible.",-1))])])]),_:1},8,["visible","style"]),n(l(x),{visible:E.value,"onUpdate:visible":t[4]||(t[4]=d=>E.value=d),header:"Cambios sin guardar",modal:!0,style:v(o.dialogStyle),closable:!1,draggable:!1},{footer:b(()=>[e("div",Ze,[e("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Q},[n(l(c),{icon:l(le),class:"h-4"},null,8,["icon"]),t[31]||(t[31]=e("span",null,"Salir sin guardar",-1))]),e("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:R},[n(l(c),{icon:l(O),class:"h-4"},null,8,["icon"]),t[32]||(t[32]=e("span",null,"Continuar",-1))])])]),default:b(()=>[e("div",Ye,[n(l(c),{icon:l(T),class:"h-8 w-8 text-red-500"},null,8,["icon"]),t[30]||(t[30]=e("div",{class:"flex flex-col"},[e("span",null,"춰Tienes informaci칩n sin guardar!"),e("span",{class:"text-red-600 text-sm font-medium mt-1"},"쮻eseas salir sin guardar?")],-1))])]),_:1},8,["visible","style"]),n(oe,{visible:B.value,"onUpdate:visible":t[5]||(t[5]=d=>B.value=d),producto:o.producto,"dialog-style":o.dialogStyle,onStockUpdated:Y},null,8,["visible","producto","dialog-style"])],64))}});export{at as default};
