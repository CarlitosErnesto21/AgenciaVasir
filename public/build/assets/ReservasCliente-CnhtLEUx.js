import{A as k}from"./AuthenticatedLayout-C17532f3.js";import{r as v,E as f,o as M,h as O,d as $,x as r,p as l,e,$ as t,a0 as V,t as d,a1 as S,q as j,y as z}from"./vendor-CLNWHdEK.js";import{A as B,F as U,a as Z,D as n,e as H,f as i,h as q}from"./ui-DPmvhuIJ.js";import{W as G,a5 as W,a as K,D as J,v as Q,a9 as X,t as Y,F as ee,l as se}from"./index-D3qnJ-6K.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const te={class:"container mx-auto px-4 py-6"},ae={class:"mb-6 bg-white rounded-lg shadow-md p-6"},le={class:"flex items-center justify-between"},oe={class:"flex items-center gap-4"},de={class:"flex items-center gap-2"},re={class:"text-lg font-semibold text-gray-800"},ne={class:"flex items-center gap-2"},ie={class:"text-sm text-gray-600"},ce={class:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-6"},ue={class:"bg-white rounded-lg shadow-md p-6"},me={class:"flex items-center"},xe={class:"p-3 rounded-full bg-blue-100"},ge={class:"ml-4"},fe={class:"text-2xl font-bold text-gray-900"},pe={class:"bg-white rounded-lg shadow-md p-6"},he={class:"flex items-center"},be={class:"p-3 rounded-full bg-green-100"},_e={class:"ml-4"},ve={class:"text-2xl font-bold text-gray-900"},we={class:"bg-white rounded-lg shadow-md p-6"},ye={class:"flex items-center"},Ae={class:"p-3 rounded-full bg-yellow-100"},Pe={class:"ml-4"},Ce={class:"text-2xl font-bold text-gray-900"},Re={class:"bg-white rounded-lg shadow-md p-6"},De={class:"flex items-center"},Ne={class:"p-3 rounded-full bg-green-100"},Ee={class:"ml-4"},Fe={class:"text-2xl font-bold text-gray-900"},Le={class:"bg-white rounded-lg shadow-md p-6"},Ie={class:"flex items-center"},Te={class:"p-3 rounded-full bg-blue-100"},ke={class:"ml-4"},Me={class:"text-2xl font-bold text-gray-900"},Oe={class:"bg-white rounded-lg shadow-md"},$e={class:"p-6"},Ve={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},Se={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},je={class:"flex items-center gap-3"},ze={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},Be={class:"space-y-3"},Ue={class:"font-medium text-blue-600"},Ze={class:"text-sm"},He={class:"text-sm"},qe={class:"text-sm"},Ge={class:"text-sm font-semibold text-green-600"},We={class:"text-sm"},Ke={class:"flex gap-2 justify-center"},Je=["onClick"],ts={__name:"ReservasCliente",props:{cliente:{type:Object,required:!0},reservas:{type:Array,default:()=>[]}},setup(m){const u=m,w=B(),h=v(10),C=v([5,10,20,50]),p=v({global:{value:null,matchMode:U.CONTAINS}}),b=f(()=>{let a=u.reservas;if(p.value.global.value){const s=p.value.global.value.toLowerCase();a=a.filter(c=>{var x,g;return c.id.toString().includes(s)||c.estado.toLowerCase().includes(s)||((g=(x=c.empleado)==null?void 0:x.user)==null?void 0:g.name)&&c.empleado.user.name.toLowerCase().includes(s)})}return a}),R=f(()=>u.reservas.reduce((a,s)=>a+parseFloat(s.total),0)),D=f(()=>u.reservas.filter(a=>a.estado==="PENDIENTE").length),N=f(()=>u.reservas.filter(a=>a.estado==="CONFIRMADA").length),E=f(()=>u.reservas.reduce((a,s)=>a+s.mayores_edad+(s.menores_edad||0),0)),F=a=>new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}),L=a=>{switch(a){case"CONFIRMADA":return"bg-green-100 text-green-800";case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"RECHAZADA":return"bg-red-100 text-red-800";case"REPROGRAMADA":return"bg-blue-100 text-blue-800";case"FINALIZADA":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},I=a=>{switch(a){case"CONFIRMADA":return"Confirmada";case"PENDIENTE":return"Pendiente";case"RECHAZADA":return"Rechazada";case"REPROGRAMADA":return"Reprogramada";case"FINALIZADA":return"Finalizada";default:return a}},T=a=>{w.add({severity:"info",summary:"Ver Detalles",detail:`Funcionalidad de detalles de reserva #${a.id} pendiente de implementar.`,life:4e3})};return M(()=>{w.add({severity:"success",summary:"Reservas cargadas",detail:`Se encontraron ${u.reservas.length} reservas para este cliente.`,life:3e3})}),(a,s)=>($(),O(k,null,{default:r(()=>{var c,x,g,y,A;return[l(t(V),{title:`Reservas de ${((x=(c=m.cliente)==null?void 0:c.user)==null?void 0:x.name)||"Cliente"}`},null,8,["title"]),l(t(Z),{class:"z-[9999]"}),e("div",te,[e("div",ae,[e("div",le,[e("div",null,[s[2]||(s[2]=e("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Reservas del Cliente",-1)),e("div",oe,[e("div",de,[l(t(n),{icon:t(G),class:"text-blue-500"},null,8,["icon"]),e("span",re,d(((y=(g=m.cliente)==null?void 0:g.user)==null?void 0:y.name)||"Cliente no encontrado"),1)]),e("div",ne,[l(t(n),{icon:t(W),class:"text-gray-500"},null,8,["icon"]),e("span",ie,d(((A=m.cliente)==null?void 0:A.numero_identificacion)||"N/A"),1)])])]),l(t(S),{href:a.route("clientes"),class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},{default:r(()=>[l(t(n),{icon:t(K),class:"h-4 w-4"},null,8,["icon"]),s[3]||(s[3]=j(" Volver a Clientes "))]),_:1,__:[3]},8,["href"])])]),e("div",ce,[e("div",ue,[e("div",me,[e("div",xe,[l(t(n),{icon:t(J),class:"h-6 w-6 text-blue-600"},null,8,["icon"])]),e("div",ge,[s[4]||(s[4]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Reservas",-1)),e("p",fe,d(m.reservas.length),1)])])]),e("div",pe,[e("div",he,[e("div",be,[l(t(n),{icon:t(Q),class:"h-6 w-6 text-green-600"},null,8,["icon"])]),e("div",_e,[s[5]||(s[5]=e("p",{class:"text-sm font-medium text-gray-500"},"Monto Total",-1)),e("p",ve,"$"+d(R.value.toFixed(2)),1)])])]),e("div",we,[e("div",ye,[e("div",Ae,[l(t(n),{icon:t(X),class:"h-6 w-6 text-yellow-600"},null,8,["icon"])]),e("div",Pe,[s[6]||(s[6]=e("p",{class:"text-sm font-medium text-gray-500"},"Pendientes",-1)),e("p",Ce,d(D.value),1)])])]),e("div",Re,[e("div",De,[e("div",Ne,[l(t(n),{icon:t(Y),class:"h-6 w-6 text-green-600"},null,8,["icon"])]),e("div",Ee,[s[7]||(s[7]=e("p",{class:"text-sm font-medium text-gray-500"},"Confirmadas",-1)),e("p",Fe,d(N.value),1)])])]),e("div",Le,[e("div",Ie,[e("div",Te,[l(t(n),{icon:t(ee),class:"h-6 w-6 text-blue-600"},null,8,["icon"])]),e("div",ke,[s[8]||(s[8]=e("p",{class:"text-sm font-medium text-gray-500"},"Personas Total",-1)),e("p",Me,d(E.value),1)])])])]),e("div",Oe,[e("div",$e,[s[10]||(s[10]=e("h3",{class:"text-2xl text-blue-600 font-bold mb-4"},"Historial de Reservas",-1)),l(t(H),{value:b.value,dataKey:"id",paginator:!0,rows:h.value,rowsPerPageOptions:C.value,rowsPerPage:h.value,"onUpdate:rowsPerPage":s[1]||(s[1]=o=>h.value=o),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} reservas",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-16 text-sm hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:r(()=>[e("div",Ve,[e("div",Se,[e("div",je,[s[9]||(s[9]=e("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[e("i",{class:"pi pi-filter text-blue-600 text-sm"}),e("span",null,"Filtros")],-1)),e("div",ze,d(b.value.length)+" resultado"+d(b.value.length!==1?"s":""),1)])]),e("div",Be,[e("div",null,[l(t(q),{modelValue:p.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=o=>p.value.global.value=o),placeholder:"ðŸ” Buscar reservas...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])])])])]),default:r(()=>[l(t(i),{field:"id",header:"ID",sortable:"",class:"w-16"},{body:r(o=>[e("span",Ue,"#"+d(o.data.id),1)]),_:1}),l(t(i),{field:"fecha",header:"Fecha",sortable:"",class:"w-28"},{body:r(o=>[e("span",Ze,d(F(o.data.fecha)),1)]),_:1}),l(t(i),{field:"estado",header:"Estado",class:"w-32"},{body:r(o=>[e("span",{class:z([L(o.data.estado),"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"])},d(I(o.data.estado)),3)]),_:1}),l(t(i),{field:"mayores_edad",header:"Adultos",class:"w-20"},{body:r(o=>[e("span",He,d(o.data.mayores_edad),1)]),_:1}),l(t(i),{field:"menores_edad",header:"NiÃ±os",class:"w-20"},{body:r(o=>[e("span",qe,d(o.data.menores_edad||0),1)]),_:1}),l(t(i),{field:"total",header:"Total",sortable:"",class:"w-24"},{body:r(o=>[e("span",Ge," $"+d(Number(o.data.total).toFixed(2)),1)]),_:1}),l(t(i),{field:"empleado.user.name",header:"Agente",class:"w-32 hidden lg:table-cell"},{body:r(o=>{var _,P;return[e("span",We,d(((P=(_=o.data.empleado)==null?void 0:_.user)==null?void 0:P.name)||"N/A"),1)]}),_:1}),l(t(i),{header:"Acciones",class:"w-24"},{body:r(o=>[e("div",Ke,[e("button",{class:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-md text-xs transition-all duration-200",onClick:_=>T(o.data),title:"Ver detalles"},[l(t(n),{icon:t(se),class:"h-3 w-3"},null,8,["icon"])],8,Je)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"])])])])]}),_:1}))}};export{ts as default};
