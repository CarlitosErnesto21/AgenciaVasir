import{r as d,E as Le,o as na,a5 as ra,N as R,w as H,n as he,k as V,c as p,d as f,p as i,$ as n,a0 as da,x as b,e as a,t as C,F as W,l as ae,q as w,A as ye,j as $,v as xe,D as we,a6 as _e,y as Ce}from"./vendor-BiysG-4G.js";import{A as ua}from"./AuthenticatedLayout-yva5xhgW.js";import{z as ca,F as re,A as g}from"./ui-CyD9Ijjf.js";import{a as le,b as Ae,j as va,c as ma,i as pa,d as B,k as Ee,e as Ne,g as je,h as fa}from"./index-DRTZt2OH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ga={class:"py-4 sm:py-6 px-4 sm:px-7 mt-6 sm:mt-10 mx-auto bg-red-50 shadow-md rounded-lg h-screen-full"},ba={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center mb-4 gap-4"},ha={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},ya={class:"flex items-center justify-between mb-3"},xa={class:"flex items-center gap-3"},wa={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},_a={class:"space-y-3"},Ca={class:"grid grid-cols-3 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-5 gap-3"},Da={class:"text-sm font-medium leading-relaxed"},ka={class:"text-sm leading-relaxed whitespace-normal ps-3 mb-0"},Pa={class:"text-sm leading-relaxed"},Ia={class:"text-sm leading-relaxed"},Va={class:"text-sm leading-relaxed"},Fa={class:"text-sm font-medium leading-relaxed"},qa={class:"flex gap-1 justify-center items-center w-64"},Sa=["onClick"],La=["onClick"],Aa=["onClick"],Ea={class:"space-y-4"},Na={class:"w-full flex flex-col"},ja={class:"flex items-center gap-4"},Ta={key:0,class:"text-red-500 ml-28"},Ua={class:"w-full flex flex-col"},Ra={class:"flex items-start gap-4"},$a={class:"flex-1"},Ma={class:"flex gap-2 mb-3"},za=["disabled"],Oa={class:"space-y-2 max-h-40 overflow-y-auto"},Ha={class:"flex-1"},Wa=["onClick"],Ba={key:0,class:"text-gray-500 text-sm mt-2"},Ka={class:"w-full flex flex-col"},Ga={class:"flex items-start gap-4"},Ja={class:"flex-1"},Qa={class:"flex gap-2 mb-3"},Xa=["disabled"],Ya={class:"space-y-2 max-h-40 overflow-y-auto"},Za={class:"flex-1"},el=["onClick"],al={key:0,class:"text-gray-500 text-sm mt-2"},ll={class:"w-full flex flex-col"},sl={class:"flex items-start gap-4"},tl={class:"flex-1"},ol={class:"flex gap-2 mb-3"},il=["disabled"],nl={class:"space-y-2 max-h-40 overflow-y-auto"},rl={class:"flex-1"},dl=["onClick"],ul={key:0,class:"text-gray-500 text-sm mt-2"},cl={class:"flex gap-4"},vl={class:"w-full flex flex-col"},ml={class:"flex items-center gap-4"},pl={key:0,class:"text-red-500 ml-28"},fl={class:"flex gap-4"},gl={class:"flex-1"},bl={class:"flex-1"},hl={class:"w-full flex flex-col"},yl={class:"flex items-center gap-4"},xl={key:0,class:"text-red-500 ml-28"},wl={class:"w-full flex flex-col"},_l={class:"flex items-center gap-4"},Cl={class:"flex-1"},Dl={key:0,class:"text-red-500 ml-28"},kl={class:"flex gap-4 flex-wrap mt-4 ml-28"},Pl=["src"],Il=["onClick"],Vl={class:"flex justify-center gap-4 w-full"},Fl=["disabled"],ql=["disabled"],Sl={key:0},Ll={key:1},Al={class:"flex items-center gap-3"},El={class:"flex flex-col"},Nl={class:"flex justify-center gap-4 w-full"},jl=["disabled"],Tl=["disabled"],Ul={key:0},Rl={key:1},$l={class:"flex items-center gap-3"},Ml={class:"flex justify-center gap-3 w-full"},zl={key:0,class:"flex flex-col items-center justify-center"},Ol={class:"flex justify-center items-center w-full h-96"},Hl=["src"],Wl={key:1,class:"text-center text-gray-500 py-8"},Bl={class:"flex justify-center w-full"},se="/api/paquetes",Zl={__name:"GestionPaquetes",setup(Kl){const F=d([]),q=d(""),De=()=>{q.value.trim()&&(F.value.push(q.value.trim()),q.value="")},Te=l=>{F.value.splice(l,1)},S=d([]),L=d(""),ke=()=>{L.value.trim()&&(S.value.push(L.value.trim()),L.value="")},Ue=l=>{S.value.splice(l,1)},c=ca(),A=d(!1),E=d(!1),de=d(typeof window<"u"?window.innerWidth:1024),ue=Le(()=>de.value<640?{width:"95vw",maxWidth:"380px"}:de.value<768?{width:"500px"}:{width:"600px"}),Pe=()=>{typeof window<"u"&&(de.value=window.innerWidth)},ce=d([]),s=d({id:null,nombre:"",incluye:"",condiciones:"",recordatorio:"",precio:null,pais_id:null,provincia_id:null,fecha_salida:null,fecha_regreso:null,imagenes:[]}),D=d([]),N=d(""),x=d([]),K=d([]),G=d([]),j=d(!1),J=d(!1),Q=d(!1),M=d(!1),z=d(!1),T=d(null),y=d({global:{value:null,matchMode:re.CONTAINS},pais_id:{value:null,matchMode:re.EQUALS},provincia_id:{value:null,matchMode:re.EQUALS},fecha_salida:{value:null,matchMode:re.DATE_IS}}),X=d(null),Y=d(null),k=d(null),P=d(null),ve=d(10),Re=d([5,10,20,50]),te=d("Guardar"),O=d([]),I=d([]),oe=d(!1),Z=d([]),Ie=d(0),$e=d(null),me=Le(()=>{let l=ce.value.slice().sort((e,r)=>{const o=new Date(e.created_at||e.fecha_salida||0);return new Date(r.created_at||r.fecha_salida||0)-o});if(y.value.global.value){const e=y.value.global.value.toLowerCase();l=l.filter(r=>{var o,h,u,U;return((o=r.nombre)==null?void 0:o.toLowerCase().includes(e))||((h=r.incluye)==null?void 0:h.toLowerCase().includes(e))||((u=r.condiciones)==null?void 0:u.toLowerCase().includes(e))||((U=r.recordatorio)==null?void 0:U.toLowerCase().includes(e))})}return y.value.pais_id.value&&(l=l.filter(e=>e.pais_id==y.value.pais_id.value)),y.value.provincia_id.value&&(l=l.filter(e=>e.provincia_id==y.value.provincia_id.value)),(k.value||P.value)&&(l=l.filter(e=>{if(!e.fecha_salida)return!1;const r=new Date(e.fecha_salida);let o=!0;if(k.value){const h=new Date(k.value);o=o&&r>=h}if(P.value){const h=new Date(P.value);h.setHours(23,59,59,999),o=o&&r<=h}return o})),l}),Ve=()=>{const l=new Date;return l.setHours(l.getHours()+1),l},Me=()=>{if(!s.value.fecha_salida)return Ve();const l=new Date(s.value.fecha_salida);return l.setHours(l.getHours()+1),l},ze=()=>{if(!s.value.fecha_regreso)return null;const l=new Date(s.value.fecha_regreso);return l.setHours(l.getHours()-1),l},Oe=()=>{if(!s.value.fecha_salida)return!0;const l=new Date,e=new Date(s.value.fecha_salida),r=new Date(l.getTime()+60*60*1e3);return!(e<r||s.value.fecha_regreso&&(new Date(s.value.fecha_regreso)-e)/(1e3*60*60)<1)},He=()=>{if(!s.value.fecha_regreso)return!0;const l=new Date(s.value.fecha_regreso);if(s.value.fecha_salida){const e=new Date(s.value.fecha_salida);if((l-e)/(1e3*60*60)<1)return!1}return!0},We=()=>{if(k.value&&P.value){const l=new Date(k.value),e=new Date(P.value);l>e&&(P.value=null,c.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'hasta' se limpió porque era anterior a la fecha 'desde'.",life:3e3}))}},Be=()=>{if(k.value&&P.value){const l=new Date(k.value);new Date(P.value)<l&&(k.value=null,c.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'desde' se limpió porque era posterior a la fecha 'hasta'.",life:3e3}))}};na(async()=>{X.value=null,Y.value=null,k.value=null,P.value=null,y.value.global.value=null,y.value.pais_id.value=null,y.value.provincia_id.value=null,y.value.fecha_salida.value=null,await Ke(),await Ge(),typeof window<"u"&&window.addEventListener("resize",Pe)}),ra(()=>{typeof window<"u"&&window.removeEventListener("resize",Pe)});const Fe=async()=>{const{data:l}=await R.get(se),e=Array.isArray(l)?l:l.data||l.paquetes||[];ce.value=e.map(r=>({...r,pais:r.pais||(r.pais_id?O.value.find(o=>o.id===r.pais_id):null),provincia:r.provincia||(r.provincia_id?I.value.find(o=>o.id===r.provincia_id):null),imagenes:(r.imagenes||[]).map(o=>typeof o=="string"?o:o.nombre)}))},Ke=async()=>{c.add({severity:"info",summary:"Cargando paquetes...",life:2e3});try{const{data:l}=await R.get(se),e=Array.isArray(l)?l:l.data||l.paquetes||[];ce.value=e.map(r=>({...r,pais:r.pais||(r.pais_id?O.value.find(o=>o.id===r.pais_id):null),provincia:r.provincia||(r.provincia_id?I.value.find(o=>o.id===r.provincia_id):null),imagenes:(r.imagenes||[]).map(o=>typeof o=="string"?o:o.nombre)})),c.add({severity:"success",summary:"Paquetes cargados",life:2e3})}catch{c.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los paquetes.",life:4e3})}},Ge=async()=>{const{data:l}=await R.get("/api/paises");O.value=l},ee=async l=>{const{data:e}=await R.get(`/api/provincias?pais_id=${l}`);I.value=e};H(()=>s.value.pais_id,l=>{l?(I.value=[],s.value.provincia_id=null,ee(l)):(I.value=[],s.value.provincia_id=null)});function pe(){s.value={id:null,nombre:"",incluye:"",condiciones:"",recordatorio:"",precio:null,pais_id:null,provincia_id:null,fecha_salida:null,fecha_regreso:null,imagenes:[]},x.value=[],K.value=[],G.value=[],D.value=[],N.value="",F.value=[],q.value="",S.value=[],L.value="",M.value=!1}function Je(){pe(),te.value="Guardar",s.value.pais_id?ee(s.value.pais_id):O.value.length>0?(s.value.pais_id=O.value[0].id,ee(s.value.pais_id)):I.value=[],j.value=!0,he(()=>{T.value={...s.value,incluye_lista:[...D.value],imagenes_originales:[...x.value]},z.value=!1})}function Qe(l){pe(),s.value={...l},D.value=ie(l.incluye),F.value=ie(l.condiciones),S.value=ie(l.recordatorio),x.value=(l.imagenes||[]).map(e=>typeof e=="string"?e:e.nombre),te.value="Actualizar",l.pais_id?ee(l.pais_id).then(()=>{s.value.provincia_id=l.provincia_id}):I.value=[],j.value=!0,he(()=>{T.value={...s.value,incluye_lista:[...D.value],imagenes_originales:[...x.value]},z.value=!1})}const Xe=()=>{z.value?Q.value=!0:qe()},qe=()=>{j.value=!1,Q.value=!1,z.value=!1,T.value=null,pe()},Ye=()=>{Q.value=!1},Se=()=>{N.value.trim()&&(D.value.push(N.value.trim()),N.value="")},Ze=l=>{D.value.splice(l,1)},ie=l=>l?l.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],fe=l=>l.join("|"),ea=l=>{const e=l.target?l.target.files:l.files,r=2*1024*1024;for(const o of e)if(o instanceof File){if(o.size>r){c.add({severity:"warn",summary:"Archivo no válido",detail:"Máximo 2MB por imagen.",life:5e3});continue}if(!o.type.startsWith("image/")){c.add({severity:"warn",summary:"Formato no válido",detail:"Solo imágenes válidas.",life:4e3});continue}K.value.push(o);const h=new FileReader;h.onload=u=>x.value.push(u.target.result),h.readAsDataURL(o)}},aa=l=>{const e=x.value[l];typeof e=="string"&&e.startsWith("data:image")?(x.value.splice(l,1),K.value.splice(l,1)):(G.value.push(e),x.value.splice(l,1))};function la(l){Z.value=(l||[]).map(e=>"/storage/"+(typeof e=="string"?e:e.nombre)),oe.value=!0}const sa=async()=>{if(M.value=!0,!s.value.nombre||s.value.nombre.length<6||s.value.nombre.length>100){c.add({severity:"warn",summary:"Campos requeridos",detail:"El nombre debe tener entre 6 y 100 caracteres.",life:4e3});return}if(!s.value.fecha_salida||!s.value.fecha_regreso){c.add({severity:"warn",summary:"Campos requeridos",detail:"Debes ingresar las fechas de salida y regreso.",life:4e3});return}if(!Oe()||!He()){c.add({severity:"warn",summary:"Verifica las fechas",detail:"La fecha de salida debe ser futura y la de regreso posterior a la salida (mínimo 1 hora).",life:4e3});return}if(!s.value.precio||s.value.precio<=0||s.value.precio>999999.99){c.add({severity:"warn",summary:"Precio inválido",detail:"El precio debe ser mayor a 0 y menor o igual a 9999.99.",life:4e3});return}const l=D.value.filter(m=>m.trim()!=="");if(l.length===0){c.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos un elemento en Incluye.",life:4e3});return}const e=F.value.filter(m=>m.trim()!=="");if(e.length===0){c.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos una condición válida.",life:4e3});return}const r=S.value.filter(m=>m.trim()!=="");if(r.length===0){c.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos un recordatorio válido.",life:4e3});return}if(x.value.length===0){c.add({severity:"warn",summary:"Imágenes requeridas",detail:"Debes subir al menos una imagen.",life:4e3});return}const o=2*1024*1024;if(K.value.filter(m=>m.size>o).length>0){c.add({severity:"warn",summary:"Imágenes muy grandes",detail:"Máximo 2MB por imagen.",life:4e3});return}let u=new FormData;u.append("nombre",s.value.nombre||""),u.append("incluye",fe(l)),u.append("condiciones",fe(e)),u.append("recordatorio",fe(r)),u.append("precio",s.value.precio||"");let U=I.value.find(m=>m.id===s.value.provincia_id),ne=U?U.pais_id:"";u.append("pais_id",ne),u.append("provincia_id",s.value.provincia_id||""),s.value.fecha_salida instanceof Date?u.append("fecha_salida",s.value.fecha_salida.toISOString().slice(0,19).replace("T"," ")):s.value.fecha_salida&&u.append("fecha_salida",s.value.fecha_salida),s.value.fecha_regreso instanceof Date?u.append("fecha_regreso",s.value.fecha_regreso.toISOString().slice(0,19).replace("T"," ")):s.value.fecha_regreso&&u.append("fecha_regreso",s.value.fecha_regreso),K.value.forEach(m=>u.append("imagenes[]",m)),G.value.forEach(m=>{const _=m.includes("/")?m.split("/").pop():m;u.append("removed_images[]",_)}),A.value=!0;try{s.value.id?(u.append("_method","PUT"),await R.post(`${se}/${s.value.id}`,u),c.add({severity:"success",summary:"Actualizado",detail:"Paquete actualizado",life:4e3})):(await R.post(se,u),c.add({severity:"success",summary:"Creado",detail:"Paquete creado",life:4e3})),j.value=!1,z.value=!1,await Fe()}catch(m){if(m.response&&m.response.status===422&&m.response.data){const _=m.response.data.errors||m.response.data;console.error("Validation errors:",_),typeof _=="object"?Object.keys(_).forEach(ge=>{const t=_[ge];Array.isArray(t)?t.forEach(v=>c.add({severity:"warn",summary:"Validación",detail:v,life:6e3})):typeof t=="string"&&c.add({severity:"warn",summary:"Validación",detail:t,life:6e3})}):typeof _=="string"&&c.add({severity:"warn",summary:"Validación",detail:_,life:6e3})}else console.error(m),c.add({severity:"error",summary:"Error",detail:"Revisa los campos e intenta nuevamente.",life:5e3})}finally{A.value=!1}},ta=l=>{s.value={...l},J.value=!0},oa=async()=>{E.value=!0;try{await R.delete(`${se}/${s.value.id}`),await Fe(),J.value=!1,c.add({severity:"success",summary:"Eliminado",detail:"Paquete eliminado",life:4e3})}catch(l){if(l.response&&l.response.status===422&&l.response.data){const e=l.response.data.errors||l.response.data;console.error("Delete validation errors:",e),typeof e=="object"?Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(h=>c.add({severity:"warn",summary:"Validación",detail:h,life:6e3})):typeof o=="string"&&c.add({severity:"warn",summary:"Validación",detail:o,life:6e3})}):typeof e=="string"&&c.add({severity:"warn",summary:"Validación",detail:e,life:6e3})}else console.error(l),c.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el paquete.",life:5e3})}finally{E.value=!1}},ia=()=>{X.value=null,Y.value=null,k.value=null,P.value=null,y.value.global.value=null,y.value.pais_id.value=null,y.value.provincia_id.value=null,y.value.fecha_salida.value=null,c.add({severity:"info",summary:"Filtros limpiados",detail:"Se han removido todos los filtros aplicados.",life:3e3})};return H(()=>X.value,l=>{y.value.pais_id.value=l,l?ee(l):I.value=[]}),H(()=>Y.value,l=>{y.value.provincia_id.value=l}),H(()=>k.value,We),H(()=>P.value,Be),H([s,D,x,G],()=>{T.value&&j.value&&he(()=>{const l={...s.value,incluye_lista:[...D.value],imagenes_actuales:[...x.value]},e=JSON.stringify(l)!==JSON.stringify({...T.value,imagenes_actuales:T.value.imagenes_originales})||G.value.length>0,r=!T.value.id,o=s.value.nombre||s.value.destino||s.value.fecha_salida||s.value.fecha_regreso||s.value.precio||s.value.pais_id||s.value.provincia_id||D.value.length>0||x.value.length>0;z.value=e||r&&o})},{deep:!0,flush:"post"}),(l,e)=>{const r=V("Toast"),o=V("InputText"),h=V("Select"),u=V("Column"),U=V("DataTable"),ne=V("DatePicker"),m=V("InputNumber"),_=V("Dialog"),ge=V("Carousel");return f(),p(W,null,[i(n(da),{title:"Paquetes"}),i(ua,null,{default:b(()=>[i(r,{class:"z-[9999]"}),a("div",ga,[a("div",ba,[e[23]||(e[23]=a("h3",{class:"text-lg sm:text-2xl text-blue-600 font-bold"},"Catálogo de Paquetes",-1)),a("button",{class:"bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:Je},[i(n(g),{icon:n(le),class:"h-4 w-4 text-white"},null,8,["icon"]),e[22]||(e[22]=a("span",null," Agregar paquete",-1))])]),i(U,{value:me.value,dataKey:"id",paginator:!0,rows:ve.value,rowsPerPageOptions:Re.value,rowsPerPage:ve.value,"onUpdate:rowsPerPage":e[3]||(e[3]=t=>ve.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} paquetes",class:"overflow-x-auto max-w-full",style:{display:"block","max-width":"84vw"},responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:b(()=>[a("div",ha,[a("div",ya,[a("div",xa,[e[24]||(e[24]=a("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[a("i",{class:"pi pi-filter text-blue-600 text-sm"}),a("span",null,"Filtros")],-1)),a("div",wa,C(me.value.length)+" resultado"+C(me.value.length!==1?"s":""),1)]),a("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md",onClick:ia},[i(n(g),{icon:n(pa),class:"h-4 w-4 text-white"},null,8,["icon"]),e[25]||(e[25]=a("span",null," Limpiar filtros",-1))])]),a("div",_a,[a("div",null,[i(o,{modelValue:y.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=t=>y.value.global.value=t),placeholder:"🔍 Buscar paquetes...",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),a("div",Ca,[a("div",null,[i(h,{modelValue:X.value,"onUpdate:modelValue":e[1]||(e[1]=t=>X.value=t),options:O.value,optionLabel:"nombre",optionValue:"id",placeholder:"País",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},clearable:!0},null,8,["modelValue","options"])]),a("div",null,[i(h,{modelValue:Y.value,"onUpdate:modelValue":e[2]||(e[2]=t=>Y.value=t),options:I.value,optionLabel:"nombre",optionValue:"id",placeholder:"Provincia",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},clearable:!0},null,8,["modelValue","options"])])])])])]),default:b(()=>[i(u,{field:"nombre",header:"Nombre",sortable:"",class:"w-44 min-w-44"},{body:b(t=>[a("div",Da,C(t.data.nombre),1)]),_:1}),i(u,{field:"incluye",header:"Incluye",class:"w-40 min-w-40"},{body:b(t=>[a("ul",ka,[(f(!0),p(W,null,ae(ie(t.data.incluye),v=>(f(),p("li",{key:v},C(v),1))),128))])]),_:1}),i(u,{field:"pais.nombre",header:"País",class:"w-32 min-w-32"},{body:b(t=>{var v;return[a("div",Pa,C((v=t.data.pais)==null?void 0:v.nombre),1)]}),_:1}),i(u,{field:"provincia.nombre",header:"Provincia",class:"w-32 min-w-32"},{body:b(t=>{var v;return[a("div",Ia,C((v=t.data.provincia)==null?void 0:v.nombre),1)]}),_:1}),i(u,{field:"fecha_salida",header:"Fecha salida",class:"w-36 min-w-36"},{body:b(t=>[a("div",Va,C(t.data.fecha_salida),1)]),_:1}),i(u,{field:"precio",header:"Precio",class:"w-24 min-w-24"},{body:b(t=>[a("div",Fa,C(isNaN(Number(t.data.precio))?"":`$${Number(t.data.precio).toFixed(2)}`),1)]),_:1}),i(u,{exportable:!1,class:"w-56 min-w-56"},{header:b(()=>e[26]||(e[26]=[a("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:b(t=>[a("div",qa,[a("button",{class:"bg-orange-200/30 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:v=>Qe(t.data)},[i(n(g),{icon:n(Ae),class:"h-4 w-4 text-orange-600"},null,8,["icon"]),e[27]||(e[27]=w("  Editar "))],8,Sa),a("button",{class:"bg-blue-200/50 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:v=>la(t.data.imagenes)},[i(n(g),{icon:n(va),class:"h-4 w-4 text-blue-600"},null,8,["icon"]),e[28]||(e[28]=w("  Imgs "))],8,La),a("button",{class:"bg-red-200/30 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:v=>ta(t.data)},[i(n(g),{icon:n(ma),class:"h-4 w-4 text-red-600"},null,8,["icon"]),e[29]||(e[29]=w("  Eliminar "))],8,Aa)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"]),i(_,{visible:j.value,"onUpdate:visible":e[15]||(e[15]=t=>j.value=t),header:te.value+" Paquete",modal:!0,style:ye(ue.value),closable:!1},{footer:b(()=>[a("div",Vl,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Xe,disabled:A.value},[i(n(g),{icon:n(B),class:"h-5 text-green-600"},null,8,["icon"]),e[41]||(e[41]=w("Cancelar "))],8,Fl),a("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:sa,disabled:A.value},[i(n(g),{icon:A.value?n(Ee):n(Ne),class:Ce(["h-5 text-white",{"animate-spin":A.value}])},null,8,["icon","class"]),A.value?(f(),p("span",Ll,"Procesando...")):(f(),p("span",Sl,C(te.value),1))],8,ql)])]),default:b(()=>[a("div",Ea,[a("div",Na,[a("div",ja,[e[30]||(e[30]=a("label",{for:"nombre",class:"w-24 flex items-center gap-1"},[w("Nombre: "),a("span",{class:"text-red-500 font-bold"},"*")],-1)),i(o,{modelValue:s.value.nombre,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.nombre=t),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:100,class:"flex-1"},null,8,["modelValue"])]),s.value.nombre&&s.value.nombre.length<6?(f(),p("small",Ta," El nombre debe tener al menos 6 caracteres. ")):$("",!0)]),a("div",Ua,[a("div",Ra,[e[31]||(e[31]=a("label",{class:"w-24 flex items-center gap-1 mt-2"},"Incluye:",-1)),a("div",$a,[a("div",Ma,[xe(a("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>N.value=t),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:we(Se,["enter"])},null,544),[[_e,N.value]]),a("button",{type:"button",onClick:Se,disabled:!N.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[i(n(g),{icon:n(le),class:"h-5"},null,8,["icon"])],8,za)]),a("div",Oa,[(f(!0),p(W,null,ae(D.value,(t,v)=>(f(),p("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[a("span",Ha,C(t),1),a("button",{type:"button",onClick:be=>Ze(v),class:"text-red-500 hover:text-red-700 p-1"},[i(n(g),{icon:n(B),class:"h-5"},null,8,["icon"])],8,Wa)]))),128))]),D.value.length===0?(f(),p("div",Ba,"Sin elementos agregados.")):$("",!0)])])]),a("div",Ka,[a("div",Ga,[e[32]||(e[32]=a("label",{class:"w-24 flex items-center gap-1 mt-2"},[w("Condiciones:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",Ja,[a("div",Qa,[xe(a("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>q.value=t),type:"text",placeholder:"Agregar condición...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:we(De,["enter"])},null,544),[[_e,q.value]]),a("button",{type:"button",onClick:De,disabled:!q.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[i(n(g),{icon:n(le),class:"h-5"},null,8,["icon"])],8,Xa)]),a("div",Ya,[(f(!0),p(W,null,ae(F.value,(t,v)=>(f(),p("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[a("span",Za,C(t),1),a("button",{type:"button",onClick:be=>Te(v),class:"text-red-500 hover:text-red-700 p-1"},[i(n(g),{icon:n(B),class:"h-5"},null,8,["icon"])],8,el)]))),128))]),F.value.length===0?(f(),p("div",al,"Sin condiciones agregadas.")):$("",!0)])])]),a("div",ll,[a("div",sl,[e[33]||(e[33]=a("label",{class:"w-24 flex items-center gap-1 mt-2"},[w("Recordatorio:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",tl,[a("div",ol,[xe(a("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>L.value=t),type:"text",placeholder:"Agregar recordatorio...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:we(ke,["enter"])},null,544),[[_e,L.value]]),a("button",{type:"button",onClick:ke,disabled:!L.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[i(n(g),{icon:n(le),class:"h-5"},null,8,["icon"])],8,il)]),a("div",nl,[(f(!0),p(W,null,ae(S.value,(t,v)=>(f(),p("div",{key:v,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[a("span",rl,C(t),1),a("button",{type:"button",onClick:be=>Ue(v),class:"text-red-500 hover:text-red-700 p-1"},[i(n(g),{icon:n(B),class:"h-5"},null,8,["icon"])],8,dl)]))),128))]),S.value.length===0?(f(),p("div",ul,"Sin recordatorios agregados.")):$("",!0)])])]),a("div",cl,[a("div",vl,[a("div",ml,[e[34]||(e[34]=a("label",{for:"provincia",class:"w-24"},[w("Provincia:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),i(h,{modelValue:s.value.provincia_id,"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.provincia_id=t),options:I.value,optionLabel:"nombre",optionValue:"id",id:"provincia",filter:!0,filterPlaceholder:"Buscar provincia...",showClear:!0,class:Ce([{"p-invalid":M.value&&!s.value.provincia_id},"flex-1"]),placeholder:"Selecciona una provincia",onInput:e[9]||(e[9]=t=>l.onInputDropdown&&l.onInputDropdown("provincia",t)),onFilter:e[10]||(e[10]=t=>l.onFilterDropdown&&l.onFilterDropdown("provincia",t))},null,8,["modelValue","options","class"])]),M.value&&!s.value.provincia_id?(f(),p("small",pl,"La provincia es obligatoria.")):$("",!0)])]),a("div",fl,[a("div",gl,[e[35]||(e[35]=a("label",{class:"flex items-center gap-1 mb-2"},[w("Fecha salida:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),i(ne,{modelValue:s.value.fecha_salida,"onUpdate:modelValue":e[11]||(e[11]=t=>s.value.fecha_salida=t),class:"w-full",minDate:Ve(),maxDate:ze(),dateFormat:"yy-mm-dd",showIcon:"",iconDisplay:"input",placeholder:"Selecciona fecha de salida"},null,8,["modelValue","minDate","maxDate"])]),a("div",bl,[e[36]||(e[36]=a("label",{class:"flex items-center gap-1 mb-2"},[w("Fecha regreso:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),i(ne,{modelValue:s.value.fecha_regreso,"onUpdate:modelValue":e[12]||(e[12]=t=>s.value.fecha_regreso=t),class:"w-full",minDate:Me(),dateFormat:"yy-mm-dd",showIcon:"",iconDisplay:"input",placeholder:"Selecciona fecha de regreso"},null,8,["modelValue","minDate"])])]),a("div",hl,[a("div",yl,[e[37]||(e[37]=a("label",{class:"w-24 flex items-center gap-1"},[w("Precio:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),i(m,{modelValue:s.value.precio,"onUpdate:modelValue":e[13]||(e[13]=t=>s.value.precio=t),mode:"currency",currency:"USD",locale:"en-US",min:.01,max:999999.99,maxFractionDigits:2,minFractionDigits:2,class:"flex-1",placeholder:"$0.00"},null,8,["modelValue"])]),M.value&&(s.value.precio==null||s.value.precio<=0||s.value.precio>999999.99)?(f(),p("small",xl,"El precio es obligatorio, debe ser mayor a 0 y menor o igual a 99999999.99.")):$("",!0)]),a("div",wl,[a("div",_l,[e[39]||(e[39]=a("label",{class:"w-24 flex items-center gap-1"},[w("Imágenes:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",Cl,[a("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:ea,class:"hidden",ref_key:"fileInput",ref:$e},null,544),a("button",{type:"button",class:"bg-white hover:bg-red-50 text-red-500 hover:text-red-600 border border-red-500 hover:border-red-600 px-6 py-2 rounded-md flex items-center gap-2",onClick:e[14]||(e[14]=t=>l.$refs.fileInput.click())},[i(n(g),{icon:n(le),class:"h-4"},null,8,["icon"]),e[38]||(e[38]=a("span",null,"Subir imágenes",-1))])])]),M.value&&x.value.length===0?(f(),p("small",Dl,"Las imágenes son obligatorias (al menos una).")):$("",!0)]),a("div",kl,[(f(!0),p(W,null,ae(x.value,(t,v)=>(f(),p("div",{key:v,class:"relative w-32 h-32"},[a("img",{src:t.startsWith("data:image")?t:"/storage/"+t,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,Pl),a("button",{onClick:be=>aa(v),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow",style:{transform:"translate(50%, -50%)"}},e[40]||(e[40]=[a("i",{class:"pi pi-times text-xs"},null,-1)]),8,Il)]))),128))])])]),_:1},8,["visible","header","style"]),i(_,{visible:J.value,"onUpdate:visible":e[17]||(e[17]=t=>J.value=t),header:"Eliminar paquete",modal:!0,style:ye(ue.value),closable:!1},{footer:b(()=>[a("div",Nl,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[16]||(e[16]=t=>J.value=!1),disabled:E.value},[i(n(g),{icon:n(B),class:"h-5"},null,8,["icon"]),e[45]||(e[45]=a("span",null,"No",-1))],8,jl),a("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:oa,disabled:E.value},[i(n(g),{icon:E.value?n(Ee):n(Ne),class:Ce(["h-5",{"animate-spin":E.value}])},null,8,["icon","class"]),E.value?(f(),p("span",Rl,"Eliminando...")):(f(),p("span",Ul,"Sí"))],8,Tl)])]),default:b(()=>[a("div",Al,[i(n(g),{icon:n(je),class:"h-8 w-8 text-red-500"},null,8,["icon"]),a("div",El,[a("span",null,[e[42]||(e[42]=w("¿Estás seguro de eliminar el paquete: ")),a("b",null,C(s.value.nombre),1),e[43]||(e[43]=w("?"))]),e[44]||(e[44]=a("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acción es irreversible.",-1))])])]),_:1},8,["visible","style"]),i(_,{visible:Q.value,"onUpdate:visible":e[18]||(e[18]=t=>Q.value=t),header:"Cambios sin guardar",modal:!0,style:ye(ue.value),closable:!1},{footer:b(()=>[a("div",Ml,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Ye},[i(n(g),{icon:n(Ae),class:"h-4"},null,8,["icon"]),e[47]||(e[47]=a("span",null,"Continuar",-1))]),a("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:qe},[i(n(g),{icon:n(fa),class:"h-4"},null,8,["icon"]),e[48]||(e[48]=a("span",null,"Salir sin guardar",-1))])])]),default:b(()=>[a("div",$l,[i(n(g),{icon:n(je),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e[46]||(e[46]=a("div",{class:"flex flex-col"},[a("span",null,"¡Tienes información sin guardar!"),a("span",{class:"text-red-600 text-sm font-medium mt-1"},"¿Deseas salir sin guardar?")],-1))])]),_:1},8,["visible","style"]),i(_,{visible:oe.value,"onUpdate:visible":e[21]||(e[21]=t=>oe.value=t),header:"Imágenes del paquete",modal:!0,closable:!1,style:{width:"700px"}},{footer:b(()=>[a("div",Bl,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[20]||(e[20]=t=>oe.value=!1)},[i(n(g),{icon:n(B),class:"h-5"},null,8,["icon"]),e[49]||(e[49]=a("span",null,"Cerrar",-1))])])]),default:b(()=>[Z.value.length?(f(),p("div",zl,[i(ge,{value:Z.value,numVisible:1,numScroll:1,circular:!0,page:Ie.value,"onUpdate:page":e[19]||(e[19]=t=>Ie.value=t),class:"w-full",showIndicators:Z.value.length>1,showNavigators:Z.value.length>1,style:{"max-width":"610px"}},{item:b(t=>[a("div",Ol,[a("img",{src:t.data,alt:"Imagen paquete",class:"w-auto h-full max-h-96 object-contain rounded shadow"},null,8,Hl)])]),_:1},8,["value","page","showIndicators","showNavigators"])])):(f(),p("div",Wl,"No hay imágenes para este paquete."))]),_:1},8,["visible"])])]),_:1})],64)}}};export{Zl as default};
