import{r as i,E as R,w as Pe,n as De,o as Ga,a6 as Ha,N as X,k as ee,h as Ne,d as c,x as E,p as d,e as t,$ as u,a0 as Ka,q as V,a1 as Wa,y as C,t as p,j as y,v as me,c as m,F as ae,l as le,a7 as Le,A as Ja,D as sa,a9 as oa}from"./vendor-CqKcGHPa.js";import{A as Qa}from"./AuthenticatedLayout-TqVZ00Ka.js";import{z as Za,F as ve,A as k,q as te}from"./ui-CVJOYm3g.js";import{j as Ya,f as se,D as Xa,b as Ce,t as el,c as al,d as ll,g as Me,e as tl}from"./index-CQ5n6JFv.js";import sl from"./Modales-CqrVWaJx.js";import ol from"./CambiarEstado-Ch1zywTI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const nl={class:"container mx-auto px-4 py-6"},rl={class:"bg-white rounded-lg shadow-md"},il={class:"flex flex-col sm:flex-row lg:justify-between lg:items-center mb-4 gap-4 p-6"},ul={class:"w-full"},dl={class:"text-blue-600 text-xs text-center sm:text-start mt-1 font-medium flex items-center gap-1 justify-center sm:justify-start"},cl={class:"flex items-center gap-2 w-full justify-center lg:w-auto lg:justify-end"},ml={class:"block sm:hidden"},vl={class:"hidden sm:block"},pl={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},fl={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},gl={class:"flex items-center gap-3"},bl={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},hl=["disabled"],yl=["disabled"],xl={class:"space-y-3"},_l={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-5 gap-3"},wl=["value"],Dl=["value"],Cl={class:"col-span-2 sm:col-span-1"},kl=["value"],Sl={class:"col-span-2 sm:col-span-1 md:col-span-1 lg:col-span-1 hidden sm:block"},Il={class:"col-span-2 sm:col-span-1 md:col-span-1 lg:col-span-1 hidden sm:block"},Tl={class:"flex w-80 sm:hidden"},El=["title"],Vl=["title"],Al={class:"text-sm leading-relaxed"},Fl={class:"text-sm font-medium leading-relaxed"},Pl={class:"flex gap-2 justify-center items-center"},Nl=["onClick"],Ll=["onClick"],Ml=["onClick"],Ul={class:"space-y-4"},$l={class:"w-full flex flex-col"},Ol={class:"flex items-center gap-4"},Rl={key:0,class:"text-red-500 ml-28"},ql={key:1,class:"text-orange-500 ml-28"},zl={key:2,class:"text-red-500 ml-28"},Bl={class:"w-full flex flex-col"},jl={class:"flex items-start gap-4"},Gl={class:"flex w-full flex-col"},Hl={class:"flex gap-2 mb-3"},Kl=["disabled"],Wl={class:"space-y-2 max-h-40 overflow-y-auto"},Jl={class:"flex-1"},Ql=["onClick"],Zl={key:0,class:"text-gray-500 text-sm mt-2"},Yl={class:"w-full flex flex-col"},Xl={class:"flex items-start gap-4"},et={class:"flex w-full flex-col"},at={class:"flex gap-2 mb-3"},lt=["disabled"],tt={key:0,class:"space-y-2 max-h-40 overflow-y-auto"},st={class:"flex-1"},ot=["onClick"],nt={key:1,class:"text-gray-500 text-sm mt-2"},rt={class:"w-full"},it={class:"flex items-start gap-4"},ut={key:0,class:"text-red-500 ml-28"},dt={key:1,class:"text-orange-500 ml-28"},ct={key:2,class:"text-red-500 ml-28"},mt={key:3,class:"text-red-500 ml-28"},vt={class:"w-full flex flex-col"},pt={class:"flex items-center gap-3.5"},ft={key:0,class:"text-red-500 ml-28"},gt={class:"grid grid-cols-2 gap-4"},bt={class:"w-full"},ht={for:"cupo_min",class:"flex items-center gap-1 mb-2"},yt={key:0,class:"text-gray-500 text-xs"},xt={key:0,class:"text-red-500 block text-xs mt-1"},_t={key:1,class:"text-red-500 block text-xs mt-1"},wt={class:"w-full"},Dt={for:"cupo_max",class:"flex items-center gap-1 mb-2"},Ct={key:0,class:"text-gray-500 text-xs"},kt={key:0,class:"text-red-500 block text-xs mt-1"},St={key:1,class:"text-red-500 block text-xs mt-1"},It={class:"flex gap-4"},Tt={class:"flex-1"},Et={key:0,class:"text-red-500 block text-xs mt-1"},Vt={class:"flex-1"},At={key:0,class:"text-red-500 block text-xs mt-1"},Ft={class:"w-full flex flex-col"},Pt={class:"flex items-center gap-10 sm:gap-9"},Nt={class:"w-full relative"},Lt={key:0,class:"text-red-500 ml-28"},Mt={class:"w-full flex flex-col"},Ut={class:"flex items-center gap-5"},$t={key:0,class:"text-red-500 ml-28"},Ot={class:"w-full flex flex-col"},Rt={class:"flex items-center gap-4"},qt={class:"flex-1"},zt={class:"flex items-center gap-3 mb-2"},Bt=["disabled"],jt={class:"flex items-center gap-2"},Gt={key:0,class:"text-red-500 ml-28"},Ht={class:"grid grid-cols-3 ml-2 sm:ml-5 gap-y-2"},Kt=["src"],Wt=["onClick"],Jt={class:"flex justify-center gap-4 w-full mt-6"},Qt=["disabled"],Zt={key:0},Yt={key:1},Xt=["disabled"],pe="/api/tours",Ue="/storage/tours/",is={__name:"Tours",setup(es){const v=Za(),T=i([]),S=i([]),q=i(""),z=i(""),oe=i([]),a=i({id:null,nombre:"",categoria:null,incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,transporte_id:null,imagenes:[]}),x=i([]),ne=i([]),re=i([]),$e=i(null),L=i(!1),ie=i(!1),M=i(!1),ue=i(!1),g=i(!1),B=i(!1),U=i(null),j=i(!1),ke=i(!1),G=i(!1),$=i(!1),O=i(!1),W=i(!1),fe=i(!0),_=i({global:{value:null,matchMode:ve.CONTAINS},categoria:{value:null,matchMode:ve.EQUALS},"transporte.nombre":{value:null,matchMode:ve.EQUALS},estado:{value:null,matchMode:ve.EQUALS},fecha_salida:{value:null,matchMode:ve.DATE_IS}}),J=i(""),H=i(""),Q=i(""),w=i(null),D=i(null),Se=i(10),na=i([5,10,20,50]),de=i("Guardar"),b=i(null),A=i([]),Oe=i([{label:"Nacional",value:"NACIONAL"},{label:"Internacional",value:"INTERNACIONAL"}]),Re=i([{label:"Disponible",value:"DISPONIBLE"},{label:"Agotado",value:"AGOTADO"},{label:"En Curso",value:"EN_CURSO"},{label:"Completado",value:"COMPLETADO"},{label:"Cancelado",value:"CANCELADO"},{label:"Suspendido",value:"SUSPENDIDO"},{label:"Reprogramado",value:"REPROGRAMADO"}]),ge=i(!1),Ie=i(!1),be=i(!1),F=i(null),Te=i([]),Ee=i(0),qe=i(null),Ve=R(()=>{let l=oe.value;if(_.value.global.value){const e=_.value.global.value.toLowerCase();l=l.filter(s=>s.nombre.toLowerCase().includes(e)||s.incluye&&s.incluye.toLowerCase().includes(e)||s.no_incluye&&s.no_incluye.toLowerCase().includes(e)||s.punto_salida.toLowerCase().includes(e))}return _.value.categoria.value&&(l=l.filter(e=>e.categoria===_.value.categoria.value)),_.value["transporte.nombre"].value&&(l=l.filter(e=>e["transporte.nombre"]===_.value["transporte.nombre"].value)),_.value.estado.value&&(l=l.filter(e=>e.estado===_.value.estado.value)),(w.value||D.value)&&(l=l.filter(e=>{if(!e.fecha_salida)return!1;const s=new Date(e.fecha_salida);let n=!0;if(w.value){const r=new Date(w.value);n=n&&s>=r}if(D.value){const r=new Date(D.value);r.setHours(23,59,59,999),n=n&&s<=r}return n})),l}),ze=R(()=>x.value.length<5),ra=R(()=>G.value?"Cargando...":$.value?"Abriendo...":ze.value?"Seleccionar":"Límite alcanzado"),Z=R(()=>{if(!a.value.cupo_min)return"";const l=parseInt(a.value.cupo_min)||0,e=parseInt(a.value.cupo_max)||0;if(l<=0)return"El cupo mínimo debe ser al menos 1.";const s=A.value.find(r=>r.id===a.value.transporte_id),n=s?s.capacidad:null;return n&&l>n?`El cupo mínimo no puede ser mayor que la capacidad del transporte (${n}).`:a.value.cupo_max&&e>0&&l>=e?"El cupo mínimo debe ser menor que el cupo máximo.":""}),Y=R(()=>{if(!a.value.cupo_max)return"";const l=parseInt(a.value.cupo_min)||0,e=parseInt(a.value.cupo_max)||0;if(e<=0)return"El cupo máximo debe ser al menos 1.";const s=A.value.find(r=>r.id===a.value.transporte_id),n=s?s.capacidad:null;return n&&e>n?`El cupo máximo no puede ser mayor que la capacidad del transporte (${n}).`:a.value.cupo_min&&l>0&&e<=l?"El cupo máximo debe ser mayor que el cupo mínimo.":""}),K=R(()=>{const l=A.value.find(e=>e.id===a.value.transporte_id);return l?l.capacidad:30});Pe([a,b,T,S,x,re],()=>{U.value&&L.value&&De(()=>{const l={...a.value,fecha_regreso:b.value,incluye_lista:[...T.value],no_incluye_lista:[...S.value],imagenes_actuales:[...x.value]},e=JSON.stringify(l)!==JSON.stringify({...U.value,imagenes_actuales:U.value.imagenes_originales})||re.value.length>0,s=!U.value.id,n=a.value.nombre||a.value.punto_salida||a.value.fecha_salida||b.value||a.value.precio||a.value.categoria||a.value.transporte_id||T.value.length>0||S.value.length>0||x.value.length>0;B.value=e||s&&n})},{deep:!0,flush:"post"}),Pe(()=>a.value.transporte_id,(l,e)=>{if(l&&l!==e&&L.value){const s=A.value.find(n=>n.id===l);if(s){const n=s.capacidad;a.value.cupo_min&&a.value.cupo_min>n&&(a.value.cupo_min=n),a.value.cupo_max&&a.value.cupo_max>n&&(a.value.cupo_max=n)}}});function he(){a.value={id:null,nombre:"",categoria:null,incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,transporte_id:null,imagenes:[]},x.value=[],ne.value=[],re.value=[],b.value=null,g.value=!1,T.value=[],S.value=[],q.value="",z.value=""}const Be=()=>{q.value.trim()&&(T.value.push(q.value.trim()),q.value="")},ia=l=>{T.value.splice(l,1)},je=()=>{z.value.trim()&&(S.value.push(z.value.trim()),z.value="")},ua=l=>{S.value.splice(l,1)},Ge=l=>l?l.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],He=l=>l.join("|"),ce=()=>{De(()=>{setTimeout(()=>{document.querySelectorAll(".p-select").forEach(e=>{const s=e.querySelector(".p-select-label, .p-placeholder");s&&(s.style.overflow="hidden",s.style.textOverflow="ellipsis",s.style.whiteSpace="nowrap",s.style.maxWidth="calc(100% - 2.5rem)",s.style.display="block")})},100)})};Ga(()=>{da(),ca(),ce(),typeof window<"u"&&window.addEventListener("resize",Ke)});const Ke=()=>{Ae.value=window.innerWidth};Ha(()=>{typeof window<"u"&&window.removeEventListener("resize",Ke)});const We=async()=>{fe.value=!0;try{const l=await X.get(pe);oe.value=l.data.map(e=>{var s,n,r;return{...e,imagenes:(e.imagenes||[]).map(h=>typeof h=="string"?h:h.nombre),transporte_nombre:((s=e.transporte)==null?void 0:s.nombre)||"",transporte_capacidad:((n=e.transporte)==null?void 0:n.capacidad)||"","transporte.nombre":(r=e.transporte)==null?void 0:r.nombre}}).sort((e,s)=>{const n=new Date(e.created_at);return new Date(s.created_at)-n})}catch{v.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los tours.",life:4e3})}finally{fe.value=!1}},da=async()=>{fe.value=!0,v.add({severity:"info",summary:"Cargando tours...",life:2e3});try{const l=await X.get(pe);oe.value=l.data.map(e=>{var s,n,r;return{...e,imagenes:(e.imagenes||[]).map(h=>typeof h=="string"?h:h.nombre),transporte_nombre:((s=e.transporte)==null?void 0:s.nombre)||"",transporte_capacidad:((n=e.transporte)==null?void 0:n.capacidad)||"","transporte.nombre":(r=e.transporte)==null?void 0:r.nombre}}).sort((e,s)=>{const n=new Date(e.created_at);return new Date(s.created_at)-n}),v.add({severity:"success",summary:"Tours cargados",life:2e3})}catch{v.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los tours.",life:4e3})}finally{fe.value=!1}},ca=async()=>{try{const l=await X.get("/api/transportes");A.value=l.data||[]}catch{A.value=[],v.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los transportes.",life:4e3})}},ma=()=>{_.value.categoria.value=J.value===""?null:J.value,ce()},va=()=>{if(H.value&&H.value!==""){const l=A.value.find(e=>e.id===H.value);_.value["transporte.nombre"].value=l?l.nombre:null}else _.value["transporte.nombre"].value=null;ce()},pa=()=>{_.value.estado.value=Q.value===""?null:Q.value,ce()},ye=()=>{if(w.value&&D.value){const l=new Date(w.value),e=new Date(D.value);l>e&&(D.value=null,v.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'hasta' se limpió porque era anterior a la fecha 'desde'.",life:5e3}))}},xe=()=>{if(w.value&&D.value){const l=new Date(w.value);new Date(D.value)<l&&(w.value=null,v.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'desde' se limpió porque era posterior a la fecha 'hasta'.",life:5e3}))}};Pe([J,H,Q],()=>{ce()},{deep:!0});const Je=async()=>{O.value=!0;try{await new Promise(l=>setTimeout(l,300)),J.value="",H.value="",Q.value="",w.value=null,D.value=null,_.value.global.value=null,_.value.categoria.value=null,_.value["transporte.nombre"].value=null,_.value.estado.value=null,_.value.fecha_salida.value=null,v.add({severity:"success",summary:"Filtros limpiados",life:2e3})}finally{O.value=!1}},fa=()=>{W.value=!0},ga=()=>{he(),de.value="Guardar",g.value=!1,L.value=!0,De(()=>{U.value={...a.value,fecha_regreso:b.value,incluye_lista:[...T.value],no_incluye_lista:[...S.value],imagenes_originales:[...x.value]},B.value=!1})},ba=l=>{var e;he(),g.value=!1,a.value={...l,transporte_id:((e=l.transporte)==null?void 0:e.id)||l.transporte_id||null},l.fecha_salida&&(typeof l.fecha_salida=="string"?a.value.fecha_salida=new Date(l.fecha_salida):a.value.fecha_salida=l.fecha_salida),l.fecha_regreso&&(typeof l.fecha_regreso=="string"?b.value=new Date(l.fecha_regreso):b.value=l.fecha_regreso),x.value=(l.imagenes||[]).map(s=>typeof s=="string"?s:s.nombre),T.value=Ge(l.incluye),S.value=Ge(l.no_incluye),B.value=!1,de.value="Actualizar",L.value=!0,De(()=>{U.value={...a.value,fecha_regreso:b.value,incluye_lista:[...T.value],no_incluye_lista:[...S.value],imagenes_originales:[...x.value]},B.value=!1})},ha=async()=>{if(g.value=!0,!b.value){v.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos.",life:4e3});return}if(!a.value.nombre||a.value.nombre.length<10||a.value.nombre.length>200){v.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos y cumplan los requisitos.",life:4e3});return}if(!a.value.punto_salida||a.value.punto_salida.length<5||a.value.punto_salida.length>200){v.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos y cumplan los requisitos.",life:4e3});return}if(Z.value){v.add({severity:"warn",summary:"Error en cupo mínimo",detail:Z.value,life:4e3});return}if(Y.value){v.add({severity:"warn",summary:"Error en cupo máximo",detail:Y.value,life:4e3});return}if(a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max){v.add({severity:"warn",summary:"Verificar datos",detail:"Por favor revisa los valores ingresados y corrige cualquier inconsistencia.",life:4e3});return}if(!_e()){v.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y asegúrate de que sean correctas.",life:4e3});return}if(!we()){v.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y asegúrate de que sean correctas.",life:4e3});return}if(!a.value.fecha_salida||!a.value.precio||!a.value.categoria||!a.value.transporte_id||!a.value.cupo_min||!a.value.cupo_max||x.value.length===0){v.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos.",life:4e3});return}if(x.value.length>5){v.add({severity:"warn",summary:"Demasiadas imágenes",detail:"No puedes subir más de 5 imágenes por tour.",life:4e3});return}const l=2*1024*1024;if(ne.value.filter(s=>s.size>l).length>0){v.add({severity:"warn",summary:"Verificar archivos",detail:"Por favor revisa el tamaño de las imágenes seleccionadas.",life:4e3});return}j.value=!0;try{const s=new FormData;if(s.append("nombre",a.value.nombre||""),T.value.length>0?s.append("incluye",He(T.value)):s.append("incluye",""),s.append("punto_salida",a.value.punto_salida||""),a.value.fecha_salida instanceof Date){const r=a.value.fecha_salida,h=r.getFullYear(),P=String(r.getMonth()+1).padStart(2,"0"),I=String(r.getDate()).padStart(2,"0"),o=String(r.getHours()).padStart(2,"0"),f=String(r.getMinutes()).padStart(2,"0"),N=String(r.getSeconds()).padStart(2,"0");s.append("fecha_salida",`${h}-${P}-${I} ${o}:${f}:${N}`)}else a.value.fecha_salida&&s.append("fecha_salida",a.value.fecha_salida);if(b.value instanceof Date){const r=b.value,h=r.getFullYear(),P=String(r.getMonth()+1).padStart(2,"0"),I=String(r.getDate()).padStart(2,"0"),o=String(r.getHours()).padStart(2,"0"),f=String(r.getMinutes()).padStart(2,"0"),N=String(r.getSeconds()).padStart(2,"0");s.append("fecha_regreso",`${h}-${P}-${I} ${o}:${f}:${N}`)}else b.value&&s.append("fecha_regreso",b.value);s.append("precio",a.value.precio||""),s.append("categoria",a.value.categoria||""),s.append("transporte_id",a.value.transporte_id||""),S.value.length>0?s.append("no_incluye",He(S.value)):s.append("no_incluye",""),a.value.cupo_min&&s.append("cupo_min",a.value.cupo_min),a.value.cupo_max&&s.append("cupo_max",a.value.cupo_max),ne.value.forEach(r=>s.append("imagenes[]",r)),re.value.forEach(r=>{const h=r.includes("/")?r.split("/").pop():r;s.append("removed_images[]",h)});let n;a.value.id?(s.append("_method","PUT"),n=await X.post(`${pe}/${a.value.id}`,s,{headers:{"Content-Type":"multipart/form-data"}}),v.add({severity:"success",summary:"¡Éxito!",detail:"El tour ha sido actualizado correctamente.",life:5e3})):(n=await X.post(pe,s,{headers:{"Content-Type":"multipart/form-data"}}),v.add({severity:"success",summary:"¡Éxito!",detail:"El tour ha sido creado correctamente.",life:5e3})),await We(),L.value=!1,B.value=!1,U.value=null,he()}catch{v.add({severity:"warn",summary:"Error de validación",detail:"Por favor revisa los campos e intenta nuevamente.",life:6e3})}finally{j.value=!1}},ya=l=>{a.value={...l},ie.value=!0},xa=async()=>{ke.value=!0;try{await X.delete(`${pe}/${a.value.id}`),await We(),ie.value=!1,v.add({severity:"success",summary:"¡Eliminado!",detail:"El tour ha sido eliminado correctamente.",life:5e3})}catch{v.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el tour. Inténtalo de nuevo.",life:5e3})}finally{ke.value=!1}},_a=()=>{B.value?ue.value=!0:Qe()},Qe=()=>{L.value=!1,ue.value=!1,B.value=!1,U.value=null,he()},wa=()=>{ue.value=!1},Da=async()=>{$.value=!0,await new Promise(l=>setTimeout(l,300)),qe.value.click(),setTimeout(()=>{G.value||($.value=!1)},1e3)},Ca=async l=>{const e=l.target?l.target.files:l.files,s=2*1024*1024,n=5;if($.value=!1,!e||e.length===0)return;const r=x.value.length,h=e.length;if(r+h>n){const I=n-r;v.add({severity:"warn",summary:"Límite de imágenes excedido",detail:`Solo puedes subir un máximo de ${n} imágenes por tour. Actualmente tienes ${r} imagen${r!==1?"es":""}, puedes agregar máximo ${I} más.`,life:6e3});return}G.value=!0;try{const I=[];let o=0;for(const f of e)if(f instanceof File){if(f.size>s){v.add({severity:"warn",summary:"Archivo muy grande",detail:`El archivo "${f.name}" excede el tamaño máximo de 2MB.`,life:5e3});continue}if(!f.type.startsWith("image/")){v.add({severity:"warn",summary:"Formato no válido",detail:`El archivo "${f.name}" no es una imagen válida.`,life:4e3});continue}ne.value.push(f),o++;const N=new Promise(Ba=>{const ta=new FileReader;ta.onload=ja=>{x.value.push(ja.target.result),Ba()},ta.readAsDataURL(f)});I.push(N)}await Promise.all(I),o>0&&v.add({severity:"success",summary:"Imágenes cargadas",detail:`${o} imagen${o>1?"es":""} cargada${o>1?"s":""} correctamente. Total: ${x.value.length}/${n}`,life:4e3})}catch{v.add({severity:"error",summary:"Error al cargar imágenes",detail:"Hubo un problema al procesar las imágenes. Inténtalo de nuevo.",life:4e3})}finally{G.value=!1,$.value=!1,l.target&&(l.target.value="")}},ka=l=>{const e=x.value[l];typeof e=="string"&&e.startsWith("data:image")?(x.value.splice(l,1),ne.value.splice(l,1)):(re.value.push(e),x.value.splice(l,1))},Sa=l=>{if(F.value&&F.value.imagenes&&F.value.imagenes.length>0){Te.value=F.value.imagenes.map(s=>{const n=typeof s=="string"?s:s.nombre;return Ue+n});const e=Math.max(0,Math.min(l,Te.value.length-1));Ee.value=e,setTimeout(()=>{Ie.value=!0},50)}else v.add({severity:"warn",summary:"Sin imágenes",detail:"No hay imágenes disponibles para mostrar.",life:5e3})},Ze=()=>{a.value.nombre&&(a.value.nombre=a.value.nombre.toUpperCase(),a.value.nombre=a.value.nombre.replace(/[^A-ZÁÉÍÓÚÑ0-9\s]/g,""),a.value.nombre=a.value.nombre.replace(/\s+/g," "),a.value.nombre.length>200&&(a.value.nombre=a.value.nombre.substring(0,200)),a.value.nombre=a.value.nombre.trim())},Ia=l=>{/[a-zA-ZáéíóúñÁÉÍÓÚÑ0-9\s]/.test(l.key)||l.preventDefault()},Ta=l=>{l.preventDefault();const e=(l.clipboardData||window.clipboardData).getData("text");if(e){let s=e.toUpperCase();s=s.replace(/[^A-ZÁÉÍÓÚÑ0-9\s]/g,""),s=s.replace(/\s+/g," "),s=s.trim(),s.length>200&&(s=s.substring(0,200)),a.value.nombre=s,Ze()}},Ea=l=>{l.preventDefault();const e=(l.clipboardData||window.clipboardData).getData("text");if(e){let s=e.toUpperCase();s=s.replace(/\s+/g," "),s=s.trim(),s.length>200&&(s=s.substring(0,200)),a.value.punto_salida=s,Ye()}},Ye=()=>{a.value.punto_salida&&(a.value.punto_salida=a.value.punto_salida.toUpperCase(),a.value.punto_salida=a.value.punto_salida.replace(/\s+/g," "),a.value.punto_salida.length>200&&(a.value.punto_salida=a.value.punto_salida.substring(0,200)),a.value.punto_salida=a.value.punto_salida.trim())},Xe=()=>{const l=A.value.find(r=>r.id===a.value.transporte_id),e=l?l.capacidad:null,s=parseInt(a.value.cupo_min)||0,n=parseInt(a.value.cupo_max)||0;return a.value.cupo_min&&s<1||a.value.cupo_max&&n<1||e&&(a.value.cupo_min&&s>e||a.value.cupo_max&&n>e)?!1:a.value.cupo_min&&!a.value.cupo_max||a.value.cupo_max&&!a.value.cupo_min?!0:!(a.value.cupo_min&&a.value.cupo_max&&s>=n)},_e=()=>{if(!a.value.fecha_salida)return!0;const l=new Date,e=new Date(a.value.fecha_salida),s=new Date(l.getTime()+60*60*1e3);return!(e<s||b.value&&(new Date(b.value)-e)/(1e3*60*60)<1)},we=()=>{if(!b.value)return!0;const l=new Date(b.value);if(a.value.fecha_salida){const e=new Date(a.value.fecha_salida);if((l-e)/(1e3*60*60)<1)return!1}return!0},ea=()=>{const l=new Date;return l.setHours(l.getHours()+1),l},Va=()=>{if(!a.value.fecha_salida)return ea();const l=new Date(a.value.fecha_salida);return l.setHours(l.getHours()+1),l},Aa=()=>{if(!b.value)return null;const l=new Date(b.value);return l.setHours(l.getHours()-1),l},Ae=i(typeof window<"u"?window.innerWidth:1024),Fe=R(()=>Ae.value<640?{width:"95vw",maxWidth:"380px"}:Ae.value<768?{width:"400px"}:{width:"450px"}),Fa=l=>{F.value=l,M.value=!0},Pa=l=>{v.add({severity:"info",summary:"Duplicar Tour",detail:`Funcionalidad de duplicar tour "${l.nombre}" en desarrollo.`,life:5e3}),M.value=!1},Na=l=>{M.value=!1,F.value=l,be.value=!0},La=l=>{v.add({severity:"info",summary:"Generar Reporte",detail:`Funcionalidad de generar reporte del tour "${l.nombre}" en desarrollo.`,life:5e3}),M.value=!1},Ma=l=>{v.add({severity:"info",summary:"Archivar Tour",detail:`Funcionalidad de archivar tour "${l.nombre}" en desarrollo.`,life:5e3}),M.value=!1},Ua=l=>{M.value=!1,F.value=l,ge.value=!0},$a=l=>{l.originalEvent.target.closest("button")||(F.value=l.data,ge.value=!0)},Oa=async l=>{const e=oe.value.findIndex(s=>s.id===l.id);e!==-1&&(oe.value[e]=l),be.value=!1},aa=l=>{const e=l.target.value,s=l.key;if([8,9,27,13,46,35,36,37,38,39,40].includes(l.keyCode)||l.ctrlKey&&[65,67,86,88].includes(l.keyCode))return;if(!/[0-9]/.test(s)){l.preventDefault();return}const n=e+s,r=parseInt(n),h=K.value;if(n==="0"||e===""&&s==="0"){l.preventDefault();return}if(n.length>3||r>h||r<1){l.preventDefault();return}},la=l=>{l.preventDefault();const s=(l.clipboardData||window.clipboardData).getData("text").replace(/[^0-9]/g,"");if(s){let n=parseInt(s);const r=K.value;n<1?n=1:n>r&&(n=r),l.target.id.includes("cupo_min")?a.value.cupo_min=n:l.target.id.includes("cupo_max")&&(a.value.cupo_max=n)}},Ra=R(()=>a.cupo_max?Math.max(1,a.cupo_max-1):1),qa=l=>{const e=l.target.value,s=l.key;if([8,9,27,13,46,35,36,37,38,39,40].includes(l.keyCode)||l.ctrlKey&&[65,67,86,88].includes(l.keyCode))return;if(!/[0-9.]/.test(s)){l.preventDefault();return}if(s==="."&&e.includes(".")){l.preventDefault();return}if(s!=="."){const h=e.split(".");if(h[0].length>=4&&!e.includes(".")){l.preventDefault();return}if(h.length>1&&h[1].length>=2){l.preventDefault();return}}const n=e+s;if(parseFloat(n)>9999.99){l.preventDefault();return}},za=l=>{l.preventDefault();let s=(l.clipboardData||window.clipboardData).getData("text").replace(/[^\d.]/g,"");if(!s||s===".")return;if((s.match(/\./g)||[]).length>1){const I=s.indexOf(".");s=s.substring(0,I+1)+s.substring(I+1).replace(/\./g,"")}const r=parseFloat(s);if(isNaN(r))return;const P=Math.min(r,9999.99).toFixed(2);a.precio=P,l.target.value=P};return(l,e)=>{const s=ee("Toast"),n=ee("InputText"),r=ee("Column"),h=ee("DataTable"),P=ee("Select"),I=ee("Dialog");return c(),Ne(Qa,null,{default:E(()=>[d(u(Ka),{title:"Tours"}),d(s,{class:"z-[9999]"}),t("div",nl,[e[60]||(e[60]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Catálogo de Tours"),t("p",{class:"text-gray-600"},"Gestión completa de paquetes turísticos")],-1)),t("div",rl,[t("div",il,[t("div",ul,[e[31]||(e[31]=t("h3",{class:"text-2xl sm:text-3xl text-blue-600 font-bold text-center sm:text-start"},"Lista de Tours",-1)),t("p",dl,[d(u(k),{icon:u(Ya),class:"h-4 w-4 text-yellow-500"},null,8,["icon"]),e[30]||(e[30]=V(" Haz clic en cualquier fila para ver los detalles. "))])]),t("div",cl,[d(u(Wa),{href:l.route("transportes"),onClick:fa,class:C([{"opacity-50 cursor-not-allowed":W.value},"bg-blue-500 border border-blue-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 flex items-center gap-2"])},{default:E(()=>[d(u(k),{icon:W.value?u(se):u(Xa),class:C({"animate-spin":W.value,"h-4":!0})},null,8,["icon","class"]),t("span",ml,p(W.value?"Cargando...":"Transportes"),1),t("span",vl,p(W.value?"Cargando...":"Transportes"),1)]),_:1},8,["href","class"]),t("button",{class:"bg-red-500 flex border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:ga},[d(u(k),{icon:u(Ce),class:"h-4 w-4 mr-1 text-white"},null,8,["icon"]),e[32]||(e[32]=t("span",null,"Agregar",-1))])])]),d(h,{value:Ve.value,selection:$e.value,"onUpdate:selection":e[8]||(e[8]=o=>$e.value=o),dataKey:"id",paginator:!0,rows:Se.value,rowsPerPageOptions:na.value,rowsPerPage:Se.value,"onUpdate:rowsPerPage":e[9]||(e[9]=o=>Se.value=o),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} tours",class:"overflow-x-auto max-w-full px-auto",onRowClick:$a,responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm cursor-pointer hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:E(()=>[t("div",pl,[t("div",fl,[t("div",gl,[e[33]||(e[33]=t("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[t("i",{class:"pi pi-filter text-blue-600 text-sm"}),t("span",null,"Filtros")],-1)),t("div",bl,p(Ve.value.length)+" resultado"+p(Ve.value.length!==1?"s":""),1),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md flex sm:hidden disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Je,disabled:O.value},[O.value?(c(),Ne(u(k),{key:0,icon:u(se),class:"animate-spin h-3 w-3"},null,8,["icon"])):y("",!0),t("span",null,p(O.value?"Limp...":"Limpiar"),1)],8,hl)]),t("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md hidden sm:flex disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2",onClick:Je,disabled:O.value},[O.value?(c(),Ne(u(k),{key:0,icon:u(se),class:"animate-spin h-3 w-3"},null,8,["icon"])):y("",!0),t("span",null,p(O.value?"Limpiando...":"Limpiar filtros"),1)],8,yl)]),t("div",xl,[t("div",null,[d(n,{modelValue:_.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=o=>_.value.global.value=o),placeholder:"?? Buscar tours...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),t("div",_l,[t("div",null,[me(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>J.value=o),onChange:ma,class:"w-full h-9 text-sm border border-blue-300 rounded-md px-3 py-1 bg-white text-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 truncate"},[e[34]||(e[34]=t("option",{value:"",disabled:"",selected:"",hidden:""},"Categoría",-1)),(c(!0),m(ae,null,le(Oe.value,o=>(c(),m("option",{key:o.value,value:o.value,class:"truncate text-gray-900 text-lg"},p(o.label),9,wl))),128))],544),[[Le,J.value]])]),t("div",null,[me(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>H.value=o),onChange:va,class:"w-full h-9 text-sm border border-blue-300 rounded-md px-3 py-1 bg-white text-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 truncate"},[e[35]||(e[35]=t("option",{value:"",disabled:"",selected:"",hidden:""},"Transporte",-1)),(c(!0),m(ae,null,le(A.value,o=>(c(),m("option",{key:o.id,value:o.id,class:"truncate text-gray-900 text-lg"},p(o.nombre),9,Dl))),128))],544),[[Le,H.value]])]),t("div",Cl,[me(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>Q.value=o),onChange:pa,class:"w-full h-9 text-sm border border-blue-300 rounded-md px-3 py-1 bg-white text-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 truncate"},[e[36]||(e[36]=t("option",{value:"",disabled:"",selected:"",hidden:""},"Estado",-1)),(c(!0),m(ae,null,le(Re.value,o=>(c(),m("option",{key:o.value,value:o.value,class:"truncate text-gray-900 text-lg"},p(o.label),9,kl))),128))],544),[[Le,Q.value]])]),t("div",Sl,[d(u(te),{modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=o=>w.value=o),placeholder:"Fecha desde",class:"w-full h-9 text-sm rounded-md border border-blue-300",onDateSelect:ye,onClear:ye,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:D.value},null,8,["modelValue","maxDate"])]),t("div",Il,[d(u(te),{modelValue:D.value,"onUpdate:modelValue":e[5]||(e[5]=o=>D.value=o),placeholder:"Fecha hasta",class:"w-full h-9 text-sm rounded-md border border-blue-300",onDateSelect:xe,onClear:xe,showIcon:!0,dateFormat:"dd/mm/yy",minDate:w.value},null,8,["modelValue","minDate"])]),t("div",Tl,[d(u(te),{modelValue:w.value,"onUpdate:modelValue":e[6]||(e[6]=o=>w.value=o),placeholder:"Fecha desde",class:"h-9 text-sm rounded-md",onDateSelect:ye,onClear:ye,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:D.value},null,8,["modelValue","maxDate"]),d(u(te),{modelValue:D.value,"onUpdate:modelValue":e[7]||(e[7]=o=>D.value=o),placeholder:"Fecha hasta",class:"h-9 text-sm rounded-md",onDateSelect:xe,onClear:xe,showIcon:!0,dateFormat:"dd/mm/yy",minDate:w.value},null,8,["modelValue","minDate"])])])])])]),default:E(()=>[d(r,{field:"nombre",header:"Nombre",sortable:"",class:"w-36 min-w-24"},{body:E(o=>[t("div",{class:"text-sm font-medium leading-relaxed overflow-hidden",style:{"max-width":"85px","text-overflow":"ellipsis","white-space":"nowrap"},title:o.data.nombre},p(o.data.nombre),9,El)]),_:1}),d(r,{field:"punto_salida",header:"Punto salida",class:"w-32 min-w-32 hidden md:table-cell"},{body:E(o=>[t("div",{class:"text-sm leading-relaxed overflow-hidden",style:{"max-width":"128px","text-overflow":"ellipsis","white-space":"nowrap"},title:o.data.punto_salida},p(o.data.punto_salida),9,Vl)]),_:1}),d(r,{field:"fecha_salida",header:"Fecha salida",class:"w-36 min-w-36 hidden md:table-cell"},{body:E(o=>[t("div",Al,p(o.data.fecha_salida?new Date(o.data.fecha_salida).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):""),1)]),_:1}),d(r,{field:"precio",header:"Precio",class:"w-24 min-w-18"},{body:E(o=>[t("div",Fl,p(isNaN(Number(o.data.precio))?"":`$${Number(o.data.precio).toFixed(2)}`),1)]),_:1}),d(r,{field:"estado",header:"Estado",class:"w-32 min-w-24 hidden lg:table-cell"},{body:E(o=>{var f;return[t("span",{class:C([{"bg-green-100 text-green-800":o.data.estado==="DISPONIBLE","bg-red-100 text-red-800":o.data.estado==="AGOTADO"||o.data.estado==="CANCELADO","bg-blue-100 text-blue-800":o.data.estado==="EN_CURSO","bg-gray-100 text-gray-800":o.data.estado==="COMPLETADO","bg-orange-100 text-orange-800":o.data.estado==="SUSPENDIDO","bg-purple-100 text-purple-800":o.data.estado==="REPROGRAMADO"},"px-2 py-1 rounded-full text-xs font-medium"])},p(((f=Re.value.find(N=>N.value===o.data.estado))==null?void 0:f.label)||o.data.estado),3)]}),_:1}),d(r,{exportable:!1,class:"w-52 min-w-36"},{header:E(()=>e[37]||(e[37]=[t("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:E(o=>[t("div",Pl,[t("button",{class:"flex bg-green-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:f=>Fa(o.data),title:"Más acciones"},[d(u(k),{icon:u(el),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[38]||(e[38]=t("span",{class:"hidden md:block text-white"},"Más",-1))],8,Nl),t("button",{class:"flex bg-blue-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:f=>ba(o.data)},[d(u(k),{icon:u(al),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[39]||(e[39]=t("span",{class:"hidden md:block text-white"},"Editar",-1))],8,Ll),t("button",{class:"flex bg-red-500 border p-1 py-2 sm:p-2 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:f=>ya(o.data)},[d(u(k),{icon:u(ll),class:"h-3 w-6 sm:h-4 sm:w-7 text-white"},null,8,["icon"]),e[40]||(e[40]=t("span",{class:"hidden md:block text-white"},"Eliminar",-1))],8,Ml)])]),_:1})]),_:1},8,["value","selection","rows","rowsPerPageOptions","rowsPerPage"]),d(I,{visible:L.value,"onUpdate:visible":e[21]||(e[21]=o=>L.value=o),header:de.value+" Tour",modal:!0,style:Ja(Fe.value),closable:!1,draggable:!1},{footer:E(()=>[t("div",Jt,[t("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:ha,disabled:j.value||!!Z.value||!!Y.value},[d(u(k),{icon:j.value?u(se):u(tl),class:C(["h-5 text-white",{"animate-spin":j.value}])},null,8,["icon","class"]),j.value?(c(),m("span",Yt,p(de.value==="Guardar"?"Guardando...":"Actualizando..."),1)):(c(),m("span",Zt,p(de.value),1))],8,Qt),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:_a,disabled:j.value},[d(u(k),{icon:u(Me),class:"h-5"},null,8,["icon"]),e[59]||(e[59]=V("Cancelar "))],8,Xt)])]),default:E(()=>[t("div",Ul,[t("div",$l,[t("div",Ol,[e[41]||(e[41]=t("label",{for:"nombre",class:"flex items-center gap-1"},[V("Tour: "),t("span",{class:"text-red-500 font-bold"},"*")],-1)),d(n,{modelValue:a.value.nombre,"onUpdate:modelValue":e[10]||(e[10]=o=>a.value.nombre=o),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:200,class:C([{"p-invalid":g.value&&(!a.value.nombre||a.value.nombre.length<10||a.value.nombre.length>200)},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"TOUR AL CERRO EL PITAL, ETC",onInput:Ze,onKeypress:Ia,onPaste:Ta},null,8,["modelValue","class"])]),a.value.nombre&&a.value.nombre.length<10?(c(),m("small",Rl," El nombre debe tener al menos 10 caracteres. Actual: "+p(a.value.nombre.length)+"/10 ",1)):y("",!0),a.value.nombre&&a.value.nombre.length>=180&&a.value.nombre.length<=200?(c(),m("small",ql," Caracteres restantes: "+p(200-a.value.nombre.length)+". ",1)):y("",!0),g.value&&!a.value.nombre?(c(),m("small",zl," El nombre es obligatorio. ")):y("",!0)]),t("div",Bl,[t("div",jl,[e[42]||(e[42]=t("label",{for:"incluye",class:"w-12 flex items-center gap-1 mt-2"}," Incluye: ",-1)),t("div",Gl,[t("div",Hl,[me(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>q.value=o),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",onKeyup:sa(Be,["enter"])},null,544),[[oa,q.value]]),t("button",{type:"button",onClick:Be,disabled:!q.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[d(u(k),{icon:u(Ce),class:"h-5"},null,8,["icon"])],8,Kl)]),t("div",Wl,[(c(!0),m(ae,null,le(T.value,(o,f)=>(c(),m("div",{key:f,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[t("span",Jl,p(o),1),t("button",{type:"button",onClick:N=>ia(f),class:"text-red-500 hover:text-red-700 p-1"},[d(u(k),{icon:u(Me),class:"h-5"},null,8,["icon"])],8,Ql)]))),128))]),T.value.length===0?(c(),m("div",Zl," Sin elementos agregados. ")):y("",!0)])])]),t("div",Yl,[t("div",Xl,[e[43]||(e[43]=t("label",{for:"no_incluye",class:"w-12 flex items-center gap-1 mt-2"}," No incluye: ",-1)),t("div",et,[t("div",at,[me(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>z.value=o),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",onKeyup:sa(je,["enter"])},null,544),[[oa,z.value]]),t("button",{type:"button",onClick:je,disabled:!z.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[d(u(k),{icon:u(Ce),class:"h-5"},null,8,["icon"])],8,lt)]),S.value.length>0?(c(),m("div",tt,[(c(!0),m(ae,null,le(S.value,(o,f)=>(c(),m("div",{key:f,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[t("span",st,p(o),1),t("button",{type:"button",onClick:N=>ua(f),class:"text-red-500 hover:text-red-700 p-1"},[d(u(k),{icon:u(Me),class:"h-5"},null,8,["icon"])],8,ot)]))),128))])):y("",!0),S.value.length===0?(c(),m("div",nt," Sin elementos agregados. ")):y("",!0)])])]),t("div",rt,[t("div",it,[e[44]||(e[44]=t("label",{for:"punto_salida",class:"flex w-12 items-center"},[V(" Punto salida: "),t("span",{class:"text-red-500 font-bold"}," * ")],-1)),d(n,{modelValue:a.value.punto_salida,"onUpdate:modelValue":e[13]||(e[13]=o=>a.value.punto_salida=o),modelModifiers:{trim:!0},id:"punto_salida",name:"punto_salida",maxlength:200,class:C([{"p-invalid":g.value&&(!a.value.punto_salida||a.value.punto_salida.length<5)},"flex-1 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),placeholder:"ATRIO DE CHALATENANGO, ETC",onInput:Ye,onPaste:Ea},null,8,["modelValue","class"])]),a.value.punto_salida&&a.value.punto_salida.length<5?(c(),m("small",ut,"Debe tener al menos 5 caracteres. Actual: "+p(a.value.punto_salida.length)+"/5",1)):y("",!0),a.value.punto_salida&&a.value.punto_salida.length>=180&&a.value.punto_salida.length<=200?(c(),m("small",dt,"Caracteres restantes: "+p(200-a.value.punto_salida.length),1)):y("",!0),g.value&&!a.value.punto_salida?(c(),m("small",ct,"El punto de salida es obligatorio.")):y("",!0),g.value&&a.value.punto_salida&&a.value.punto_salida.length<5?(c(),m("small",mt,"El punto de salida debe tener al menos 5 caracteres.")):y("",!0)]),t("div",vt,[t("div",pt,[e[45]||(e[45]=t("label",{for:"transporte_id",class:"w-24 flex items-center gap-1"},[V("Transporte:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),d(P,{modelValue:a.value.transporte_id,"onUpdate:modelValue":e[14]||(e[14]=o=>a.value.transporte_id=o),options:A.value,optionLabel:"nombre",optionValue:"id",id:"transporte_id",name:"transporte_id",class:C(["w-full rounded-md border-2 border-gray-400 hover:border-gray-500",{"p-invalid":g.value&&!a.value.transporte_id}]),placeholder:"Seleccionar"},null,8,["modelValue","options","class"])]),g.value&&!a.value.transporte_id?(c(),m("small",ft,"El tipo de transporte es obligatorio.")):y("",!0)]),t("div",gt,[t("div",bt,[t("label",ht,[e[46]||(e[46]=V(" Cupo mínimo: ")),e[47]||(e[47]=t("span",{class:"text-red-500 font-bold"},"*",-1)),a.value.transporte_id?(c(),m("small",yt," (Mín: "+p(Ra.value)+") ",1)):y("",!0)]),d(n,{modelValue:a.value.cupo_min,"onUpdate:modelValue":e[15]||(e[15]=o=>a.value.cupo_min=o),id:"cupo_min",name:"cupo_min",type:"number",inputmode:"numeric",min:"1",max:K.value,class:C(["w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":g.value&&!a.value.cupo_min||Z.value}]),placeholder:`1-${K.value}`,onKeydown:aa,onPaste:la,onInput:Xe},null,8,["modelValue","max","class","placeholder"]),g.value&&!a.value.cupo_min?(c(),m("small",xt,"El cupo mínimo es obligatorio.")):y("",!0),Z.value?(c(),m("small",_t,p(Z.value),1)):y("",!0)]),t("div",wt,[t("label",Dt,[e[48]||(e[48]=V(" Cupo máximo: ")),e[49]||(e[49]=t("span",{class:"text-red-500 font-bold"},"*",-1)),a.value.transporte_id?(c(),m("small",Ct,"(Máx: "+p(K.value)+")",1)):y("",!0)]),d(n,{modelValue:a.value.cupo_max,"onUpdate:modelValue":e[16]||(e[16]=o=>a.value.cupo_max=o),id:"cupo_max",name:"cupo_max",type:"number",inputmode:"numeric",min:"1",max:K.value,class:C(["w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":g.value&&!a.value.cupo_max||Y.value}]),placeholder:`1-${K.value}`,onKeydown:aa,onPaste:la,onInput:Xe},null,8,["modelValue","max","class","placeholder"]),g.value&&!a.value.cupo_max?(c(),m("small",kt,"El cupo máximo es obligatorio.")):y("",!0),Y.value?(c(),m("small",St,p(Y.value),1)):y("",!0)])]),t("div",It,[t("div",Tt,[e[50]||(e[50]=t("label",{for:"fecha_salida",class:"flex items-center gap-1 mb-2"},[V("Fecha y hora de salida:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),d(u(te),{modelValue:a.value.fecha_salida,"onUpdate:modelValue":e[17]||(e[17]=o=>a.value.fecha_salida=o),id:"fecha_salida",name:"fecha_salida",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:ea(),maxDate:Aa(),class:C([{"p-invalid":g.value&&!a.value.fecha_salida||a.value.fecha_salida&&!_e()},"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),manualInput:!1,onDateSelect:_e,onInput:_e},null,8,["modelValue","minDate","maxDate","class"]),g.value&&!a.value.fecha_salida?(c(),m("small",Et,"Fecha y hora de salida requerida.")):y("",!0)]),t("div",Vt,[e[51]||(e[51]=t("label",{for:"horaRegresoCalendar",class:"flex items-center gap-1 mb-2"},[V("Fecha y hora regreso:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),d(u(te),{modelValue:b.value,"onUpdate:modelValue":e[18]||(e[18]=o=>b.value=o),id:"horaRegresoCalendar",name:"horaRegresoCalendar",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:Va(),manualInput:!1,class:C([{"p-invalid":g.value&&!b.value||b.value&&!we()},"w-full border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md"]),onDateSelect:we,onInput:we},null,8,["modelValue","minDate","class"]),g.value&&!b.value?(c(),m("small",At,"Fecha y hora de regreso requerida.")):y("",!0)])]),t("div",Ft,[t("div",Pt,[e[53]||(e[53]=t("label",{for:"precio",class:"w-24 flex items-center gap-1"},[V("Precio:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),t("div",Nt,[e[52]||(e[52]=t("span",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"},"$",-1)),d(n,{modelValue:a.value.precio,"onUpdate:modelValue":e[19]||(e[19]=o=>a.value.precio=o),id:"precio",name:"precio",type:"text",inputmode:"decimal",class:C(["w-full pl-8 border-2 border-gray-400 hover:border-gray-500 focus:border-gray-500 focus:ring-0 focus:shadow-none rounded-md",{"p-invalid":g.value&&(!a.value.precio||a.value.precio<.01||a.value.precio>9999.99)}]),placeholder:"0.00",onKeydown:qa,onPaste:za},null,8,["modelValue","class"])])]),g.value&&(a.value.precio==null||a.value.precio<.01||a.value.precio>9999.99)?(c(),m("small",Lt,"El precio es obligatorio, debe ser mayor o igual a 0.01 y menor o igual a 9999.99.")):y("",!0)]),t("div",Mt,[t("div",Ut,[e[54]||(e[54]=t("label",{for:"categoria",class:"w-24 flex items-center gap-1"},[V("Categoría:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),d(P,{modelValue:a.value.categoria,"onUpdate:modelValue":e[20]||(e[20]=o=>a.value.categoria=o),options:Oe.value,optionLabel:"label",optionValue:"value",id:"categoria",name:"categoria",class:C(["w-full rounded-md border-2 border-gray-400 hover:border-gray-500",{"p-invalid":g.value&&!a.value.categoria}]),placeholder:"Seleccionar"},null,8,["modelValue","options","class"])]),g.value&&!a.value.categoria?(c(),m("small",$t,"La categoría es obligatoria.")):y("",!0)]),t("div",Ot,[t("div",Rt,[e[57]||(e[57]=t("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},[V("Imágenes:"),t("span",{class:"text-red-500 font-bold"},"*")],-1)),t("div",qt,[t("div",zt,[t("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:Ca,class:"hidden",ref_key:"fileInput",ref:qe},null,544),t("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 outline-none focus:outline-none active:outline-none disabled:opacity-50 disabled:cursor-not-allowed",onClick:Da,disabled:G.value||$.value||!ze.value},[d(u(k),{icon:G.value?u(se):$.value?u(se):u(Ce),class:C({"animate-spin":G.value||$.value})},null,8,["icon","class"]),V(" "+p(ra.value),1)],8,Bt),t("div",jt,[t("span",{class:C(["text-sm font-medium",x.value.length>=5?"text-red-600":"text-gray-600"])},p(x.value.length)+"/5 ",3),e[55]||(e[55]=t("span",{class:"text-xs text-gray-500"},"imágenes",-1))])]),e[56]||(e[56]=t("div",{class:"text-xs text-gray-500 mb-2"}," Máximo 5 imágenes por tour • Formatos: JPG, PNG, GIF • Tamaño máximo: 2MB por imagen ",-1))])]),g.value&&x.value.length===0?(c(),m("small",Gt,"Las imágenes son obligatorias (al menos una).")):y("",!0)]),t("div",Ht,[(c(!0),m(ae,null,le(x.value,(o,f)=>(c(),m("div",{key:f,class:"relative w-24 sm:w-28 h-24 sm:h-28"},[t("img",{src:o.startsWith("data:image")?o:Ue+o,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,Kt),t("button",{onClick:N=>ka(f),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow",style:{transform:"translate(50%, -50%)"}},e[58]||(e[58]=[t("i",{class:"pi pi-times text-xs"},null,-1)]),8,Wt)]))),128))])])]),_:1},8,["visible","header","style"]),d(sl,{visible:M.value,"onUpdate:visible":e[22]||(e[22]=o=>M.value=o),"details-visible":ge.value,"onUpdate:detailsVisible":e[23]||(e[23]=o=>ge.value=o),"carousel-visible":Ie.value,"onUpdate:carouselVisible":e[24]||(e[24]=o=>Ie.value=o),"delete-visible":ie.value,"onUpdate:deleteVisible":e[25]||(e[25]=o=>ie.value=o),"unsaved-changes-visible":ue.value,"onUpdate:unsavedChangesVisible":e[26]||(e[26]=o=>ue.value=o),"carousel-index":Ee.value,"onUpdate:carouselIndex":e[27]||(e[27]=o=>Ee.value=o),tour:F.value||a.value,"dialog-style":Fe.value,"selected-images":Te.value,"image-path":Ue,"is-deleting":ke.value,onDuplicate:Pa,onChangeStatus:Na,onGenerateReport:La,onArchive:Ma,onDeleteTour:xa,onCancelDelete:e[28]||(e[28]=()=>ie.value=!1),onCloseWithoutSaving:Qe,onContinueEditing:wa,onViewDetails:Ua,onOpenImageModal:Sa},null,8,["visible","details-visible","carousel-visible","delete-visible","unsaved-changes-visible","carousel-index","tour","dialog-style","selected-images","is-deleting"]),d(ol,{visible:be.value,"onUpdate:visible":e[29]||(e[29]=o=>be.value=o),tour:F.value,"dialog-style":Fe.value,onEstadoActualizado:Oa},null,8,["visible","tour","dialog-style"])])])]),_:1})}}};export{is as default};
