import{z as be,a as pe,F as n,g as B,m as ye}from"./ui-BrU4k96Z.js";import{E as F,r as T,w as L,a6 as he,c as m,d,p as r,$ as a,x as z,e,q as c,t as i,j as b,h as N,A as Y,y as G,F as we,N as ke}from"./vendor-gbh1WW5n.js";import{s as _,i as ee,c as $,a as O,o as Ee,v as U,b as Re,L as Ce,f as q,M as te,N as se,O as ze,P as Ae,Q as Pe,H as Ne}from"./index-BURLB9l4.js";import{f as De}from"./index-DtyEsSN9.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Se={class:"space-y-4"},je={class:"text-center mb-4"},Me={class:"text-lg font-semibold text-gray-800"},Fe={class:"text-blue-600"},Te={class:"text-sm text-gray-600 mt-1"},$e={class:"grid grid-cols-1 gap-3"},Ie={key:1,class:"bg-orange-50 border border-orange-200 rounded-lg p-3"},We={class:"flex items-center gap-2 mb-2"},Be=["disabled"],Le={class:"text-left flex-1"},Ge={class:"font-medium"},Oe={class:"text-xs opacity-90"},Ue=["disabled"],qe={class:"text-left flex-1"},He={class:"font-medium"},Qe={class:"text-xs opacity-90"},Xe={class:"flex justify-center gap-4 w-full mt-6"},Ze={class:"w-full"},Je={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},Ke={class:"flex flex-col sm:flex-row gap-3 sm:items-center"},Ye={class:"flex items-center gap-2"},_e={class:"flex items-center gap-2"},et={class:"text-right"},tt={class:"text-sm font-bold text-blue-700 leading-tight"},st={key:0,class:"space-y-4 sm:space-y-6"},at={class:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4"},lt={class:"font-semibold text-blue-800 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base"},ot={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 text-xs sm:text-sm"},nt={class:"break-words"},rt={class:"ml-2"},it={class:"ml-2"},dt={class:"flex flex-col gap-1"},ct={key:0,class:"flex flex-wrap items-center gap-2"},ut={class:"text-xs sm:text-sm break-all"},mt={key:1,class:"text-gray-500 italic text-xs sm:text-sm"},gt={class:"flex flex-col gap-1"},xt={key:0,class:"flex flex-wrap items-center gap-2"},ft={class:"text-xs sm:text-sm"},vt={class:"flex gap-1"},bt=["href"],pt=["href"],yt={key:1,class:"text-gray-500 italic text-xs sm:text-sm"},ht={class:"bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4"},wt={class:"font-semibold text-green-800 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base"},kt={class:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3 text-xs sm:text-sm"},Et={class:"ml-2"},Rt={class:"ml-2"},Ct={class:"ml-2 font-bold text-green-600"},zt={class:"bg-slate-50 border border-slate-200 rounded-lg p-3 sm:p-4"},At={class:"font-semibold text-slate-800 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base"},Pt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Nt={class:"flex items-center gap-2"},Dt={class:"flex items-center gap-2"},Vt={key:0,class:"text-xs bg-gray-100 px-2 py-1 rounded font-mono"},St={key:1,class:"text-gray-400 italic text-sm"},jt={key:0,class:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border-2 border-yellow-300 p-4"},Mt={class:"flex items-center justify-between mb-4"},Ft={class:"flex items-center gap-2"},Tt={class:"flex items-center gap-2"},$t={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},It={class:"space-y-3"},Wt={class:"text-sm text-gray-600"},Bt={key:0,class:"flex justify-center"},Lt=["disabled"],Gt={key:1,class:"space-y-3"},Ot={class:"bg-white rounded-lg border border-yellow-300 p-4"},Ut={class:"flex items-center justify-between mb-2"},qt={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},Ht={class:"bg-gray-50 rounded-md p-3 mb-3"},Qt={class:"text-sm text-gray-800 break-all font-mono"},Xt={class:"flex items-center justify-between text-xs text-gray-500 mb-3"},Zt={class:"flex flex-wrap gap-2 justify-center"},Jt={class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},Kt={class:"text-sm font-medium text-blue-800 mb-2"},Yt={class:"flex justify-center gap-4 w-full mt-6"},_t={class:"space-y-3 sm:space-y-4"},es={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4 mb-4"},ts={class:"flex items-start gap-2 sm:gap-3"},ss={class:"flex-1"},as={class:"bg-white bg-opacity-60 rounded p-2 text-xs sm:text-sm space-y-1"},ls={class:"break-words"},os={class:"break-words"},ns={class:"text-gray-500 text-xs mt-1"},rs={class:"flex justify-center gap-4 w-full mt-6"},is=["disabled"],ds={key:2},cs={key:3},us=["disabled"],ms={__name:"Modales",props:{visible:{type:Boolean,default:!1},detallesVisible:{type:Boolean,default:!1},rechazarVisible:{type:Boolean,default:!1},reserva:{type:Object,default:()=>({})},tour:{type:Object,default:()=>({})},dialogStyle:{type:Object,default:()=>({})},procesando:{type:Boolean,default:!1},confirmandoReserva:{type:Boolean,default:!1},rechazandoReserva:{type:Boolean,default:!1},estadosReservas:{type:Array,default:()=>[]},estadosTours:{type:Array,default:()=>[]}},emits:["update:visible","update:detallesVisible","update:rechazarVisible","confirmar","rechazar","verDetalles","actualizar-reserva"],setup(s,{emit:ae}){const I=be(),x=s,D=ae,p=F({get:()=>x.visible,set:l=>D("update:visible",l)}),h=F({get:()=>x.detallesVisible,set:l=>D("update:detallesVisible",l)}),w=F({get:()=>x.rechazarVisible,set:l=>D("update:rechazarVisible",l)}),k=T(""),E=T(!1),f=T(null),A=T(!1),j=l=>{if(!l||!l.estado)return[];switch(l.estado){case"PENDIENTE":return["confirmar","rechazar","detalles"];case"CONFIRMADA":return["rechazar","detalles"];case"REPROGRAMADA":return["rechazar","detalles"];case"CANCELADA":return["detalles"];case"FINALIZADA":return["detalles"];default:return["detalles"]}},le=l=>{const t=x.estadosReservas.find(o=>o.value===l);return(t==null?void 0:t.color)||"bg-gray-100 text-gray-800"},H=l=>{if(!l)return"N/A";const t=new Date(l);return t.getHours()===0&&t.getMinutes()===0?t.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):t.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},oe=()=>{D("confirmar",x.reserva)},ne=()=>{k.value="",p.value=!1,w.value=!0},re=()=>{D("rechazar",{reserva:x.reserva,motivo:k.value})},ie=async()=>{p.value=!1,h.value=!0},de=()=>{k.value="",f.value=null,A.value=!1,E.value=!1},W=()=>{document.body.style.overflow="hidden",document.body.style.paddingRight="15px"},M=()=>{document.body.style.overflow="",document.body.style.paddingRight=""},ce=()=>{w.value=!1,de()},ue=l=>{if(!l)return;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.location.href=`mailto:${l}`:window.open(`https://mail.google.com/mail/?view=cm&fs=1&to=${l}`,"_blank")},me=async()=>{var l,t,o,g,v,R,V;if(x.reserva){E.value=!0,f.value=null,A.value=!1;try{const u=x.reserva,y={id:((l=x.tour)==null?void 0:l.id)||u.tour_id||1,nombre:((t=x.tour)==null?void 0:t.nombre)||u.entidad_nombre||"Tour reservado",cupos_adultos:u.mayores_edad||0,cupos_menores:u.menores_edad||0,total:parseFloat(u.total)},S=((g=(o=u.cliente)==null?void 0:o.user)==null?void 0:g.email)||((v=u.cliente)==null?void 0:v.correo);if(!S)throw new Error("No se encontrÃ³ email del cliente para generar el enlace de pago");const P={reserva_id:u.id,amount:parseFloat(u.total),customer_email:S,tour_data:y};console.log("ðŸ”— Enviando datos a Wompi:",P);const C=await ke.post("/api/wompi/payment-link-tour",P);if(C.data.success)f.value={url:C.data.payment_link,reference:C.data.reference,amount:P.amount},A.value=!0,console.log("âœ… Enlace generado exitosamente:",f.value);else throw new Error(C.data.message||"Error al generar enlace")}catch(u){console.error("âŒ Error generando enlace Wompi:",u);let y="Error al generar enlace de pago";(V=(R=u.response)==null?void 0:R.data)!=null&&V.message?y=u.response.data.message:u.message&&(y=u.message),I.add({severity:"error",summary:"Error",detail:y,life:5e3})}finally{E.value=!1}}},ge=async()=>{var l;if((l=f.value)!=null&&l.url)try{await navigator.clipboard.writeText(f.value.url),I.add({severity:"success",summary:"Ã‰xito",detail:"Enlace copiado al portapapeles",life:3e3})}catch(t){console.error("Error copiando enlace:",t);const o=document.createElement("textarea");o.value=f.value.url,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),I.add({severity:"success",summary:"Ã‰xito",detail:"Enlace copiado al portapapeles",life:3e3})}},xe=()=>{var l;(l=f.value)!=null&&l.url&&window.open(f.value.url,"_blank")},Q=()=>{f.value=null,A.value=!1},fe=l=>{if(!l)return!1;const t=["PENDIENTE","pendiente"],o=l.pagos&&l.pagos.length>0&&l.pagos.some(g=>g.estado==="approved");return t.includes(l.estado)&&!o},ve=F(()=>!x.reserva||!x.reserva.pagos||x.reserva.pagos.length===0?!0:!x.reserva.pagos.some(l=>l.estado==="approved"));return L(p,l=>{l?W():!h.value&&!w.value&&M()}),L(h,l=>{l?W():(Q(),!p.value&&!w.value&&M())}),L(w,l=>{l?W():!p.value&&!h.value&&M()}),he(()=>{M()}),(l,t)=>(d(),m(we,null,[r(a(pe)),r(a(B),{visible:p.value,"onUpdate:visible":t[1]||(t[1]=o=>p.value=o),header:"MÃ¡s Acciones",modal:!0,style:Y(s.dialogStyle),closable:!1,draggable:!1},{footer:z(()=>[e("div",Xe,[e("button",{type:"button",onClick:t[0]||(t[0]=o=>p.value=!1),class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},[r(a(n),{icon:a(U),class:"h-5"},null,8,["icon"]),t[13]||(t[13]=c(" Cerrar "))])])]),default:z(()=>{var o,g,v;return[e("div",Se,[e("div",je,[e("h4",Me,[t[7]||(t[7]=c(" Reserva: ")),e("span",Fe,i(s.reserva.entidad_nombre||"Reserva"),1)]),e("p",Te," Cliente: "+i(((g=(o=s.reserva.cliente)==null?void 0:o.user)==null?void 0:g.name)||((v=s.reserva.cliente)==null?void 0:v.nombres)||"N/A"),1),t[8]||(t[8]=e("p",{class:"text-xs text-gray-500 mt-1"},"Selecciona una acciÃ³n a realizar",-1))]),e("div",$e,[j(s.reserva).includes("detalles")?(d(),m("button",{key:0,class:"w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start",onClick:ie},[r(a(n),{icon:a(_),class:"h-5 w-5"},null,8,["icon"]),t[9]||(t[9]=e("div",{class:"text-left flex-1"},[e("div",{class:"font-medium"},"Ver Detalles"),e("div",{class:"text-xs opacity-90"},"InformaciÃ³n completa de la reserva")],-1))])):b("",!0),j(s.reserva).includes("confirmar")&&ve.value?(d(),m("div",Ie,[e("div",We,[r(a(n),{icon:a(ee),class:"h-4 w-4 text-orange-600"},null,8,["icon"]),t[10]||(t[10]=e("span",{class:"font-semibold text-orange-800 text-sm"},"Pago Pendiente",-1)),t[11]||(t[11]=e("span",{class:"px-2 py-0.5 bg-orange-200 text-orange-800 text-xs font-medium rounded-full ml-auto"}," No Confirmar ",-1))]),t[12]||(t[12]=e("p",{class:"text-orange-700 text-xs leading-relaxed"},[c(" El cliente no ha pagado. Revisa el estado en "),e("span",{class:"font-semibold"},'"Ver Detalles"'),c(" antes de confirmar. ")],-1))])):b("",!0),j(s.reserva).includes("confirmar")?(d(),m("button",{key:2,class:"w-full bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start disabled:opacity-50 disabled:cursor-not-allowed",onClick:oe,disabled:s.confirmandoReserva},[s.confirmandoReserva?(d(),N(a(n),{key:0,icon:a($),class:"h-5 w-5 animate-spin"},null,8,["icon"])):(d(),N(a(n),{key:1,icon:a(O),class:"h-5 w-5"},null,8,["icon"])),e("div",Le,[e("div",Ge,i(s.confirmandoReserva?"Confirmando...":"Confirmar Reserva"),1),e("div",Oe,i(s.confirmandoReserva?"Procesando la confirmaciÃ³n":"Aprobar la reserva del cliente"),1)])],8,Be)):b("",!0),j(s.reserva).includes("rechazar")?(d(),m("button",{key:3,class:"w-full bg-red-500 hover:bg-red-600 text-white px-4 py-3 rounded-md transition-all duration-200 ease-in-out flex items-center gap-3 justify-start disabled:opacity-50 disabled:cursor-not-allowed",onClick:ne,disabled:s.rechazandoReserva},[s.rechazandoReserva?(d(),N(a(n),{key:0,icon:a($),class:"h-5 w-5 animate-spin"},null,8,["icon"])):(d(),N(a(n),{key:1,icon:a(Ee),class:"h-5 w-5"},null,8,["icon"])),e("div",qe,[e("div",He,i(s.rechazandoReserva?"Rechazando...":"Rechazar Reserva"),1),e("div",Qe,i(s.rechazandoReserva?"Procesando el rechazo":"Rechazar con motivo especificado"),1)])],8,Ue)):b("",!0)])])]}),_:1},8,["visible","style"]),r(a(B),{visible:h.value,"onUpdate:visible":t[4]||(t[4]=o=>h.value=o),modal:"",style:{width:"95vw",maxWidth:"800px"},closable:!1,draggable:!1},{header:z(()=>{var o;return[e("div",Ze,[e("div",Je,[t[14]||(t[14]=e("div",null,[e("h3",{class:"text-lg sm:text-xl font-bold text-gray-800 mb-1"}," Detalles de la Reserva ")],-1)),e("div",Ke,[e("div",Ye,[e("span",{class:G([le(s.reserva.estado),"px-3 py-1.5 rounded-full text-sm font-bold shadow-md border-2 border-white"])},i(((o=s.estadosReservas.find(g=>g.value===s.reserva.estado))==null?void 0:o.label)||s.reserva.estado),3)]),e("div",_e,[r(a(n),{icon:a(Ne),class:"text-blue-600 text-lg"},null,8,["icon"]),e("div",et,[e("p",tt,i(H(s.reserva.fecha_reserva)),1)])])])])])]}),footer:z(()=>[e("div",Yt,[e("button",{type:"button",onClick:t[3]||(t[3]=o=>h.value=!1),class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},[r(a(n),{icon:a(U),class:"h-5"},null,8,["icon"]),t[41]||(t[41]=c("Cerrar "))])])]),default:z(()=>{var o,g,v,R,V,u,y,S,P,C,X;return[s.reserva?(d(),m("div",st,[e("div",at,[e("h4",lt,[r(a(n),{icon:a(_),class:"text-blue-600 text-sm sm:text-base"},null,8,["icon"]),t[15]||(t[15]=c(" InformaciÃ³n del Cliente "))]),e("div",ot,[e("div",nt,[t[16]||(t[16]=e("span",{class:"font-medium text-gray-700"},"Nombre:",-1)),e("span",rt,i(((g=(o=s.reserva.cliente)==null?void 0:o.user)==null?void 0:g.name)||((v=s.reserva.cliente)==null?void 0:v.nombres)||"Problema al obtener nombre o no existe"),1)]),e("div",null,[t[17]||(t[17]=e("span",{class:"font-medium text-gray-700"},"Documento:",-1)),e("span",it,i(((R=s.reserva.cliente)==null?void 0:R.numero_identificacion)||"Problema al obtener documento o no existe"),1)]),e("div",dt,[t[19]||(t[19]=e("span",{class:"font-medium text-gray-700"},"Email:",-1)),(u=(V=s.reserva.cliente)==null?void 0:V.user)!=null&&u.email||(y=s.reserva.cliente)!=null&&y.correo?(d(),m("div",ct,[e("span",ut,i(((P=(S=s.reserva.cliente)==null?void 0:S.user)==null?void 0:P.email)||((C=s.reserva.cliente)==null?void 0:C.correo)),1),e("a",{onClick:t[2]||(t[2]=gs=>{var Z,J,K;return ue(((J=(Z=s.reserva.cliente)==null?void 0:Z.user)==null?void 0:J.email)||((K=s.reserva.cliente)==null?void 0:K.correo))}),href:"#",class:"inline-flex items-center gap-1 px-2 py-1 bg-red-500 hover:bg-red-600 text-white text-xs rounded-md transition-colors duration-200 cursor-pointer",title:"Abrir Gmail para enviar correo"},[r(a(n),{icon:a(Re),class:"h-3 w-3"},null,8,["icon"]),t[18]||(t[18]=e("span",{class:"hidden sm:inline"},"Enviar Email",-1))])])):(d(),m("span",mt,"Problema al obtener email o no existe"))]),e("div",gt,[t[22]||(t[22]=e("span",{class:"font-medium text-gray-700"},"TelÃ©fono:",-1)),(X=s.reserva.cliente)!=null&&X.telefono?(d(),m("div",xt,[e("span",ft,i(s.reserva.cliente.telefono),1),e("div",vt,[e("a",{href:`https://wa.me/${s.reserva.cliente.telefono.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center gap-1 px-2 py-1 bg-green-500 hover:bg-green-600 text-white text-xs rounded-md transition-colors duration-200",title:"Enviar mensaje por WhatsApp"},[r(a(n),{icon:a(De),class:"h-3 w-3"},null,8,["icon"]),t[20]||(t[20]=e("span",{class:"hidden sm:inline"},"WhatsApp",-1))],8,bt),e("a",{href:`tel:${s.reserva.cliente.telefono}`,class:"inline-flex items-center gap-1 px-2 py-1 bg-blue-500 hover:bg-blue-600 text-white text-xs rounded-md transition-colors duration-200",title:"Llamar por telÃ©fono"},[r(a(n),{icon:a(Ce),class:"h-3 w-3"},null,8,["icon"]),t[21]||(t[21]=e("span",{class:"hidden sm:inline"},"Llamar",-1))],8,pt)])])):(d(),m("span",yt,"Problema al obtener telÃ©fono o no existe"))])])]),e("div",ht,[e("h4",wt,[r(a(n),{icon:a(q),class:"text-green-600 text-sm sm:text-base"},null,8,["icon"]),t[23]||(t[23]=c(" Detalles de la Reserva "))]),e("div",kt,[e("div",null,[t[24]||(t[24]=e("span",{class:"font-medium text-gray-700"},"Adultos:",-1)),e("span",Et,i(s.reserva.mayores_edad||0),1)]),e("div",null,[t[25]||(t[25]=e("span",{class:"font-medium text-gray-700"},"NiÃ±os:",-1)),e("span",Rt,i(s.reserva.menores_edad||0),1)]),e("div",null,[t[26]||(t[26]=e("span",{class:"font-medium text-gray-700"},"Total:",-1)),e("span",Ct,"$"+i(Number(s.reserva.total||0).toFixed(2)),1)])])]),e("div",zt,[e("h4",At,[r(a(n),{icon:a(te),class:"text-slate-600 text-sm sm:text-base"},null,8,["icon"]),t[27]||(t[27]=c(" InformaciÃ³n de Pagos "))]),e("div",Pt,[e("div",Nt,[t[28]||(t[28]=e("span",{class:"font-medium text-gray-700"},"Estado de Pago:",-1)),e("span",{class:G(["px-2 py-1 rounded-full text-xs font-medium",{"bg-green-100 text-green-800":s.reserva.pagos&&s.reserva.pagos.length>0&&s.reserva.pagos[0].estado==="approved","bg-yellow-100 text-yellow-800":!s.reserva.pagos||s.reserva.pagos.length===0||s.reserva.pagos[0].estado!=="approved"}])},i(s.reserva.pagos&&s.reserva.pagos.length>0&&s.reserva.pagos[0].estado==="approved"?"Pagado":"Pendiente de Pago"),3)]),e("div",Dt,[t[29]||(t[29]=e("span",{class:"font-medium text-gray-700"},"Ref. Wompi:",-1)),s.reserva.pagos&&s.reserva.pagos.length>0&&s.reserva.pagos[0].referencia_wompi?(d(),m("span",Vt,i(s.reserva.pagos[0].referencia_wompi),1)):(d(),m("span",St,"Sin referencia"))])])]),fe(s.reserva)?(d(),m("div",jt,[e("div",Mt,[e("div",Ft,[r(a(n),{icon:a(se),class:"text-orange-600 text-lg"},null,8,["icon"]),t[30]||(t[30]=e("h4",{class:"text-lg font-semibold text-gray-800"},"Generar Enlace de Pago Wompi",-1))]),e("div",Tt,[e("span",$t,[r(a(n),{icon:a(te),class:"mr-1"},null,8,["icon"]),c(" Total: $"+i(Number(s.reserva.total||0).toFixed(2)),1)])])]),e("div",It,[e("p",Wt,[r(a(n),{icon:a(q),class:"text-blue-500 mr-1"},null,8,["icon"]),t[31]||(t[31]=e("strong",null,"Â¿El cliente aÃºn no ha pagado?",-1)),t[32]||(t[32]=e("br",null,null,-1)),t[33]||(t[33]=c(" Genera un enlace de pago personalizado para que el cliente pueda pagar esta reserva directamente. "))]),A.value?b("",!0):(d(),m("div",Bt,[e("button",{onClick:me,disabled:E.value,class:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl"},[r(a(n),{icon:E.value?a($):a(se),class:G({"animate-spin":E.value})},null,8,["icon","class"]),c(" "+i(E.value?"Generando enlace...":"Generar Enlace de Pago"),1)],8,Lt)])),A.value&&f.value?(d(),m("div",Gt,[e("div",Ot,[e("div",Ut,[t[35]||(t[35]=e("span",{class:"text-sm font-medium text-gray-700"},"Enlace de Pago Generado:",-1)),e("span",qt,[r(a(n),{icon:a(O),class:"mr-1"},null,8,["icon"]),t[34]||(t[34]=c(" Â¡Listo para usar! "))])]),e("div",Ht,[e("p",Qt,i(f.value.url),1)]),e("div",Xt,[e("span",null,"Referencia: "+i(f.value.reference),1),e("span",null,"Monto: $"+i(f.value.amount.toFixed(2)),1)])]),e("div",Zt,[e("button",{onClick:ge,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 text-sm font-medium"},[r(a(n),{icon:a(ze)},null,8,["icon"]),t[36]||(t[36]=c(" Copiar Enlace "))]),e("button",{onClick:xe,class:"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 text-sm font-medium"},[r(a(n),{icon:a(Ae)},null,8,["icon"]),t[37]||(t[37]=c(" Ver Enlace "))]),e("button",{onClick:Q,class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 text-sm font-medium"},[r(a(n),{icon:a(Pe)},null,8,["icon"]),t[38]||(t[38]=c(" Limpiar "))])]),e("div",Jt,[e("h5",Kt,[r(a(n),{icon:a(q),class:"mr-1"},null,8,["icon"]),t[39]||(t[39]=c(" Instrucciones de uso: "))]),t[40]||(t[40]=e("ul",{class:"text-xs text-blue-700 space-y-1"},[e("li",null,"â€¢ Copia el enlace y envÃ­alo al cliente por WhatsApp, email o SMS"),e("li",null,"â€¢ El cliente podrÃ¡ pagar su reserva de manera segura"),e("li",null,"â€¢ RecibirÃ¡s notificaciÃ³n automÃ¡tica cuando se complete el pago"),e("li",null,"â€¢ El enlace es seguro y estÃ¡ protegido por Wompi")],-1))])])):b("",!0)])])):b("",!0)])):b("",!0)]}),_:1},8,["visible"]),r(a(B),{visible:w.value,"onUpdate:visible":t[6]||(t[6]=o=>w.value=o),modal:"",header:"Rechazar Reserva",style:Y(s.dialogStyle),closable:!1,draggable:!1},{footer:z(()=>[e("div",rs,[e("button",{onClick:re,disabled:!k.value.trim()||s.procesando,class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[s.procesando?(d(),N(a(n),{key:0,icon:a($),class:"animate-spin h-5 text-white"},null,8,["icon"])):(d(),N(a(n),{key:1,icon:a(O),class:"h-5"},null,8,["icon"])),s.procesando?(d(),m("span",cs,"Eliminando...")):(d(),m("span",ds,"Eliminar Reserva Definitivamente"))],8,is),e("button",{type:"button",onClick:ce,disabled:s.procesando,class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},[r(a(n),{icon:a(U),class:"h-5"},null,8,["icon"]),t[49]||(t[49]=c("Cancelar "))],8,us)])]),default:z(()=>{var o,g,v;return[e("div",_t,[s.reserva?(d(),m("div",es,[e("div",ts,[r(a(n),{icon:a(ee),class:"text-red-600 text-base sm:text-lg mt-1 flex-shrink-0"},null,8,["icon"]),e("div",ss,[t[46]||(t[46]=e("h4",{class:"font-semibold text-red-800 text-sm sm:text-base mb-2"},"Rechazar Reserva",-1)),t[47]||(t[47]=e("div",{class:"text-xs sm:text-sm text-red-700 mb-3 space-y-1"},[e("p",null,[e("strong",null,"â€¢ AcciÃ³n permanente:"),c(" elimina la reserva y notifica al cliente")]),e("p",null,"â€¢ Los cupos se liberan automÃ¡ticamente")],-1)),e("div",as,[e("p",ls,[t[42]||(t[42]=e("strong",null,"Cliente:",-1)),c(" "+i(((g=(o=s.reserva.cliente)==null?void 0:o.user)==null?void 0:g.name)||((v=s.reserva.cliente)==null?void 0:v.nombres)||"N/A"),1)]),e("p",os,[t[43]||(t[43]=e("strong",null,"Servicio:",-1)),c(" "+i(s.reserva.entidad_nombre),1)]),e("p",null,[t[44]||(t[44]=e("strong",null,"Fecha:",-1)),c(" "+i(H(s.reserva.fecha_reserva)),1)]),e("p",null,[t[45]||(t[45]=e("strong",null,"Total:",-1)),c(" $"+i(Number(s.reserva.total||0).toFixed(2)),1)])])])])])):b("",!0),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-2"},[c(" Motivo del rechazo "),e("span",{class:"text-red-500"},"*")],-1)),r(a(ye),{modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=R=>k.value=R),placeholder:"Especifica el motivo por el cual se rechaza esta reserva...",rows:"4",class:"w-full text-xs sm:text-sm",maxlength:"500",pt:{root:"w-full",textarea:"text-xs sm:text-sm p-2 sm:p-3"}},null,8,["modelValue"]),e("small",ns,i(k.value.length)+"/500 caracteres ",1)])])]}),_:1},8,["visible","style"])],64))}},ys=Ve(ms,[["__scopeId","data-v-b259a740"]]);export{ys as default};
