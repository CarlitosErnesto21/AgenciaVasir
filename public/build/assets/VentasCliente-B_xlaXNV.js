import{A as S}from"./AuthenticatedLayout-C17532f3.js";import{r as w,E as b,o as T,h as M,d as j,x as d,p as l,e,$ as t,a0 as E,t as n,a1 as R,q as O,y as B}from"./vendor-CLNWHdEK.js";import{A as I,F as U,a as q,D as r,e as z,f as c,h as W}from"./ui-DPmvhuIJ.js";import{W as H,a5 as K,a as G,aa as J,v as Q,a9 as X,t as Y,l as Z}from"./index-D3qnJ-6K.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"container mx-auto px-4 py-6"},te={class:"mb-6 bg-white rounded-lg shadow-md p-6"},se={class:"flex items-center justify-between"},ae={class:"flex items-center gap-4"},le={class:"flex items-center gap-2"},oe={class:"text-lg font-semibold text-gray-800"},ne={class:"flex items-center gap-2"},de={class:"text-sm text-gray-600"},ie={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},re={class:"bg-white rounded-lg shadow-md p-6"},ce={class:"flex items-center"},ue={class:"p-3 rounded-full bg-blue-100"},me={class:"ml-4"},pe={class:"text-2xl font-bold text-gray-900"},ge={class:"bg-white rounded-lg shadow-md p-6"},xe={class:"flex items-center"},fe={class:"p-3 rounded-full bg-green-100"},he={class:"ml-4"},be={class:"text-2xl font-bold text-gray-900"},_e={class:"bg-white rounded-lg shadow-md p-6"},ve={class:"flex items-center"},we={class:"p-3 rounded-full bg-yellow-100"},ye={class:"ml-4"},Ce={class:"text-2xl font-bold text-gray-900"},Pe={class:"bg-white rounded-lg shadow-md p-6"},Ve={class:"flex items-center"},Le={class:"p-3 rounded-full bg-green-100"},ke={class:"ml-4"},Ae={class:"text-2xl font-bold text-gray-900"},De={class:"bg-white rounded-lg shadow-md"},Fe={class:"p-6"},Ne={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},$e={class:"flex flex-col sm:flex-row items-center justify-between mb-3"},Se={class:"flex items-center gap-3"},Te={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},Me={class:"space-y-3"},je={class:"font-medium text-blue-600"},Ee={class:"text-sm"},Re={class:"text-sm font-semibold text-green-600"},Oe={class:"text-sm"},Be={class:"text-sm"},Ie={class:"flex gap-2 justify-center"},Ue=["onClick"],Ge={__name:"VentasCliente",props:{cliente:{type:Object,required:!0},ventas:{type:Array,default:()=>[]}},setup(m){const p=m,y=I(),_=w(10),V=w([5,10,20,50]),h=w({global:{value:null,matchMode:U.CONTAINS}}),v=b(()=>{let a=p.ventas;if(h.value.global.value){const s=h.value.global.value.toLowerCase();a=a.filter(i=>{var g,x,f;return i.id.toString().includes(s)||i.estado.toLowerCase().includes(s)||((g=i.metodo_pago)==null?void 0:g.nombre)&&i.metodo_pago.nombre.toLowerCase().includes(s)||((f=(x=i.empleado)==null?void 0:x.user)==null?void 0:f.name)&&i.empleado.user.name.toLowerCase().includes(s)})}return a}),L=b(()=>p.ventas.reduce((a,s)=>a+parseFloat(s.total),0)),k=b(()=>p.ventas.filter(a=>a.estado==="pendiente").length),A=b(()=>p.ventas.filter(a=>a.estado==="completada").length),D=a=>new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}),F=a=>{switch(a){case"completada":return"bg-green-100 text-green-800";case"pendiente":return"bg-yellow-100 text-yellow-800";case"cancelada":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=a=>{switch(a){case"completada":return"Completada";case"pendiente":return"Pendiente";case"cancelada":return"Cancelada";default:return a}},$=a=>{y.add({severity:"info",summary:"Ver Detalles",detail:`Funcionalidad de detalles de venta #${a.id} pendiente de implementar.`,life:4e3})};return T(()=>{y.add({severity:"success",summary:"Ventas cargadas",detail:`Se encontraron ${p.ventas.length} ventas para este cliente.`,life:3e3})}),(a,s)=>(j(),M(S,null,{default:d(()=>{var i,g,x,f,C;return[l(t(E),{title:`Ventas de ${((g=(i=m.cliente)==null?void 0:i.user)==null?void 0:g.name)||"Cliente"}`},null,8,["title"]),l(t(q),{class:"z-[9999]"}),e("div",ee,[e("div",te,[e("div",se,[e("div",null,[s[2]||(s[2]=e("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Ventas del Cliente",-1)),e("div",ae,[e("div",le,[l(t(r),{icon:t(H),class:"text-blue-500"},null,8,["icon"]),e("span",oe,n(((f=(x=m.cliente)==null?void 0:x.user)==null?void 0:f.name)||"Cliente no encontrado"),1)]),e("div",ne,[l(t(r),{icon:t(K),class:"text-gray-500"},null,8,["icon"]),e("span",de,n(((C=m.cliente)==null?void 0:C.numero_identificacion)||"N/A"),1)])])]),l(t(R),{href:a.route("clientes"),class:"bg-blue-500 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2"},{default:d(()=>[l(t(r),{icon:t(G),class:"h-4 w-4"},null,8,["icon"]),s[3]||(s[3]=O(" Volver a Clientes "))]),_:1,__:[3]},8,["href"])])]),e("div",ie,[e("div",re,[e("div",ce,[e("div",ue,[l(t(r),{icon:t(J),class:"h-6 w-6 text-blue-600"},null,8,["icon"])]),e("div",me,[s[4]||(s[4]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Ventas",-1)),e("p",pe,n(m.ventas.length),1)])])]),e("div",ge,[e("div",xe,[e("div",fe,[l(t(r),{icon:t(Q),class:"h-6 w-6 text-green-600"},null,8,["icon"])]),e("div",he,[s[5]||(s[5]=e("p",{class:"text-sm font-medium text-gray-500"},"Monto Total",-1)),e("p",be,"$"+n(L.value.toFixed(2)),1)])])]),e("div",_e,[e("div",ve,[e("div",we,[l(t(r),{icon:t(X),class:"h-6 w-6 text-yellow-600"},null,8,["icon"])]),e("div",ye,[s[6]||(s[6]=e("p",{class:"text-sm font-medium text-gray-500"},"Pendientes",-1)),e("p",Ce,n(k.value),1)])])]),e("div",Pe,[e("div",Ve,[e("div",Le,[l(t(r),{icon:t(Y),class:"h-6 w-6 text-green-600"},null,8,["icon"])]),e("div",ke,[s[7]||(s[7]=e("p",{class:"text-sm font-medium text-gray-500"},"Completadas",-1)),e("p",Ae,n(A.value),1)])])])]),e("div",De,[e("div",Fe,[s[9]||(s[9]=e("h3",{class:"text-2xl text-blue-600 font-bold mb-4"},"Historial de Ventas",-1)),l(t(z),{value:v.value,dataKey:"id",paginator:!0,rows:_.value,rowsPerPageOptions:V.value,rowsPerPage:_.value,"onUpdate:rowsPerPage":s[1]||(s[1]=o=>_.value=o),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} ventas",class:"overflow-x-auto max-w-full",responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-16 text-sm hover:bg-blue-50 transition-colors duration-200"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:d(()=>[e("div",Ne,[e("div",$e,[e("div",Se,[s[8]||(s[8]=e("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[e("i",{class:"pi pi-filter text-blue-600 text-sm"}),e("span",null,"Filtros")],-1)),e("div",Te,n(v.value.length)+" resultado"+n(v.value.length!==1?"s":""),1)])]),e("div",Me,[e("div",null,[l(t(W),{modelValue:h.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=o=>h.value.global.value=o),placeholder:"ðŸ” Buscar ventas...",class:"w-full h-9 text-sm rounded-md",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])])])])]),default:d(()=>[l(t(c),{field:"id",header:"ID",sortable:"",class:"w-16"},{body:d(o=>[e("span",je,"#"+n(o.data.id),1)]),_:1}),l(t(c),{field:"fecha",header:"Fecha",sortable:"",class:"w-28"},{body:d(o=>[e("span",Ee,n(D(o.data.fecha)),1)]),_:1}),l(t(c),{field:"total",header:"Total",sortable:"",class:"w-24"},{body:d(o=>[e("span",Re," $"+n(Number(o.data.total).toFixed(2)),1)]),_:1}),l(t(c),{field:"estado",header:"Estado",class:"w-28"},{body:d(o=>[e("span",{class:B([F(o.data.estado),"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"])},n(N(o.data.estado)),3)]),_:1}),l(t(c),{field:"metodo_pago.nombre",header:"MÃ©todo de Pago",class:"w-32 hidden md:table-cell"},{body:d(o=>{var u;return[e("span",Oe,n(((u=o.data.metodo_pago)==null?void 0:u.nombre)||"N/A"),1)]}),_:1}),l(t(c),{field:"empleado.user.name",header:"Vendedor",class:"w-32 hidden lg:table-cell"},{body:d(o=>{var u,P;return[e("span",Be,n(((P=(u=o.data.empleado)==null?void 0:u.user)==null?void 0:P.name)||"N/A"),1)]}),_:1}),l(t(c),{header:"Acciones",class:"w-24"},{body:d(o=>[e("div",Ie,[e("button",{class:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-md text-xs transition-all duration-200",onClick:u=>$(o.data),title:"Ver detalles"},[l(t(r),{icon:t(Z),class:"h-3 w-3"},null,8,["icon"])],8,Ue)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"])])])])]}),_:1}))}};export{Ge as default};
